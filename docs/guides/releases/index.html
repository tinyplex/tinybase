<!DOCTYPE html><html lang="en"><head><link rel="dns-prefetch" href="https://www.googletagmanager.com/"><link href="https://www.googletagmanager.com/gtag/js?id=G-D1MGR8VRWJ" rel="preload" as="script"><link rel="preload" as="font" href="/fonts/inter.woff2" type="font/woff2" crossorigin="anonymous"><link rel="preload" as="font" href="/fonts/inconsolata.woff2" type="font/woff2" crossorigin="anonymous"><link rel="preload" as="font" href="/fonts/icons.woff2" type="font/woff2" crossorigin="anonymous"><link rel="preload" as="font" href="/fonts/shantell.woff2" type="font/woff2" crossorigin="anonymous"><title>Releases | TinyBase</title><meta name="description" content="This is a reverse chronological list of the major TinyBase releases, with highlighted features."><meta property="og:type" content="website"><meta property="og:title" content="Releases | TinyBase"><meta property="og:description" content="This is a reverse chronological list of the major TinyBase releases, with highlighted features."><meta property="og:url" content="https://beta.tinybase.org/guides/releases/"><meta property="og:image" content="https://beta.tinybase.org/favicon_pad.png"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Releases | TinyBase"><meta name="twitter:description" content="This is a reverse chronological list of the major TinyBase releases, with highlighted features."><meta name="twitter:site" content="@tinybasejs"><meta name="twitter:image" content="https://beta.tinybase.org/favicon_pad.png"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="stylesheet" href="/css/index.css"><link rel="canonical" href="https://beta.tinybase.org/guides/releases/"><script src="/js/app.js"></script></head><body><header><a href="/"><img src="/favicon.svg" alt="TinyBase logo"><span>TinyBase <em title="5.0.0-beta.27">Î²</em></span></a><nav><ul><li><a href="/guides/">Guides</a></li><li><a href="/demos/">Demos</a></li><li><a href="/api/">API</a></li><li><a href="https://github.com/tinyplex/tinybase">GitHub</a></li></ul></nav><span id="dark"></span></header><main><nav><ul><li id="root" class="parent open"><span></span><a href="/">TinyBase</a><ul><li id="G" class="parent open"><span></span><a href="/guides/">Guides</a><ul><li id="TB" class="parent"><span></span><a href="/guides/the-basics/">The Basics</a></li><li id="BUI" class="parent"><span></span><a href="/guides/building-uis/">Building UIs</a></li><li id="S" class="parent"><span></span><a href="/guides/schemas/">Schemas</a></li><li id="P" class="parent"><span></span><a href="/guides/persistence/">Persistence</a></li><li id="S2"><span></span><a href="/guides/synchronization/">Synchronization</a></li><li id="UM" class="parent"><span></span><a href="/guides/using-metrics/">Using Metrics</a></li><li id="UI" class="parent"><span></span><a href="/guides/using-indexes/">Using Indexes</a></li><li id="UR" class="parent"><span></span><a href="/guides/using-relationships/">Using Relationships</a></li><li id="UC2" class="parent"><span></span><a href="/guides/using-checkpoints/">Using Checkpoints</a></li><li id="UQ" class="parent"><span></span><a href="/guides/using-queries/">Using Queries</a></li><li id="DT" class="parent"><span></span><a href="/guides/developer-tools/">Developer Tools</a></li><li id="HTBIB" class="parent"><span></span><a href="/guides/how-tinybase-is-built/">How TinyBase Is Built</a></li><li id="FAQ"><span></span><a href="/guides/faq/">FAQ</a></li><li id="R" class="current"><span></span><a href="/guides/releases/">Releases</a></li></ul></li><li id="D2" class="parent"><span></span><a href="/demos/">Demos</a></li><li id="api" class="parent"><span></span><a href="/api/">API</a></li></ul></li></ul></nav><article><nav><ul><li><a href="/">TinyBase</a></li><li><a href="/guides/">Guides</a></li><li><a href="/guides/releases/">Releases</a></li></ul></nav><section class="s1" id="/guides/releases/" data-id="R"><h1>Releases</h1><p>This is a reverse chronological list of the major <a href="/">TinyBase</a> releases, with highlighted features.</p><h3 id="v5-0">v5.0</h3><p>This is a major release for <a href="/">TinyBase</a> and adds important new CRDT &amp; synchronization functionality. It also includes some breaking changes that may affect you (but which should easy to fix if they do!)</p><p>The main new functionality is in the new <a href="/api/mergeable-store/"><code>mergeable-store</code></a> module, which contains a subtype of <a href="/api/store/interfaces/store/store/"><code>Store</code></a> - called <a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/"><code>MergeableStore</code></a> - that can be merged with another with deterministic results. The implementation uses an encoded hybrid logical clock (HLC) to timestamp the changes made so that they can be cleanly merged. A synchronization protocol also lets you negotiate changes between systems.</p><h4 id="local-merging">Local Merging</h4><p>The <a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/getter/getmergeablecontent/"><code>getMergeableContent</code></a> method on a <a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/"><code>MergeableStore</code></a> is used to get the state of a store that can be merged into another. The <a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/setter/applymergeablechanges/"><code>applyMergeableChanges</code></a> method will let you apply that to (another) store. The <a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/setter/merge/"><code>merge</code></a> method is a convenience function to bidirectionally merge two stores together:</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>createMergeableStore<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase'</span><span class="punctuation">;</span>

<span class="keyword">const</span> localStore1 <span class="operator">=</span> <span class="function"><a href="/api/mergeable-store/functions/creation/createmergeablestore/">createMergeableStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> localStore2 <span class="operator">=</span> <span class="function"><a href="/api/mergeable-store/functions/creation/createmergeablestore/">createMergeableStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>

localStore1<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setcell/">setCell</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">,</span> <span class="string">'color'</span><span class="punctuation">,</span> <span class="string">'brown'</span><span class="punctuation">)</span><span class="punctuation">;</span>
localStore2<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setcell/">setCell</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'felix'</span><span class="punctuation">,</span> <span class="string">'color'</span><span class="punctuation">,</span> <span class="string">'black'</span><span class="punctuation">)</span><span class="punctuation">;</span>

localStore1<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/setter/merge/">merge</a></span><span class="punctuation">(</span>localStore2<span class="punctuation">)</span><span class="punctuation">;</span>

console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>localStore1<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/getter/getcontent/">getContent</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> [{pets: {felix: {color: 'black'}, fido: {color: 'brown'}}}, {}]</span>

console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>localStore2<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/getter/getcontent/">getContent</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> [{pets: {felix: {color: 'black'}, fido: {color: 'brown'}}}, {}]</span>
</code></pre><p>This is a simple enough local example to get the idea, but things get more exciting when you synchronize stores between systems...</p><h4 id="persisting-and-syncing-between-systems">Persisting And Syncing Between Systems</h4><p>Firstly, a <a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/"><code>MergeableStore</code></a> can be persisted locally, just like a regular <a href="/api/store/interfaces/store/store/"><code>Store</code></a>. This is supported by certain <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> types: file, local and session storage, and simple SQLite persisters such as Expo and SQLite3. These allows you to persist the state of a <a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/"><code>MergeableStore</code></a> locally before it has had the chance to be synchronized online, for example.</p><p>But more importantly, the v5.0 release also introduces the new concept of synchronization. <a href="/api/synchronizers/interfaces/synchronizer/synchronizer/"><code>Synchronizer</code></a> objects implement a negotiation protocol that allows multiple <a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/"><code>MergeableStore</code></a> objects to be merged across a network for example:</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>WebSocketServer<span class="punctuation">,</span> WebSocket<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'ws'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">{</span>createWsServer<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/synchronizers/synchronizer-ws-server'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">{</span>createWsSynchronizer<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/synchronizers/synchronizer-ws-client'</span><span class="punctuation">;</span>

<span class="comment">// On a server machine</span>
<span class="keyword">const</span> server <span class="operator">=</span> <span class="function"><a href="/api/synchronizer-ws-server/functions/creation/createwsserver/">createWsServer</a></span><span class="punctuation">(</span><span class="keyword">new</span> <span class="class-name">WebSocketServer</span><span class="punctuation">(</span><span class="punctuation">{</span><span class="literal-property">port</span><span class="operator">:</span> <span class="number">8043</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="comment">// On the first client machine:</span>
<span class="keyword">const</span> store1 <span class="operator">=</span> <span class="function"><a href="/api/mergeable-store/functions/creation/createmergeablestore/">createMergeableStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> synchronizer1 <span class="operator">=</span> <span class="keyword">await</span> <span class="function"><a href="/api/synchronizer-ws-client/functions/creation/createwssynchronizer/">createWsSynchronizer</a></span><span class="punctuation">(</span>
  store1<span class="punctuation">,</span>
  <span class="keyword">new</span> <span class="class-name">WebSocket</span><span class="punctuation">(</span><span class="string">'ws://localhost:8043'</span><span class="punctuation">)</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">await</span> synchronizer1<span class="punctuation">.</span><span class="function"><a href="/api/synchronizers/interfaces/synchronizer/synchronizer/methods/synchronization/startsync/">startSync</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
store1<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setcell/">setCell</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">,</span> <span class="string">'legs'</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="comment">// On the second client machine:</span>
<span class="keyword">const</span> store2 <span class="operator">=</span> <span class="function"><a href="/api/mergeable-store/functions/creation/createmergeablestore/">createMergeableStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> synchronizer2 <span class="operator">=</span> <span class="keyword">await</span> <span class="function"><a href="/api/synchronizer-ws-client/functions/creation/createwssynchronizer/">createWsSynchronizer</a></span><span class="punctuation">(</span>
  store2<span class="punctuation">,</span>
  <span class="keyword">new</span> <span class="class-name">WebSocket</span><span class="punctuation">(</span><span class="string">'ws://localhost:8043'</span><span class="punctuation">)</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">await</span> synchronizer2<span class="punctuation">.</span><span class="function"><a href="/api/synchronizers/interfaces/synchronizer/synchronizer/methods/synchronization/startsync/">startSync</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
store2<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setcell/">setCell</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'felix'</span><span class="punctuation">,</span> <span class="string">'price'</span><span class="punctuation">,</span> <span class="number">5</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="comment">// ...</span>

console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store1<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/getter/gettables/">getTables</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {pets: {felix: {price: 5}, fido: {legs: 4}}}</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store2<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/getter/gettables/">getTables</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {pets: {felix: {price: 5}, fido: {legs: 4}}}</span>

<span class="comment">// \(â.â)/</span>

synchronizer1<span class="punctuation">.</span><span class="function"><a href="/api/metrics/interfaces/metrics/metrics/methods/lifecycle/destroy/">destroy</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
synchronizer2<span class="punctuation">.</span><span class="function"><a href="/api/metrics/interfaces/metrics/metrics/methods/lifecycle/destroy/">destroy</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
server<span class="punctuation">.</span><span class="function"><a href="/api/metrics/interfaces/metrics/metrics/methods/lifecycle/destroy/">destroy</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>This release includes two types of <a href="/api/synchronizers/interfaces/synchronizer/synchronizer/"><code>Synchronizer</code></a>: the <a href="/api/synchronizer-local/interfaces/synchronizer/localsynchronizer/"><code>LocalSynchronizer</code></a> (for demonstrating synchronization on a single local system), and more importantly the <a href="/api/synchronizer-ws-client/interfaces/synchronizer/wssynchronizer/"><code>WsSynchronizer</code></a> (that uses WebSockets to communicate between different systems, shown above).</p><p>Notice that the <a href="/api/synchronizer-ws-client/interfaces/synchronizer/wssynchronizer/"><code>WsSynchronizer</code></a> assumes that there exists a server that can forward requests to other <a href="/api/synchronizer-ws-client/interfaces/synchronizer/wssynchronizer/"><code>WsSynchronizer</code></a> systems. This can be created using the <a href="/api/synchronizer-ws-server/functions/creation/createwsserver/"><code>createWsServer</code></a> function that takes a WebSocketServer as also shown above.</p><h4 id="breaking-changes-in-v5-0">Breaking <a href="/api/store/type-aliases/transaction/changes/"><code>Changes</code></a> in v5.0</h4><h5 id="module-file-structure">Module File Structure</h5><p>Previously, the distributed package contained a <code>lib</code> folder with both code and type definitions. In v5.0, they have been hoisted to the top level of the package so that less-capable bundlers can find the correct files.</p><p>If you previously had <code>/lib/</code> in your import paths, you should remove it. You also do not have to explicitly specify whether you need the <code>cjs</code> version of <a href="/">TinyBase</a> - if you are using a <code>require</code> rather than an <code>import</code>, you will get it automatically.</p><p>The non-minified version of the code is now default and you need to be explicit with you <em>want</em> minified code. Previously you would add <code>/debug</code> to the import path to get non-minified code, but now you add <code>/min</code> to the import path to get <em>minified</em> code.</p><p>Please read the comprehensive <a href="/guides/the-basics/importing-tinybase/">Importing TinyBase</a> guide for more details of how to construct the correct import paths in v5.0.</p><h5 id="expo-sqlite-persister">Expo SQLite <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a></h5><p>Previously the <a href="/api/persister-expo-sqlite/"><code>persister-expo-sqlite</code></a> module supported expo-sqlite v13 and the persister-expo-sqlite-next module supported their modern &#x27;next&#x27; package. In v5.0, the <a href="/api/persister-expo-sqlite/"><code>persister-expo-sqlite</code></a> module only supports v14 and later, and the persister-expo-sqlite-next module has been removed.</p><h5 id="the-tinybase-inspector">The <a href="/">TinyBase</a> Inspector</h5><p>Previously, the React-based inspector (then known as <code>StoreInspector</code>) resided in the debug version of the <a href="/api/ui-react-dom/"><code>ui-react-dom</code></a> module. It now lives in its own <a href="/api/ui-react-inspector/"><code>ui-react-inspector</code></a> module (so that it can be used against non-debug code) and has been renamed to Inspector.</p><p>Please update your imports and rename the component when used, accordingly. See the API documentation for details, or the <a href="/demos/ui-components/inspector/">&lt;Inspector /&gt;</a> demo, for example.</p><h5 id="api-changes">API <a href="/api/store/type-aliases/transaction/changes/"><code>Changes</code></a></h5><p>The following changes have been made to the existing <a href="/">TinyBase</a> API for consistency. These are less common parts of the API but should straightforward to correct if you are using them.</p><p>In the type definitions:</p><ul><li>The GetTransactionChanges and GetTransactionLog types have been removed.</li><li>The TransactionChanges type has been renamed as the <a href="/api/store/type-aliases/transaction/changes/"><code>Changes</code></a> type.</li><li>The <a href="/api/store/type-aliases/transaction/changes/"><code>Changes</code></a> type now uses <code>undefined</code> instead of <code>null</code> to indicate a <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> or <a href="/api/store/type-aliases/store/value/"><code>Value</code></a> that has been deleted or that was not present.</li><li>The <a href="/api/store/type-aliases/transaction/transactionlog/"><code>TransactionLog</code></a> type is now an array instead of a JavaScript object.</li></ul><p>In the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> interface:</p><ul><li>There is a new <a href="/api/store/interfaces/store/store/methods/transaction/gettransactionchanges/"><code>getTransactionChanges</code></a> method and a new getTransactionLog method.</li><li>The setTransactionChanges method is renamed as the <a href="/api/store/interfaces/store/store/methods/setter/applychanges/"><code>applyChanges</code></a> method.</li><li>A <a href="/api/store/type-aliases/callback/dorollback/"><code>DoRollback</code></a> function no longer gets passed arguments. You can use the <a href="/api/store/interfaces/store/store/methods/transaction/gettransactionchanges/"><code>getTransactionChanges</code></a> method and <a href="/api/store/interfaces/store/store/methods/transaction/gettransactionlog/"><code>getTransactionLog</code></a> method directly instead.</li><li>Similarly, a <a href="/api/store/type-aliases/listener/transactionlistener/"><code>TransactionListener</code></a> function no longer gets passed arguments.</li></ul><p>In the <a href="/api/persisters/"><code>persisters</code></a> module:</p><ul><li>The <a href="/api/persisters/functions/creation/createcustompersister/"><code>createCustomPersister</code></a> function now takes a final optional boolean (<code>supportsMergeableStore</code>) to indicate that the <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> can support <a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/"><code>MergeableStore</code></a> as well as <a href="/api/store/interfaces/store/store/"><code>Store</code></a> objects.</li><li>A <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a>&#x27;s <a href="/api/persisters/interfaces/persister/persister/methods/load/load/"><code>load</code></a> method and <a href="/api/persisters/interfaces/persister/persister/methods/load/startautoload/"><code>startAutoLoad</code></a> method now take a <a href="/api/store/type-aliases/store/content/"><code>Content</code></a> object as one parameter, rather than <a href="/api/store/type-aliases/store/tables/"><code>Tables</code></a> and <a href="/api/store/type-aliases/store/values/"><code>Values</code></a> as two.</li><li>If you create a custom <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a>, the setPersisted method now receives changes made to a <a href="/api/store/interfaces/store/store/"><code>Store</code></a> directly by reference, rather than via a callback. Similarly, the <a href="/api/persisters/type-aliases/creation/persisterlistener/"><code>PersisterListener</code></a> you register in your addPersisterListener implementation now takes <a href="/api/store/type-aliases/store/content/"><code>Content</code></a> and <a href="/api/store/type-aliases/transaction/changes/"><code>Changes</code></a> objects directly rather than via a callback.</li><li>The broadcastTransactionChanges method in the <a href="/api/persister-partykit-server/"><code>persister-partykit-server</code></a> module has been renamed to the broadcastChanges method.</li></ul><h3 id="v4-8">v4.8</h3><p>This release includes the new <a href="/api/persister-powersync/"><code>persister-powersync</code></a> module, which provides a <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> for <a href="https://www.powersync.com/">PowerSync&#x27;s SQLite</a> database.</p><p>Much like the other SQLite persisters, use it by passing in a PowerSync instance to the <a href="/api/persister-powersync/functions/creation/createpowersyncpersister/"><code>createPowerSyncPersister</code></a> function; something like:</p><pre><code><span class="keyword">const</span> powerSync <span class="operator">=</span> <span class="function">usePowerSync</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> persister <span class="operator">=</span> <span class="function"><a href="/api/persister-powersync/functions/creation/createpowersyncpersister/">createPowerSyncPersister</a></span><span class="punctuation">(</span>store<span class="punctuation">,</span> powerSync<span class="punctuation">,</span> <span class="punctuation">{</span>
  <span class="literal-property">mode</span><span class="operator">:</span> <span class="string">'tabular'</span><span class="punctuation">,</span>
  <span class="literal-property">tables</span><span class="operator">:</span> <span class="punctuation">{</span>
    <span class="literal-property">load</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">items</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">tableId</span><span class="operator">:</span> <span class="string">'items'</span><span class="punctuation">,</span> <span class="literal-property">rowIdColumnName</span><span class="operator">:</span> <span class="string">'value'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">,</span>
    <span class="literal-property">save</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">items</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">tableName</span><span class="operator">:</span> <span class="string">'items'</span><span class="punctuation">,</span> <span class="literal-property">rowIdColumnName</span><span class="operator">:</span> <span class="string">'value'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>A huge thank you to <a href="https://bndkt.com/">Benedikt Mueller</a> (<a href="https://github.com/bndkt">@bndkt</a>) for building out this functionality! And please provide feedback on how this new <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> works for you.</p><h3 id="v4-7">v4.7</h3><p>This release includes the new <a href="/api/persister-libsql/"><code>persister-libsql</code></a> module, which provides a <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> for <a href="https://turso.tech/libsql">Turso&#x27;s LibSQL</a> database.</p><p>Use the <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> by passing in a reference to the LibSQL client to the createLibSQLPersister function; something like:</p><pre><code><span class="keyword">const</span> client <span class="operator">=</span> <span class="function">createClient</span><span class="punctuation">(</span><span class="punctuation">{</span><span class="literal-property">url</span><span class="operator">:</span> <span class="string">'file:my.db'</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> persister <span class="operator">=</span> <span class="function"><a href="/api/persister-libsql/functions/creation/createlibsqlpersister/">createLibSqlPersister</a></span><span class="punctuation">(</span>store<span class="punctuation">,</span> client<span class="punctuation">,</span> <span class="punctuation">{</span>
  <span class="literal-property">mode</span><span class="operator">:</span> <span class="string">'tabular'</span><span class="punctuation">,</span>
  <span class="literal-property">tables</span><span class="operator">:</span> <span class="punctuation">{</span>
    <span class="literal-property">load</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">items</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">tableId</span><span class="operator">:</span> <span class="string">'items'</span><span class="punctuation">,</span> <span class="literal-property">rowIdColumnName</span><span class="operator">:</span> <span class="string">'value'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">,</span>
    <span class="literal-property">save</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">items</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">tableName</span><span class="operator">:</span> <span class="string">'items'</span><span class="punctuation">,</span> <span class="literal-property">rowIdColumnName</span><span class="operator">:</span> <span class="string">'value'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>This is the first version of this functionality, so please provide feedback on how it works for you!</p><h3 id="v4-6">v4.6</h3><p>This release includes the new <a href="/api/persister-electric-sql/"><code>persister-electric-sql</code></a> module, which provides a <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> for <a href="https://electric-sql.com/">ElectricSQL</a> client databases.</p><p>Use the <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> by passing in a reference to the Electric client to the <a href="/api/persister-electric-sql/functions/creation/createelectricsqlpersister/"><code>createElectricSqlPersister</code></a> function; something like:</p><pre><code><span class="keyword">const</span> electric <span class="operator">=</span> <span class="keyword">await</span> <span class="function">electrify</span><span class="punctuation">(</span>connection<span class="punctuation">,</span> schema<span class="punctuation">,</span> config<span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> persister <span class="operator">=</span> <span class="function"><a href="/api/persister-electric-sql/functions/creation/createelectricsqlpersister/">createElectricSqlPersister</a></span><span class="punctuation">(</span>store<span class="punctuation">,</span> electric<span class="punctuation">,</span> <span class="punctuation">{</span>
  <span class="literal-property">mode</span><span class="operator">:</span> <span class="string">'tabular'</span><span class="punctuation">,</span>
  <span class="literal-property">tables</span><span class="operator">:</span> <span class="punctuation">{</span>
    <span class="literal-property">load</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">items</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">tableId</span><span class="operator">:</span> <span class="string">'items'</span><span class="punctuation">,</span> <span class="literal-property">rowIdColumnName</span><span class="operator">:</span> <span class="string">'value'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">,</span>
    <span class="literal-property">save</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">items</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">tableName</span><span class="operator">:</span> <span class="string">'items'</span><span class="punctuation">,</span> <span class="literal-property">rowIdColumnName</span><span class="operator">:</span> <span class="string">'value'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>This release is accompanied by a <a href="https://github.com/tinyplex/tinybase-ts-react-electricsql">template project</a> to get started quickly with this integration. Enjoy!</p><h3 id="v4-5">v4.5</h3><p>This release includes the new persister-expo-sqlite-next module, which provides a <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> for the modern version of Expo&#x27;s <a href="https://docs.expo.dev/versions/latest/sdk/sqlite">SQLite</a> library, designated &#x27;next&#x27; as of November 2023. This API should be used if you are installing the <code>expo-sqlite/next</code> module.</p><p>Note that <a href="/">TinyBase</a> support for the legacy version of Expo-SQLite (<code>expo-sqlite</code>) is still available in the <a href="/api/persister-expo-sqlite/"><code>persister-expo-sqlite</code></a> module.</p><p>NB as of <a href="/">TinyBase</a> v5.0, this is now the default and legacy support has been removed.</p><p>Thank you to Expo for providing this functionality!</p><h3 id="v4-4">v4.4</h3><p>This relatively straightforward release adds a selection of new listeners to the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> object, and their respective hooks. These are for listening to changes in the &#x27;existence&#x27; of entities rather than to their value. For example, the <a href="/api/store/interfaces/store/store/methods/listener/addhastablelistener/"><code>addHasTableListener</code></a> method will let you listen for the presence (or not) of a specific table.</p><p>The full set of new existence-listening methods and hooks to work with this is as follows:</p><div class="table"><table><thead><tr><th>Existence of:</th><th>Add Listener</th><th>Hook</th><th>Add Listener Hook</th></tr></thead><tbody><tr><td><a href="/api/store/type-aliases/store/tables/"><code>Tables</code></a></td><td><a href="/api/store/interfaces/store/store/methods/listener/addhastableslistener/"><code>addHasTablesListener</code></a></td><td><a href="/api/ui-react/functions/store-hooks/usehastables/"><code>useHasTables</code></a></td><td><a href="/api/ui-react/functions/store-hooks/usehastableslistener/"><code>useHasTablesListener</code></a></td></tr><tr><td>A <a href="/api/store/type-aliases/store/table/"><code>Table</code></a></td><td><a href="/api/store/interfaces/store/store/methods/listener/addhastablelistener/"><code>addHasTableListener</code></a></td><td><a href="/api/ui-react/functions/store-hooks/usehastable/"><code>useHasTable</code></a></td><td><a href="/api/ui-react/functions/store-hooks/usehastablelistener/"><code>useHasTableListener</code></a></td></tr><tr><td>A <a href="/api/store/type-aliases/store/table/"><code>Table</code></a> <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a></td><td><a href="/api/store/interfaces/store/store/methods/listener/addhastablecelllistener/"><code>addHasTableCellListener</code></a></td><td><a href="/api/ui-react/functions/store-hooks/usehastablecell/"><code>useHasTableCell</code></a></td><td><a href="/api/ui-react/functions/store-hooks/usehastablecelllistener/"><code>useHasTableCellListener</code></a></td></tr><tr><td>A <a href="/api/store/type-aliases/store/row/"><code>Row</code></a></td><td><a href="/api/store/interfaces/store/store/methods/listener/addhasrowlistener/"><code>addHasRowListener</code></a></td><td><a href="/api/ui-react/functions/store-hooks/usehasrow/"><code>useHasRow</code></a></td><td><a href="/api/ui-react/functions/store-hooks/usehasrowlistener/"><code>useHasRowListener</code></a></td></tr><tr><td>A <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a></td><td><a href="/api/store/interfaces/store/store/methods/listener/addhascelllistener/"><code>addHasCellListener</code></a></td><td><a href="/api/ui-react/functions/store-hooks/usehascell/"><code>useHasCell</code></a></td><td><a href="/api/ui-react/functions/store-hooks/usehascelllistener/"><code>useHasCellListener</code></a></td></tr><tr><td><a href="/api/store/type-aliases/store/values/"><code>Values</code></a></td><td><a href="/api/store/interfaces/store/store/methods/listener/addhasvalueslistener/"><code>addHasValuesListener</code></a></td><td><a href="/api/ui-react/functions/store-hooks/usehasvalues/"><code>useHasValues</code></a></td><td><a href="/api/ui-react/functions/store-hooks/usehasvalueslistener/"><code>useHasValuesListener</code></a></td></tr><tr><td>A <a href="/api/store/type-aliases/store/value/"><code>Value</code></a></td><td><a href="/api/store/interfaces/store/store/methods/listener/addhasvaluelistener/"><code>addHasValueListener</code></a></td><td><a href="/api/ui-react/functions/store-hooks/usehasvalue/"><code>useHasValue</code></a></td><td><a href="/api/ui-react/functions/store-hooks/usehasvaluelistener/"><code>useHasValueListener</code></a></td></tr></tbody></table></div><p>These methods may become particularly important in future versions of <a href="/">TinyBase</a> that support <code>null</code> as valid Cells and <a href="/api/store/type-aliases/store/values/"><code>Values</code></a>.</p><h3 id="v4-3">v4.3</h3><p>We&#x27;re excited to announce <a href="/">TinyBase</a> 4.3, which provides an integration with <a href="https://www.partykit.io/">PartyKit</a>, a cloud-based collaboration provider.</p><p>This allows you to enjoy the benefits of both a &quot;local-first&quot; architecture and a &quot;sharing-first&quot; platform. You can have structured data on the client with fast, reactive user experiences, but also benefit from cloud-based persistence and room-based collaboration.</p><p><img src="/partykit.gif" alt="PartyKit" title="PartyKit"></p><p>This release includes two new modules:</p><ul><li>The <a href="/api/persister-partykit-server/"><code>persister-partykit-server</code></a> module provides a server class for coordinating clients and persisting <a href="/api/store/interfaces/store/store/"><code>Store</code></a> data to the PartyKit cloud.</li><li>The <a href="/api/persister-partykit-client/"><code>persister-partykit-client</code></a> module provides the API to create connections to the server and a binding to your <a href="/api/store/interfaces/store/store/"><code>Store</code></a>.</li></ul><p>A <a href="/">TinyBase</a> server implementation on PartyKit can be as simple as this:</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>TinyBasePartyKitServer<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/persisters/persister-partykit-server'</span><span class="punctuation">;</span>
<span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="class-name">extends</span> TinyBasePartyKitServer <span class="punctuation">{</span><span class="punctuation">}</span>
</code></pre><p>On the client, use the familiar <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> API, passing in a reference to a PartyKit socket object that&#x27;s been configured to connect to your server deployment and named room:</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>createPartyKitPersister<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/persisters/persister-partykit-client'</span><span class="punctuation">;</span>

<span class="keyword">const</span> persister <span class="operator">=</span> <span class="function"><a href="/api/persister-partykit-client/functions/creation/createpartykitpersister/">createPartyKitPersister</a></span><span class="punctuation">(</span>
  store<span class="punctuation">,</span>
  <span class="keyword">new</span> <span class="class-name">PartySocket</span><span class="punctuation">(</span><span class="punctuation">{</span>
    <span class="literal-property">host</span><span class="operator">:</span> <span class="string">'project-name.my-account.partykit.dev'</span><span class="punctuation">,</span>
    <span class="literal-property">room</span><span class="operator">:</span> <span class="string">'my-partykit-room'</span><span class="punctuation">,</span>
  <span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">await</span> persister<span class="punctuation">.</span><span class="function"><a href="/api/persisters/interfaces/persister/persister/methods/save/startautosave/">startAutoSave</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">await</span> persister<span class="punctuation">.</span><span class="function"><a href="/api/persisters/interfaces/persister/persister/methods/load/startautoload/">startAutoLoad</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>The <a href="/api/persisters/interfaces/persister/persister/methods/load/load/"><code>load</code></a> method and (gracefully failing) <a href="/api/persisters/interfaces/persister/persister/methods/save/save/"><code>save</code></a> method on this <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> use HTTPS to get or set full copies of the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> to the cloud. However, the auto-save and auto-load modes use a websocket to transmit subsequent incremental changes in either direction, making for performant sharing of state between clients.</p><p>See and try out this new collaboration functionality in the <a href="/demos/todo-app/todo-app-v6-collaboration/">Todo App v6 (collaboration)</a> demo. This also emphasizes the few changes that need to be made to an existing app to make it instantly collaborative.</p><p>Also try out the <a href="https://github.com/tinyplex/tinybase-ts-react-partykit">tinybase-ts-react-partykit</a> template that gets you up and running with a PartyKit-enabled <a href="/">TinyBase</a> app extremely quickly.</p><p>PartyKit supports retries for clients that go offline, and so the disconnected user experience is solid, out of the box. Learn more about configuring this behavior <a href="https://docs.partykit.io/reference/partysocket-api/#options">here</a>.</p><p>Note, however, that this release is not yet a full CRDT implementation: there is no clock synchronization and it is more &#x27;every write wins&#x27; than &#x27;last write wins&#x27;. However, since the transmitted updates are at single cell (or value) granularity, conflicts are minimized. More resilient replication is planned as this integration matures.</p><h3 id="v4-2">v4.2</h3><p>This release adds support for persisting <a href="/">TinyBase</a> to a browser&#x27;s IndexedDB storage. You&#x27;ll need to import the new <a href="/api/persister-indexed-db/"><code>persister-indexed-db</code></a> module, and call the <a href="/api/persister-indexed-db/functions/creation/createindexeddbpersister/"><code>createIndexedDbPersister</code></a> function to create the IndexedDB <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a>.</p><p>The API is the same as for all the other <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> APIs:</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>createIndexedDbPersister<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/persisters/persister-indexed-db'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">{</span>createStore<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase'</span><span class="punctuation">;</span>

<span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/store/functions/creation/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span>
  <span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settable/">setTable</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">fido</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'dog'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">)</span>
  <span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settable/">setTable</a></span><span class="punctuation">(</span><span class="string">'species'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">dog</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">price</span><span class="operator">:</span> <span class="number">5</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">)</span>
  <span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setvalues/">setValues</a></span><span class="punctuation">(</span><span class="punctuation">{</span><span class="literal-property">open</span><span class="operator">:</span> <span class="boolean">true</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> indexedDbPersister <span class="operator">=</span> <span class="function"><a href="/api/persister-indexed-db/functions/creation/createindexeddbpersister/">createIndexedDbPersister</a></span><span class="punctuation">(</span>store<span class="punctuation">,</span> <span class="string">'petStore'</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">await</span> indexedDbPersister<span class="punctuation">.</span><span class="function"><a href="/api/persisters/interfaces/persister/persister/methods/save/save/">save</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// IndexedDB -></span>
<span class="comment">//   database petStore:</span>
<span class="comment">//     objectStore t:</span>
<span class="comment">//       object 0:</span>
<span class="comment">//         k: "pets"</span>
<span class="comment">//         v: {fido: {species: dog}}</span>
<span class="comment">//       object 1:</span>
<span class="comment">//         k: "species"</span>
<span class="comment">//         v: {dog: {price: 5}}</span>
<span class="comment">//     objectStore v:</span>
<span class="comment">//       object 0:</span>
<span class="comment">//         k: "open"</span>
<span class="comment">//         v: true</span>

indexedDbPersister<span class="punctuation">.</span><span class="function"><a href="/api/metrics/interfaces/metrics/metrics/methods/lifecycle/destroy/">destroy</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>Note that it is not possible to reactively detect changes to a browser&#x27;s IndexedDB storage. A polling technique is used to load underlying changes if you choose to &#x27;autoLoad&#x27; your data into <a href="/">TinyBase</a>.</p><p>This release also upgrades Prettier to v3.0 which has a peer-dependency impact on the <a href="/api/tools/"><code>tools</code></a> module. Please report any issues!</p><h3 id="v4-1">v4.1</h3><p>This release introduces the new <a href="/api/ui-react-dom/"><code>ui-react-dom</code></a> module. This provides pre-built components for tabular display of your data in a web application.</p><p><img src="/ui-react-dom.webp" alt="A TinyBase DOM Component" title="A [TinyBase](/) DOM Component"></p><h4 id="new-dom-components">New DOM Components</h4><p>The following is the list of all the components released in v4.1:</p><div class="table"><table><thead><tr><th>Component</th><th>Purpose</th><th></th></tr></thead><tbody><tr><td><a href="/api/ui-react-dom/functions/store-components/valuesinhtmltable/"><code>ValuesInHtmlTable</code></a></td><td>Renders <a href="/api/store/type-aliases/store/values/"><code>Values</code></a>.</td><td><a href="/demos/ui-components/valuesinhtmltable">demo</a></td></tr><tr><td><a href="/api/ui-react-dom/functions/store-components/tableinhtmltable/"><code>TableInHtmlTable</code></a></td><td>Renders a <a href="/api/store/type-aliases/store/table/"><code>Table</code></a>.</td><td><a href="/demos/ui-components/tableinhtmltable">demo</a></td></tr><tr><td><a href="/api/ui-react-dom/functions/store-components/sortedtableinhtmltable/"><code>SortedTableInHtmlTable</code></a></td><td>Renders a sorted <a href="/api/store/type-aliases/store/table/"><code>Table</code></a>, with optional interactivity.</td><td><a href="/demos/ui-components/sortedtableinhtmltable">demo</a></td></tr><tr><td><a href="/api/ui-react-dom/functions/indexes-components/sliceinhtmltable/"><code>SliceInHtmlTable</code></a></td><td>Renders a <a href="/api/indexes/type-aliases/concept/slice/"><code>Slice</code></a> from an <a href="/api/indexes/type-aliases/concept/index/"><code>Index</code></a>.</td><td><a href="/demos/ui-components/sliceinhtmltable">demo</a></td></tr><tr><td><a href="/api/ui-react-dom/functions/relationships-components/relationshipinhtmltable/"><code>RelationshipInHtmlTable</code></a></td><td>Renders the local and remote <a href="/api/store/type-aliases/store/tables/"><code>Tables</code></a> of a relationship</td><td><a href="/demos/ui-components/relationshipinhtmltable">demo</a></td></tr><tr><td><a href="/api/ui-react-dom/functions/queries-components/resulttableinhtmltable/"><code>ResultTableInHtmlTable</code></a></td><td>Renders a <a href="/api/queries/type-aliases/result/resulttable/"><code>ResultTable</code></a>.</td><td><a href="/demos/ui-components/resulttableinhtmltable">demo</a></td></tr><tr><td><a href="/api/ui-react-dom/functions/queries-components/resultsortedtableinhtmltable/"><code>ResultSortedTableInHtmlTable</code></a></td><td>Renders a sorted <a href="/api/queries/type-aliases/result/resulttable/"><code>ResultTable</code></a>, with optional interactivity.</td><td><a href="/demos/ui-components/resultsortedtableinhtmltable">demo</a></td></tr><tr><td><a href="/api/ui-react-dom/functions/store-components/editablecellview/"><code>EditableCellView</code></a></td><td>Renders a <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> and lets you change its type and value.</td><td><a href="/demos/ui-components/editablecellview">demo</a></td></tr><tr><td><a href="/api/ui-react-dom/functions/store-components/editablevalueview/"><code>EditableValueView</code></a></td><td>Renders a <a href="/api/store/type-aliases/store/value/"><code>Value</code></a> and lets you change its type and value.</td><td><a href="/demos/ui-components/editablevalueview">demo</a></td></tr></tbody></table></div><p>These pre-built components are showcased in the <a href="/demos/ui-components/">UI Components</a> demos. Using them should be very familiar if you have used the more abstract <a href="/api/ui-react/"><code>ui-react</code></a> module:</p><pre><code><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">{</span>SortedTableInHtmlTable<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/ui-react-dom'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">{</span>createRoot<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'react-dom/client'</span><span class="punctuation">;</span>

<span class="keyword">const</span> <span class="function-variable">App</span> <span class="operator">=</span> <span class="punctuation">(</span><span class="parameter"><span class="punctuation">{</span>store<span class="punctuation">}</span></span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">(</span>
  <span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name"><a href="/api/ui-react-dom/functions/store-components/sortedtableinhtmltable/">SortedTableInHtmlTable</a></span></span> <span class="attr-name">tableId</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>pets<span class="punctuation">"</span></span> <span class="attr-name">cellId</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>species<span class="punctuation">"</span></span> <span class="attr-name">store</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span>store<span class="punctuation">}</span></span> <span class="punctuation">/></span></span>
<span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settables/">setTables</a></span><span class="punctuation">(</span><span class="punctuation">{</span>
  <span class="literal-property">pets</span><span class="operator">:</span> <span class="punctuation">{</span>
    <span class="literal-property">fido</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'dog'</span><span class="punctuation">}</span><span class="punctuation">,</span>
    <span class="literal-property">felix</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'cat'</span><span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> app <span class="operator">=</span> document<span class="punctuation">.</span><span class="function">createElement</span><span class="punctuation">(</span><span class="string">'div'</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> root <span class="operator">=</span> <span class="function">createRoot</span><span class="punctuation">(</span>app<span class="punctuation">)</span><span class="punctuation">;</span>
root<span class="punctuation">.</span><span class="function">render</span><span class="punctuation">(</span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name">App</span></span> <span class="attr-name">store</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span>store<span class="punctuation">}</span></span> <span class="punctuation">/></span></span><span class="punctuation">)</span><span class="punctuation">;</span>

console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>app<span class="punctuation">.</span>innerHTML<span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -></span>
<span class="template-string"><span class="template-punctuation">`</span><span class="string">
&lt;table>
 &lt;thead>
   &lt;tr>&lt;th>Id&lt;/th>&lt;th class="sorted ascending">â species&lt;/th>&lt;/tr>
 &lt;/thead>
 &lt;tbody>
   &lt;tr>&lt;th>felix&lt;/th>&lt;td>cat&lt;/td>&lt;/tr>
   &lt;tr>&lt;th>fido&lt;/th>&lt;td>dog&lt;/td>&lt;/tr>
 &lt;/tbody>
&lt;/table>
</span><span class="template-punctuation">`</span></span><span class="punctuation">;</span>

root<span class="punctuation">.</span><span class="function">unmount</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>The <a href="/api/ui-react-dom/functions/store-components/editablecellview/"><code>EditableCellView</code></a> component and <a href="/api/ui-react-dom/functions/store-components/editablevalueview/"><code>EditableValueView</code></a> component are interactive input controls for updating <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> and <a href="/api/store/type-aliases/store/value/"><code>Value</code></a> content respectively. You can generally use them across your table views by adding the <code>editable</code> prop to your table component.</p><h4 id="the-new-inspector">The new Inspector</h4><p><img src="/store-inspector.webp" alt="Inspector" title="Inspector"></p><p>The new <a href="/api/ui-react-inspector/functions/development-components/inspector/"><code>Inspector</code></a> component allows you to view, understand, and edit the content of a <a href="/api/store/interfaces/store/store/"><code>Store</code></a> in a debug web environment. Try it out in most of the demos on the site, including the <a href="/demos/movie-database/">Movie Database</a> demo, pictured. This requires a debug build of the new <a href="/api/ui-react-dom/"><code>ui-react-dom</code></a> module, which is now also included in the UMD distribution.</p><p>Also in this release, the <a href="/api/queries/interfaces/queries/queries/methods/result/getresulttablecellids/"><code>getResultTableCellIds</code></a> method and <a href="/api/queries/interfaces/queries/queries/methods/listener/addresulttablecellidslistener/"><code>addResultTableCellIdsListener</code></a> method have been added to the <a href="/api/queries/interfaces/queries/queries/"><code>Queries</code></a> object. The equivalent <a href="/api/ui-react/functions/queries-hooks/useresulttablecellids/"><code>useResultTableCellIds</code></a> hook and <a href="/api/ui-react/functions/queries-hooks/useresulttablecellidslistener/"><code>useResultTableCellIdsListener</code></a> hook have also been added to <a href="/api/ui-react/"><code>ui-react</code></a> module. A number of other minor React hooks have been added to support the components above.</p><p><a href="/demos/">Demos</a> have been updated to demonstrate the <a href="/api/ui-react-dom/"><code>ui-react-dom</code></a> module and the <a href="/api/ui-react-inspector/functions/development-components/inspector/"><code>Inspector</code></a> component where appropriate.</p><p>(NB: Previous to v5.0, this component was called <code>StoreInspector</code>.)</p><h3 id="v4-0">v4.0</h3><p>This major release provides <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> modules that connect <a href="/">TinyBase</a> to SQLite databases (in both browser and server contexts), and CRDT frameworks that can provide synchronization and local-first reconciliation:</p><div class="table"><table><thead><tr><th>Module</th><th>Function</th><th>Storage</th></tr></thead><tbody><tr><td><a href="/api/persister-sqlite3/"><code>persister-sqlite3</code></a></td><td><a href="/api/persister-sqlite3/functions/creation/createsqlite3persister/"><code>createSqlite3Persister</code></a></td><td>SQLite in Node, via <a href="https://github.com/TryGhost/node-sqlite3">sqlite3</a></td></tr><tr><td><a href="/api/persister-sqlite-wasm/"><code>persister-sqlite-wasm</code></a></td><td><a href="/api/persister-sqlite-wasm/functions/creation/createsqlitewasmpersister/"><code>createSqliteWasmPersister</code></a></td><td>SQLite in a browser, via <a href="https://github.com/tomayac/sqlite-wasm">sqlite-wasm</a></td></tr><tr><td><a href="/api/persister-cr-sqlite-wasm/"><code>persister-cr-sqlite-wasm</code></a></td><td><a href="/api/persister-cr-sqlite-wasm/functions/creation/createcrsqlitewasmpersister/"><code>createCrSqliteWasmPersister</code></a></td><td>SQLite CRDTs, via <a href="https://github.com/vlcn-io/cr-sqlite">cr-sqlite-wasm</a></td></tr><tr><td><a href="/api/persister-yjs/"><code>persister-yjs</code></a></td><td><a href="/api/persister-yjs/functions/creation/createyjspersister/"><code>createYjsPersister</code></a></td><td>Yjs CRDTs, via <a href="https://github.com/yjs/yjs">yjs</a></td></tr><tr><td><a href="/api/persister-automerge/"><code>persister-automerge</code></a></td><td><a href="/api/persister-sqlite-wasm/functions/creation/createsqlitewasmpersister/"><code>createSqliteWasmPersister</code></a></td><td>Automerge CRDTs, via <a href="https://github.com/automerge/automerge-repo">automerge-repo</a></td></tr></tbody></table></div><p>See the <a href="/guides/persistence/database-persistence/">Database Persistence</a> guide for details on how to work with SQLite databases, and the <a href="/guides/schemas-and-persistence/synchronizing-data/">Synchronizing Data</a> guide for more complex synchronization with the CRDT frameworks.</p><p>Take a look at the <a href="https://github.com/tinyplex/vite-tinybase-ts-react-crsqlite">vite-tinybase-ts-react-crsqlite</a> template, for example, which demonstrates Vulcan&#x27;s cr-sqlite to provide persistence and synchronization via this technique.</p><h4 id="sqlite-databases">SQLite databases</h4><p>You can persist <a href="/api/store/interfaces/store/store/"><code>Store</code></a> data to a database with either a JSON serialization or tabular mapping. (See the <a href="/api/persisters/type-aliases/configuration/databasepersisterconfig/"><code>DatabasePersisterConfig</code></a> documentation for more details).</p><p>For example, this creates a <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> object and saves and loads the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> to and from a local SQLite database. It uses an explicit tabular one-to-one mapping for the &#x27;pets&#x27; table:</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>createSqliteWasmPersister<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/persisters/persister-sqlite-wasm'</span><span class="punctuation">;</span>
<span class="keyword">import</span> sqlite3InitModule <span class="keyword">from</span> <span class="string">'@sqlite.org/sqlite-wasm'</span><span class="punctuation">;</span>

<span class="keyword">const</span> sqlite3 <span class="operator">=</span> <span class="keyword">await</span> <span class="function">sqlite3InitModule</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> db <span class="operator">=</span> <span class="keyword">new</span> <span class="class-name">sqlite3<span class="punctuation">.</span>oo1<span class="punctuation">.</span>DB</span><span class="punctuation">(</span><span class="string">':memory:'</span><span class="punctuation">,</span> <span class="string">'c'</span><span class="punctuation">)</span><span class="punctuation">;</span>
store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settables/">setTables</a></span><span class="punctuation">(</span><span class="punctuation">{</span><span class="literal-property">pets</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">fido</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'dog'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> sqlitePersister <span class="operator">=</span> <span class="function"><a href="/api/persister-sqlite-wasm/functions/creation/createsqlitewasmpersister/">createSqliteWasmPersister</a></span><span class="punctuation">(</span>store<span class="punctuation">,</span> sqlite3<span class="punctuation">,</span> db<span class="punctuation">,</span> <span class="punctuation">{</span>
  <span class="literal-property">mode</span><span class="operator">:</span> <span class="string">'tabular'</span><span class="punctuation">,</span>
  <span class="literal-property">tables</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">load</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">pets</span><span class="operator">:</span> <span class="string">'pets'</span><span class="punctuation">}</span><span class="punctuation">,</span> <span class="literal-property">save</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">pets</span><span class="operator">:</span> <span class="string">'pets'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">await</span> sqlitePersister<span class="punctuation">.</span><span class="function"><a href="/api/persisters/interfaces/persister/persister/methods/save/save/">save</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>db<span class="punctuation">.</span><span class="function">exec</span><span class="punctuation">(</span><span class="string">'SELECT * FROM pets;'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">rowMode</span><span class="operator">:</span> <span class="string">'object'</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> [{_id: 'fido', species: 'dog'}]</span>

db<span class="punctuation">.</span><span class="function">exec</span><span class="punctuation">(</span><span class="template-string"><span class="template-punctuation">`</span><span class="string">INSERT INTO pets (_id, species) VALUES ('felix', 'cat')</span><span class="template-punctuation">`</span></span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">await</span> sqlitePersister<span class="punctuation">.</span><span class="function"><a href="/api/persisters/interfaces/persister/persister/methods/load/load/">load</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/getter/gettables/">getTables</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {pets: {fido: {species: 'dog'}, felix: {species: 'cat'}}}</span>

sqlitePersister<span class="punctuation">.</span><span class="function"><a href="/api/metrics/interfaces/metrics/metrics/methods/lifecycle/destroy/">destroy</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><h4 id="crdt-frameworks">CRDT Frameworks</h4><p>CRDTs allow complex reconciliation and synchronization between clients. Yjs and Automerge are two popular examples. The API should be familiar! The following will persist a <a href="/">TinyBase</a> <a href="/api/store/interfaces/store/store/"><code>Store</code></a> to a Yjs document:</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>Doc<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'yjs'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">{</span>createYjsPersister<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/persisters/persister-yjs'</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settables/">setTables</a></span><span class="punctuation">(</span><span class="punctuation">{</span><span class="literal-property">pets</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">fido</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'dog'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> doc <span class="operator">=</span> <span class="keyword">new</span> <span class="class-name">Doc</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> yJsPersister <span class="operator">=</span> <span class="function"><a href="/api/persister-yjs/functions/creation/createyjspersister/">createYjsPersister</a></span><span class="punctuation">(</span>store<span class="punctuation">,</span> doc<span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">await</span> yJsPersister<span class="punctuation">.</span><span class="function"><a href="/api/persisters/interfaces/persister/persister/methods/save/save/">save</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// Store will be saved to the document.</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>doc<span class="punctuation">.</span><span class="function">toJSON</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {tinybase: {t: {pets: {fido: {species: 'dog'}}}, v: {}}}</span>
yJsPersister<span class="punctuation">.</span><span class="function"><a href="/api/metrics/interfaces/metrics/metrics/methods/lifecycle/destroy/">destroy</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>The following is the equivalent for an Automerge document that will sync over the broadcast channel:</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>BroadcastChannelNetworkAdapter<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'@automerge/automerge-repo-network-broadcastchannel'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">{</span>Repo<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'@automerge/automerge-repo'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">{</span>createAutomergePersister<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/persisters/persister-automerge'</span><span class="punctuation">;</span>

<span class="keyword">const</span> docHandler <span class="operator">=</span> <span class="keyword">new</span> <span class="class-name">Repo</span><span class="punctuation">(</span><span class="punctuation">{</span>
  <span class="literal-property">network</span><span class="operator">:</span> <span class="punctuation">[</span><span class="keyword">new</span> <span class="class-name">BroadcastChannelNetworkAdapter</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">]</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function">create</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> automergePersister <span class="operator">=</span> <span class="function"><a href="/api/persister-automerge/functions/creation/createautomergepersister/">createAutomergePersister</a></span><span class="punctuation">(</span>store<span class="punctuation">,</span> docHandler<span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">await</span> automergePersister<span class="punctuation">.</span><span class="function"><a href="/api/persisters/interfaces/persister/persister/methods/save/save/">save</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// Store will be saved to the document.</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="keyword">await</span> docHandler<span class="punctuation">.</span><span class="function">doc</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {tinybase: {t: {pets: {fido: {species: 'dog'}}}, v: {}}}</span>
automergePersister<span class="punctuation">.</span><span class="function"><a href="/api/metrics/interfaces/metrics/metrics/methods/lifecycle/destroy/">destroy</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/deleter/deltables/">delTables</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><h4 id="new-methods">New methods</h4><p>There are three new methods on the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> object. The <a href="/api/store/interfaces/store/store/methods/getter/getcontent/"><code>getContent</code></a> method lets you get the <a href="/api/store/interfaces/store/store/"><code>Store</code></a>&#x27;s <a href="/api/store/type-aliases/store/tables/"><code>Tables</code></a> and <a href="/api/store/type-aliases/store/values/"><code>Values</code></a> in one call. The corresponding <a href="/api/store/interfaces/store/store/methods/setter/setcontent/"><code>setContent</code></a> method lets you set them simultaneously.</p><p>The new setTransactionChanges method lets you replay TransactionChanges (received at the end of a transaction via listeners) into a <a href="/api/store/interfaces/store/store/"><code>Store</code></a>, allowing you to take changes from one <a href="/api/store/interfaces/store/store/"><code>Store</code></a> and apply them to another.</p><p>Persisters now provide a <a href="/api/persisters/interfaces/persister/persister/methods/lifecycle/schedule/"><code>schedule</code></a> method that lets you queue up asynchronous tasks, such as when persisting data that requires complex sequences of actions.</p><h4 id="breaking-changes">Breaking changes</h4><p>The way that data is provided to the <a href="/api/store/type-aliases/callback/dorollback/"><code>DoRollback</code></a> and <a href="/api/store/type-aliases/listener/transactionlistener/"><code>TransactionListener</code></a> callbacks at the end of a transaction has changed. Although previously they directly received content about changed <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> and <a href="/api/store/type-aliases/store/value/"><code>Value</code></a> content, they now receive functions that they can choose to call to receive that same data. This has a performance improvement, and your callback or listener can choose between concise TransactionChanges or more verbose <a href="/api/store/type-aliases/transaction/transactionlog/"><code>TransactionLog</code></a> structures for that data.</p><p>If you have build a custom persister, you will need to update your implementation. Most notably, the <code>setPersisted</code> function parameter is provided with a <code>getContent</code> function to get the content from the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> itself, rather than being passed pre-serialized JSON. It also receives information about the changes made during a transaction. The <code>getPersisted</code> function must return the content (or nothing) rather than JSON. <code>startListeningToPersisted</code> has been renamed <code>addPersisterListener</code>, and <code>stopListeningToPersisted</code> has been renamed <code>delPersisterListener</code>.</p><h3 id="v3-3">v3.3</h3><p>This release allows you to track the <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> <a href="/api/common/type-aliases/identity/ids/"><code>Ids</code></a> used across a whole <a href="/api/store/type-aliases/store/table/"><code>Table</code></a>, regardless of which <a href="/api/store/type-aliases/store/row/"><code>Row</code></a> they are in.</p><p>In a <a href="/api/store/type-aliases/store/table/"><code>Table</code></a> (particularly in a <a href="/api/store/interfaces/store/store/"><code>Store</code></a> without a <a href="/api/store/type-aliases/schema/tablesschema/"><code>TablesSchema</code></a>), different Rows can use different Cells. Consider this <a href="/api/store/interfaces/store/store/"><code>Store</code></a>, where each pet has a different set of <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> <a href="/api/common/type-aliases/identity/ids/"><code>Ids</code></a>:</p><pre><code>store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settable/">setTable</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="punctuation">{</span>
  <span class="literal-property">fido</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'dog'</span><span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="literal-property">felix</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'cat'</span><span class="punctuation">,</span> <span class="literal-property">friendly</span><span class="operator">:</span> <span class="boolean">true</span><span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="literal-property">cujo</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">legs</span><span class="operator">:</span> <span class="number">4</span><span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>Prior to v3.3, you could only get the <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> <a href="/api/common/type-aliases/identity/ids/"><code>Ids</code></a> used in each <a href="/api/store/type-aliases/store/row/"><code>Row</code></a> at a time (with the <a href="/api/store/interfaces/store/store/methods/getter/getcellids/"><code>getCellIds</code></a> method). But you can now use the <a href="/api/store/interfaces/store/store/methods/getter/gettablecellids/"><code>getTableCellIds</code></a> method to get the union of all the <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> <a href="/api/common/type-aliases/identity/ids/"><code>Ids</code></a> used across the <a href="/api/store/type-aliases/store/table/"><code>Table</code></a>:</p><pre><code>console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/getter/getcellids/">getCellIds</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span> <span class="comment">// previously available</span>
<span class="comment">// -> ['species']</span>

console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/getter/gettablecellids/">getTableCellIds</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span> <span class="comment">//    new in v3.3</span>
<span class="comment">// -> ['species', 'friendly', 'legs']</span>
</code></pre><p>You can register a listener to track the <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> <a href="/api/common/type-aliases/identity/ids/"><code>Ids</code></a> used across a <a href="/api/store/type-aliases/store/table/"><code>Table</code></a> with the new <a href="/api/store/interfaces/store/store/methods/listener/addtablecellidslistener/"><code>addTableCellIdsListener</code></a> method. Use cases for this might include knowing which headers to render when displaying a sparse <a href="/api/store/type-aliases/store/table/"><code>Table</code></a> in a user interface, or synchronizing data with relational or column-oriented database system.</p><p>There is also a corresponding <a href="/api/ui-react/functions/store-hooks/usetablecellids/"><code>useTableCellIds</code></a> hook in the optional <a href="/api/ui-react/"><code>ui-react</code></a> module for accessing these <a href="/api/common/type-aliases/identity/ids/"><code>Ids</code></a> reactively, and a <a href="/api/ui-react/functions/store-hooks/usetablecellidslistener/"><code>useTableCellIdsListener</code></a> hook for more advanced purposes.</p><p>Note that the bookkeeping behind these new accessors and listeners is efficient and should not be slowed by the number of Rows in the <a href="/api/store/type-aliases/store/table/"><code>Table</code></a>.</p><p>This release also passes a getIdChanges function to every <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a>-related listener that, when called, returns information about the <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a> changes, both additions and removals, during a transaction. See the <a href="/api/store/type-aliases/listener/tableidslistener/"><code>TableIdsListener</code></a> type, for example.</p><pre><code><span class="keyword">let</span> listenerId <span class="operator">=</span> store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/listener/addrowidslistener/">addRowIdsListener</a></span><span class="punctuation">(</span>
  <span class="string">'pets'</span><span class="punctuation">,</span>
  <span class="punctuation">(</span><span class="parameter">store<span class="punctuation">,</span> tableId<span class="punctuation">,</span> getIdChanges</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
    console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="function">getIdChanges</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setrow/">setRow</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'lowly'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'worm'</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {lowly: 1}</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/deleter/delrow/">delRow</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'felix'</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {felix: -1}</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/listener/dellistener/">delListener</a></span><span class="punctuation">(</span>listenerId<span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/deleter/deltables/">delTables</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><h3 id="v3-2">v3.2</h3><p>This release lets you add a listener to the start of a transaction, and detect that a set of changes are about to be made to a <a href="/api/store/interfaces/store/store/"><code>Store</code></a>.</p><p>To use this, call the <a href="/api/store/interfaces/store/store/methods/listener/addstarttransactionlistener/"><code>addStartTransactionListener</code></a> method on your <a href="/api/store/interfaces/store/store/"><code>Store</code></a>. The listener you add can itself mutate the data in the <a href="/api/store/interfaces/store/store/"><code>Store</code></a>.</p><p>From this release onwards, listeners added with the existing <a href="/api/store/interfaces/store/store/methods/listener/addwillfinishtransactionlistener/"><code>addWillFinishTransactionListener</code></a> method are also able to mutate data. <a href="/guides/the-basics/transactions/">Transactions</a> added with the existing <a href="/api/store/interfaces/store/store/methods/listener/adddidfinishtransactionlistener/"><code>addDidFinishTransactionListener</code></a> method <em>cannot</em> mutate data.</p><pre><code><span class="keyword">const</span> startListenerId <span class="operator">=</span> store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/listener/addstarttransactionlistener/">addStartTransactionListener</a></span><span class="punctuation">(</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
  console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="string">'Start transaction'</span><span class="punctuation">)</span><span class="punctuation">;</span>
  console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/getter/gettables/">getTables</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="comment">// Can mutate data</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> willFinishListenerId <span class="operator">=</span> store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/listener/addwillfinishtransactionlistener/">addWillFinishTransactionListener</a></span><span class="punctuation">(</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
  console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="string">'Will finish transaction'</span><span class="punctuation">)</span><span class="punctuation">;</span>
  console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/getter/gettables/">getTables</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="comment">// Can mutate data</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> didFinishListenerId <span class="operator">=</span> store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/listener/adddidfinishtransactionlistener/">addDidFinishTransactionListener</a></span><span class="punctuation">(</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
  console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="string">'Did finish transaction'</span><span class="punctuation">)</span><span class="punctuation">;</span>
  console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/getter/gettables/">getTables</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="comment">// Cannot mutate data</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settable/">setTable</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">fido</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'dog'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Start transaction'</span>
<span class="comment">// -> {}</span>
<span class="comment">// -> 'Will finish transaction'</span>
<span class="comment">// -> {pets: {fido: {species: 'dog'}}}</span>
<span class="comment">// -> 'Did finish transaction'</span>
<span class="comment">// -> {pets: {fido: {species: 'dog'}}}</span>

store
  <span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/listener/dellistener/">delListener</a></span><span class="punctuation">(</span>startListenerId<span class="punctuation">)</span>
  <span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/listener/dellistener/">delListener</a></span><span class="punctuation">(</span>willFinishListenerId<span class="punctuation">)</span>
  <span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/listener/dellistener/">delListener</a></span><span class="punctuation">(</span>didFinishListenerId<span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/deleter/deltables/">delTables</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>This release also fixes a bug where using the explicit <a href="/api/store/interfaces/store/store/methods/transaction/starttransaction/"><code>startTransaction</code></a> method <em>inside</em> another listener could create infinite recursion.</p><h3 id="v3-1">v3.1</h3><p>This new release adds a powerful schema-based type system to <a href="/">TinyBase</a>.</p><p>If you define the shape and structure of your data with a <a href="/api/store/type-aliases/schema/tablesschema/"><code>TablesSchema</code></a> or <a href="/api/store/type-aliases/schema/valuesschema/"><code>ValuesSchema</code></a>, you can benefit from an enhanced developer experience when operating on it. For example:</p><pre><code><span class="comment">// Import the 'with-schemas' definition:</span>
<span class="keyword">import</span> <span class="punctuation">{</span>createStore<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/with-schemas'</span><span class="punctuation">;</span>

<span class="comment">// Set a schema for a new Store:</span>
<span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/store/functions/creation/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setvaluesschema/">setValuesSchema</a></span><span class="punctuation">(</span><span class="punctuation">{</span>
  employees<span class="operator">:</span> <span class="punctuation">{</span>type<span class="operator">:</span> <span class="string">'number'</span><span class="punctuation">}</span><span class="punctuation">,</span>
  open<span class="operator">:</span> <span class="punctuation">{</span>type<span class="operator">:</span> <span class="string">'boolean'</span><span class="punctuation">,</span> <span class="keyword">default</span><span class="operator">:</span> <span class="boolean">false</span><span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="comment">// Benefit from inline TypeScript errors.</span>
store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setvalues/">setValues</a></span><span class="punctuation">(</span><span class="punctuation">{</span>employees<span class="operator">:</span> <span class="number">3</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span> <span class="comment">//                      OK</span>
store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setvalues/">setValues</a></span><span class="punctuation">(</span><span class="punctuation">{</span>employees<span class="operator">:</span> <span class="boolean">true</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span> <span class="comment">//                   TypeScript error</span>
store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setvalues/">setValues</a></span><span class="punctuation">(</span><span class="punctuation">{</span>employees<span class="operator">:</span> <span class="number">3</span><span class="punctuation">,</span> website<span class="operator">:</span> <span class="string">'pets.com'</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span> <span class="comment">// TypeScript error</span>
</code></pre><p>The schema-based typing is used comprehensively throughout every module - from the core <a href="/api/store/interfaces/store/store/"><code>Store</code></a> interface all the way through to the <a href="/api/ui-react/"><code>ui-react</code></a> module. See the new <a href="/guides/schemas/schema-based-typing/">Schema-Based Typing</a> guide for instructions on how to use it.</p><p>This now means that there are <em>three</em> progressive ways to use TypeScript with <a href="/">TinyBase</a>:</p><ul><li>Basic Type Support (since v1.0)</li><li>Schema-based Typing (since v3.1)</li><li>ORM-like type definitions (since v2.2)</li></ul><p>These are each described in the new <a href="/">TinyBase</a> and TypeScript guide.</p><p>Also in v3.1, the ORM-like type definition generation in the <a href="/api/tools/"><code>tools</code></a> module has been extended to emit <a href="/api/ui-react/"><code>ui-react</code></a> module definitions.</p><p>Finally, v3.1.1 adds a <code>reuseRowIds</code> parameter to the <a href="/api/store/interfaces/store/store/methods/setter/addrow/"><code>addRow</code></a> method and the <a href="/api/ui-react/functions/store-hooks/useaddrowcallback/"><code>useAddRowCallback</code></a> hook. It defaults to <code>true</code>, for backwards compatibility, but if set to <code>false</code>, new <a href="/api/store/type-aliases/store/row/"><code>Row</code></a> <a href="/api/common/type-aliases/identity/ids/"><code>Ids</code></a> will not be reused unless the whole <a href="/api/store/type-aliases/store/table/"><code>Table</code></a> is deleted.</p><h3 id="v3-0">v3.0</h3><p>This major new release adds key/value store functionality to <a href="/">TinyBase</a>. Alongside existing tabular data, it allows you to get, set, and listen to, individual <a href="/api/store/type-aliases/store/value/"><code>Value</code></a> items, each with a unique <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a>.</p><pre><code>store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setvalues/">setValues</a></span><span class="punctuation">(</span><span class="punctuation">{</span><span class="literal-property">employees</span><span class="operator">:</span> <span class="number">3</span><span class="punctuation">,</span> <span class="literal-property">open</span><span class="operator">:</span> <span class="boolean">true</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/getter/getvalues/">getValues</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {employees: 3, open: true}</span>

listenerId <span class="operator">=</span> store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/listener/addvaluelistener/">addValueListener</a></span><span class="punctuation">(</span>
  <span class="keyword">null</span><span class="punctuation">,</span>
  <span class="punctuation">(</span><span class="parameter">store<span class="punctuation">,</span> valueId<span class="punctuation">,</span> newValue<span class="punctuation">,</span> oldValue</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
    console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="template-string"><span class="template-punctuation">`</span><span class="string">Value '</span><span class="interpolation"><span class="interpolation-punctuation">${</span>valueId<span class="interpolation-punctuation">}</span></span><span class="string">' changed from </span><span class="interpolation"><span class="interpolation-punctuation">${</span>oldValue<span class="interpolation-punctuation">}</span></span><span class="string"> to </span><span class="interpolation"><span class="interpolation-punctuation">${</span>newValue<span class="interpolation-punctuation">}</span></span><span class="template-punctuation">`</span></span><span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setvalue/">setValue</a></span><span class="punctuation">(</span><span class="string">'employees'</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> "Value 'employees' changed from 3 to 4"</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/listener/dellistener/">delListener</a></span><span class="punctuation">(</span>listenerId<span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/deleter/delvalues/">delValues</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p><a href="/guides/">Guides</a> and documentation have been fully updated, and certain demos - such as the <a href="/demos/todo-app/todo-app-v2-indexes/">Todo App v2 (indexes)</a> demo, and the <a href="/demos/countries/">Countries</a> demo - have been updated to use this new functionality.</p><p>If you use the optional <a href="/api/ui-react/"><code>ui-react</code></a> module with <a href="/">TinyBase</a>, v3.0 now uses and expects React v18.</p><p>In terms of core API changes in v3.0, there are some minor breaking changes (see below), but the majority of the alterations are additions.</p><p>The <a href="/api/store/interfaces/store/store/"><code>Store</code></a> object gains the following:</p><ul><li>The <a href="/api/store/interfaces/store/store/methods/setter/setvalues/"><code>setValues</code></a> method, <a href="/api/store/interfaces/store/store/methods/setter/setpartialvalues/"><code>setPartialValues</code></a> method, and <a href="/api/store/interfaces/store/store/methods/setter/setvalue/"><code>setValue</code></a> method, to set keyed value data into the <a href="/api/store/interfaces/store/store/"><code>Store</code></a>.</li><li>The <a href="/api/store/interfaces/store/store/methods/getter/getvalues/"><code>getValues</code></a> method, <a href="/api/store/interfaces/store/store/methods/getter/getvalueids/"><code>getValueIds</code></a> method, and <a href="/api/store/interfaces/store/store/methods/getter/getvalue/"><code>getValue</code></a> method, to get keyed value data out of the <a href="/api/store/interfaces/store/store/"><code>Store</code></a>.</li><li>The <a href="/api/store/interfaces/store/store/methods/deleter/delvalues/"><code>delValues</code></a> method and <a href="/api/store/interfaces/store/store/methods/deleter/delvalue/"><code>delValue</code></a> method for removing keyed value data.</li><li>The <a href="/api/store/interfaces/store/store/methods/listener/addvalueslistener/"><code>addValuesListener</code></a> method, <a href="/api/store/interfaces/store/store/methods/listener/addvalueidslistener/"><code>addValueIdsListener</code></a> method, addValueListener method, and <a href="/api/store/interfaces/store/store/methods/listener/addinvalidvaluelistener/"><code>addInvalidValueListener</code></a> method, for listening to changes to keyed value data.</li><li>The <a href="/api/store/interfaces/store/store/methods/getter/hasvalues/"><code>hasValues</code></a> method, <a href="/api/store/interfaces/store/store/methods/getter/hasvalue/"><code>hasValue</code></a> method, and <a href="/api/store/interfaces/store/store/methods/iterator/foreachvalue/"><code>forEachValue</code></a> method, for existence and enumeration purposes.</li><li>The <a href="/api/store/interfaces/store/store/methods/getter/gettablesjson/"><code>getTablesJson</code></a> method, <a href="/api/store/interfaces/store/store/methods/getter/getvaluesjson/"><code>getValuesJson</code></a> method, <a href="/api/store/interfaces/store/store/methods/setter/settablesjson/"><code>setTablesJson</code></a> method, and <a href="/api/store/interfaces/store/store/methods/setter/setvaluesjson/"><code>setValuesJson</code></a> method, for reading and writing tabular and keyed value data to and from a JSON string. Also see below.</li><li>The <a href="/api/store/interfaces/store/store/methods/getter/gettablesschemajson/"><code>getTablesSchemaJson</code></a> method, <a href="/api/store/interfaces/store/store/methods/getter/getvaluesschemajson/"><code>getValuesSchemaJson</code></a> method, setTablesSchema method, <a href="/api/store/interfaces/store/store/methods/setter/setvaluesschema/"><code>setValuesSchema</code></a> method, <a href="/api/store/interfaces/store/store/methods/deleter/deltablesschema/"><code>delTablesSchema</code></a> method, and delValuesSchema method, for reading and writing tabular and keyed value schemas for the <a href="/api/store/interfaces/store/store/"><code>Store</code></a>. Also see below.</li></ul><p>The following types have been added to the <a href="/api/store/"><code>store</code></a> module:</p><ul><li><a href="/api/store/type-aliases/store/values/"><code>Values</code></a>, <a href="/api/store/type-aliases/store/value/"><code>Value</code></a>, and <a href="/api/store/type-aliases/store/valueorundefined/"><code>ValueOrUndefined</code></a>, representing keyed value data in a <a href="/api/store/interfaces/store/store/"><code>Store</code></a>.</li><li><a href="/api/store/type-aliases/listener/valuelistener/"><code>ValueListener</code></a> and <a href="/api/store/type-aliases/listener/invalidvaluelistener/"><code>InvalidValueListener</code></a>, to describe functions used to listen to (valid or invalid) changes to a <a href="/api/store/type-aliases/store/value/"><code>Value</code></a>.</li><li><a href="/api/store/type-aliases/schema/valuesschema/"><code>ValuesSchema</code></a> and <a href="/api/store/type-aliases/schema/valueschema/"><code>ValueSchema</code></a>, to describe the keyed <a href="/api/store/type-aliases/store/values/"><code>Values</code></a> that can be set in a <a href="/api/store/interfaces/store/store/"><code>Store</code></a> and their types.</li><li><a href="/api/store/type-aliases/callback/valuecallback/"><code>ValueCallback</code></a>, <a href="/api/store/type-aliases/callback/mapvalue/"><code>MapValue</code></a>, <a href="/api/store/type-aliases/transaction/changedvalues/"><code>ChangedValues</code></a>, and <a href="/api/store/type-aliases/transaction/invalidvalues/"><code>InvalidValues</code></a>, which also correspond to their &#x27;<a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a>&#x27; equivalents.</li></ul><p>Additionally:</p><ul><li>The persisters&#x27; <a href="/api/persisters/interfaces/persister/persister/methods/load/load/"><code>load</code></a> method and <a href="/api/persisters/interfaces/persister/persister/methods/load/startautoload/"><code>startAutoLoad</code></a> method take an optional <code>initialValues</code> parameter for setting <a href="/api/store/type-aliases/store/values/"><code>Values</code></a> when a persisted <a href="/api/store/interfaces/store/store/"><code>Store</code></a> is bootstrapped.</li><li>The <a href="/api/checkpoints/interfaces/checkpoints/checkpoints/"><code>Checkpoints</code></a> module will undo and redo changes to keyed values in the same way they do for tabular data.</li><li>The <a href="/api/tools/"><code>tools</code></a> module provides a <a href="/api/tools/interfaces/tools/tools/methods/modelling/getstorevaluesschema/"><code>getStoreValuesSchema</code></a> method for inferring value-based schemas. The <a href="/api/tools/interfaces/tools/tools/methods/modelling/getstoreapi/"><code>getStoreApi</code></a> method and <a href="/api/tools/interfaces/tools/tools/methods/modelling/getprettystoreapi/"><code>getPrettyStoreApi</code></a> method now also provides an ORM-like code-generated API for schematized key values.</li></ul><p>All attempts have been made to provide backwards compatibility and/or easy upgrade paths.</p><p>In previous versions, <a href="/api/store/interfaces/store/store/methods/getter/getjson/"><code>getJson</code></a> method would get a JSON serialization of the <a href="/api/store/interfaces/store/store/"><code>Store</code></a>&#x27;s tabular data. That functionality is now provided by the <a href="/api/store/interfaces/store/store/methods/getter/gettablesjson/"><code>getTablesJson</code></a> method, and the <a href="/api/store/interfaces/store/store/methods/getter/getjson/"><code>getJson</code></a> method instead now returns a two-part array containing the tabular data and the keyed value data.</p><p>Similarly, the <a href="/api/store/interfaces/store/store/methods/getter/getschemajson/"><code>getSchemaJson</code></a> method used to return the tabular schema, now provided by the <a href="/api/store/interfaces/store/store/methods/getter/gettablesschemajson/"><code>getTablesSchemaJson</code></a> method. The <a href="/api/store/interfaces/store/store/methods/getter/getschemajson/"><code>getSchemaJson</code></a> method instead now returns a two-part array of tabular schema and the keyed value schema.</p><p>The <a href="/api/store/interfaces/store/store/methods/setter/setjson/"><code>setJson</code></a> method used to take a serialization of just the tabular data object. That&#x27;s now provided by the <a href="/api/store/interfaces/store/store/methods/setter/settablesjson/"><code>setTablesJson</code></a> method, and the <a href="/api/store/interfaces/store/store/methods/setter/setjson/"><code>setJson</code></a> method instead expects a two-part array containing the tabular data and the keyed value data (as emitted by the <a href="/api/store/interfaces/store/store/methods/getter/getjson/"><code>getJson</code></a> method). However, for backwards compatibility, if the <a href="/api/store/interfaces/store/store/methods/setter/setjson/"><code>setJson</code></a> method is passed an object, it <em>will</em> set the tabular data, as it did prior to v3.0.</p><p>Along similar lines, the <a href="/api/store/interfaces/store/store/methods/setter/setschema/"><code>setSchema</code></a> method&#x27;s previous behavior is now provided by the <a href="/api/store/interfaces/store/store/methods/setter/settablesschema/"><code>setTablesSchema</code></a> method. The <a href="/api/store/interfaces/store/store/methods/setter/setschema/"><code>setSchema</code></a> method now takes two arguments, the second of which is optional, also aiding backward compatibility. The <a href="/api/store/interfaces/store/store/methods/deleter/delschema/"><code>delSchema</code></a> method removes both types of schema.</p><h3 id="v2-2">v2.2</h3><p>This release includes a new <a href="/api/tools/"><code>tools</code></a> module. These tools are not intended for production use, but are instead to be used as part of your engineering workflow to perform tasks like generating APIs from schemas, or schemas from data. For example:</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>createTools<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/tools'</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settable/">setTable</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="punctuation">{</span>
  <span class="literal-property">fido</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'dog'</span><span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="literal-property">felix</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'cat'</span><span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="literal-property">cujo</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'dog'</span><span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> tools <span class="operator">=</span> <span class="function"><a href="/api/tools/functions/creation/createtools/">createTools</a></span><span class="punctuation">(</span>store<span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> <span class="punctuation">[</span>dTs<span class="punctuation">,</span> ts<span class="punctuation">]</span> <span class="operator">=</span> tools<span class="punctuation">.</span><span class="function"><a href="/api/tools/interfaces/tools/tools/methods/modelling/getstoreapi/">getStoreApi</a></span><span class="punctuation">(</span><span class="string">'shop'</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>This will generate two files:</p><pre><code><span class="comment">// -- shop.d.ts --</span>
<span class="comment">/* Represents the 'pets' Table. */</span>
<span class="keyword">export</span> type PetsTable <span class="operator">=</span> <span class="punctuation">{</span><span class="punctuation">[</span>rowId<span class="operator">:</span> Id<span class="punctuation">]</span><span class="operator">:</span> PetsRow<span class="punctuation">}</span><span class="punctuation">;</span>
<span class="comment">/* Represents a Row when getting the content of the 'pets' Table. */</span>
<span class="keyword">export</span> type PetsRow <span class="operator">=</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> string<span class="punctuation">}</span><span class="punctuation">;</span>
<span class="comment">//...</span>

<span class="comment">// -- shop.ts --</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="literal-property">createShop</span><span class="operator">:</span> <span class="keyword">typeof</span> <span class="function-variable">createShopDecl</span> <span class="operator">=</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
  <span class="comment">//...</span>
<span class="punctuation">}</span><span class="punctuation">;</span>
</code></pre><p>This release includes a new <code>tinybase</code> CLI tool which allows you to generate Typescript definition and implementation files direct from a schema file:</p><pre><code>npx tinybase getStoreApi schema.json shop api

    Definition: <span class="punctuation">[</span><span class="punctuation">..</span>.<span class="punctuation">]</span>/api/shop.d.ts
Implementation: <span class="punctuation">[</span><span class="punctuation">..</span>.<span class="punctuation">]</span>/api/shop.ts
</code></pre><p>Finally, the <a href="/api/tools/"><code>tools</code></a> module also provides ways to track the overall size and structure of a <a href="/api/store/interfaces/store/store/"><code>Store</code></a> for use while debugging.</p><h3 id="v2-1">v2.1</h3><p>This release allows you to create indexes where a single <a href="/api/store/type-aliases/store/row/"><code>Row</code></a> <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a> can exist in multiple slices. You can utilize this to build simple keyword searches, for example.</p><p>Simply provide a custom getSliceIdOrIds function in the <a href="/api/indexes/interfaces/indexes/indexes/methods/configuration/setindexdefinition/"><code>setIndexDefinition</code></a> method that returns an array of <a href="/api/indexes/type-aliases/concept/slice/"><code>Slice</code></a> <a href="/api/common/type-aliases/identity/ids/"><code>Ids</code></a>, rather than a single <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a>:</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>createIndexes<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase'</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settable/">setTable</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="punctuation">{</span>
  <span class="literal-property">fido</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'dog'</span><span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="literal-property">felix</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'cat'</span><span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="literal-property">rex</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'dog'</span><span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> indexes <span class="operator">=</span> <span class="function"><a href="/api/indexes/functions/creation/createindexes/">createIndexes</a></span><span class="punctuation">(</span>store<span class="punctuation">)</span><span class="punctuation">;</span>
indexes<span class="punctuation">.</span><span class="function"><a href="/api/indexes/interfaces/indexes/indexes/methods/configuration/setindexdefinition/">setIndexDefinition</a></span><span class="punctuation">(</span><span class="string">'containsLetter'</span><span class="punctuation">,</span> <span class="string">'pets'</span><span class="punctuation">,</span> <span class="punctuation">(</span><span class="parameter">_<span class="punctuation">,</span> rowId</span><span class="punctuation">)</span> <span class="operator">=></span>
  rowId<span class="punctuation">.</span><span class="function">split</span><span class="punctuation">(</span><span class="string">''</span><span class="punctuation">)</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>

console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>indexes<span class="punctuation">.</span><span class="function"><a href="/api/indexes/interfaces/indexes/indexes/methods/getter/getsliceids/">getSliceIds</a></span><span class="punctuation">(</span><span class="string">'containsLetter'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> ['f', 'i', 'd', 'o', 'e', 'l', 'x', 'r']</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>indexes<span class="punctuation">.</span><span class="function"><a href="/api/indexes/interfaces/indexes/indexes/methods/getter/getslicerowids/">getSliceRowIds</a></span><span class="punctuation">(</span><span class="string">'containsLetter'</span><span class="punctuation">,</span> <span class="string">'i'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> ['fido', 'felix']</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>indexes<span class="punctuation">.</span><span class="function"><a href="/api/indexes/interfaces/indexes/indexes/methods/getter/getslicerowids/">getSliceRowIds</a></span><span class="punctuation">(</span><span class="string">'containsLetter'</span><span class="punctuation">,</span> <span class="string">'x'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> ['felix', 'rex']</span>
</code></pre><p>This functionality is showcased in the <a href="/demos/word-frequencies/">Word Frequencies</a> demo if you would like to see it in action.</p><h3 id="v2-0">v2.0</h3><p><strong>Announcing the next major version of <a href="/">TinyBase</a> 2.0!</strong> This is an exciting release that evolves <a href="/">TinyBase</a> towards becoming a reactive, relational data store, complete with querying, sorting, and pagination. Here are a few of the highlights...</p><h4 id="query-engine">Query Engine</h4><p>The <a href="/guides/making-queries/using-queries/">flagship feature</a> of this release is the new <a href="/api/queries/"><code>queries</code></a> module. This allows you to build expressive queries against your data with a SQL-adjacent API that we&#x27;ve cheekily called <a href="/guides/making-queries/tinyql/">TinyQL</a>. The query engine lets you select, join, filter, group, sort and paginate data. And of course, it&#x27;s all reactive!</p><p>The best way to see the power of this new engine is with the two new demos we&#x27;ve included this release:</p><p><img src="/car-analysis.webp" alt="Thumbnail of demo" title="Thumbnail of demo"> The <a href="/demos/car-analysis/">Car Analysis</a> demo showcases the analytical query capabilities of <a href="/">TinyBase</a> v2.0, grouping and sorting dimensional data for lightweight analytical usage, graphing, and tabular display. <em><a href="/demos/car-analysis/">Try this demo here</a>.</em></p><p><img src="/movie-database.webp" alt="Thumbnail of demo" title="Thumbnail of demo"> The <a href="/demos/movie-database/">Movie Database</a> demo showcases the relational query capabilities of <a href="/">TinyBase</a> v2.0, joining together information about movies, directors, and actors from across multiple source tables. <em><a href="/demos/movie-database/">Try this demo here</a>.</em></p><h4 id="sorting-and-pagination">Sorting and Pagination</h4><p>To complement the query engine, you can now sort and paginate <a href="/api/store/type-aliases/store/row/"><code>Row</code></a> <a href="/api/common/type-aliases/identity/ids/"><code>Ids</code></a>. This makes it very easy to build grid-like user interfaces (also shown in the demos above). To achieve this, the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> now includes the <a href="/api/store/interfaces/store/store/methods/getter/getsortedrowids/"><code>getSortedRowIds</code></a> method (and the <a href="/api/store/interfaces/store/store/methods/listener/addsortedrowidslistener/"><code>addSortedRowIdsListener</code></a> method for reactivity), and the <a href="/api/queries/interfaces/queries/queries/"><code>Queries</code></a> object includes the equivalent <a href="/api/queries/interfaces/queries/queries/methods/result/getresultsortedrowids/"><code>getResultSortedRowIds</code></a> method and <a href="/api/queries/interfaces/queries/queries/methods/listener/addresultsortedrowidslistener/"><code>addResultSortedRowIdsListener</code></a> method.</p><p>These are also exposed in the optional <a href="/api/ui-react/"><code>ui-react</code></a> module via the <a href="/api/ui-react/functions/store-hooks/usesortedrowids/"><code>useSortedRowIds</code></a> hook, the <a href="/api/ui-react/functions/queries-hooks/useresultsortedrowids/"><code>useResultSortedRowIds</code></a> hook, the <a href="/api/ui-react/functions/store-components/sortedtableview/"><code>SortedTableView</code></a> component and the <a href="/api/ui-react/functions/queries-components/resultsortedtableview/"><code>ResultSortedTableView</code></a> component, and so on.</p><h4 id="queries-in-the-ui-react-module"><a href="/api/queries/interfaces/queries/queries/"><code>Queries</code></a> in the <a href="/api/ui-react/"><code>ui-react</code></a> module</h4><p>The v2.0 query functionality is fully supported by the <a href="/api/ui-react/"><code>ui-react</code></a> module (to match support for <a href="/api/store/interfaces/store/store/"><code>Store</code></a>, <a href="/api/metrics/interfaces/metrics/metrics/"><code>Metrics</code></a>, <a href="/api/indexes/interfaces/indexes/indexes/"><code>Indexes</code></a>, and <a href="/api/relationships/type-aliases/concept/relationship/"><code>Relationship</code></a> objects). The <a href="/api/ui-react/functions/queries-hooks/usecreatequeries/"><code>useCreateQueries</code></a> hook memoizes the creation of app- or component-wide Query objects; and the <a href="/api/ui-react/functions/queries-hooks/useresulttable/"><code>useResultTable</code></a> hook, <a href="/api/ui-react/functions/queries-hooks/useresultrow/"><code>useResultRow</code></a> hook, <a href="/api/ui-react/functions/queries-hooks/useresultcell/"><code>useResultCell</code></a> hook (and so on) let you bind you component to the results of a query.</p><p>This is, of course, supplemented with higher-level components: the <a href="/api/ui-react/functions/queries-components/resulttableview/"><code>ResultTableView</code></a> component, the <a href="/api/ui-react/functions/queries-components/resultrowview/"><code>ResultRowView</code></a> component, the <a href="/api/ui-react/functions/queries-components/resultcellview/"><code>ResultCellView</code></a> component, and so on. See the <a href="/guides/using-queries/building-a-ui-with-queries/">Building A UI With Queries</a> guide for more details.</p><h4 id="it-s-a-big-release">It&#x27;s a big release!</h4><p>Thank you for all your support as we brought this important new release to life, and we hope you enjoy using it as much as we did building it. Please provide feedback via <a href="https://github.com/tinyplex/tinybase">Github</a> and <a href="https://twitter.com/tinybasejs">Twitter</a>!</p><h3 id="v1-3">v1.3</h3><p>Adds support for explicit transaction start and finish methods, as well as listeners for transactions finishing.</p><p>The <a href="/api/store/interfaces/store/store/methods/transaction/starttransaction/"><code>startTransaction</code></a> method and <a href="/api/store/interfaces/store/store/methods/transaction/finishtransaction/"><code>finishTransaction</code></a> method allow you to explicitly enclose a transaction that will make multiple mutations to the <a href="/api/store/interfaces/store/store/"><code>Store</code></a>, buffering all calls to the relevant listeners until it completes when you call the <a href="/api/store/interfaces/store/store/methods/transaction/finishtransaction/"><code>finishTransaction</code></a> method.</p><p>Unlike the <a href="/api/store/interfaces/store/store/methods/transaction/transaction/"><code>transaction</code></a> method, this approach is useful when you have a more &#x27;open-ended&#x27; transaction, such as one containing mutations triggered from other events that are asynchronous or not occurring inline to your code. You must remember to also call the <a href="/api/store/interfaces/store/store/methods/transaction/finishtransaction/"><code>finishTransaction</code></a> method explicitly when the transaction is started with the <a href="/api/store/interfaces/store/store/methods/transaction/starttransaction/"><code>startTransaction</code></a> method, of course.</p><pre><code>store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settables/">setTables</a></span><span class="punctuation">(</span><span class="punctuation">{</span><span class="literal-property">pets</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">fido</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'dog'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/listener/addrowlistener/">addRowListener</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">,</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="string">'Fido changed'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/transaction/starttransaction/">startTransaction</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setcell/">setCell</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">,</span> <span class="string">'color'</span><span class="punctuation">,</span> <span class="string">'brown'</span><span class="punctuation">)</span><span class="punctuation">;</span>
store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setcell/">setCell</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">,</span> <span class="string">'sold'</span><span class="punctuation">,</span> <span class="boolean">true</span><span class="punctuation">)</span><span class="punctuation">;</span>
store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/transaction/finishtransaction/">finishTransaction</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Fido changed'</span>
</code></pre><p>In addition, see the <a href="/api/store/interfaces/store/store/methods/listener/addwillfinishtransactionlistener/"><code>addWillFinishTransactionListener</code></a> method and the <a href="/api/store/interfaces/store/store/methods/listener/adddidfinishtransactionlistener/"><code>addDidFinishTransactionListener</code></a> method for details around listening to transactions completing.</p><p>Together, this release allows stores to couple their transaction life-cycles together, which we need for the query engine.</p><p>Note: this API was updated to be more comprehensive in v4.0.</p><h3 id="v1-2">v1.2</h3><p>This adds a way to revert transactions if they have not met certain conditions.</p><p>When using the <a href="/api/store/interfaces/store/store/methods/transaction/transaction/"><code>transaction</code></a> method, you can provide an optional <code>doRollback</code> callback which should return true if you want to revert the whole transaction at its conclusion.</p><p>The callback is provided with two objects, <code>changedCells</code> and <code>invalidCells</code>, which list all the net changes and invalid attempts at changes that were made during the transaction. You will most likely use the contents of those objects to decide whether the transaction should be rolled back.</p><p>Note: this API was updated to be more comprehensive in v4.0.</p><h3 id="v1-1">v1.1</h3><p>This release allows you to listen to invalid data being added to a <a href="/api/store/interfaces/store/store/"><code>Store</code></a>, allowing you to gracefully handle errors, rather than them failing silently.</p><p>There is a new listener type <a href="/api/store/type-aliases/listener/invalidcelllistener/"><code>InvalidCellListener</code></a> and a <a href="/api/store/interfaces/store/store/methods/listener/addinvalidcelllistener/"><code>addInvalidCellListener</code></a> method in the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> interface.</p><p>These allow you to keep track of failed attempts to update the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> with invalid <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> data. These listeners can also be mutators, allowing you to address any failed writes programmatically.</p><p>For more information, please see the <a href="/api/store/interfaces/store/store/methods/listener/addinvalidcelllistener/"><code>addInvalidCellListener</code></a> method documentation. In particular, this explains how this listener behaves for a <a href="/api/store/interfaces/store/store/"><code>Store</code></a> with a <a href="/api/store/type-aliases/schema/tablesschema/"><code>TablesSchema</code></a>.</p></section></article><aside></aside></main><footer><nav><a id="tw" href="https://twitter.com/tinybasejs" target="_blank">Twitter</a><a id="fb" href="https://facebook.com/tinybasejs" target="_blank">Facebook</a></nav><nav><a href="/">TinyBase 5.0.0-beta.27</a> Â© 2021- All Rights Reserved</nav></footer></body><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-D1MGR8VRWJ"></script><script>window.dataLayer=window.dataLayer||[];function g(){dataLayer.push(arguments);}g('js',new Date());g('config','G-D1MGR8VRWJ');</script></html>