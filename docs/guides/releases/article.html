<nav><ul><li><a href="/">TinyBase</a></li><li><a href="/guides">Guides</a></li></ul></nav><section class="s1" id="/guides/releases" data-id="R"><h1>Releases</h1><p>This is a reverse chronological list of the major <a href="/">TinyBase</a> releases, with highlighted features.</p><h3 id="v1-3-0">v1.3.0</h3><p>Adds support for explicit transaction start and finish methods, as well as listeners for transactions finishing.</p><p>The <a href="/api/store/interfaces/store/store/methods/transaction/starttransaction"><code>startTransaction</code></a> method and <a href="/api/store/interfaces/store/store/methods/transaction/finishtransaction"><code>finishTransaction</code></a> method allow you to explicitly enclose a transaction that will make multiple mutations to the <a href="/api/store/interfaces/store/store"><code>Store</code></a>, buffering all calls to the relevant listeners until it completes when you call the <a href="/api/store/interfaces/store/store/methods/transaction/finishtransaction"><code>finishTransaction</code></a> method.</p><p>Unlike the <a href="/api/store/interfaces/store/store/methods/transaction/transaction"><code>transaction</code></a> method, this approach is useful when you have a more &#x27;open-ended&#x27; transaction, such as one containing mutations triggered from other events that are asynchronous or not occurring inline to your code. You must remember to also call the <a href="/api/store/interfaces/store/store/methods/transaction/finishtransaction"><code>finishTransaction</code></a> method explicitly when the transaction is started with the <a href="/api/store/interfaces/store/store/methods/transaction/starttransaction"><code>startTransaction</code></a> method, of course.</p><pre><code><span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/store/functions/creation/createstore">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settables">setTables</a></span><span class="punctuation">(</span><span class="punctuation">{</span><span class="literal-property">pets</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">fido</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'dog'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/listener/addrowlistener">addRowListener</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">,</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="string">'Fido changed'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/transaction/starttransaction">startTransaction</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setcell">setCell</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">,</span> <span class="string">'color'</span><span class="punctuation">,</span> <span class="string">'brown'</span><span class="punctuation">)</span><span class="punctuation">;</span>
store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setcell">setCell</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">,</span> <span class="string">'sold'</span><span class="punctuation">,</span> <span class="boolean">true</span><span class="punctuation">)</span><span class="punctuation">;</span>
store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/transaction/finishtransaction">finishTransaction</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Fido changed'</span>
</code></pre><p>In addition, see the <a href="/api/store/interfaces/store/store/methods/listener/addwillfinishtransactionlistener"><code>addWillFinishTransactionListener</code></a> method and the <a href="/api/store/interfaces/store/store/methods/listener/adddidfinishtransactionlistener"><code>addDidFinishTransactionListener</code></a> method for details around listening to transactions completing.</p><pre><code>store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/listener/addwillfinishtransactionlistener">addWillFinishTransactionListener</a></span><span class="punctuation">(</span><span class="punctuation">(</span><span class="parameter">store<span class="punctuation">,</span> cellsTouched</span><span class="punctuation">)</span> <span class="operator">=></span>
  console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="template-string"><span class="template-punctuation">`</span><span class="string">Cells touched: </span><span class="interpolation"><span class="interpolation-punctuation">${</span>cellsTouched<span class="interpolation-punctuation">}</span></span><span class="template-punctuation">`</span></span><span class="punctuation">)</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/transaction/transaction">transaction</a></span><span class="punctuation">(</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setcell">setCell</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">,</span> <span class="string">'species'</span><span class="punctuation">,</span> <span class="string">'dog'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Cells touched: false'</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/transaction/transaction">transaction</a></span><span class="punctuation">(</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setcell">setCell</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">,</span> <span class="string">'color'</span><span class="punctuation">,</span> <span class="string">'walnut'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Cells touched: true'</span>
<span class="comment">// -> 'Fido changed'</span>
</code></pre><p>Together, this release allows stores to couple their transaction life-cycles together, which we need for the query engine.</p><h3 id="v1-2-0">v1.2.0</h3><p>This adds a way to revert transactions if they have not met certain conditions.</p><p>When using the <a href="/api/store/interfaces/store/store/methods/transaction/transaction"><code>transaction</code></a> method, you can provide an optional doRollback callback which should return true if you want to revert the whole transaction at its conclusion.</p><p>The callback is provided with two objects, changedCells and invalidCells, which list all the net changes and invalid attempts at changes that were made during the transaction. You will most likely use the contents of those objects to decide whether the transaction should be rolled back.</p><h3 id="v1-1-0">v1.1.0</h3><p>This release allows you to listen to invalid data being added to a <a href="/api/store/interfaces/store/store"><code>Store</code></a>, allowing you to gracefully handle errors, rather than them failing silently.</p><p>There is a new listener type <a href="/api/store/type-aliases/listener/invalidcelllistener"><code>InvalidCellListener</code></a> and a <a href="/api/store/interfaces/store/store/methods/listener/addinvalidcelllistener"><code>addInvalidCellListener</code></a> method in the <a href="/api/store/interfaces/store/store"><code>Store</code></a> interface.</p><p>These allow you to keep track of failed attempts to update the <a href="/api/store/interfaces/store/store"><code>Store</code></a> with invalid <a href="/api/store/type-aliases/store/cell"><code>Cell</code></a> data. These listeners can also be mutators, allowing you to address any failed writes programmatically.</p><p>For more information, please see the addInvalidCellListener documentation. In particular, this explains how this listener behaves for a <a href="/api/store/interfaces/store/store"><code>Store</code></a> with a <a href="/api/store/type-aliases/schema/schema"><code>Schema</code></a>.</p></section>