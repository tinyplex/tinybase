<nav><ul><li><a href="/">TinyBase</a></li><li><a href="/guides/">Guides</a></li><li><a href="/guides/schemas/">Schemas</a></li><li><a href="/guides/schemas/schema-based-typing/">Schema-Based Typing</a></li></ul></nav><section class="s1" id="/guides/schemas/schema-based-typing/" data-id="SBT"><h1>Schema-Based Typing</h1><p>You can use type definitions that infer API types from the schemas you apply, providing a powerful way to improve your developer experience when you know the shape of the data being stored.</p><p>The schema-based definitions can be accessed by adding the <code>with-schemas</code> suffix to your imports. For example:</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>createStore<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/with-schemas'</span><span class="punctuation">;</span>

<span class="comment">// NB the 'with-schemas'</span>

<span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/the-essentials/creating-stores/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setvaluesschema/">setValuesSchema</a></span><span class="punctuation">(</span><span class="punctuation">{</span>
  employees<span class="operator">:</span> <span class="punctuation">{</span>type<span class="operator">:</span> <span class="string">'number'</span><span class="punctuation">}</span><span class="punctuation">,</span>
  open<span class="operator">:</span> <span class="punctuation">{</span>type<span class="operator">:</span> <span class="string">'boolean'</span><span class="punctuation">,</span> <span class="keyword">default</span><span class="operator">:</span> <span class="boolean">false</span><span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setvalues/">setValues</a></span><span class="punctuation">(</span><span class="punctuation">{</span>employees<span class="operator">:</span> <span class="number">3</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span> <span class="comment">//                      OK</span>
store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setvalues/">setValues</a></span><span class="punctuation">(</span><span class="punctuation">{</span>employees<span class="operator">:</span> <span class="boolean">true</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span> <span class="comment">//                   TypeScript error</span>
store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setvalues/">setValues</a></span><span class="punctuation">(</span><span class="punctuation">{</span>employees<span class="operator">:</span> <span class="number">3</span><span class="punctuation">,</span> website<span class="operator">:</span> <span class="string">'pets.com'</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span> <span class="comment">// TypeScript error</span>
</code></pre><p>In this example, the store is known to have the <a href="/api/store/type-aliases/schema/valuesschema/"><code>ValuesSchema</code></a> provided, and all relevant methods will have type constraints accordingly, even for listeners:</p><pre><code>store<span class="punctuation">.</span><span class="function"><a href="/api/the-essentials/listening-for-changes/addvaluelistener/">addValueListener</a></span><span class="punctuation">(</span><span class="keyword">null</span><span class="punctuation">,</span> <span class="punctuation">(</span>store<span class="punctuation">,</span> valueId<span class="punctuation">,</span> newValue<span class="punctuation">,</span> oldValue<span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
  valueId <span class="operator">==</span> <span class="string">'employees'</span><span class="punctuation">;</span> <span class="comment">// OK</span>
  valueId <span class="operator">==</span> <span class="string">'open'</span><span class="punctuation">;</span> <span class="comment">//      OK</span>
  valueId <span class="operator">==</span> <span class="string">'website'</span><span class="punctuation">;</span> <span class="comment">//   TypeScript error</span>

  <span class="keyword">if</span> <span class="punctuation">(</span>valueId <span class="operator">==</span> <span class="string">'employees'</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    newValue <span class="keyword">as</span> <span class="builtin">number</span><span class="punctuation">;</span> <span class="comment">//   OK</span>
    oldValue <span class="keyword">as</span> <span class="builtin">number</span><span class="punctuation">;</span> <span class="comment">//   OK</span>
    newValue <span class="keyword">as</span> <span class="builtin">boolean</span><span class="punctuation">;</span> <span class="comment">//  TypeScript error</span>
    oldValue <span class="keyword">as</span> <span class="builtin">boolean</span><span class="punctuation">;</span> <span class="comment">//  TypeScript error</span>
  <span class="punctuation">}</span>
  <span class="keyword">if</span> <span class="punctuation">(</span>valueId <span class="operator">==</span> <span class="string">'open'</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    newValue <span class="keyword">as</span> <span class="builtin">boolean</span><span class="punctuation">;</span> <span class="comment">//  OK</span>
    oldValue <span class="keyword">as</span> <span class="builtin">boolean</span><span class="punctuation">;</span> <span class="comment">//  OK</span>
  <span class="punctuation">}</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><h3 id="getting-the-typed-store">Getting the Typed <a href="/api/the-essentials/creating-stores/store/"><code>Store</code></a></h3><p>Only the <a href="/api/store/interfaces/store/store/methods/setter/setschema/"><code>setSchema</code></a> method, <a href="/api/store/interfaces/store/store/methods/setter/settablesschema/"><code>setTablesSchema</code></a> method, and <a href="/api/store/interfaces/store/store/methods/setter/setvaluesschema/"><code>setValuesSchema</code></a> method return a typed <a href="/api/the-essentials/creating-stores/store/"><code>Store</code></a> object. So, to benefit from the typing, ensure you assign your <a href="/api/the-essentials/creating-stores/store/"><code>Store</code></a> variable to what those methods return, rather than just the <a href="/api/the-essentials/creating-stores/createstore/"><code>createStore</code></a> function.</p><p>For example, the following will work at runtime, but you will <em>not</em> benefit from the developer experience of typing on the <code>store</code> variable as we did in the example above.</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>createStore<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/with-schemas'</span><span class="punctuation">;</span>

<span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/the-essentials/creating-stores/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span> <span class="comment">// This is not a schema-typed Store</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setvaluesschema/">setValuesSchema</a></span><span class="punctuation">(</span><span class="punctuation">{</span>
  employees<span class="operator">:</span> <span class="punctuation">{</span>type<span class="operator">:</span> <span class="string">'number'</span><span class="punctuation">}</span><span class="punctuation">,</span>
  open<span class="operator">:</span> <span class="punctuation">{</span>type<span class="operator">:</span> <span class="string">'boolean'</span><span class="punctuation">,</span> <span class="keyword">default</span><span class="operator">:</span> <span class="boolean">false</span><span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span> <span class="comment">// Instead you should use the return type from this method</span>
</code></pre><p>One further thing to be aware of is that for the typing to work effectively, the schema must be passed in directly, or, if it is a variable, as a constant:</p><pre><code><span class="keyword">const</span> valuesSchema <span class="operator">=</span> <span class="punctuation">{</span>
  employees<span class="operator">:</span> <span class="punctuation">{</span>type<span class="operator">:</span> <span class="string">'number'</span><span class="punctuation">}</span><span class="punctuation">,</span>
  open<span class="operator">:</span> <span class="punctuation">{</span>type<span class="operator">:</span> <span class="string">'boolean'</span><span class="punctuation">,</span> <span class="keyword">default</span><span class="operator">:</span> <span class="boolean">false</span><span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span> <span class="keyword">as</span> <span class="keyword">const</span><span class="punctuation">;</span> <span class="comment">// NB the `as const` modifier</span>
store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setvaluesschema/">setValuesSchema</a></span><span class="punctuation">(</span>valuesSchema<span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>It&#x27;s worth noting that typing will adapt according to schemas being added, removed, or changed:</p><pre><code><span class="keyword">const</span> tablesSchema <span class="operator">=</span> <span class="punctuation">{</span>
  pets<span class="operator">:</span> <span class="punctuation">{</span>species<span class="operator">:</span> <span class="punctuation">{</span>type<span class="operator">:</span> <span class="string">'string'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span> <span class="keyword">as</span> <span class="keyword">const</span><span class="punctuation">;</span>

<span class="keyword">const</span> valuesSchema <span class="operator">=</span> <span class="punctuation">{</span>
  employees<span class="operator">:</span> <span class="punctuation">{</span>type<span class="operator">:</span> <span class="string">'number'</span><span class="punctuation">}</span><span class="punctuation">,</span>
  open<span class="operator">:</span> <span class="punctuation">{</span>type<span class="operator">:</span> <span class="string">'boolean'</span><span class="punctuation">,</span> <span class="keyword">default</span><span class="operator">:</span> <span class="boolean">false</span><span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span> <span class="keyword">as</span> <span class="keyword">const</span><span class="punctuation">;</span>

<span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/the-essentials/creating-stores/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> storeWithBothSchemas <span class="operator">=</span> store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setschema/">setSchema</a></span><span class="punctuation">(</span>tablesSchema<span class="punctuation">,</span> valuesSchema<span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> storeWithJustValuesSchema <span class="operator">=</span> storeWithBothSchemas<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/deleter/deltablesschema/">delTablesSchema</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> storeWithValuesAndNewTablesSchema <span class="operator">=</span> storeWithBothSchemas<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settablesschema/">setTablesSchema</a></span><span class="punctuation">(</span><span class="punctuation">{</span>
  pets<span class="operator">:</span> <span class="punctuation">{</span>
    species<span class="operator">:</span> <span class="punctuation">{</span>type<span class="operator">:</span> <span class="string">'string'</span><span class="punctuation">}</span><span class="punctuation">,</span>
    sold<span class="operator">:</span> <span class="punctuation">{</span>type<span class="operator">:</span> <span class="string">'boolean'</span><span class="punctuation">,</span> <span class="keyword">default</span><span class="operator">:</span> <span class="boolean">false</span><span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><h3 id="typing-the-ui-react-module">Typing The ui-react Module</h3><p>Schema-based typing for the <a href="/api/ui-react/"><code>ui-react</code></a> module is handled a little differently, due to the fact that all of the hooks and components are top level functions in the module. It would be frustrating to apply a schema to type each and every one in turn.</p><p>Instead, you can use the <code>WithSchemas</code> type (which takes the <code>typeof</code> the schemas), and the following pattern after your import. This applies the schema types to the whole module en masse, and then you can select the hooks and components you want to use:</p><pre><code><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="operator">*</span> <span class="keyword">as</span> UiReact <span class="keyword">from</span> <span class="string">'tinybase/ui-react/with-schemas'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">{</span>createStore<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/with-schemas'</span><span class="punctuation">;</span>

<span class="keyword">const</span> tablesSchema <span class="operator">=</span> <span class="punctuation">{</span>pets<span class="operator">:</span> <span class="punctuation">{</span>species<span class="operator">:</span> <span class="punctuation">{</span>type<span class="operator">:</span> <span class="string">'string'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">}</span> <span class="keyword">as</span> <span class="keyword">const</span><span class="punctuation">;</span>
<span class="keyword">const</span> valuesSchema <span class="operator">=</span> <span class="punctuation">{</span>employees<span class="operator">:</span> <span class="punctuation">{</span>type<span class="operator">:</span> <span class="string">'number'</span><span class="punctuation">}</span><span class="punctuation">}</span> <span class="keyword">as</span> <span class="keyword">const</span><span class="punctuation">;</span>

<span class="comment">// Cast the whole module to be schema-based with WithSchemas:</span>
<span class="keyword">const</span> UiReactWithSchemas <span class="operator">=</span> UiReact <span class="keyword">as</span> UiReact<span class="punctuation">.</span>WithSchemas<span class="operator">&lt;</span>
  <span class="punctuation">[</span><span class="keyword">typeof</span> tablesSchema<span class="punctuation">,</span> <span class="keyword">typeof</span> valuesSchema<span class="punctuation">]</span>
<span class="operator">></span><span class="punctuation">;</span>
<span class="comment">// Deconstruct to access the hooks and components you need:</span>
<span class="keyword">const</span> <span class="punctuation">{</span>TableView<span class="punctuation">,</span> useTable<span class="punctuation">,</span> ValueView<span class="punctuation">}</span> <span class="operator">=</span> UiReactWithSchemas<span class="punctuation">;</span>

<span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/the-essentials/creating-stores/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setschema/">setSchema</a></span><span class="punctuation">(</span>tablesSchema<span class="punctuation">,</span> valuesSchema<span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> <span class="function-variable">App</span> <span class="operator">=</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">(</span>
  <span class="tag"><span class="tag"><span class="punctuation">&lt;</span>div</span><span class="punctuation">></span></span><span class="plain-text">
    </span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name"><a href="/api/ui-react/functions/store-components/tableview/">TableView</a></span></span> <span class="attr-name">store</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span>store<span class="punctuation">}</span></span> <span class="attr-name">tableId</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>species<span class="punctuation">"</span></span> <span class="punctuation">/></span></span><span class="plain-text"> </span><span class="punctuation">{</span><span class="comment">/*   OK               */</span><span class="punctuation">}</span><span class="plain-text">
    </span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name"><a href="/api/ui-react/functions/store-components/tableview/">TableView</a></span></span> <span class="attr-name">store</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span>store<span class="punctuation">}</span></span> <span class="attr-name">tableId</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>customers<span class="punctuation">"</span></span> <span class="punctuation">/></span></span><span class="plain-text"> </span><span class="punctuation">{</span><span class="comment">/* TypeScript error */</span><span class="punctuation">}</span><span class="plain-text">
    </span><span class="punctuation">{</span><span class="comment">/* ... */</span><span class="punctuation">}</span><span class="plain-text">
  </span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span>div</span><span class="punctuation">></span></span>
<span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>Note that in React Native, the resolution of modules and types isn&#x27;t yet quite compatible with Node and TypeScript. You may need to try something like the following to explicitly load code and types from different folders:</p><pre><code><span class="comment">// code</span>
<span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="operator">*</span> <span class="keyword">as</span> UiReact <span class="keyword">from</span> <span class="string">'tinybase/ui-react'</span><span class="punctuation">;</span>
<span class="comment">// types</span>
<span class="keyword">import</span> <span class="keyword">type</span> <span class="punctuation">{</span>WithSchemas<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/ui-react/with-schemas'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="keyword">type</span> <span class="punctuation">{</span>
  <span class="type"><a href="/api/store/type-aliases/schema/tablesschema/">TablesSchema</a></span><span class="punctuation">,</span>
  <span class="type"><a href="/api/store/type-aliases/schema/valuesschema/">ValuesSchema</a></span><span class="punctuation">,</span>
  createStore<span class="punctuation">,</span>
<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/with-schemas'</span><span class="punctuation">;</span>

<span class="keyword">const</span> tablesSchema <span class="operator">=</span> <span class="punctuation">{</span>pets<span class="operator">:</span> <span class="punctuation">{</span>species<span class="operator">:</span> <span class="punctuation">{</span>type<span class="operator">:</span> <span class="string">'string'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">}</span> <span class="keyword">as</span> <span class="keyword">const</span><span class="punctuation">;</span>
<span class="keyword">const</span> valuesSchema <span class="operator">=</span> <span class="punctuation">{</span>employees<span class="operator">:</span> <span class="punctuation">{</span>type<span class="operator">:</span> <span class="string">'number'</span><span class="punctuation">}</span><span class="punctuation">}</span> <span class="keyword">as</span> <span class="keyword">const</span><span class="punctuation">;</span>

<span class="keyword">const</span> UiReactWithSchemas <span class="operator">=</span> UiReact <span class="keyword">as</span> <span class="builtin">unknown</span> <span class="keyword">as</span> WithSchemas<span class="operator">&lt;</span>
  <span class="punctuation">[</span><span class="keyword">typeof</span> tablesSchema<span class="punctuation">,</span> <span class="keyword">typeof</span> valuesSchema<span class="punctuation">]</span>
<span class="operator">></span><span class="punctuation">;</span>

<span class="comment">//...</span>
</code></pre><h3 id="using-the-omni-module">Using the <code>omni</code> module</h3><p>You may also need to use the <code>unknown as</code> cast when using the <code>omni</code> module, since it exports both the <a href="/api/ui-react/"><code>ui-react</code></a> module and <a href="/api/ui-react-dom/"><code>ui-react-dom</code></a> module, and you will need to distinguish them:</p><pre><code><span class="keyword">import</span> <span class="operator">*</span> <span class="keyword">as</span> Omni <span class="keyword">from</span> <span class="string">'tinybase/omni'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="keyword">type</span> <span class="punctuation">{</span>
  UiReactDomWithSchemas<span class="punctuation">,</span>
  UiReactWithSchemas<span class="punctuation">,</span>
<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/omni/with-schemas'</span><span class="punctuation">;</span>

<span class="keyword">const</span> tablesSchema <span class="operator">=</span> <span class="punctuation">{</span>pets<span class="operator">:</span> <span class="punctuation">{</span>species<span class="operator">:</span> <span class="punctuation">{</span>type<span class="operator">:</span> <span class="string">'string'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">}</span> <span class="keyword">as</span> <span class="keyword">const</span><span class="punctuation">;</span>
<span class="keyword">const</span> valuesSchema <span class="operator">=</span> <span class="punctuation">{</span>employees<span class="operator">:</span> <span class="punctuation">{</span>type<span class="operator">:</span> <span class="string">'number'</span><span class="punctuation">}</span><span class="punctuation">}</span> <span class="keyword">as</span> <span class="keyword">const</span><span class="punctuation">;</span>
<span class="keyword">type</span> <span class="class-name">Schemas</span> <span class="operator">=</span> <span class="punctuation">[</span><span class="keyword">typeof</span> tablesSchema<span class="punctuation">,</span> <span class="keyword">typeof</span> valuesSchema<span class="punctuation">]</span><span class="punctuation">;</span>

<span class="keyword">const</span> <span class="punctuation">{</span>useCell<span class="punctuation">,</span> useValue<span class="punctuation">}</span> <span class="operator">=</span> Omni <span class="keyword">as</span> <span class="builtin">unknown</span> <span class="keyword">as</span> UiReactWithSchemas<span class="operator">&lt;</span>Schemas<span class="operator">></span><span class="punctuation">;</span>
<span class="keyword">const</span> <span class="punctuation">{</span>EditableCellView<span class="punctuation">}</span> <span class="operator">=</span> Omni <span class="keyword">as</span> <span class="builtin">unknown</span> <span class="keyword">as</span> UiReactDomWithSchemas<span class="operator">&lt;</span>Schemas<span class="operator">></span><span class="punctuation">;</span>

<span class="comment">//...</span>
</code></pre><h3 id="multiple-stores">Multiple Stores</h3><p>In the case that you have multiple <a href="/api/the-essentials/creating-stores/store/"><code>Store</code></a> objects with different schemas, you will need to use <code>WithSchemas</code> several times, and deconstruct each, something like this:</p><pre><code><span class="keyword">const</span> UiReactWithPetShopSchemas <span class="operator">=</span> UiReact <span class="keyword">as</span> UiReact<span class="punctuation">.</span>WithSchemas<span class="operator">&lt;</span>
  <span class="punctuation">[</span><span class="keyword">typeof</span> petShopTablesSchema<span class="punctuation">,</span> <span class="keyword">typeof</span> petShopValuesSchema<span class="punctuation">]</span>
<span class="operator">></span><span class="punctuation">;</span>
<span class="keyword">const</span> <span class="punctuation">{</span>
  TableView<span class="operator">:</span> PetShopTableView<span class="punctuation">,</span>
  useTable<span class="operator">:</span> usePetShopTable<span class="punctuation">,</span>
  ValueView<span class="operator">:</span> usePetShopValueView<span class="punctuation">,</span>
<span class="punctuation">}</span> <span class="operator">=</span> UiReactWithPetShopSchemas<span class="punctuation">;</span>

<span class="keyword">const</span> UiReactWithSettingsSchemas <span class="operator">=</span> UiReact <span class="keyword">as</span> UiReact<span class="punctuation">.</span>WithSchemas<span class="operator">&lt;</span>
  <span class="punctuation">[</span><span class="keyword">typeof</span> settingsTablesSchema<span class="punctuation">,</span> <span class="keyword">typeof</span> settingsValuesSchema<span class="punctuation">]</span>
<span class="operator">></span><span class="punctuation">;</span>
<span class="keyword">const</span> <span class="punctuation">{</span>
  TableView<span class="operator">:</span> SettingsTableView<span class="punctuation">,</span>
  useTable<span class="operator">:</span> useSettingsTable<span class="punctuation">,</span>
  ValueView<span class="operator">:</span> useSettingsValueView<span class="punctuation">,</span>
<span class="punctuation">}</span> <span class="operator">=</span> UiReactWithSettingsSchemas<span class="punctuation">;</span>

<span class="keyword">const</span> petShopStore <span class="operator">=</span> <span class="function"><a href="/api/the-essentials/creating-stores/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setschema/">setSchema</a></span><span class="punctuation">(</span>
  petShopTablesSchema<span class="punctuation">,</span>
  petShopValuesSchema<span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> settingsStore <span class="operator">=</span> <span class="function"><a href="/api/the-essentials/creating-stores/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setschema/">setSchema</a></span><span class="punctuation">(</span>
  settingsTablesSchema<span class="punctuation">,</span>
  settingsValuesSchema<span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> <span class="function-variable">App</span> <span class="operator">=</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">(</span>
  <span class="tag"><span class="tag"><span class="punctuation">&lt;</span>div</span><span class="punctuation">></span></span><span class="plain-text">
    </span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name">PetShopTableView</span></span> <span class="attr-name">store</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span>petShopStore<span class="punctuation">}</span></span> <span class="attr-name">tableId</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>species<span class="punctuation">"</span></span> <span class="punctuation">/></span></span><span class="plain-text">
    </span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name">SettingsTableView</span></span> <span class="attr-name">store</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span>settingsStore<span class="punctuation">}</span></span> <span class="attr-name">tableId</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>viewSettings<span class="punctuation">"</span></span> <span class="punctuation">/></span></span><span class="plain-text">
    </span><span class="punctuation">{</span><span class="comment">/* ... */</span><span class="punctuation">}</span><span class="plain-text">
  </span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span>div</span><span class="punctuation">></span></span>
<span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><h3 id="defining-schema-based-stores-in-react-components">Defining Schema-Based Stores in React Components</h3><p>One final pattern to be aware of is that you can use the <code>WithSchemas</code> type to create a schema-based <a href="/api/the-essentials/creating-stores/store/"><code>Store</code></a> in a non-rendering React component. This allows you to create a <a href="/api/the-essentials/creating-stores/store/"><code>Store</code></a> with a schema, define its persistence behavior, publish it into the context, and even expose domain-specific hooks - all in a single self-contained file.</p><p>There are good examples of this in the <a href="https://tinyhub.org/">TinyHub</a> project (see the store components <a href="https://github.com/tinyplex/tinyhub/tree/main/client/src/stores">this folder</a>).</p><p>If you want to use this pattern your app&#x27;s top-level will look something like this:</p><pre><code><span class="keyword">export</span> <span class="keyword">const</span> <span class="function-variable">App</span> <span class="operator">=</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
  <span class="keyword">return</span> <span class="punctuation">(</span>
    <span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name"><a href="/api/the-essentials/using-react/provider/">Provider</a></span></span><span class="punctuation">></span></span><span class="plain-text">
      </span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name">MyStore</span></span> <span class="punctuation">/></span></span><span class="plain-text"> </span><span class="punctuation">{</span><span class="comment">/* This is a schema-based Store component */</span><span class="punctuation">}</span><span class="plain-text">
      </span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name">ActualApp</span></span> <span class="punctuation">/></span></span><span class="plain-text"> </span><span class="punctuation">{</span><span class="comment">/* This is the actual rendered app */</span><span class="punctuation">}</span><span class="plain-text">
    </span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span><span class="class-name"><a href="/api/the-essentials/using-react/provider/">Provider</a></span></span><span class="punctuation">></span></span>
  <span class="punctuation">)</span><span class="punctuation">;</span>
<span class="punctuation">}</span><span class="punctuation">;</span>
</code></pre><p>The <code>MyStore</code> component renders <code>null</code> so it doesn&#x27;t appear visually, but it is responsible for creating the <a href="/api/the-essentials/creating-stores/store/"><code>Store</code></a> and making it available to the rest of the app via the Provider context that wraps them both.</p><p>The <code>MyStore.tsx</code> file might look something like this. (In this simplified case, we are just typing key values in our <a href="/api/the-essentials/creating-stores/store/"><code>Store</code></a> but of course this would work for a tabular <a href="/api/the-essentials/creating-stores/store/"><code>Store</code></a> too.)</p><pre><code><span class="comment">// A unique Id for this Store.</span>
<span class="keyword">const</span> <span class="constant">STORE_ID</span> <span class="operator">=</span> <span class="string">'myStore'</span><span class="punctuation">;</span>

<span class="comment">// The schema for this Store.</span>
<span class="keyword">const</span> <span class="constant">VALUES_SCHEMA</span> <span class="operator">=</span> <span class="punctuation">{</span>
  myStringValue<span class="operator">:</span> <span class="punctuation">{</span>type<span class="operator">:</span> <span class="string">'string'</span><span class="punctuation">,</span> <span class="keyword">default</span><span class="operator">:</span> <span class="string">'foo'</span><span class="punctuation">}</span><span class="punctuation">,</span>
  myNumericValue<span class="operator">:</span> <span class="punctuation">{</span>type<span class="operator">:</span> <span class="string">'number'</span><span class="punctuation">,</span> <span class="keyword">default</span><span class="operator">:</span> <span class="number">42</span><span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span> <span class="keyword">as</span> <span class="keyword">const</span><span class="punctuation">;</span>
<span class="keyword">type</span> <span class="class-name">Schemas</span> <span class="operator">=</span> <span class="punctuation">[</span><span class="type"><a href="/api/store/type-aliases/schema/notablesschema/">NoTablesSchema</a></span><span class="punctuation">,</span> <span class="keyword">typeof</span> <span class="constant">VALUES_SCHEMA</span><span class="punctuation">]</span><span class="punctuation">;</span>

<span class="comment">// Destructure the ui-react module with the schema applied.</span>
<span class="keyword">const</span> <span class="punctuation">{</span>useCreateStore<span class="punctuation">,</span> useProvideStore<span class="punctuation">,</span> useCreatePersister<span class="punctuation">,</span> useValue<span class="punctuation">}</span> <span class="operator">=</span>
  UiReact <span class="keyword">as</span> UiReact<span class="punctuation">.</span>WithSchemas<span class="operator">&lt;</span>Schemas<span class="operator">></span><span class="punctuation">;</span>

<span class="keyword">export</span> <span class="keyword">const</span> <span class="function-variable">MyStore</span> <span class="operator">=</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
  <span class="comment">// Create the Store and set its schema</span>
  <span class="keyword">const</span> myStore <span class="operator">=</span> <span class="function"><a href="/api/the-essentials/using-react/usecreatestore/">useCreateStore</a></span><span class="punctuation">(</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span>
    <span class="function"><a href="/api/the-essentials/creating-stores/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setvaluesschema/">setValuesSchema</a></span><span class="punctuation">(</span><span class="constant">VALUES_SCHEMA</span><span class="punctuation">)</span><span class="punctuation">,</span>
  <span class="punctuation">)</span><span class="punctuation">;</span>

  <span class="comment">// Create a local storage persister for the Store and start it</span>
  <span class="function"><a href="/api/ui-react/functions/persister-hooks/usecreatepersister/">useCreatePersister</a></span><span class="punctuation">(</span>
    settingsStore<span class="punctuation">,</span>
    <span class="punctuation">(</span>settingsStore<span class="punctuation">)</span> <span class="operator">=></span> <span class="function"><a href="/api/the-essentials/persisting-stores/createlocalpersister/">createLocalPersister</a></span><span class="punctuation">(</span>settingsStore<span class="punctuation">,</span> <span class="constant">STORE_ID</span><span class="punctuation">)</span><span class="punctuation">,</span>
    <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span>
    <span class="punctuation">(</span>persister<span class="punctuation">)</span> <span class="operator">=></span> persister<span class="punctuation">.</span><span class="function"><a href="/api/persisters/interfaces/persister/persister/methods/lifecycle/startautopersisting/">startAutoPersisting</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">,</span>
  <span class="punctuation">)</span><span class="punctuation">;</span>

  <span class="comment">// Provide the Store for the rest of the app.</span>
  <span class="function"><a href="/api/ui-react/functions/store-hooks/useprovidestore/">useProvideStore</a></span><span class="punctuation">(</span><span class="constant">STORE_ID</span><span class="punctuation">,</span> settingsStore<span class="punctuation">)</span><span class="punctuation">;</span>

  <span class="comment">// Don't render anything.</span>
  <span class="keyword">return</span> <span class="keyword">null</span><span class="punctuation">;</span>
<span class="punctuation">}</span><span class="punctuation">;</span>
</code></pre><p>In that same file, you can also define domain-specific hooks that use an expose the schema. For example, this hook will be typed to return a string if passed &#x27;myStringValue&#x27;, and a number if passed &#x27;myNumericValue&#x27;.</p><pre><code><span class="keyword">type</span> <span class="class-name">ValueIds</span> <span class="operator">=</span> <span class="keyword">keyof</span> <span class="keyword">typeof</span> <span class="constant">VALUES_SCHEMA</span><span class="punctuation">;</span>
<span class="keyword">export</span> <span class="keyword">const</span> useSettingsValue <span class="operator">=</span> <span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name">ValueId</span></span> <span class="attr-name">extends</span> <span class="attr-name">ValueIds</span><span class="punctuation">></span></span><span class="plain-text">(valueId: ValueId) =>
  useValue&lt;ValueId>(valueId, STORE_ID);
</span></code></pre><p>This means that the rest of the app can use <a href="/api/store/type-aliases/store/values/"><code>Values</code></a> from the <a href="/api/the-essentials/creating-stores/store/"><code>Store</code></a> with correct types, <em>and</em> the implementation details of the <a href="/api/the-essentials/creating-stores/store/"><code>Store</code></a> are encapsulated in the single file. For more complex applications, it really helps to keep everything about the <a href="/api/the-essentials/creating-stores/store/"><code>Store</code></a> in one place.</p><h3 id="summary">Summary</h3><p>Schema-based typing provides a powerful developer-time experience for checking your code and autocompletion in your IDE. Remember to use the <code>with-schema</code> suffix on the import path and use the patterns described above.</p><p>We move on to discussing more complex programmatic enforcement of your data, and for that we turn to the <a href="/guides/schemas/mutating-data-with-listeners/">Mutating Data With Listeners</a> guide.</p></section>