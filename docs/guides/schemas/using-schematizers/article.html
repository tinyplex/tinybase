<nav><ul><li><a href="/">TinyBase</a></li><li><a href="/guides/">Guides</a></li><li><a href="/guides/schemas/">Schemas</a></li><li><a href="/guides/schemas/using-schematizers/">Using Schematizers</a></li></ul></nav><section class="s1" id="/guides/schemas/using-schematizers/" data-id="US2"><h1>Using Schematizers</h1><p>Schematizers provide a convenient way to convert schemas from popular validation libraries into TinyBase&#x27;s <a href="/api/store/type-aliases/schema/tablesschema/"><code>TablesSchema</code></a> and <a href="/api/store/type-aliases/schema/valuesschema/"><code>ValuesSchema</code></a> formats.</p><p>Instead of manually writing TinyBase schemas, you can use your existing schemas from libraries like Zod, TypeBox, and Valibot, and convert them at runtime using a schematizer. The full list of supported schema systems and their entry points is as follows:</p><div class="table"><table><thead><tr><th>Library</th><th>Creation function</th></tr></thead><tbody><tr><td><a href="https://github.com/colinhacks/zod">Zod</a></td><td><a href="/api/schematizer-zod/functions/creation/createzodschematizer/"><code>createZodSchematizer</code></a></td></tr><tr><td><a href="https://github.com/sinclairzx81/typebox">TypeBox</a></td><td><a href="/api/schematizer-typebox/functions/creation/createtypeboxschematizer/"><code>createTypeBoxSchematizer</code></a></td></tr><tr><td><a href="https://github.com/valibot/valibot">Valibot</a></td><td><a href="/api/schematizer-valibot/functions/creation/createvalibotschematizer/"><code>createValibotSchematizer</code></a></td></tr><tr><td><a href="https://github.com/arktypeio/arktype">ArkType</a></td><td><a href="/api/schematizer-arktype/functions/creation/createarktypeschematizer/"><code>createArkTypeSchematizer</code></a></td></tr><tr><td><a href="https://github.com/jquense/yup">Yup</a></td><td><a href="/api/schematizer-yup/functions/creation/createyupschematizer/"><code>createYupSchematizer</code></a></td></tr><tr><td><a href="https://github.com/Effect-TS/effect">Effect Schema</a></td><td><a href="/api/schematizer-effect/functions/creation/createeffectschematizer/"><code>createEffectSchematizer</code></a></td></tr></tbody></table></div><p>The <a href="/api/schematizers/functions/creation/createcustomschematizer/"><code>createCustomSchematizer</code></a> function also allows you to create your own schematizer that convert from any schema system not supported directly by TinyBase.</p><p>The rest of this guide will cover the Zod schematizer, but the concepts are exactly the same for other schema systems. Take a look at the API documentation for the other schematizers for exact details.</p><h3 id="using-the-zod-schematizer">Using The Zod <a href="/api/schematizers/interfaces/schematizer/schematizer/"><code>Schematizer</code></a></h3><p>The Zod schematizer allows you to convert Zod schemas into TinyBase schemas. You create a schematizer with the <a href="/api/schematizer-zod/functions/creation/createzodschematizer/"><code>createZodSchematizer</code></a> function and then use its <a href="/api/schematizer-arktype/interfaces/schematizer/arktypeschematizer/methods/conversion/totablesschema/"><code>toTablesSchema</code></a> method and <a href="/api/schematizer-arktype/interfaces/schematizer/arktypeschematizer/methods/conversion/tovaluesschema/"><code>toValuesSchema</code></a> method to perform the conversion:</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>createStore<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">{</span>createZodSchematizer<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/schematizers/schematizer-zod'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">{</span>z<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'zod'</span><span class="punctuation">;</span>

<span class="keyword">const</span> schematizer <span class="operator">=</span> <span class="function"><a href="/api/schematizer-zod/functions/creation/createzodschematizer/">createZodSchematizer</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/the-essentials/creating-stores/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settablesschema/">setTablesSchema</a></span><span class="punctuation">(</span>
  schematizer<span class="punctuation">.</span><span class="function"><a href="/api/schematizer-arktype/interfaces/schematizer/arktypeschematizer/methods/conversion/totablesschema/">toTablesSchema</a></span><span class="punctuation">(</span><span class="punctuation">{</span>
    <span class="literal-property">pets</span><span class="operator">:</span> z<span class="punctuation">.</span><span class="function">object</span><span class="punctuation">(</span><span class="punctuation">{</span>
      <span class="literal-property">species</span><span class="operator">:</span> z<span class="punctuation">.</span><span class="function">string</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">,</span>
      <span class="literal-property">age</span><span class="operator">:</span> z<span class="punctuation">.</span><span class="function">number</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">,</span>
      <span class="literal-property">sold</span><span class="operator">:</span> z<span class="punctuation">.</span><span class="function">boolean</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function">default</span><span class="punctuation">(</span><span class="boolean">false</span><span class="punctuation">)</span><span class="punctuation">,</span>
    <span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">,</span>
  <span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/the-essentials/setting-data/setrow/">setRow</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'dog'</span><span class="punctuation">,</span> <span class="literal-property">age</span><span class="operator">:</span> <span class="number">3</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store<span class="punctuation">.</span><span class="function"><a href="/api/the-essentials/getting-data/getrow/">getRow</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {species: 'dog', age: 3, sold: false}</span>
</code></pre><p>The schematizer performs a best-effort conversion, extracting basic type information (string, number, boolean), defaults, and nullable settings from your Zod schemas.</p><h3 id="converting-values-schemas">Converting <a href="/api/store/type-aliases/store/values/"><code>Values</code></a> <a href="/guides/schemas/">Schemas</a></h3><p>You can also convert Zod schemas for individual values:</p><pre><code><span class="keyword">const</span> store2 <span class="operator">=</span> <span class="function"><a href="/api/the-essentials/creating-stores/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setvaluesschema/">setValuesSchema</a></span><span class="punctuation">(</span>
  schematizer<span class="punctuation">.</span><span class="function"><a href="/api/schematizer-arktype/interfaces/schematizer/arktypeschematizer/methods/conversion/tovaluesschema/">toValuesSchema</a></span><span class="punctuation">(</span><span class="punctuation">{</span>
    <span class="literal-property">theme</span><span class="operator">:</span> z<span class="punctuation">.</span><span class="function">string</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function">default</span><span class="punctuation">(</span><span class="string">'light'</span><span class="punctuation">)</span><span class="punctuation">,</span>
    <span class="literal-property">count</span><span class="operator">:</span> z<span class="punctuation">.</span><span class="function">number</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">,</span>
    <span class="literal-property">isOpen</span><span class="operator">:</span> z<span class="punctuation">.</span><span class="function">boolean</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">,</span>
  <span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>

store2<span class="punctuation">.</span><span class="function"><a href="/api/the-essentials/setting-data/setvalue/">setValue</a></span><span class="punctuation">(</span><span class="string">'count'</span><span class="punctuation">,</span> <span class="number">42</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store2<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/getter/getvalues/">getValues</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {theme: 'light', count: 42}</span>
</code></pre><p>In this example, only <code>theme</code> has a default value. The <code>count</code> and <code>isOpen</code> values don&#x27;t have defaults, so they won&#x27;t appear in the store until explicitly set.</p><h3 id="handling-nullable-and-optional-fields">Handling Nullable And Optional Fields</h3><p>The Zod schematizer understands nullable and optional fields:</p><pre><code><span class="keyword">const</span> store3 <span class="operator">=</span> <span class="function"><a href="/api/the-essentials/creating-stores/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settablesschema/">setTablesSchema</a></span><span class="punctuation">(</span>
  schematizer<span class="punctuation">.</span><span class="function"><a href="/api/schematizer-arktype/interfaces/schematizer/arktypeschematizer/methods/conversion/totablesschema/">toTablesSchema</a></span><span class="punctuation">(</span><span class="punctuation">{</span>
    <span class="literal-property">users</span><span class="operator">:</span> z<span class="punctuation">.</span><span class="function">object</span><span class="punctuation">(</span><span class="punctuation">{</span>
      <span class="literal-property">name</span><span class="operator">:</span> z<span class="punctuation">.</span><span class="function">string</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">,</span>
      <span class="literal-property">nickname</span><span class="operator">:</span> z<span class="punctuation">.</span><span class="function">string</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function">nullable</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">,</span>
      <span class="literal-property">bio</span><span class="operator">:</span> z<span class="punctuation">.</span><span class="function">string</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function">optional</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">,</span>
    <span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">,</span>
  <span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>

store3<span class="punctuation">.</span><span class="function"><a href="/api/the-essentials/setting-data/setrow/">setRow</a></span><span class="punctuation">(</span><span class="string">'users'</span><span class="punctuation">,</span> <span class="string">'alice'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">name</span><span class="operator">:</span> <span class="string">'Alice'</span><span class="punctuation">,</span> <span class="literal-property">nickname</span><span class="operator">:</span> <span class="keyword">null</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store3<span class="punctuation">.</span><span class="function"><a href="/api/the-essentials/getting-data/getrow/">getRow</a></span><span class="punctuation">(</span><span class="string">'users'</span><span class="punctuation">,</span> <span class="string">'alice'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {name: 'Alice', nickname: null}</span>
</code></pre><p>In this example, <code>nickname</code> can be set to <code>null</code> because it&#x27;s marked as nullable. The <code>bio</code> field is optional, so it doesn&#x27;t need to be provided (and TinyBase will not add a default for it since none was specified in the Zod schema).</p><h3 id="unsupported-types">Unsupported Types</h3><p>The Zod schematizer only converts basic types (string, number, boolean) and ignores complex types like arrays, objects, and records. These will simply be excluded from the resulting TinyBase schema:</p><pre><code><span class="keyword">const</span> store4 <span class="operator">=</span> <span class="function"><a href="/api/the-essentials/creating-stores/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settablesschema/">setTablesSchema</a></span><span class="punctuation">(</span>
  schematizer<span class="punctuation">.</span><span class="function"><a href="/api/schematizer-arktype/interfaces/schematizer/arktypeschematizer/methods/conversion/totablesschema/">toTablesSchema</a></span><span class="punctuation">(</span><span class="punctuation">{</span>
    <span class="literal-property">pets</span><span class="operator">:</span> z<span class="punctuation">.</span><span class="function">object</span><span class="punctuation">(</span><span class="punctuation">{</span>
      <span class="literal-property">species</span><span class="operator">:</span> z<span class="punctuation">.</span><span class="function">string</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">,</span>
      <span class="literal-property">tags</span><span class="operator">:</span> z<span class="punctuation">.</span><span class="function">array</span><span class="punctuation">(</span>z<span class="punctuation">.</span><span class="function">string</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="comment">// ignored</span>
      <span class="literal-property">metadata</span><span class="operator">:</span> z<span class="punctuation">.</span><span class="function">record</span><span class="punctuation">(</span>z<span class="punctuation">.</span><span class="function">string</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="comment">// ignored</span>
    <span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">,</span>
  <span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>

store4<span class="punctuation">.</span><span class="function"><a href="/api/the-essentials/setting-data/setrow/">setRow</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'dog'</span><span class="punctuation">,</span> <span class="literal-property">tags</span><span class="operator">:</span> <span class="punctuation">[</span><span class="string">'friendly'</span><span class="punctuation">]</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store4<span class="punctuation">.</span><span class="function"><a href="/api/the-essentials/getting-data/getrow/">getRow</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {species: 'dog'}</span>
</code></pre><h3 id="reusing-the-schematizer">Reusing The <a href="/api/schematizers/interfaces/schematizer/schematizer/"><code>Schematizer</code></a></h3><p>You can create a schematizer once and reuse it for multiple conversions:</p><pre><code><span class="keyword">const</span> schematizer2 <span class="operator">=</span> <span class="function"><a href="/api/schematizer-zod/functions/creation/createzodschematizer/">createZodSchematizer</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> tablesSchema <span class="operator">=</span> schematizer2<span class="punctuation">.</span><span class="function"><a href="/api/schematizer-arktype/interfaces/schematizer/arktypeschematizer/methods/conversion/totablesschema/">toTablesSchema</a></span><span class="punctuation">(</span><span class="punctuation">{</span>
  <span class="literal-property">pets</span><span class="operator">:</span> z<span class="punctuation">.</span><span class="function">object</span><span class="punctuation">(</span><span class="punctuation">{</span>
    <span class="literal-property">species</span><span class="operator">:</span> z<span class="punctuation">.</span><span class="function">string</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">,</span>
    <span class="literal-property">age</span><span class="operator">:</span> z<span class="punctuation">.</span><span class="function">number</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">,</span>
  <span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">,</span>
  <span class="literal-property">stores</span><span class="operator">:</span> z<span class="punctuation">.</span><span class="function">object</span><span class="punctuation">(</span><span class="punctuation">{</span>
    <span class="literal-property">name</span><span class="operator">:</span> z<span class="punctuation">.</span><span class="function">string</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">,</span>
    <span class="literal-property">city</span><span class="operator">:</span> z<span class="punctuation">.</span><span class="function">string</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">,</span>
  <span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> valuesSchema <span class="operator">=</span> schematizer2<span class="punctuation">.</span><span class="function"><a href="/api/schematizer-arktype/interfaces/schematizer/arktypeschematizer/methods/conversion/tovaluesschema/">toValuesSchema</a></span><span class="punctuation">(</span><span class="punctuation">{</span>
  <span class="literal-property">openStores</span><span class="operator">:</span> z<span class="punctuation">.</span><span class="function">number</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function">default</span><span class="punctuation">(</span><span class="number">0</span><span class="punctuation">)</span><span class="punctuation">,</span>
  <span class="literal-property">corporateName</span><span class="operator">:</span> z<span class="punctuation">.</span><span class="function">string</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function">default</span><span class="punctuation">(</span><span class="string">'Pet Store Inc'</span><span class="punctuation">)</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> store5 <span class="operator">=</span> <span class="function"><a href="/api/the-essentials/creating-stores/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setschema/">setSchema</a></span><span class="punctuation">(</span>tablesSchema<span class="punctuation">,</span> valuesSchema<span class="punctuation">)</span><span class="punctuation">;</span>

store5<span class="punctuation">.</span><span class="function"><a href="/api/the-essentials/setting-data/setrow/">setRow</a></span><span class="punctuation">(</span><span class="string">'stores'</span><span class="punctuation">,</span> <span class="string">'downtown'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">name</span><span class="operator">:</span> <span class="string">'Downtown Pets'</span><span class="punctuation">,</span> <span class="literal-property">city</span><span class="operator">:</span> <span class="string">'Boston'</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store5<span class="punctuation">.</span><span class="function"><a href="/api/the-essentials/getting-data/getrow/">getRow</a></span><span class="punctuation">(</span><span class="string">'stores'</span><span class="punctuation">,</span> <span class="string">'downtown'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {name: 'Downtown Pets', city: 'Boston'}</span>

console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store5<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/getter/getvalues/">getValues</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {openStores: 0, corporateName: 'Pet Store Inc'}</span>
</code></pre><h3 id="summary">Summary</h3><p>Schematizers provide a bridge between popular schema validation libraries and TinyBase&#x27;s schema system. They perform best-effort conversions, allowing you to reuse existing schema definitions while benefiting from TinyBase&#x27;s runtime validation and defaults.</p><p>Now that you can define and convert schemas, let&#x27;s learn how to save and load <a href="/api/the-essentials/creating-stores/store/"><code>Store</code></a> data. For that we proceed to the <a href="/guides/persistence/">Persistence</a> guides.</p></section>