<nav><ul><li><a href="/">TinyBase</a></li><li><a href="/guides/">Guides</a></li><li><a href="/guides/the-basics/">The Basics</a></li><li><a href="/guides/the-basics/importing-tinybase/">Importing TinyBase</a></li></ul></nav><section class="s1" id="/guides/the-basics/importing-tinybase/" data-id="ITB"><h1>Importing TinyBase</h1><p>This guide provides an aside about importing <a href="/">TinyBase</a> into your application.</p><h3 id="the-simplest-imports">The Simplest Imports</h3><p>The simplest import of <a href="/">TinyBase</a> is:</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>createStore<span class="punctuation">,</span> createMetrics<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase'</span><span class="punctuation">;</span>
</code></pre><p>This will get you an ESNext, ESM, non-minified import of the main <code>tinybase</code> module, (which contains most of the core functionality), and should be enough to get started. You may also want to import specific persister, synchronizer, or UI modules:</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>createSessionPersister<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/persisters/persister-browser'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">{</span>createWsSynchronizer<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/synchronizers/synchronizer-ws-client'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">{</span>useCell<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/ui-react'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">{</span>TableInHtmlTable<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/ui-react-dom'</span><span class="punctuation">;</span>
<span class="comment">// ... etc</span>
</code></pre><p>All the example code throughout these guides and the API documentation are shown with the correct imports so that you can be clear about which functions and types come from which modules.</p><h3 id="using-tinybase-submodules">Using <a href="/">TinyBase</a> Submodules</h3><p>The <code>tinybase</code> module is the master package of most of the core functionality. It includes the following submodules:</p><ul><li>The <a href="/api/store/"><code>store</code></a> module</li><li>The <a href="/api/metrics/"><code>metrics</code></a> module</li><li>The <a href="/api/indexes/"><code>indexes</code></a> module</li><li>The <a href="/api/relationships/"><code>relationships</code></a> module</li><li>The <a href="/api/queries/"><code>queries</code></a> module</li><li>The <a href="/api/checkpoints/"><code>checkpoints</code></a> module</li><li>The <a href="/api/mergeable-store/"><code>mergeable-store</code></a> module</li><li>The <a href="/api/persisters/"><code>persisters</code></a> module</li><li>The <a href="/api/synchronizers/"><code>synchronizers</code></a> module</li><li>The <a href="/api/common/"><code>common</code></a> module</li></ul><p>Since many of the submodules above share compiled-in dependencies, the master package is smaller to include than including all of the submodules separately.</p><p>However, for a very minimal set of submodules, you may save size by including them piecemeal. If you only wanted a <a href="/api/store/interfaces/store/store/"><code>Store</code></a> and a <a href="/api/metrics/interfaces/metrics/metrics/"><code>Metrics</code></a> object, for example, you could import them alone like this:</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>createStore<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/store'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">{</span>createMetrics<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/metrics'</span><span class="punctuation">;</span>
<span class="comment">// ...</span>
</code></pre><p>With a good minifier in your application bundler, however, you may find that this level of granularity is unnecessary, and that you can just stick with the overall <code>tinybase</code> module for most things.</p><h3 id="targets-and-formats">Targets And Formats</h3><p>The complete <a href="/">TinyBase</a> NPM package includes a number of different versions of each module, transpiled for different targets and formats. You&#x27;ll find them all directly under the top-level of the package:</p><ul><li>The default target is ESNext, but ES6 versions are available in <code>es6</code> sub-folders.</li><li>The default is non-minified code, but minified versions are available in the <code>min</code> folders.</li></ul><p>These options are added to the path (after <code>tinybase</code>) when you import. So for example, the default ESNext, non-minified ESM import of the main <code>tinybase</code> module would be:</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>createStore<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase'</span><span class="punctuation">;</span>
</code></pre><p>Conversely, the ES6, <em>minified</em> ESM import of the main <code>tinybase</code> module would be:</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>createStore<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/es6/min'</span><span class="punctuation">;</span>
</code></pre><p>...and of course <code>tinybase/es6</code> and <code>tinybase/min</code> specify non-minified ES6, and minified ESNext, respectively.</p><p>As seen above, the default format is ESM, but CJS versions are available in <code>cjs</code> sub-folders. These are automatically used when you use <code>require</code> in a CJS environment, rather than <code>import</code> in ESM:</p><pre><code><span class="keyword">const</span> <span class="punctuation">{</span>createStore<span class="punctuation">}</span> <span class="operator">=</span> <span class="function">require</span><span class="punctuation">(</span><span class="string">'tinybase'</span><span class="punctuation">)</span><span class="punctuation">;</span> <span class="comment">// will load tinybase/cjs/index.cjs</span>
</code></pre><p>You can combine target paths with this too. This will load the ES6, minified CJS module, for example:</p><pre><code><span class="keyword">const</span> <span class="punctuation">{</span>createStore<span class="punctuation">}</span> <span class="operator">=</span> <span class="function">require</span><span class="punctuation">(</span><span class="string">'tinybase/es6/min'</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>...and so on.</p><h3 id="indicating-schema-based-typing">Indicating Schema-based Typing</h3><p>As we will see in more details in the following <a href="/guides/the-basics/tinybase-and-typescript/">TinyBase and TypeScript</a> guide, it is possible to use schema-aware type definitions by appending <code>with-schemas</code> to the very end of the path like this:</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>createStore<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/with-schemas'</span><span class="punctuation">;</span> <span class="comment">// NB the 'with-schemas'</span>
</code></pre><h3 id="putting-it-all-together">Putting It All Together</h3><p>As long as you put the optional parts of the path in the right order, you can access all the valid combinations of target, format, minification, sub-module and schema support. The syntax for the import (split onto different lines for clarity) is:</p><pre><code>tinybase
  <span class="punctuation">[</span> /es6 <span class="punctuation">]</span>
    <span class="punctuation">[</span> /min <span class="punctuation">]</span>
      <span class="punctuation">[</span> /store <span class="operator">|</span> /metrics <span class="operator">|</span> /queries <span class="operator">|</span> <span class="punctuation">..</span>. <span class="punctuation">]</span>
        <span class="punctuation">[</span> /with-schemas <span class="punctuation">]</span>
</code></pre><p>For example, this is a non-exhaustive list of options that are all valid:</p><div class="table"><table><thead><tr><th>Import</th><th>Format</th><th>Target</th><th>Minified</th><th>Sub-module</th><th>With schemas</th></tr></thead><tbody><tr><td><code>import {...} from &#x27;tinybase&#x27;;</code></td><td>esm</td><td>esnext</td><td>no</td><td></td><td>no</td></tr><tr><td><code>import {...} from &#x27;tinybase/with-schemas&#x27;;</code></td><td>esm</td><td>esnext</td><td>no</td><td></td><td>yes</td></tr><tr><td><code>import {...} from &#x27;tinybase/min&#x27;;</code></td><td>esm</td><td>esnext</td><td>yes</td><td></td><td>no</td></tr><tr><td><code>import {...} from &#x27;tinybase/es6&#x27;;</code></td><td>esm</td><td>es6</td><td>no</td><td></td><td>no</td></tr><tr><td><code>import {...} from &#x27;tinybase/es6/store&#x27;</code></td><td>esm</td><td>es6</td><td>no</td><td><a href="/api/store/"><code>store</code></a></td><td>no</td></tr><tr><td><code>import {...} from &#x27;tinybase/es6/metrics/with-schemas&#x27;;</code></td><td>esm</td><td>es6</td><td>no</td><td><a href="/api/metrics/"><code>metrics</code></a></td><td>yes</td></tr><tr><td><code>const {...} = require(&#x27;tinybase&#x27;);</code></td><td>cjs</td><td>esnext</td><td>no</td><td></td><td>no</td></tr><tr><td><code>const {...} = require(&#x27;tinybase/min/ui-react&#x27;);</code></td><td>cjs</td><td>esnext</td><td>yes</td><td><a href="/api/ui-react/"><code>ui-react</code></a></td><td>no</td></tr><tr><td>...</td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table></div><h3 id="react-native">React Native</h3><p>If you are using <a href="https://reactnative.dev/">React Native</a> - for example with <a href="https://expo.dev/">Expo</a> - be aware that the <a href="https://facebook.github.io/metro/">Metro</a> bundler does not currently support module resolution very well. You may have to add in the exact file path to be explicit about your imports:</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>createStore<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/index.js'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">{</span>useCell<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/ui-react/index.js'</span><span class="punctuation">;</span>
</code></pre><p>This situation is evolving however, so you may find these extra file names unnecessary as bundler support improves.</p><h3 id="eslint-resolver-issues">ESlint Resolver Issues</h3><p>There is a <a href="https://github.com/import-js/eslint-plugin-import/issues/1810">known issue</a> with the <code>no-unresolved</code> ESlint rule whereby it does not understand the <code>exports</code> section of the <a href="/">TinyBase</a> <code>package.json</code>. You may wish to disable that rule if you are getting false positives using <a href="/">TinyBase</a> submodules.</p><h3 id="umd-modules">UMD Modules</h3><p>Finally, UMD versions are available in <code>umd</code> sub-folders. The <code>umd</code> files are designed to be linked to in classic-style web pages, rather than <code>import</code>ed or <code>require</code>d.</p><p>It will be typical to use the minified versions of these in production:</p><pre><code><span class="tag"><span class="tag"><span class="punctuation">&lt;</span>script</span> <span class="attr-name">src</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>https://unpkg.com/tinybase/dist/umd/min/index.js<span class="punctuation">"</span></span><span class="punctuation">></span></span><span class="script"></span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span>script</span><span class="punctuation">></span></span>
</code></pre><p>But again, there are ES6 and non-minified versions of those too, such as:</p><pre><code><span class="tag"><span class="tag"><span class="punctuation">&lt;</span>script</span> <span class="attr-name">src</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>https://unpkg.com/tinybase/dist/umd/es6/index.js<span class="punctuation">"</span></span><span class="punctuation">></span></span><span class="script"></span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span>script</span><span class="punctuation">></span></span>
</code></pre><p>When using UMD, you can access the members of these modules using global constants that start with the name <code>[TinyBase](/)</code>. For example:</p><pre><code><span class="keyword">const</span> <span class="punctuation">{</span>createStore<span class="punctuation">}</span> <span class="operator">=</span> TinyBase<span class="punctuation">;</span>
<span class="keyword">const</span> <span class="punctuation">{</span>Provider<span class="punctuation">,</span> useCell<span class="punctuation">,</span> useCreateStore<span class="punctuation">}</span> <span class="operator">=</span> TinyBaseUiReact<span class="punctuation">;</span>
<span class="keyword">const</span> <span class="punctuation">{</span>TableInHtmlTable<span class="punctuation">}</span> <span class="operator">=</span> TinyBaseUiReactDom<span class="punctuation">;</span>
<span class="keyword">const</span> <span class="punctuation">{</span>Inspector<span class="punctuation">}</span> <span class="operator">=</span> TinyBaseUiReactInspector<span class="punctuation">;</span>
</code></pre><p>If all else fails, take a look into the package folder and see what&#x27;s what!</p><h3 id="enough">Enough!</h3><p>OK, we&#x27;re done with the <code>import</code> shenanigans. Let&#x27;s briefly look at how <a href="/">TinyBase</a> benefits from using TypeScript to improve your developer experience in the <a href="/guides/the-basics/tinybase-and-typescript/">TinyBase and TypeScript</a> guide.</p></section>