var e,s;e=this,s=function(e,s){"use strict";const t=e=>typeof e,o="",r=t(o),u="Result",d="Ids",l="Table",n=l+"s",i=l+d,a="Row",I=a+"Count",c=a+d,C="Sorted"+a+d,p="Cell",b=p+d,w="Value",R=w+"s",k=w+d,g=e=>null==e,h=(e,s,t)=>g(e)?t?.():s(e),m=e=>t(e)==r,y=()=>{},L=(e,s)=>e.map(s),V=Object.keys,{createContext:S,useContext:T}=s,f=S([]),x=(e,s)=>{const t=T(f);return g(e)?t[s]:m(e)?((e,s)=>h(e,(e=>e[s])))(t[s+1],e):e},v=(e,s)=>{const t=x(e,s);return g(e)||m(e)?t:e},P=e=>V(T(f)[e]),q=e=>v(e,0),B=e=>v(e,2),M=e=>v(e,4),O=e=>v(e,6),Q=e=>v(e,8),D=e=>v(e,10),{useCallback:F,useEffect:A,useMemo:E,useRef:G,useState:j}=s,U=(e,s,t=[])=>{const o=E((()=>s(e)),[e,...t]);return A((()=>()=>o.destroy()),[o]),o},z=(e,s,t,o=[],r)=>{const[,u]=j(),d=F((()=>s?.["get"+e]?.(...o)??t),[s,...o]),[l]=j(d),n=G(l);return E((()=>n.current=d()),[d]),H(e,s,((...e)=>{n.current=g(r)?d():e[r],u([])}),[],o),n.current},H=(e,s,t,o=[],r=[],...u)=>A((()=>{const o=s?.["add"+e+"Listener"]?.(...r,t,...u);return()=>s?.delListener(o)}),[s,...r,...o,...u]),J=(e,s,t,o=[],r=y,u=[],...d)=>{const l=q(e);return F((e=>h(l,(o=>h(t(e,o),(e=>r(o["set"+s](...d,e),e)))))),[l,s,...o,...u,...d])},K=(e,s,t=y,o=[],...r)=>{const u=q(e);return F((()=>t(u?.["del"+s](...r))),[u,s,...o,...r])},N=(e,s,t)=>{const o=D(e);return F((()=>o?.[s](t)),[o,s,t])},W=e=>z(i,q(e),[],[]),X=(e,s)=>z(c,q(s),[],[e]),Y=(e,s,t,o=0,r,u)=>z(C,q(u),[],[e,s,t,o,r],6),Z=(e,s,t)=>z(b,q(t),[],[e,s]),$=(e,s,t,o)=>z(p,q(o),void 0,[e,s,t],4),_=e=>z(k,q(e),[],[]),ee=(e,s)=>z(w,q(s),void 0,[e]),se=(e,s)=>z("Metric",B(s),void 0,[e]),te=(e,s)=>z("SliceIds",M(s),[],[e]),oe=(e,s,t)=>z("Slice"+c,M(t),[],[e,s]),re=(e,s,t)=>z("RemoteRowId",O(t),void 0,[e,s]),ue=(e,s,t)=>z("Local"+c,O(t),[],[e,s]),de=(e,s,t)=>z("Linked"+c,O(t),[],[e,s]),le=(e,s)=>z(u+c,Q(s),[],[e]),ne=(e,s,t,o=0,r,d)=>z(u+C,Q(d),[],[e,s,t,o,r],6),ie=(e,s,t)=>z(u+b,Q(t),[],[e,s]),ae=(e,s,t,o)=>z(u+p,Q(o),void 0,[e,s,t]),Ie=e=>z("CheckpointIds",D(e),[[],void 0,[]]),ce=(e,s)=>z("Checkpoint",D(s),void 0,[e]),Ce=e=>N(e,"goBackward"),pe=e=>N(e,"goForward"),{createElement:be,Fragment:we,useCallback:Re,useLayoutEffect:ke,useRef:ge,useState:he}=s,me=(e,...s)=>g(e)?{}:e(...s),ye=(e,s)=>[e,e?.getStore(),e?.getLocalTableId(s),e?.getRemoteTableId(s)],{useMemo:Le}=s,Ve=({tableId:e,store:s,rowComponent:t=Pe,getRowComponentProps:o,customCellIds:r,separator:u,debugIds:d},l)=>xe(L(l,(u=>be(t,{...me(o,u),key:u,tableId:e,rowId:u,customCellIds:r,store:s,debugIds:d}))),u,d,e),Se=({queryId:e,queries:s,resultRowComponent:t=Qe,getResultRowComponentProps:o,separator:r,debugIds:u},d)=>xe(L(d,(r=>be(t,{...me(o,r),key:r,queryId:e,rowId:r,queries:s,debugIds:u}))),r,u,e),Te=({relationshipId:e,relationships:s,rowComponent:t=Pe,getRowComponentProps:o,separator:r,debugIds:u},d,l)=>{const[n,i,a]=ye(O(s),e),I=d(e,l,n);return xe(L(I,(e=>be(t,{...me(o,e),key:e,tableId:a,rowId:e,store:i,debugIds:u}))),r,u,l)},fe=e=>({checkpoints:s,checkpointComponent:t=De,getCheckpointComponentProps:o,separator:r,debugIds:u})=>{const d=D(s);return xe(L(e(Ie(d)),(e=>be(t,{...me(o,e),key:e,checkpoints:d,checkpointId:e,debugIds:u}))),r)},xe=(e,s,t,o)=>{const r=g(s)||!Array.isArray(e)?e:L(e,((e,t)=>t>0?[s,e]:e));return t?[o,":{",r,"}"]:r},ve=({tableId:e,rowId:s,cellId:t,store:r,debugIds:u})=>xe(o+($(e,s,t,r)??o),void 0,u,t),Pe=({tableId:e,rowId:s,store:t,cellComponent:o=ve,getCellComponentProps:r,customCellIds:u,separator:d,debugIds:l})=>xe(L(((e,s,t,o)=>{const r=Z(s,t,o);return e??r})(u,e,s,t),(u=>be(o,{...me(r,u),key:u,tableId:e,rowId:s,cellId:u,store:t,debugIds:l}))),d,l,s),qe=e=>Ve(e,X(e.tableId,e.store)),Be=({valueId:e,store:s,debugIds:t})=>xe(o+(ee(e,s)??o),void 0,t,e),Me=({indexId:e,sliceId:s,indexes:t,rowComponent:o=Pe,getRowComponentProps:r,separator:u,debugIds:d})=>{const[l,n,i]=((e,s)=>[e,e?.getStore(),e?.getTableId(s)])(M(t),e),a=oe(e,s,l);return xe(L(a,(e=>be(o,{...me(r,e),key:e,tableId:i,rowId:e,store:n,debugIds:d}))),u,d,s)},Oe=({queryId:e,rowId:s,cellId:t,queries:r,debugIds:u})=>xe(o+(ae(e,s,t,r)??o),void 0,u,t),Qe=({queryId:e,rowId:s,queries:t,resultCellComponent:o=Oe,getResultCellComponentProps:r,separator:u,debugIds:d})=>xe(L(ie(e,s,t),(u=>be(o,{...me(r,u),key:u,queryId:e,rowId:s,cellId:u,queries:t,debugIds:d}))),u,d,s),De=({checkpoints:e,checkpointId:s,debugIds:t})=>xe(ce(s,e)??o,void 0,t,s),Fe=fe((e=>e[0])),Ae=fe((e=>g(e[1])?[]:[e[1]])),Ee=fe((e=>e[2]));e.BackwardCheckpointsView=Fe,e.CellView=ve,e.CheckpointView=De,e.CurrentCheckpointView=Ae,e.ForwardCheckpointsView=Ee,e.IndexView=({indexId:e,indexes:s,sliceComponent:t=Me,getSliceComponentProps:o,separator:r,debugIds:u})=>xe(L(te(e,s),(r=>be(t,{...me(o,r),key:r,indexId:e,sliceId:r,indexes:s,debugIds:u}))),r,u,e),e.LinkedRowsView=e=>Te(e,de,e.firstRowId),e.LocalRowsView=e=>Te(e,ue,e.remoteRowId),e.MetricView=({metricId:e,metrics:s,debugIds:t})=>xe(se(e,s)??o,void 0,t,e),e.Provider=({store:e,storesById:t,metrics:o,metricsById:r,indexes:u,indexesById:d,relationships:l,relationshipsById:n,queries:i,queriesById:a,checkpoints:I,checkpointsById:c,children:C})=>{const p=s.useContext(f);return be(f.Provider,{value:Le((()=>[e??p[0],{...p[1],...t},o??p[2],{...p[3],...r},u??p[4],{...p[5],...d},l??p[6],{...p[7],...n},i??p[8],{...p[9],...a},I??p[10],{...p[11],...c}]),[e,t,o,r,u,d,l,n,i,a,I,c,p])},C)},e.RemoteRowView=({relationshipId:e,localRowId:s,relationships:t,rowComponent:o=Pe,getRowComponentProps:r,debugIds:u})=>{const[d,l,,n]=ye(O(t),e),i=re(e,s,d);return xe(g(n)||g(i)?null:be(o,{...me(r,i),key:i,tableId:n,rowId:i,store:l,debugIds:u}),void 0,u,s)},e.ResultCellView=Oe,e.ResultRowView=Qe,e.ResultSortedTableView=({cellId:e,descending:s,offset:t,limit:o,...r})=>Se(r,ne(r.queryId,e,s,t,o,r.queries)),e.ResultTableView=e=>Se(e,le(e.queryId,e.queries)),e.RowView=Pe,e.SliceView=Me,e.SortedTableView=({cellId:e,descending:s,offset:t,limit:o,...r})=>Ve(r,Y(r.tableId,e,s,t,o,r.store)),e.TableView=qe,e.TablesView=({store:e,tableComponent:s=qe,getTableComponentProps:t,separator:o,debugIds:r})=>xe(L(W(e),(o=>be(s,{...me(t,o),key:o,tableId:o,store:e,debugIds:r}))),o),e.ValueView=Be,e.ValuesView=({store:e,valueComponent:s=Be,getValueComponentProps:t,separator:o,debugIds:r})=>xe(L(_(e),(o=>be(s,{...me(t,o),key:o,valueId:o,store:e,debugIds:r}))),o),e.useAddRowCallback=(e,s,t=[],o,r=y,u=[],d=!0)=>{const l=q(o);return F((t=>h(l,(o=>h(s(t,o),(s=>r(o.addRow(e,s,d),o,s)))))),[l,e,...t,...u,d])},e.useCell=$,e.useCellIds=Z,e.useCellIdsListener=(e,s,t,o,r,u)=>H(b,q(u),t,o,[e,s],r),e.useCellListener=(e,s,t,o,r,u,d)=>H(p,q(d),o,r,[e,s,t],u),e.useCheckpoint=ce,e.useCheckpointIds=Ie,e.useCheckpointIdsListener=(e,s,t)=>H("CheckpointIds",D(t),e,s),e.useCheckpointListener=(e,s,t,o)=>H("Checkpoint",D(o),s,t,[e]),e.useCheckpoints=e=>x(e,10),e.useCheckpointsIds=()=>P(11),e.useCheckpointsOrCheckpointsById=D,e.useCreateCheckpoints=(e,s,t)=>U(e,s,t),e.useCreateIndexes=(e,s,t)=>U(e,s,t),e.useCreateMetrics=(e,s,t)=>U(e,s,t),e.useCreatePersister=(e,s,t=[],o,r=[])=>{const[,u]=j(),d=E((()=>s(e)),[e,...t]);return A((()=>((async()=>{await(o?.(d)),u(1)})(),()=>{d.destroy()})),[d,...r]),d},e.useCreateQueries=(e,s,t)=>U(e,s,t),e.useCreateRelationships=(e,s,t)=>U(e,s,t),e.useCreateStore=(e,s=[])=>E(e,s),e.useDelCellCallback=(e,s,t,o,r,u,d)=>K(r,p,u,d,e,s,t,o),e.useDelRowCallback=(e,s,t,o,r)=>K(t,a,o,r,e,s),e.useDelTableCallback=(e,s,t,o)=>K(s,l,t,o,e),e.useDelTablesCallback=(e,s,t)=>K(e,n,s,t),e.useDelValueCallback=(e,s,t,o)=>K(s,w,t,o,e),e.useDelValuesCallback=(e,s,t)=>K(e,R,s,t),e.useGoBackwardCallback=Ce,e.useGoForwardCallback=pe,e.useGoToCallback=(e,s=[],t,o=y,r=[])=>{const u=D(t);return F((s=>h(u,(t=>h(e(s),(e=>o(t.goTo(e),e)))))),[u,...s,...r])},e.useIndexIds=e=>z("IndexIds",M(e),[]),e.useIndexes=e=>x(e,4),e.useIndexesIds=()=>P(5),e.useIndexesOrIndexesById=M,e.useLinkedRowIds=de,e.useLinkedRowIdsListener=(e,s,t,o,r)=>H("Linked"+c,O(r),t,o,[e,s]),e.useLocalRowIds=ue,e.useLocalRowIdsListener=(e,s,t,o,r)=>H("Local"+c,O(r),t,o,[e,s]),e.useMetric=se,e.useMetricIds=e=>z("MetricIds",B(e),[]),e.useMetricListener=(e,s,t,o)=>H("Metric",B(o),s,t,[e]),e.useMetrics=e=>x(e,2),e.useMetricsIds=()=>P(3),e.useMetricsOrMetricsById=B,e.useQueries=e=>x(e,8),e.useQueriesIds=()=>P(9),e.useQueriesOrQueriesById=Q,e.useQueryIds=e=>z("QueryIds",Q(e),[]),e.useRedoInformation=e=>{const s=D(e),[,,[t]]=Ie(s);return[!g(t),pe(s),t,h(t,(e=>s?.getCheckpoint(e)))??o]},e.useRelationshipIds=e=>z("RelationshipIds",O(e),[]),e.useRelationships=e=>x(e,6),e.useRelationshipsIds=()=>P(7),e.useRelationshipsOrRelationshipsById=O,e.useRemoteRowId=re,e.useRemoteRowIdListener=(e,s,t,o,r)=>H("RemoteRowId",O(r),t,o,[e,s]),e.useResultCell=ae,e.useResultCellIds=ie,e.useResultCellIdsListener=(e,s,t,o,r)=>H(u+b,Q(r),t,o,[e,s]),e.useResultCellListener=(e,s,t,o,r,d)=>H(u+p,Q(d),o,r,[e,s,t]),e.useResultRow=(e,s,t)=>z(u+a,Q(t),{},[e,s]),e.useResultRowCount=(e,s)=>z(u+I,Q(s),[],[e]),e.useResultRowCountListener=(e,s,t,o)=>H(u+I,Q(o),s,t,[e]),e.useResultRowIds=le,e.useResultRowIdsListener=(e,s,t,o)=>H(u+c,Q(o),s,t,[e]),e.useResultRowListener=(e,s,t,o,r)=>H(u+a,Q(r),t,o,[e,s]),e.useResultSortedRowIds=ne,e.useResultSortedRowIdsListener=(e,s,t,o,r,d,l,n)=>H(u+C,Q(n),d,l,[e,s,t,o,r]),e.useResultTable=(e,s)=>z(u+l,Q(s),{},[e]),e.useResultTableCellIds=(e,s)=>z(u+l+b,Q(s),[],[e]),e.useResultTableCellIdsListener=(e,s,t,o)=>H(u+l+b,Q(o),s,t,[e]),e.useResultTableListener=(e,s,t,o)=>H(u+l,Q(o),s,t,[e]),e.useRow=(e,s,t)=>z(a,q(t),{},[e,s]),e.useRowCount=(e,s)=>z(I,q(s),[],[e]),e.useRowCountListener=(e,s,t,o,r)=>H(I,q(r),s,t,[e],o),e.useRowIds=X,e.useRowIdsListener=(e,s,t,o,r)=>H(c,q(r),s,t,[e],o),e.useRowListener=(e,s,t,o,r,u)=>H(a,q(u),t,o,[e,s],r),e.useSetCellCallback=(e,s,t,o,r,u,d,l)=>J(u,p,o,r,d,l,e,s,t),e.useSetCheckpointCallback=(e=y,s=[],t,o=y,r=[])=>{const u=D(t);return F((s=>h(u,(t=>{const r=e(s);o(t.addCheckpoint(r),t,r)}))),[u,...s,...r])},e.useSetPartialRowCallback=(e,s,t,o,r,u,d)=>J(r,"PartialRow",t,o,u,d,e,s),e.useSetPartialValuesCallback=(e,s,t,o,r)=>J(t,"PartialValues",e,s,o,r),e.useSetRowCallback=(e,s,t,o,r,u,d)=>J(r,a,t,o,u,d,e,s),e.useSetTableCallback=(e,s,t,o,r,u)=>J(o,l,s,t,r,u,e),e.useSetTablesCallback=(e,s,t,o,r)=>J(t,n,e,s,o,r),e.useSetValueCallback=(e,s,t,o,r,u)=>J(o,w,s,t,r,u,e),e.useSetValuesCallback=(e,s,t,o,r)=>J(t,R,e,s,o,r),e.useSliceIds=te,e.useSliceIdsListener=(e,s,t,o)=>H("SliceIds",M(o),s,t,[e]),e.useSliceRowIds=oe,e.useSliceRowIdsListener=(e,s,t,o,r)=>H("Slice"+c,M(r),t,o,[e,s]),e.useSortedRowIds=Y,e.useSortedRowIdsListener=(e,s,t,o,r,u,d,l,n)=>H(C,q(n),u,d,[e,s,t,o,r],l),e.useStore=e=>x(e,0),e.useStoreIds=()=>P(1),e.useStoreOrStoreById=q,e.useTable=(e,s)=>z(l,q(s),{},[e]),e.useTableCellIds=(e,s)=>z(l+b,q(s),[],[e]),e.useTableCellIdsListener=(e,s,t,o,r)=>H(l+b,q(r),s,t,[e],o),e.useTableIds=W,e.useTableIdsListener=(e,s,t,o)=>H(i,q(o),e,s,[],t),e.useTableListener=(e,s,t,o,r)=>H(l,q(r),s,t,[e],o),e.useTables=e=>z(n,q(e),{}),e.useTablesListener=(e,s,t,o)=>H(n,q(o),e,s,[],t),e.useUndoInformation=e=>{const s=D(e),[t,r]=Ie(s);return[(u=t,!(0==(e=>e.length)(u))),Ce(s),r,h(r,(e=>s?.getCheckpoint(e)))??o];var u},e.useValue=ee,e.useValueIds=_,e.useValueIdsListener=(e,s,t,o)=>H(k,q(o),e,s,[],t),e.useValueListener=(e,s,t,o,r)=>H(w,q(r),s,t,[e],o),e.useValues=e=>z(R,q(e),{}),e.useValuesListener=(e,s,t,o)=>H(R,q(o),e,s,[],t)},"object"==typeof exports&&"undefined"!=typeof module?s(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],s):s((e="undefined"!=typeof globalThis?globalThis:e||self).TinyBaseUiReact={},e.React);
