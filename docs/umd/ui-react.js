var e,s;e=this,s=function(e,s){"use strict";const t=e=>typeof e,o="",l=t(o),r="Tables",d="TableIds",u="Table",n="RowIds",i="SortedRowIds",a="Row",I="CellIds",c="Cell",w="Values",R="ValueIds",C="Value",b=(e,s)=>e.map(s),p=e=>null==e,k=(e,s,t)=>p(e)?t?.():s(e),g=()=>{},{createContext:m,useContext:h}=s,V=m([]),L=(e,s)=>{const t=h(V);return p(e)?t[s]:((e,s)=>k(e,(e=>e[s])))(t[s+1],e)},y=(e,s)=>{const o=L(e,s);return p(e)||(e=>t(e)==l)(e)?o:e},S=e=>y(e,0),T=e=>y(e,2),f=e=>y(e,4),v=e=>y(e,6),P=e=>y(e,8),q=e=>y(e,10),{useCallback:x,useEffect:B,useMemo:M,useRef:D,useState:A}=s,F=(e,s,t=[])=>{const o=M((()=>s(e)),[e,...t]);return B((()=>()=>o.destroy()),[o]),o},G=(e,s,t,o=[],l)=>{const[,r]=A(),d=x((()=>s?.["get"+e]?.(...o)??t),[s,...o]),[u]=A(d),n=D(u);return M((()=>n.current=d()),[d]),E(e,s,((...e)=>{n.current=p(l)?d():e[l],r([])}),[],o),n.current},E=(e,s,t,o=[],l=[],...r)=>B((()=>{const o=s?.["add"+e+"Listener"]?.(...l,t,...r);return()=>s?.delListener(o)}),[s,...l,...o,...r]),Q=(e,s,t,o=[],l=g,r=[],...d)=>{const u=S(e);return x((e=>k(u,(o=>k(t(e,o),(e=>l(o["set"+s](...d,e),e)))))),[u,s,...o,...r,...d])},U=(e,s,t=g,o=[],...l)=>{const r=S(e);return x((()=>t(r?.["del"+s](...l))),[r,s,...o,...l])},j=(e,s,t)=>{const o=q(e);return x((()=>o?.[s](t)),[o,s,t])},z=e=>G(d,S(e),[],[]),H=(e,s)=>G(n,S(s),[],[e]),J=(e,s,t,o=0,l,r)=>G(i,S(r),[],[e,s,t,o,l],6),K=(e,s,t)=>G(I,S(t),[],[e,s]),N=(e,s,t,o)=>G(c,S(o),void 0,[e,s,t],4),O=e=>G(R,S(e),[],[]),W=(e,s)=>G(C,S(s),void 0,[e]),X=(e,s)=>G("Metric",T(s),void 0,[e]),Y=(e,s)=>G("SliceIds",f(s),[],[e]),Z=(e,s,t)=>G("SliceRowIds",f(t),[],[e,s]),$=(e,s,t)=>G("RemoteRowId",v(t),void 0,[e,s]),_=(e,s,t)=>G("LocalRowIds",v(t),[],[e,s]),ee=(e,s,t)=>G("LinkedRowIds",v(t),[],[e,s]),se=(e,s)=>G("ResultRowIds",P(s),[],[e]),te=(e,s,t,o=0,l,r)=>G("ResultSortedRowIds",P(r),[],[e,s,t,o,l],6),oe=(e,s,t)=>G("ResultCellIds",P(t),[],[e,s]),le=(e,s,t,o)=>G("ResultCell",P(o),void 0,[e,s,t]),re=e=>G("CheckpointIds",q(e),[[],void 0,[]]),de=(e,s)=>G("Checkpoint",q(s),void 0,[e]),ue=e=>j(e,"goBackward"),ne=e=>j(e,"goForward"),{createElement:ie,useMemo:ae}=s,Ie=({tableId:e,store:s,rowComponent:t=ge,getRowComponentProps:o,separator:l,debugIds:r},d)=>pe(b(d,(l=>ie(t,{...be(o,l),key:l,tableId:e,rowId:l,store:s,debugIds:r}))),l,r,e),ce=({queryId:e,queries:s,resultRowComponent:t=ye,getResultRowComponentProps:o,separator:l,debugIds:r},d)=>pe(b(d,(l=>ie(t,{...be(o,l),key:l,queryId:e,rowId:l,queries:s,debugIds:r}))),l,r,e),we=e=>{const s=v(e);return[s,s?.getStore()]},Re=({relationshipId:e,relationships:s,rowComponent:t=ge,getRowComponentProps:o,separator:l,debugIds:r},d,u)=>{const[n,i]=we(s),a=n?.getLocalTableId(e),I=d(e,u,n);return pe(b(I,(e=>ie(t,{...be(o,e),key:e,tableId:a,rowId:e,store:i,debugIds:r}))),l,r,u)},Ce=e=>({checkpoints:s,checkpointComponent:t=Se,getCheckpointComponentProps:o,separator:l,debugIds:r})=>{const d=q(s);return pe(b(e(re(d)),(e=>ie(t,{...be(o,e),key:e,checkpoints:d,checkpointId:e,debugIds:r}))),l)},be=(e,s)=>p(e)?{}:e(s),pe=(e,s,t,o)=>{const l=p(s)||!Array.isArray(e)?e:b(e,((e,t)=>t>0?[s,e]:e));return t?[o,":{",l,"}"]:l},ke=({tableId:e,rowId:s,cellId:t,store:l,debugIds:r})=>pe(o+(N(e,s,t,l)??o),void 0,r,t),ge=({tableId:e,rowId:s,store:t,cellComponent:o=ke,getCellComponentProps:l,separator:r,debugIds:d})=>pe(b(K(e,s,t),(r=>ie(o,{...be(l,r),key:r,tableId:e,rowId:s,cellId:r,store:t,debugIds:d}))),r,d,s),me=e=>Ie(e,H(e.tableId,e.store)),he=({valueId:e,store:s,debugIds:t})=>pe(o+(W(e,s)??o),void 0,t,e),Ve=({indexId:e,sliceId:s,indexes:t,rowComponent:o=ge,getRowComponentProps:l,separator:r,debugIds:d})=>{const u=f(t),n=u?.getStore(),i=u?.getTableId(e),a=Z(e,s,u);return pe(b(a,(e=>ie(o,{...be(l,e),key:e,tableId:i,rowId:e,store:n,debugIds:d}))),r,d,s)},Le=({queryId:e,rowId:s,cellId:t,queries:l,debugIds:r})=>pe(o+(le(e,s,t,l)??o),void 0,r,t),ye=({queryId:e,rowId:s,queries:t,resultCellComponent:o=Le,getResultCellComponentProps:l,separator:r,debugIds:d})=>pe(b(oe(e,s,t),(r=>ie(o,{...be(l,r),key:r,queryId:e,rowId:s,cellId:r,queries:t,debugIds:d}))),r,d,s),Se=({checkpoints:e,checkpointId:s,debugIds:t})=>pe(de(s,e)??o,void 0,t,s),Te=Ce((e=>e[0])),fe=Ce((e=>p(e[1])?[]:[e[1]])),ve=Ce((e=>e[2]));e.BackwardCheckpointsView=Te,e.CellView=ke,e.CheckpointView=Se,e.CurrentCheckpointView=fe,e.ForwardCheckpointsView=ve,e.IndexView=({indexId:e,indexes:s,sliceComponent:t=Ve,getSliceComponentProps:o,separator:l,debugIds:r})=>pe(b(Y(e,s),(l=>ie(t,{...be(o,l),key:l,indexId:e,sliceId:l,indexes:s,debugIds:r}))),l,r,e),e.LinkedRowsView=e=>Re(e,ee,e.firstRowId),e.LocalRowsView=e=>Re(e,_,e.remoteRowId),e.MetricView=({metricId:e,metrics:s,debugIds:t})=>pe(X(e,s)??o,void 0,t,e),e.Provider=({store:e,storesById:t,metrics:o,metricsById:l,indexes:r,indexesById:d,relationships:u,relationshipsById:n,queries:i,queriesById:a,checkpoints:I,checkpointsById:c,children:w})=>{const R=s.useContext(V);return ie(V.Provider,{value:ae((()=>[e??R[0],{...R[1],...t},o??R[2],{...R[3],...l},r??R[4],{...R[5],...d},u??R[6],{...R[7],...n},i??R[8],{...R[9],...a},I??R[10],{...R[11],...c}]),[e,t,o,l,r,d,u,n,i,a,I,c,R])},w)},e.RemoteRowView=({relationshipId:e,localRowId:s,relationships:t,rowComponent:o=ge,getRowComponentProps:l,debugIds:r})=>{const[d,u]=we(t),n=d?.getRemoteTableId(e),i=$(e,s,d);return pe(p(n)||p(i)?null:ie(o,{...be(l,i),key:i,tableId:n,rowId:i,store:u,debugIds:r}),void 0,r,s)},e.ResultCellView=Le,e.ResultRowView=ye,e.ResultSortedTableView=({cellId:e,descending:s,offset:t,limit:o,...l})=>ce(l,te(l.queryId,e,s,t,o,l.queries)),e.ResultTableView=e=>ce(e,se(e.queryId,e.queries)),e.RowView=ge,e.SliceView=Ve,e.SortedTableView=({cellId:e,descending:s,offset:t,limit:o,...l})=>Ie(l,J(l.tableId,e,s,t,o,l.store)),e.TableView=me,e.TablesView=({store:e,tableComponent:s=me,getTableComponentProps:t,separator:o,debugIds:l})=>pe(b(z(e),(o=>ie(s,{...be(t,o),key:o,tableId:o,store:e,debugIds:l}))),o),e.ValueView=he,e.ValuesView=({store:e,valueComponent:s=he,getValueComponentProps:t,separator:o,debugIds:l})=>pe(b(O(e),(o=>ie(s,{...be(t,o),key:o,valueId:o,store:e,debugIds:l}))),o),e.tableView=Ie,e.useAddRowCallback=(e,s,t=[],o,l=g,r=[])=>{const d=S(o);return x((t=>k(d,(o=>k(s(t,o),(s=>l(o.addRow(e,s),o,s)))))),[d,e,...t,...r])},e.useCell=N,e.useCellIds=K,e.useCellIdsListener=(e,s,t,o,l,r)=>E(I,S(r),t,o,[e,s],l),e.useCellListener=(e,s,t,o,l,r,d)=>E(c,S(d),o,l,[e,s,t],r),e.useCheckpoint=de,e.useCheckpointIds=re,e.useCheckpointIdsListener=(e,s,t)=>E("CheckpointIds",q(t),e,s),e.useCheckpointListener=(e,s,t,o)=>E("Checkpoint",q(o),s,t,[e]),e.useCheckpoints=e=>L(e,10),e.useCreateCheckpoints=(e,s,t)=>F(e,s,t),e.useCreateIndexes=(e,s,t)=>F(e,s,t),e.useCreateMetrics=(e,s,t)=>F(e,s,t),e.useCreatePersister=(e,s,t=[],o,l=[])=>{const[,r]=A(),d=M((()=>s(e)),[e,...t]);return B((()=>((async()=>{await(o?.(d)),r(1)})(),()=>{d.destroy()})),[d,...l]),d},e.useCreateQueries=(e,s,t)=>F(e,s,t),e.useCreateRelationships=(e,s,t)=>F(e,s,t),e.useCreateStore=(e,s=[])=>M(e,s),e.useDelCellCallback=(e,s,t,o,l,r,d)=>U(l,c,r,d,e,s,t,o),e.useDelRowCallback=(e,s,t,o,l)=>U(t,a,o,l,e,s),e.useDelTableCallback=(e,s,t,o)=>U(s,u,t,o,e),e.useDelTablesCallback=(e,s,t)=>U(e,r,s,t),e.useDelValueCallback=(e,s,t,o)=>U(s,C,t,o,e),e.useDelValuesCallback=(e,s,t)=>U(e,w,s,t),e.useGoBackwardCallback=ue,e.useGoForwardCallback=ne,e.useGoToCallback=(e,s=[],t,o=g,l=[])=>{const r=q(t);return x((s=>k(r,(t=>k(e(s),(e=>o(t.goTo(e),e)))))),[r,...s,...l])},e.useIndexes=e=>L(e,4),e.useLinkedRowIds=ee,e.useLinkedRowIdsListener=(e,s,t,o,l)=>E("LinkedRowIds",v(l),t,o,[e,s]),e.useLocalRowIds=_,e.useLocalRowIdsListener=(e,s,t,o,l)=>E("LocalRowIds",v(l),t,o,[e,s]),e.useMetric=X,e.useMetricListener=(e,s,t,o)=>E("Metric",T(o),s,t,[e]),e.useMetrics=e=>L(e,2),e.useQueries=e=>L(e,8),e.useRedoInformation=e=>{const s=q(e),[,,[t]]=re(s);return[!p(t),ne(s),t,k(t,(e=>s?.getCheckpoint(e)))??o]},e.useRelationships=e=>L(e,6),e.useRemoteRowId=$,e.useRemoteRowIdListener=(e,s,t,o,l)=>E("RemoteRowId",v(l),t,o,[e,s]),e.useResultCell=le,e.useResultCellIds=oe,e.useResultCellIdsListener=(e,s,t,o,l)=>E("ResultCellIds",P(l),t,o,[e,s]),e.useResultCellListener=(e,s,t,o,l,r)=>E("ResultCell",P(r),o,l,[e,s,t]),e.useResultRow=(e,s,t)=>G("ResultRow",P(t),{},[e,s]),e.useResultRowIds=se,e.useResultRowIdsListener=(e,s,t,o)=>E("ResultRowIds",P(o),s,t,[e]),e.useResultRowListener=(e,s,t,o,l)=>E("ResultRow",P(l),t,o,[e,s]),e.useResultSortedRowIds=te,e.useResultSortedRowIdsListener=(e,s,t,o,l,r,d,u)=>E("ResultSortedRowIds",P(u),r,d,[e,s,t,o,l]),e.useResultTable=(e,s)=>G("ResultTable",P(s),{},[e]),e.useResultTableListener=(e,s,t,o)=>E("ResultTable",P(o),s,t,[e]),e.useRow=(e,s,t)=>G(a,S(t),{},[e,s]),e.useRowIds=H,e.useRowIdsListener=(e,s,t,o,l)=>E(n,S(l),s,t,[e],o),e.useRowListener=(e,s,t,o,l,r)=>E(a,S(r),t,o,[e,s],l),e.useSetCellCallback=(e,s,t,o,l,r,d,u)=>Q(r,c,o,l,d,u,e,s,t),e.useSetCheckpointCallback=(e=g,s=[],t,o=g,l=[])=>{const r=q(t);return x((s=>k(r,(t=>{const l=e(s);o(t.addCheckpoint(l),t,l)}))),[r,...s,...l])},e.useSetPartialRowCallback=(e,s,t,o,l,r,d)=>Q(l,"PartialRow",t,o,r,d,e,s),e.useSetPartialValuesCallback=(e,s,t,o,l)=>Q(t,"PartialValues",e,s,o,l),e.useSetRowCallback=(e,s,t,o,l,r,d)=>Q(l,a,t,o,r,d,e,s),e.useSetTableCallback=(e,s,t,o,l,r)=>Q(o,u,s,t,l,r,e),e.useSetTablesCallback=(e,s,t,o,l)=>Q(t,r,e,s,o,l),e.useSetValueCallback=(e,s,t,o,l,r)=>Q(o,C,s,t,l,r,e),e.useSetValuesCallback=(e,s,t,o,l)=>Q(t,w,e,s,o,l),e.useSliceIds=Y,e.useSliceIdsListener=(e,s,t,o)=>E("SliceIds",f(o),s,t,[e]),e.useSliceRowIds=Z,e.useSliceRowIdsListener=(e,s,t,o,l)=>E("SliceRowIds",f(l),t,o,[e,s]),e.useSortedRowIds=J,e.useSortedRowIdsListener=(e,s,t,o,l,r,d,u,n)=>E(i,S(n),r,d,[e,s,t,o,l],u),e.useStore=e=>L(e,0),e.useTable=(e,s)=>G(u,S(s),{},[e]),e.useTableIds=z,e.useTableIdsListener=(e,s,t,o)=>E(d,S(o),e,s,[],t),e.useTableListener=(e,s,t,o,l)=>E(u,S(l),s,t,[e],o),e.useTables=e=>G(r,S(e),{}),e.useTablesListener=(e,s,t,o)=>E(r,S(o),e,s,[],t),e.useUndoInformation=e=>{const s=q(e),[t,l]=re(s);return[(r=t,!(0==(e=>e.length)(r))),ue(s),l,k(l,(e=>s?.getCheckpoint(e)))??o];var r},e.useValue=W,e.useValueIds=O,e.useValueIdsListener=(e,s,t,o)=>E(R,S(o),e,s,[],t),e.useValueListener=(e,s,t,o,l)=>E(C,S(l),s,t,[e],o),e.useValues=e=>G(w,S(e),{}),e.useValuesListener=(e,s,t,o)=>E(w,S(o),e,s,[],t)},"object"==typeof exports&&"undefined"!=typeof module?s(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],s):s((e="undefined"!=typeof globalThis?globalThis:e||self).TinyBaseUiReact={},e.React);
