var e,s;e=this,s=function(e,s){"use strict";const t=e=>typeof e,o="",r=t(o),d=(e,s)=>e.map(s),l=e=>null==e,n=(e,s,t)=>l(e)?t?.():s(e),u=()=>{},{createContext:i,useContext:a}=s,I=i([]),c=(e,s)=>{const t=a(I);return l(e)?t[s]:((e,s)=>n(e,(e=>e[s])))(t[s+1],e)},R=(e,s)=>{const o=c(e,s);return l(e)||(e=>t(e)==r)(e)?o:e},w=e=>R(e,0),C=e=>R(e,2),b=e=>R(e,4),p=e=>R(e,6),k=e=>R(e,8),g=e=>R(e,10),{useCallback:m,useEffect:h,useMemo:T,useRef:y,useState:L}=s,S=(e,s,t=[])=>{const o=T((()=>s(e)),[e,...t]);return h((()=>()=>o.destroy()),[o]),o},f=(e,s,t,o=[],r=[],d)=>{const[,n]=L(),u=m((()=>s?.["get"+e]?.(...o)??t),[s,...o]),[i]=L(u),a=y(i);return T((()=>a.current=u()),[u]),V(e,s,((...e)=>{a.current=l(d)?u():e[d],n([])}),[],o,...r),a.current},V=(e,s,t,o=[],r=[],...d)=>h((()=>{const o=s?.[`add${e}Listener`]?.(...r,t,...d);return()=>s?.delListener(o)}),[s,...r,...o,...d]),P=(e,s,t,o=[],r=u,d=[],...l)=>{const i=w(e);return m((e=>n(i,(o=>n(t(e,o),(e=>r(o["set"+s](...l,e),e)))))),[i,s,...o,...d,...l])},q=(e,s,t=u,o=[],...r)=>{const d=w(e);return m((()=>t(d?.["del"+s](...r))),[d,s,...o,...r])},v=(e,s,t)=>{const o=g(e);return m((()=>o?.[s](t)),[o,s,t])},x=(e,s)=>f("TableIds",w(e),[],[],[s]),B=(e,s,t)=>f("RowIds",w(s),[],[e],[t]),M=(e,s,t,o,r)=>f("SortedRowIds",w(o),[],[e,s,t],[r],4),D=(e,s,t,o)=>f("CellIds",w(t),[],[e,s],[o]),A=(e,s,t,o)=>f("Cell",w(o),void 0,[e,s,t],[],4),F=(e,s)=>f("Metric",C(s),void 0,[e]),G=(e,s)=>f("SliceIds",b(s),[],[e]),j=(e,s,t)=>f("SliceRowIds",b(t),[],[e,s]),E=(e,s,t)=>f("RemoteRowId",p(t),void 0,[e,s]),Q=(e,s,t)=>f("LocalRowIds",p(t),[],[e,s]),U=(e,s,t)=>f("LinkedRowIds",p(t),[],[e,s]),_=(e,s,t)=>f("ResultRowIds",k(s),[],[e],[t]),O=(e,s,t,o)=>f("ResultSortedRowIds",k(o),[],[e,s,t],[],4),$=(e,s,t)=>f("ResultCellIds",k(t),[],[e,s]),z=(e,s,t,o)=>f("ResultCell",k(o),void 0,[e,s,t]),H=e=>f("CheckpointIds",g(e),[[],void 0,[]]),J=(e,s)=>f("Checkpoint",g(s),void 0,[e]),K=e=>v(e,"goBackward"),N=e=>v(e,"goForward"),{createElement:W,useMemo:X}=s,Y=e=>{const s=p(e);return[s,s?.getStore()]},Z=({relationshipId:e,relationships:s,rowComponent:t=re,getRowComponentProps:o,separator:r,debugIds:l},n,u)=>{const[i,a]=Y(s),I=i?.getLocalTableId(e),c=n(e,u,i);return te(d(c,(e=>W(t,{...se(o,e),key:e,tableId:I,rowId:e,store:a,debugIds:l}))),r,l,u)},ee=e=>({checkpoints:s,checkpointComponent:t=ie,getCheckpointComponentProps:o,separator:r,debugIds:l})=>{const n=g(s);return te(d(e(H(n)),(e=>W(t,{...se(o,e),key:e,checkpoints:n,checkpointId:e,debugIds:l}))),r)},se=(e,s)=>l(e)?{}:e(s),te=(e,s,t,o)=>{const r=l(s)||!Array.isArray(e)?e:d(e,((e,t)=>t>0?[s,e]:e));return t?[o,":{",r,"}"]:r},oe=({tableId:e,rowId:s,cellId:t,store:r,debugIds:d})=>te(o+(A(e,s,t,r)??o),void 0,d,t),re=({tableId:e,rowId:s,store:t,trackReorder:o,cellComponent:r=oe,getCellComponentProps:l,separator:n,debugIds:u})=>te(d(D(e,s,t,o),(o=>W(r,{...se(l,o),key:o,tableId:e,rowId:s,cellId:o,store:t,debugIds:u}))),n,u,s),de=({tableId:e,store:s,trackReorder:t,rowComponent:o=re,getRowComponentProps:r,separator:l,debugIds:n})=>te(d(B(e,s,t),(t=>W(o,{...se(r,t),key:t,tableId:e,rowId:t,store:s,debugIds:n}))),l,n,e),le=({indexId:e,sliceId:s,indexes:t,rowComponent:o=re,getRowComponentProps:r,separator:l,debugIds:n})=>{const u=b(t),i=u?.getStore(),a=u?.getTableId(e),I=j(e,s,u);return te(d(I,(e=>W(o,{...se(r,e),key:e,tableId:a,rowId:e,store:i,debugIds:n}))),l,n,s)},ne=({queryId:e,rowId:s,cellId:t,queries:r,debugIds:d})=>te(o+(z(e,s,t,r)??o),void 0,d,t),ue=({queryId:e,rowId:s,queries:t,resultCellComponent:o=ne,getResultCellComponentProps:r,separator:l,debugIds:n})=>te(d($(e,s,t),(d=>W(o,{...se(r,d),key:d,queryId:e,rowId:s,cellId:d,queries:t,debugIds:n}))),l,n,s),ie=({checkpoints:e,checkpointId:s,debugIds:t})=>te(J(s,e)??o,void 0,t,s),ae=ee((e=>e[0])),Ie=ee((e=>l(e[1])?[]:[e[1]])),ce=ee((e=>e[2]));e.BackwardCheckpointsView=ae,e.CellView=oe,e.CheckpointView=ie,e.CurrentCheckpointView=Ie,e.ForwardCheckpointsView=ce,e.IndexView=({indexId:e,indexes:s,sliceComponent:t=le,getSliceComponentProps:o,separator:r,debugIds:l})=>te(d(G(e,s),(r=>W(t,{...se(o,r),key:r,indexId:e,sliceId:r,indexes:s,debugIds:l}))),r,l,e),e.LinkedRowsView=e=>Z(e,U,e.firstRowId),e.LocalRowsView=e=>Z(e,Q,e.remoteRowId),e.MetricView=({metricId:e,metrics:s,debugIds:t})=>te(F(e,s)??o,void 0,t,e),e.Provider=({store:e,storesById:t,metrics:o,metricsById:r,indexes:d,indexesById:l,relationships:n,relationshipsById:u,queries:i,queriesById:a,checkpoints:c,checkpointsById:R,children:w})=>{const C=s.useContext(I);return W(I.Provider,{value:X((()=>[e??C[0],{...C[1],...t},o??C[2],{...C[3],...r},d??C[4],{...C[5],...l},n??C[6],{...C[7],...u},i??C[8],{...C[9],...a},c??C[10],{...C[11],...R}]),[e,t,o,r,d,l,n,u,i,a,c,R,C])},w)},e.RemoteRowView=({relationshipId:e,localRowId:s,relationships:t,rowComponent:o=re,getRowComponentProps:r,debugIds:d})=>{const[n,u]=Y(t),i=n?.getRemoteTableId(e),a=E(e,s,n);return te(l(i)||l(a)?null:W(o,{...se(r,a),key:a,tableId:i,rowId:a,store:u,debugIds:d}),void 0,d,s)},e.ResultCellView=ne,e.ResultRowView=ue,e.ResultSortedTableView=({queryId:e,cellId:s,descending:t,queries:o,resultRowComponent:r=ue,getResultRowComponentProps:l,separator:n,debugIds:u})=>te(d(O(e,s,t,o),(s=>W(r,{...se(l,s),key:s,queryId:e,rowId:s,queries:o,debugIds:u}))),n,u,e),e.ResultTableView=({queryId:e,queries:s,trackReorder:t,resultRowComponent:o=ue,getResultRowComponentProps:r,separator:l,debugIds:n})=>te(d(_(e,s,t),(t=>W(o,{...se(r,t),key:t,queryId:e,rowId:t,queries:s,debugIds:n}))),l,n,e),e.RowView=re,e.SliceView=le,e.SortedTableView=({tableId:e,cellId:s,descending:t,store:o,rowComponent:r=re,getRowComponentProps:l,separator:n,debugIds:u})=>te(d(M(e,s,t,o),(s=>W(r,{...se(l,s),key:s,tableId:e,rowId:s,store:o,debugIds:u}))),n,u,e),e.TableView=de,e.TablesView=({store:e,trackReorder:s,tableComponent:t=de,getTableComponentProps:o,separator:r,debugIds:l})=>te(d(x(e,s),(s=>W(t,{...se(o,s),key:s,tableId:s,store:e,debugIds:l}))),r),e.useAddRowCallback=(e,s,t=[],o,r=u,d=[])=>{const l=w(o);return m((t=>n(l,(o=>n(s(t,o),(s=>r(o.addRow(e,s),o,s)))))),[l,e,...t,...d])},e.useCell=A,e.useCellIds=D,e.useCellIdsListener=(e,s,t,o,r,d,l)=>V("CellIds",w(l),t,o,[e,s],r,d),e.useCellListener=(e,s,t,o,r,d,l)=>V("Cell",w(l),o,r,[e,s,t],d),e.useCheckpoint=J,e.useCheckpointIds=H,e.useCheckpointIdsListener=(e,s,t)=>V("CheckpointIds",g(t),e,s),e.useCheckpointListener=(e,s,t,o)=>V("Checkpoint",g(o),s,t,[e]),e.useCheckpoints=e=>c(e,10),e.useCreateCheckpoints=(e,s,t)=>S(e,s,t),e.useCreateIndexes=(e,s,t)=>S(e,s,t),e.useCreateMetrics=(e,s,t)=>S(e,s,t),e.useCreatePersister=(e,s,t=[],o,r=[])=>{const[,d]=L(),l=T((()=>s(e)),[e,...t]);return h((()=>((async()=>{await(o?.(l)),d(1)})(),()=>{l.destroy()})),[l,...r]),l},e.useCreateQueries=(e,s,t)=>S(e,s,t),e.useCreateRelationships=(e,s,t)=>S(e,s,t),e.useCreateStore=(e,s=[])=>T(e,s),e.useDelCellCallback=(e,s,t,o,r,d,l)=>q(r,"Cell",d,l,e,s,t,o),e.useDelRowCallback=(e,s,t,o,r)=>q(t,"Row",o,r,e,s),e.useDelTableCallback=(e,s,t,o)=>q(s,"Table",t,o,e),e.useDelTablesCallback=(e,s,t)=>q(e,"Tables",s,t),e.useGoBackwardCallback=K,e.useGoForwardCallback=N,e.useGoToCallback=(e,s=[],t,o=u,r=[])=>{const d=g(t);return m((s=>n(d,(t=>n(e(s),(e=>o(t.goTo(e),e)))))),[d,...s,...r])},e.useIndexes=e=>c(e,4),e.useLinkedRowIds=U,e.useLinkedRowIdsListener=(e,s,t,o,r)=>V("LinkedRowIds",p(r),t,o,[e,s]),e.useLocalRowIds=Q,e.useLocalRowIdsListener=(e,s,t,o,r)=>V("LocalRowIds",p(r),t,o,[e,s]),e.useMetric=F,e.useMetricListener=(e,s,t,o)=>V("Metric",C(o),s,t,[e]),e.useMetrics=e=>c(e,2),e.useQueries=e=>c(e,8),e.useRedoInformation=e=>{const s=g(e),[,,[t]]=H(s);return[!l(t),N(s),t,n(t,(e=>s?.getCheckpoint(e)))??o]},e.useRelationships=e=>c(e,6),e.useRemoteRowId=E,e.useRemoteRowIdListener=(e,s,t,o,r)=>V("RemoteRowId",p(r),t,o,[e,s]),e.useResultCell=z,e.useResultCellIds=$,e.useResultCellIdsListener=(e,s,t,o,r)=>V("ResultCellIds",k(r),t,o,[e,s]),e.useResultCellListener=(e,s,t,o,r,d)=>V("ResultCell",k(d),o,r,[e,s,t]),e.useResultRow=(e,s,t)=>f("ResultRow",k(t),{},[e,s]),e.useResultRowIds=_,e.useResultRowIdsListener=(e,s,t,o,r)=>V("ResultRowIds",k(r),s,t,[e],o),e.useResultRowListener=(e,s,t,o,r)=>V("ResultRow",k(r),t,o,[e,s]),e.useResultSortedRowIds=O,e.useResultSortedRowIdsListener=(e,s,t,o,r,d)=>V("ResultSortedRowIds",k(d),o,r,[e,s,t]),e.useResultTable=(e,s)=>f("ResultTable",k(s),{},[e]),e.useResultTableListener=(e,s,t,o)=>V("ResultTable",k(o),s,t,[e]),e.useRow=(e,s,t)=>f("Row",w(t),{},[e,s]),e.useRowIds=B,e.useRowIdsListener=(e,s,t,o,r,d)=>V("RowIds",w(d),s,t,[e],o,r),e.useRowListener=(e,s,t,o,r,d)=>V("Row",w(d),t,o,[e,s],r),e.useSetCellCallback=(e,s,t,o,r,d,l,n)=>P(d,"Cell",o,r,l,n,e,s,t),e.useSetCheckpointCallback=(e=u,s=[],t,o=u,r=[])=>{const d=g(t);return m((s=>n(d,(t=>{const r=e(s);o(t.addCheckpoint(r),t,r)}))),[d,...s,...r])},e.useSetPartialRowCallback=(e,s,t,o,r,d,l)=>P(r,"PartialRow",t,o,d,l,e,s),e.useSetRowCallback=(e,s,t,o,r,d,l)=>P(r,"Row",t,o,d,l,e,s),e.useSetTableCallback=(e,s,t,o,r,d)=>P(o,"Table",s,t,r,d,e),e.useSetTablesCallback=(e,s,t,o,r)=>P(t,"Tables",e,s,o,r),e.useSliceIds=G,e.useSliceIdsListener=(e,s,t,o)=>V("SliceIds",b(o),s,t,[e]),e.useSliceRowIds=j,e.useSliceRowIdsListener=(e,s,t,o,r)=>V("SliceRowIds",b(r),t,o,[e,s]),e.useSortedRowIds=M,e.useSortedRowIdsListener=(e,s,t,o,r,d,l)=>V("SortedRowIds",w(l),o,r,[e,s,t],d),e.useStore=e=>c(e,0),e.useTable=(e,s)=>f("Table",w(s),{},[e]),e.useTableIds=x,e.useTableIdsListener=(e,s,t,o,r)=>V("TableIds",w(r),e,s,[],t,o),e.useTableListener=(e,s,t,o,r)=>V("Table",w(r),s,t,[e],o),e.useTables=e=>f("Tables",w(e),{}),e.useTablesListener=(e,s,t,o)=>V("Tables",w(o),e,s,[],t),e.useUndoInformation=e=>{const s=g(e),[t,r]=H(s);return[(d=t,!(0==(e=>e.length)(d))),K(s),r,n(r,(e=>s?.getCheckpoint(e)))??o];var d},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?s(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],s):s((e="undefined"!=typeof globalThis?globalThis:e||self).TinyBaseUiReact={},e.React);
