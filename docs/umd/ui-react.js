var e,s;e=this,s=function(e,s){"use strict";const t=e=>typeof e,o="",r=t(o),l=(e,s)=>e.map(s),d=e=>null==e,n=(e,s,t)=>d(e)?t?.():s(e),u=()=>{},{createContext:i,useContext:a}=s,c=i([]),I=(e,s)=>{const t=a(c);return d(e)?t[s]:((e,s)=>n(e,(e=>e[s])))(t[s+1],e)},R=(e,s)=>{const o=I(e,s);return d(e)||(e=>t(e)==r)(e)?o:e},w=e=>R(e,0),C=e=>R(e,2),b=e=>R(e,4),p=e=>R(e,6),k=e=>R(e,8),g=e=>R(e,10),{useCallback:h,useEffect:m,useMemo:T,useState:L}=s,y=(e,s,t=[])=>{const o=T((()=>s(e)),[e,...t]);return m((()=>()=>o.destroy()),[o]),o},S=(e,s,t,o=[],...r)=>{const l=s?.["get"+e]??(()=>t),d=l(...o),[,n]=L(d);return m((()=>{const t=s?.[`add${e}Listener`]?.(...o,(()=>n(l(...o))),...r);return()=>s?.delListener(t)}),[s,e,n,l,...o]),d},f=(e,s,t,o=[],r=[],...l)=>{m((()=>{const o=s?.[`add${e}Listener`]?.(...r,t,...l);return()=>s?.delListener(o)}),[s,e,...o,...r,...l])},v=(e,s,t,o=[],r=u,l=[],...d)=>{const i=w(e);return h((e=>n(i,(o=>n(t(e,o),(e=>r(o["set"+s](...d,e),e)))))),[i,s,...o,...l,...d])},x=(e,s,t=u,o=[],...r)=>{const l=w(e);return h((()=>t(l?.["del"+s](...r))),[l,s,...o,...r])},V=(e,s,t)=>{const o=g(e);return h((()=>o?.[s](t)),[o,s,t])},P=(e,s)=>S("TableIds",w(e),[],[],s),q=(e,s,t)=>S("RowIds",w(s),[],[e],t),B=(e,s,t,o)=>S("CellIds",w(t),[],[e,s],o),M=(e,s,t,o)=>S("Cell",w(o),void 0,[e,s,t]),D=(e,s)=>S("Metric",C(s),void 0,[e]),A=(e,s)=>S("SliceIds",b(s),[],[e]),F=(e,s,t)=>S("SliceRowIds",b(t),[],[e,s]),G=(e,s,t)=>S("RemoteRowId",p(t),void 0,[e,s]),j=(e,s,t)=>S("LocalRowIds",p(t),[],[e,s]),E=(e,s,t)=>S("LinkedRowIds",p(t),[],[e,s]),Q=(e,s,t)=>S("ResultRowIds",k(s),[],[e],t),U=(e,s,t)=>S("ResultCellIds",k(t),[],[e,s]),$=(e,s,t,o)=>S("ResultCell",k(o),void 0,[e,s,t]),_=e=>S("CheckpointIds",g(e),[[],void 0,[]]),O=(e,s)=>S("Checkpoint",g(s),void 0,[e]),z=e=>V(e,"goBackward"),H=e=>V(e,"goForward"),{createElement:J,useMemo:K}=s,N=e=>{const s=p(e);return[s,s?.getStore()]},W=({relationshipId:e,relationships:s,rowComponent:t=se,getRowComponentProps:o,separator:r,debugIds:d},n,u)=>{const[i,a]=N(s),c=i?.getLocalTableId(e),I=n(e,u,i);return Z(l(I,(e=>J(t,{...Y(o,e),key:e,tableId:c,rowId:e,store:a,debugIds:d}))),r,d,u)},X=e=>({checkpoints:s,checkpointComponent:t=de,getCheckpointComponentProps:o,separator:r,debugIds:d})=>{const n=g(s);return Z(l(e(_(n)),(e=>J(t,{...Y(o,e),key:e,checkpoints:n,checkpointId:e,debugIds:d}))),r)},Y=(e,s)=>d(e)?{}:e(s),Z=(e,s,t,o)=>{const r=d(s)||!Array.isArray(e)?e:l(e,((e,t)=>t>0?[s,e]:e));return t?[o,":{",r,"}"]:r},ee=({tableId:e,rowId:s,cellId:t,store:r,debugIds:l})=>Z(o+(M(e,s,t,r)??o),void 0,l,t),se=({tableId:e,rowId:s,store:t,trackReorder:o,cellComponent:r=ee,getCellComponentProps:d,separator:n,debugIds:u})=>Z(l(B(e,s,t,o),(o=>J(r,{...Y(d,o),key:o,tableId:e,rowId:s,cellId:o,store:t,debugIds:u}))),n,u,s),te=({tableId:e,store:s,trackReorder:t,rowComponent:o=se,getRowComponentProps:r,separator:d,debugIds:n})=>Z(l(q(e,s,t),(t=>J(o,{...Y(r,t),key:t,tableId:e,rowId:t,store:s,debugIds:n}))),d,n,e),oe=({indexId:e,sliceId:s,indexes:t,rowComponent:o=se,getRowComponentProps:r,separator:d,debugIds:n})=>{const u=b(t),i=u?.getStore(),a=u?.getTableId(e),c=F(e,s,u);return Z(l(c,(e=>J(o,{...Y(r,e),key:e,tableId:a,rowId:e,store:i,debugIds:n}))),d,n,s)},re=({queryId:e,rowId:s,cellId:t,queries:r,debugIds:l})=>Z(o+($(e,s,t,r)??o),void 0,l,t),le=({queryId:e,rowId:s,queries:t,resultCellComponent:o=re,getResultCellComponentProps:r,separator:d,debugIds:n})=>Z(l(U(e,s,t),(l=>J(o,{...Y(r,l),key:l,queryId:e,rowId:s,cellId:l,queries:t,debugIds:n}))),d,n,s),de=({checkpoints:e,checkpointId:s,debugIds:t})=>Z(O(s,e)??o,void 0,t,s),ne=X((e=>e[0])),ue=X((e=>d(e[1])?[]:[e[1]])),ie=X((e=>e[2]));e.BackwardCheckpointsView=ne,e.CellView=ee,e.CheckpointView=de,e.CurrentCheckpointView=ue,e.ForwardCheckpointsView=ie,e.IndexView=({indexId:e,indexes:s,sliceComponent:t=oe,getSliceComponentProps:o,separator:r,debugIds:d})=>Z(l(A(e,s),(r=>J(t,{...Y(o,r),key:r,indexId:e,sliceId:r,indexes:s,debugIds:d}))),r,d,e),e.LinkedRowsView=e=>W(e,E,e.firstRowId),e.LocalRowsView=e=>W(e,j,e.remoteRowId),e.MetricView=({metricId:e,metrics:s,debugIds:t})=>Z(D(e,s)??o,void 0,t,e),e.Provider=({store:e,storesById:t,metrics:o,metricsById:r,indexes:l,indexesById:d,relationships:n,relationshipsById:u,queries:i,queriesById:a,checkpoints:I,checkpointsById:R,children:w})=>{const C=s.useContext(c);return J(c.Provider,{value:K((()=>[e??C[0],{...C[1],...t},o??C[2],{...C[3],...r},l??C[4],{...C[5],...d},n??C[6],{...C[7],...u},i??C[8],{...C[9],...a},I??C[10],{...C[11],...R}]),[e,t,o,r,l,d,n,u,i,a,I,R,C])},w)},e.RemoteRowView=({relationshipId:e,localRowId:s,relationships:t,rowComponent:o=se,getRowComponentProps:r,debugIds:l})=>{const[n,u]=N(t),i=n?.getRemoteTableId(e),a=G(e,s,n);return Z(d(i)||d(a)?null:J(o,{...Y(r,a),key:a,tableId:i,rowId:a,store:u,debugIds:l}),void 0,l,s)},e.ResultCellView=re,e.ResultRowView=le,e.ResultTableView=({queryId:e,queries:s,trackReorder:t,resultRowComponent:o=le,getResultRowComponentProps:r,separator:d,debugIds:n})=>Z(l(Q(e,s,t),(t=>J(o,{...Y(r,t),key:t,queryId:e,rowId:t,queries:s,debugIds:n}))),d,n,e),e.RowView=se,e.SliceView=oe,e.TableView=te,e.TablesView=({store:e,trackReorder:s,tableComponent:t=te,getTableComponentProps:o,separator:r,debugIds:d})=>Z(l(P(e,s),(s=>J(t,{...Y(o,s),key:s,tableId:s,store:e,debugIds:d}))),r),e.useAddRowCallback=(e,s,t=[],o,r=u,l=[])=>{const d=w(o);return h((t=>n(d,(o=>n(s(t,o),(s=>r(o.addRow(e,s),o,s)))))),[d,e,...t,...l])},e.useCell=M,e.useCellIds=B,e.useCellIdsListener=(e,s,t,o,r,l,d)=>f("CellIds",w(d),t,o,[e,s],r,l),e.useCellListener=(e,s,t,o,r,l,d)=>f("Cell",w(d),o,r,[e,s,t],l),e.useCheckpoint=O,e.useCheckpointIds=_,e.useCheckpointIdsListener=(e,s,t)=>f("CheckpointIds",g(t),e,s),e.useCheckpointListener=(e,s,t,o)=>f("Checkpoint",g(o),s,t,[e]),e.useCheckpoints=e=>I(e,10),e.useCreateCheckpoints=(e,s,t)=>y(e,s,t),e.useCreateIndexes=(e,s,t)=>y(e,s,t),e.useCreateMetrics=(e,s,t)=>y(e,s,t),e.useCreatePersister=(e,s,t=[],o,r=[])=>{const[,l]=L(),d=T((()=>s(e)),[e,...t]);return m((()=>((async()=>{await(o?.(d)),l(1)})(),()=>{d.destroy()})),[d,...r]),d},e.useCreateQueries=(e,s,t)=>y(e,s,t),e.useCreateRelationships=(e,s,t)=>y(e,s,t),e.useCreateStore=(e,s=[])=>T(e,s),e.useDelCellCallback=(e,s,t,o,r,l,d)=>x(r,"Cell",l,d,e,s,t,o),e.useDelRowCallback=(e,s,t,o,r)=>x(t,"Row",o,r,e,s),e.useDelTableCallback=(e,s,t,o)=>x(s,"Table",t,o,e),e.useDelTablesCallback=(e,s,t)=>x(e,"Tables",s,t),e.useGoBackwardCallback=z,e.useGoForwardCallback=H,e.useGoToCallback=(e,s=[],t,o=u,r=[])=>{const l=g(t);return h((s=>n(l,(t=>n(e(s),(e=>o(t.goTo(e),e)))))),[l,...s,...r])},e.useIndexes=e=>I(e,4),e.useLinkedRowIds=E,e.useLinkedRowIdsListener=(e,s,t,o,r)=>f("LinkedRowIds",p(r),t,o,[e,s]),e.useLocalRowIds=j,e.useLocalRowIdsListener=(e,s,t,o,r)=>f("LocalRowIds",p(r),t,o,[e,s]),e.useMetric=D,e.useMetricListener=(e,s,t,o)=>f("Metric",C(o),s,t,[e]),e.useMetrics=e=>I(e,2),e.useQueries=e=>I(e,8),e.useRedoInformation=e=>{const s=g(e),[,,[t]]=_(s);return[!d(t),H(s),t,n(t,(e=>s?.getCheckpoint(e)))??o]},e.useRelationships=e=>I(e,6),e.useRemoteRowId=G,e.useRemoteRowIdListener=(e,s,t,o,r)=>f("RemoteRowId",p(r),t,o,[e,s]),e.useResultCell=$,e.useResultCellIds=U,e.useResultCellIdsListener=(e,s,t,o,r)=>f("ResultCellIds",k(r),t,o,[e,s]),e.useResultCellListener=(e,s,t,o,r,l)=>f("ResultCell",k(l),o,r,[e,s,t]),e.useResultRow=(e,s,t)=>S("ResultRow",k(t),{},[e,s]),e.useResultRowIds=Q,e.useResultRowIdsListener=(e,s,t,o,r)=>f("ResultRowIds",k(r),s,t,[e],o),e.useResultRowListener=(e,s,t,o,r)=>f("ResultRow",k(r),t,o,[e,s]),e.useResultTable=(e,s)=>S("ResultTable",k(s),{},[e]),e.useResultTableListener=(e,s,t,o)=>f("ResultTable",k(o),s,t,[e]),e.useRow=(e,s,t)=>S("Row",w(t),{},[e,s]),e.useRowIds=q,e.useRowIdsListener=(e,s,t,o,r,l)=>f("RowIds",w(l),s,t,[e],o,r),e.useRowListener=(e,s,t,o,r,l)=>f("Row",w(l),t,o,[e,s],r),e.useSetCellCallback=(e,s,t,o,r,l,d,n)=>v(l,"Cell",o,r,d,n,e,s,t),e.useSetCheckpointCallback=(e=u,s=[],t,o=u,r=[])=>{const l=g(t);return h((s=>n(l,(t=>{const r=e(s);o(t.addCheckpoint(r),t,r)}))),[l,...s,...r])},e.useSetPartialRowCallback=(e,s,t,o,r,l,d)=>v(r,"PartialRow",t,o,l,d,e,s),e.useSetRowCallback=(e,s,t,o,r,l,d)=>v(r,"Row",t,o,l,d,e,s),e.useSetTableCallback=(e,s,t,o,r,l)=>v(o,"Table",s,t,r,l,e),e.useSetTablesCallback=(e,s,t,o,r)=>v(t,"Tables",e,s,o,r),e.useSliceIds=A,e.useSliceIdsListener=(e,s,t,o)=>f("SliceIds",b(o),s,t,[e]),e.useSliceRowIds=F,e.useSliceRowIdsListener=(e,s,t,o,r)=>f("SliceRowIds",b(r),t,o,[e,s]),e.useStore=e=>I(e,0),e.useTable=(e,s)=>S("Table",w(s),{},[e]),e.useTableIds=P,e.useTableIdsListener=(e,s,t,o,r)=>f("TableIds",w(r),e,s,[],t,o),e.useTableListener=(e,s,t,o,r)=>f("Table",w(r),s,t,[e],o),e.useTables=e=>S("Tables",w(e),{}),e.useTablesListener=(e,s,t,o)=>f("Tables",w(o),e,s,[],t),e.useUndoInformation=e=>{const s=g(e),[t,r]=_(s);return[(l=t,!(0==(e=>e.length)(l))),z(s),r,n(r,(e=>s?.getCheckpoint(e)))??o];var l},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?s(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],s):s((e="undefined"!=typeof globalThis?globalThis:e||self).TinyBaseUiReact={},e.React);
