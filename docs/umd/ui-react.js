var e,s;e=this,s=function(e,s){"use strict";const o=e=>typeof e,t="",r=o(t),d=(e,s)=>e.map(s),n=e=>null==e,l=(e,s,o)=>n(e)?o?.():s(e),i=()=>{},{createContext:a,useContext:c}=s,u=a([]),I=(e,s)=>{const o=c(u);return n(e)?o[s]:((e,s)=>l(e,(e=>e[s])))(o[s+1],e)},p=(e,s)=>{const t=I(e,s);return n(e)||(e=>o(e)==r)(e)?t:e},w=e=>p(e,0),b=e=>p(e,2),C=e=>p(e,4),k=e=>p(e,6),R=e=>p(e,8),{useCallback:g,useEffect:h,useMemo:m,useState:T}=s,L=(e,s,o=[])=>{const t=m((()=>s(e)),[e,...o]);return h((()=>()=>t.destroy()),[t]),t},y=(e,s,o,t=[],...r)=>{const d=s?.["get"+e]??(()=>o),n=d(...t),[,l]=T(n);return h((()=>{const o=s?.[`add${e}Listener`]?.(...t,(()=>l(d(...t))),...r);return()=>s?.delListener(o)}),[s,e,l,d,...t]),n},S=(e,s,o,t=[],r=[],...d)=>{h((()=>{const t=s?.[`add${e}Listener`]?.(...r,o,...d);return()=>s?.delListener(t)}),[s,e,...t,...r,...d])},f=(e,s,o,t=[],r=i,d=[],...n)=>{const a=w(e);return g((e=>l(a,(t=>l(o(e,t),(e=>r(t["set"+s](...n,e),e)))))),[a,s,...t,...d,...n])},x=(e,s,o=i,t=[],...r)=>{const d=w(e);return g((()=>o(d?.["del"+s](...r))),[d,s,...t,...r])},v=(e,s,o)=>{const t=R(e);return g((()=>t?.[s](o)),[t,s,o])},P=(e,s)=>y("TableIds",w(e),[],[],s),V=(e,s,o)=>y("RowIds",w(s),[],[e],o),M=(e,s,o,t)=>y("CellIds",w(o),[],[e,s],t),B=(e,s,o,t)=>y("Cell",w(t),void 0,[e,s,o]),D=(e,s)=>y("Metric",b(s),void 0,[e]),A=(e,s)=>y("SliceIds",C(s),[],[e]),F=(e,s,o)=>y("SliceRowIds",C(o),[],[e,s]),G=(e,s,o)=>y("RemoteRowId",k(o),void 0,[e,s]),j=(e,s,o)=>y("LocalRowIds",k(o),[],[e,s]),E=(e,s,o)=>y("LinkedRowIds",k(o),[],[e,s]),U=e=>y("CheckpointIds",R(e),[[],void 0,[]]),$=(e,s)=>y("Checkpoint",R(s),void 0,[e]),_=e=>v(e,"goBackward"),q=e=>v(e,"goForward"),{createElement:O,useMemo:z}=s,H=e=>{const s=k(e);return[s,s?.getStore()]},J=({relationshipId:e,relationships:s,rowComponent:o=X,getRowComponentProps:t,separator:r,debugIds:n},l,i)=>{const[a,c]=H(s),u=a?.getLocalTableId(e),I=l(e,i,a);return Q(d(I,(e=>O(o,{...N(t,e),key:e,tableId:u,rowId:e,store:c,debugIds:n}))),r,n,i)},K=e=>({checkpoints:s,checkpointComponent:o=ee,getCheckpointComponentProps:t,separator:r,debugIds:n})=>{const l=R(s);return Q(d(e(U(l)),(e=>O(o,{...N(t,e),key:e,checkpoints:l,checkpointId:e,debugIds:n}))),r)},N=(e,s)=>n(e)?{}:e(s),Q=(e,s,o,t)=>{const r=n(s)||!Array.isArray(e)?e:d(e,((e,o)=>o>0?[s,e]:e));return o?[t,":{",r,"}"]:r},W=({tableId:e,rowId:s,cellId:o,store:r,debugIds:d})=>Q(t+(B(e,s,o,r)??t),void 0,d,o),X=({tableId:e,rowId:s,store:o,trackReorder:t,cellComponent:r=W,getCellComponentProps:n,separator:l,debugIds:i})=>Q(d(M(e,s,o,t),(t=>O(r,{...N(n,t),key:t,tableId:e,rowId:s,cellId:t,store:o,debugIds:i}))),l,i,s),Y=({tableId:e,store:s,trackReorder:o,rowComponent:t=X,getRowComponentProps:r,separator:n,debugIds:l})=>Q(d(V(e,s,o),(o=>O(t,{...N(r,o),key:o,tableId:e,rowId:o,store:s,debugIds:l}))),n,l,e),Z=({indexId:e,sliceId:s,indexes:o,rowComponent:t=X,getRowComponentProps:r,separator:n,debugIds:l})=>{const i=C(o),a=i?.getStore(),c=i?.getTableId(e),u=F(e,s,i);return Q(d(u,(e=>O(t,{...N(r,e),key:e,tableId:c,rowId:e,store:a,debugIds:l}))),n,l,s)},ee=({checkpoints:e,checkpointId:s,debugIds:o})=>Q($(s,e)??t,void 0,o,s),se=K((e=>e[0])),oe=K((e=>n(e[1])?[]:[e[1]])),te=K((e=>e[2]));e.BackwardCheckpointsView=se,e.CellView=W,e.CheckpointView=ee,e.CurrentCheckpointView=oe,e.ForwardCheckpointsView=te,e.IndexView=({indexId:e,indexes:s,sliceComponent:o=Z,getSliceComponentProps:t,separator:r,debugIds:n})=>Q(d(A(e,s),(r=>O(o,{...N(t,r),key:r,indexId:e,sliceId:r,indexes:s,debugIds:n}))),r,n,e),e.LinkedRowsView=e=>J(e,E,e.firstRowId),e.LocalRowsView=e=>J(e,j,e.remoteRowId),e.MetricView=({metricId:e,metrics:s,debugIds:o})=>Q(D(e,s)??t,void 0,o,e),e.Provider=({store:e,storesById:o,metrics:t,metricsById:r,indexes:d,indexesById:n,relationships:l,relationshipsById:i,checkpoints:a,checkpointsById:c,children:I})=>{const p=s.useContext(u);return O(u.Provider,{value:z((()=>[e??p[0],{...p[1],...o},t??p[2],{...p[3],...r},d??p[4],{...p[5],...n},l??p[6],{...p[7],...i},a??p[8],{...p[9],...c}]),[e,o,t,r,d,n,l,i,a,c,p])},I)},e.RemoteRowView=({relationshipId:e,localRowId:s,relationships:o,rowComponent:t=X,getRowComponentProps:r,debugIds:d})=>{const[l,i]=H(o),a=l?.getRemoteTableId(e),c=G(e,s,l);return Q(n(a)||n(c)?null:O(t,{...N(r,c),key:c,tableId:a,rowId:c,store:i,debugIds:d}),void 0,d,s)},e.RowView=X,e.SliceView=Z,e.TableView=Y,e.TablesView=({store:e,trackReorder:s,tableComponent:o=Y,getTableComponentProps:t,separator:r,debugIds:n})=>Q(d(P(e,s),(s=>O(o,{...N(t,s),key:s,tableId:s,store:e,debugIds:n}))),r),e.useAddRowCallback=(e,s,o=[],t,r=i,d=[])=>{const n=w(t);return g((o=>l(n,(t=>l(s(o,t),(s=>r(t.addRow(e,s),t,s)))))),[n,e,...o,...d])},e.useCell=B,e.useCellIds=M,e.useCellIdsListener=(e,s,o,t,r,d,n)=>S("CellIds",w(n),o,t,[e,s],r,d),e.useCellListener=(e,s,o,t,r,d,n)=>S("Cell",w(n),t,r,[e,s,o],d),e.useCheckpoint=$,e.useCheckpointIds=U,e.useCheckpointIdsListener=(e,s,o)=>S("CheckpointIds",R(o),e,s),e.useCheckpointListener=(e,s,o,t)=>S("Checkpoint",R(t),s,o,[e]),e.useCheckpoints=e=>I(e,8),e.useCreateCheckpoints=(e,s,o)=>L(e,s,o),e.useCreateIndexes=(e,s,o)=>L(e,s,o),e.useCreateMetrics=(e,s,o)=>L(e,s,o),e.useCreatePersister=(e,s,o=[],t,r=[])=>{const[,d]=T(),n=m((()=>s(e)),[e,...o]);return h((()=>((async()=>{await(t?.(n)),d(1)})(),()=>{n.destroy()})),[n,...r]),n},e.useCreateRelationships=(e,s,o)=>L(e,s,o),e.useCreateStore=(e,s=[])=>m(e,s),e.useDelCellCallback=(e,s,o,t,r,d,n)=>x(r,"Cell",d,n,e,s,o,t),e.useDelRowCallback=(e,s,o,t,r)=>x(o,"Row",t,r,e,s),e.useDelTableCallback=(e,s,o,t)=>x(s,"Table",o,t,e),e.useDelTablesCallback=(e,s,o)=>x(e,"Tables",s,o),e.useGoBackwardCallback=_,e.useGoForwardCallback=q,e.useGoToCallback=(e,s=[],o,t=i,r=[])=>{const d=R(o);return g((s=>l(d,(o=>l(e(s),(e=>t(o.goTo(e),e)))))),[d,...s,...r])},e.useIndexes=e=>I(e,4),e.useLinkedRowIds=E,e.useLinkedRowIdsListener=(e,s,o,t,r)=>S("LinkedRowIds",k(r),o,t,[e,s]),e.useLocalRowIds=j,e.useLocalRowIdsListener=(e,s,o,t,r)=>S("LocalRowIds",k(r),o,t,[e,s]),e.useMetric=D,e.useMetricListener=(e,s,o,t)=>S("Metric",b(t),s,o,[e]),e.useMetrics=e=>I(e,2),e.useRedoInformation=e=>{const s=R(e),[,,[o]]=U(s);return[!n(o),q(s),o,l(o,(e=>s?.getCheckpoint(e)))??t]},e.useRelationships=e=>I(e,6),e.useRemoteRowId=G,e.useRemoteRowIdListener=(e,s,o,t,r)=>S("RemoteRowId",k(r),o,t,[e,s]),e.useRow=(e,s,o)=>y("Row",w(o),{},[e,s]),e.useRowIds=V,e.useRowIdsListener=(e,s,o,t,r,d)=>S("RowIds",w(d),s,o,[e],t,r),e.useRowListener=(e,s,o,t,r,d)=>S("Row",w(d),o,t,[e,s],r),e.useSetCellCallback=(e,s,o,t,r,d,n,l)=>f(d,"Cell",t,r,n,l,e,s,o),e.useSetCheckpointCallback=(e=i,s=[],o,t=i,r=[])=>{const d=R(o);return g((s=>l(d,(o=>{const r=e(s);t(o.addCheckpoint(r),o,r)}))),[d,...s,...r])},e.useSetPartialRowCallback=(e,s,o,t,r,d,n)=>f(r,"PartialRow",o,t,d,n,e,s),e.useSetRowCallback=(e,s,o,t,r,d,n)=>f(r,"Row",o,t,d,n,e,s),e.useSetTableCallback=(e,s,o,t,r,d)=>f(t,"Table",s,o,r,d,e),e.useSetTablesCallback=(e,s,o,t,r)=>f(o,"Tables",e,s,t,r),e.useSliceIds=A,e.useSliceIdsListener=(e,s,o,t)=>S("SliceIds",C(t),s,o,[e]),e.useSliceRowIds=F,e.useSliceRowIdsListener=(e,s,o,t,r)=>S("SliceRowIds",C(r),o,t,[e,s]),e.useStore=e=>I(e,0),e.useTable=(e,s)=>y("Table",w(s),{},[e]),e.useTableIds=P,e.useTableIdsListener=(e,s,o,t,r)=>S("TableIds",w(r),e,s,[],o,t),e.useTableListener=(e,s,o,t,r)=>S("Table",w(r),s,o,[e],t),e.useTables=e=>y("Tables",w(e),{}),e.useTablesListener=(e,s,o,t)=>S("Tables",w(t),e,s,[],o),e.useUndoInformation=e=>{const s=R(e),[o,r]=U(s);return[(d=o,!(0==(e=>e.length)(d))),_(s),r,l(r,(e=>s?.getCheckpoint(e)))??t];var d},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?s(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],s):s((e="undefined"!=typeof globalThis?globalThis:e||self).TinyBaseUiReact={},e.React);
