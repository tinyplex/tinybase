var e,t;e=this,t=function(e){"use strict";const t=e=>typeof e,s="",n=t(s),a=t(!0),l=t(0),r=t(t),o="type",c="default",i="Has",d="Ids",u="Table",g=u+"s",h=u+d,f="Row",b=f+"Count",C=f+d,T="Cell",p=T+d,v="Value",V=v+"s",y=v+d,w=e=>s+e,S=(e,t)=>e.startsWith(t),M=(e,t)=>e.endsWith(t),m=Math.max,I=isFinite,R=e=>null==e,L=(e,t,s)=>R(e)?s?.():t(e),H=e=>e==n||e==a,J=e=>t(e)==r,E=e=>Array.isArray(e),D=(e,t,s)=>e.slice(t,s),x=e=>e.length,F=(e,t)=>e.forEach(t),O=(e,t)=>e.map(t),z=(e,...t)=>e.push(...t),A=Object,P=e=>A.getPrototypeOf(e),W=A.entries,j=A.isFrozen,k=e=>!R(e)&&L(P(e),(e=>e==A.prototype||R(P(e))),(()=>!0)),N=A.keys,B=A.freeze,$=(e=[])=>A.fromEntries(e),q=(e,t)=>t in e,G=(e,t)=>(delete e[t],e),K=(e,t)=>F(W(e),(([e,s])=>t(s,e))),Q=(e,t)=>O(W(e),(([e,s])=>t(s,e))),U=e=>k(e)&&0==(e=>x(N(e)))(e),X=(e,t,s)=>(q(e,t)||(e[t]=s()),e[t]),Y=(e,t,s,n=0)=>R(e)||!k(e)||!n&&U(e)||j(e)?(s?.(),!1):(Q(e,((s,n)=>{t(s,n)||G(e,n)})),!!n||!U(e)),Z=e=>new Set(E(e)||R(e)?e:[e]),_=(e,t)=>e?.add(t),ee=e=>e?.size??0,te=(e,t)=>e?.has(t)??!1,se=e=>R(e)||0==ee(e),ne=e=>e.clear(),ae=(e,t)=>e?.forEach(t),le=(e,t)=>e?.delete(t),re=e=>new Map(e),oe=e=>[...e?.keys()??[]],ce=(e,t)=>e?.get(t),ie=(e,t)=>ae(e,((e,s)=>t(s,e))),de=(e,t,s)=>R(s)?(le(e,t),e):e?.set(t,s),ue=(e,t,s,n)=>(te(e,t)?n?.(ce(e,t)):de(e,t,s()),ce(e,t)),ge=(e,t,s,n=de)=>(Q(t,((t,n)=>s(e,n,t))),ie(e,(s=>q(t,s)?0:n(e,s))),e),he=(e,t,s,n)=>{const a={};return ae(e,((e,l)=>{if(!s?.(e,l)){const s=t?t(e,l):e;!n?.(s)&&(a[l]=s)}})),a},fe=(e,t,s)=>he(e,(e=>he(e,t,s)),se,U),be=(e,t,s)=>he(e,(e=>fe(e,t,s)),se,U),Ce=(e,t)=>{const s=re();return ae(e,((e,n)=>s.set(n,t?.(e)??e))),s},Te=e=>Ce(e,Ce),pe=e=>Ce(e,Te),ve=(e,t,s,n,a=0)=>L((s?ue:ce)(e,t[a],a>x(t)-2?s:re),(l=>{if(a>x(t)-2)return n?.(l)&&de(e,t[a]),l;const r=ve(l,t,s,n,a+1);return se(l)&&de(e,t[a]),r})),Ve=new globalThis.TextEncoder,ye=e=>{let t=2166136261;return F(Ve.encode(e),(e=>{t^=e,t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24)})),t>>>0},we=([e,t,s])=>[e,t,s],Se=([e,t])=>Me(e,t),Me=(e,t)=>t?[e,t]:[e],me=e=>e[2],Ie=(e,t)=>ye(e+":"+t),Re=(e,t)=>t>e?(e?ye(e):0)^ye(t):0,Le=(e,t)=>((e??"")>(t??"")?e:t)??"",He=(e,t,s)=>{e[2]=t>>>0,s>e[1]&&(e[1]=s)},Je=(e=s)=>Me($(),e),Ee=(e=s)=>[re(),e,0],De=([e,t,s],n=we)=>[he(e,n),t,s],xe=([e,t],s=Se)=>Me(he(e,s),t),Fe=(e,s)=>{return E(e)&&3==x(e)&&(a=e[1],t(a)==n)&&t(e[2])==l&&I(e[2])&&s(e[0]);var a},Oe=/^\d+$/,ze=()=>{const e=[];let t=0;return[n=>(n?e.shift():null)??s+t++,t=>{Oe.test(t)&&x(e)<1e3&&z(e,t)}]},Ae=e=>[e,e],Pe=()=>[re(),re()],We=e=>[...e],je=([e,t])=>e===t,ke=e=>{const s=t(e);return H(s)||s==l&&I(e)?s:void 0},Ne=e=>R(e)||!R(ke(e)),Be=(e,t,s,n,a)=>R(a)?e.delCell(t,s,n,!0):e.setCell(t,s,n,a),$e=(e,t,s)=>R(s)?e.delValue(t):e.setValue(t,s),qe=e=>JSON.stringify(e,((e,t)=>t instanceof Map?A.fromEntries([...t]):t)),Ge=JSON.parse,Ke=(e,t,s)=>de(e,t,ce(e,t)==-s?void 0:s),Qe=()=>{let e,t,n=!1,a=!1,r=0,d=[];const S=re(),M=re(),m=re(),I=re(),E=re(),A=re(),P=re(),W=re(),j=re(),k=re(),N=re(),$=re(),K=re(),X=re(),Ve=Z(),ye=re(),we=re(),Se=re(),Me=re(),me=Pe(),Ie=Pe(),Re=Pe(),Le=Pe(),He=Pe(),Je=Pe(),Ee=Pe(),De=Pe(),xe=Pe(),Fe=Pe(),Oe=Pe(),Ne=Pe(),Ue=Pe(),Xe=Pe(),Ye=Pe(),Ze=Pe(),_e=Pe(),et=Pe(),tt=Pe(),st=Pe(),nt=Pe(),at=Pe(),lt=re(),rt=Pe(),[ot,ct,it,dt]=(e=>{let t;const[n,a]=ze(),l=re();return[(e,a,r,o=[],c=(()=>[]))=>{t??=Js;const i=n(1);return de(l,i,[e,a,r,o,c]),_(ve(a,r??[s],Z),i),i},(e,n,...a)=>F(((e,t=[s])=>{const n=[],a=(e,s)=>s==x(t)?z(n,e):null===t[s]?ae(e,(e=>a(e,s+1))):F([t[s],null],(t=>a(ce(e,t),s+1)));return a(e,0),n})(e,n),(e=>ae(e,(e=>ce(l,e)[0](t,...n??[],...a))))),e=>L(ce(l,e),(([,t,n])=>(ve(t,n??[s],void 0,(t=>(le(t,e),se(t)?1:0))),de(l,e),a(e),n))),e=>L(ce(l,e),(([e,,s=[],n,a])=>{const l=(...r)=>{const o=x(r);o==x(s)?e(t,...r,...a(r)):R(s[o])?F(n[o]?.(...r)??[],(e=>l(...r,e))):l(...r,s[o])};l()}))]})(),ut=e=>{if(!Y(e,((e,t)=>[o,c].includes(t))))return!1;const t=e[o];return!(!H(t)&&t!=l||(ke(e[c])!=t&&G(e,c),0))},gt=(t,s)=>(!e||te(N,s)||Nt(s))&&Y(t,((e,t)=>ht(s,t,e)),(()=>Nt(s))),ht=(e,t,s,n)=>Y(n?s:Tt(s,e,t),((n,a)=>L(ft(e,t,a,n),(e=>(s[a]=e,!0)),(()=>!1))),(()=>Nt(e,t))),ft=(t,s,n,a)=>e?L(ce(ce(N,t),n),(e=>ke(a)!=e[o]?Nt(t,s,n,a,e[c]):a),(()=>Nt(t,s,n,a))):R(ke(a))?Nt(t,s,n,a):a,bt=(e,t)=>Y(t?e:pt(e),((t,s)=>L(Ct(s,t),(t=>(e[s]=t,!0)),(()=>!1))),(()=>Bt())),Ct=(e,s)=>t?L(ce(K,e),(t=>ke(s)!=t[o]?Bt(e,s,t[c]):s),(()=>Bt(e,s))):R(ke(s))?Bt(e,s):s,Tt=(e,t,s)=>(L(ce($,t),(([n,a])=>{ae(n,((t,s)=>{q(e,s)||(e[s]=t)})),ae(a,(n=>{q(e,n)||Nt(t,s,n)}))})),e),pt=e=>(t&&(ae(X,((t,s)=>{q(e,s)||(e[s]=t)})),ae(Ve,(t=>{q(e,t)||Bt(t)}))),e),vt=e=>ge(N,e,((e,t,s)=>{const n=re(),a=Z();ge(ue(N,t,re),s,((e,t,s)=>{de(e,t,s),L(s[c],(e=>de(n,t,e)),(()=>_(a,t)))})),de($,t,[n,a])}),((e,t)=>{de(N,t),de($,t)})),Vt=e=>ge(K,e,((e,t,s)=>{de(K,t,s),L(s[c],(e=>de(X,t,e)),(()=>_(Ve,t)))}),((e,t)=>{de(K,t),de(X,t),le(Ve,t)})),yt=e=>U(e)?ys():Cs(e),wt=e=>ge(Se,e,((e,t,s)=>St(t,s)),((e,t)=>Dt(t))),St=(e,t)=>ge(ue(Se,e,(()=>(zt(e,1),de(ye,e,ze()),de(we,e,re()),re()))),t,((t,s,n)=>Mt(e,t,s,n)),((t,s)=>xt(e,t,s))),Mt=(e,t,s,n,a)=>ge(ue(t,s,(()=>(At(e,s,1),re()))),n,((t,n,a)=>mt(e,s,t,n,a)),((n,l)=>Ft(e,t,s,n,l,a))),mt=(e,t,s,n,a)=>{te(s,n)||Pt(e,t,n,1);const l=ce(s,n);a!==l&&(Wt(e,t,n,l,a),de(s,n,a))},It=(e,t,s,n,a)=>L(ce(t,s),(t=>mt(e,s,t,n,a)),(()=>Mt(e,t,s,Tt({[n]:a},e,s)))),Rt=e=>U(e)?Ms():Ts(e),Lt=e=>ge(Me,e,((e,t,s)=>Ht(t,s)),((e,t)=>Ot(t))),Ht=(e,t)=>{te(Me,e)||jt(e,1);const s=ce(Me,e);t!==s&&(kt(e,s,t),de(Me,e,t))},Jt=(e,t)=>{const[s]=ce(ye,e),n=s(t);return te(ce(Se,e),n)?Jt(e,t):n},Et=e=>ce(Se,e)??St(e,{}),Dt=e=>St(e,{}),xt=(e,t,s)=>{const[,n]=ce(ye,e);n(s),Mt(e,t,s,{},!0)},Ft=(e,t,s,n,a,l)=>{const r=ce(ce($,e)?.[0],a);if(!R(r)&&!l)return mt(e,s,n,a,r);const o=t=>{Wt(e,s,t,ce(n,t)),Pt(e,s,t,-1),de(n,t)};R(r)?o(a):ie(n,o),se(n)&&(At(e,s,-1),se(de(t,s))&&(zt(e,-1),de(Se,e),de(ye,e),de(we,e)))},Ot=e=>{const t=ce(X,e);if(!R(t))return Ht(e,t);kt(e,ce(Me,e)),jt(e,-1),de(Me,e)},zt=(e,t)=>Ke(S,e,t),At=(e,t,s)=>Ke(ue(I,e,re),t,s)&&de(m,e,ue(m,e,(()=>0))+s),Pt=(e,t,s,n)=>{const a=ce(we,e),l=ce(a,s)??0;(0==l&&1==n||1==l&&-1==n)&&Ke(ue(M,e,re),s,n),de(a,s,l!=-n?l+n:null),Ke(ue(ue(E,e,re),t,re),s,n)},Wt=(e,t,s,n,a)=>{ue(ue(ue(A,e,re),t,re),s,(()=>[n,0]))[1]=a,d[3]?.(e,t,s,a)},jt=(e,t)=>Ke(P,e,t),kt=(e,t,s)=>{ue(W,e,(()=>[t,0]))[1]=s,d[4]?.(e,s)},Nt=(e,t,s,n,a)=>(z(ue(ue(ue(j,e,re),t,re),s,(()=>[])),n),a),Bt=(e,t,s)=>(z(ue(k,e,(()=>[])),t),s),$t=(e,t,s)=>L(ce(ce(ce(A,e),t),s),(([e,t])=>[!0,e,t]),(()=>[!1,...Ae(ls(e,t,s))])),qt=e=>L(ce(W,e),(([e,t])=>[!0,e,t]),(()=>[!1,...Ae(cs(e))])),Gt=e=>se(j)||se(Ze[e])?0:ae(e?pe(j):j,((t,s)=>ae(t,((t,n)=>ae(t,((t,a)=>ct(Ze[e],[s,n,a],t))))))),Kt=e=>se(k)||se(_e[e])?0:ae(e?Ce(k):k,((t,s)=>ct(_e[e],[s],t))),Qt=(e,t,s,n)=>{if(!se(e))return ct(t,n,(()=>he(e))),ie(e,((e,t)=>ct(s,[...n??[],e],1==t))),1},Ut=e=>{const t=is();t!=n&&ct(me[e],void 0,t);const s=se(Fe[e]),a=se(Ue[e])&&se(Xe[e])&&se(xe[e])&&se(Oe[e])&&se(Je[e])&&se(Ee[e])&&se(De[e])&&s&&se(Re[e])&&se(Le[e]),l=se(Ye[e])&&se(Ne[e])&&se(He[e])&&se(Ie[e]);if(!a||!l){const t=e?[Ce(S),Te(M),Ce(m),Te(I),pe(E),pe(A)]:[S,M,m,I,E,A];if(!a){Qt(t[0],Re[e],Le[e]),ae(t[1],((t,s)=>Qt(t,Je[e],Ee[e],[s]))),ae(t[2],((t,s)=>{0!=t&&ct(De[e],[s],ts(s))}));const n=Z();ae(t[3],((t,a)=>{Qt(t,xe[e],Oe[e],[a])&&!s&&(ct(Fe[e],[a,null]),_(n,a))})),s||ae(t[5],((t,s)=>{if(!te(n,s)){const n=Z();ae(t,(e=>ae(e,(([t,s],a)=>s!==t?_(n,a):le(e,a))))),ae(n,(t=>ct(Fe[e],[s,t])))}})),ae(t[4],((t,s)=>ae(t,((t,n)=>Qt(t,Ue[e],Xe[e],[s,n])))))}if(!l){let s;ae(t[5],((t,n)=>{let a;ae(t,((t,l)=>{let r;ae(t,(([t,o],c)=>{o!==t&&(ct(Ye[e],[n,l,c],o,t,$t),s=a=r=1)})),r&&ct(Ne[e],[n,l],$t)})),a&&ct(He[e],[n],$t)})),s&&ct(Ie[e],void 0,$t)}}},Xt=e=>{const t=fs();t!=a&&ct(et[e],void 0,t);const s=se(st[e])&&se(nt[e]),n=se(at[e])&&se(tt[e]);if(!s||!n){const t=e?[Ce(P),Ce(W)]:[P,W];if(s||Qt(t[0],st[e],nt[e]),!n){let s;ae(t[1],(([t,n],a)=>{n!==t&&(ct(at[e],[a],n,t,qt),s=1)})),s&&ct(tt[e],void 0,qt)}}},Yt=(e,...t)=>(Rs((()=>e(...O(t,w)))),Js),Zt=()=>be(Se),_t=()=>oe(Se),es=e=>oe(ce(we,w(e))),ts=e=>ee(ce(Se,w(e))),ss=e=>oe(ce(Se,w(e))),ns=(e,t,s,n=0,a)=>{return O(D((r=ce(Se,w(e)),o=(e,s)=>[R(t)?s:ce(e,w(t)),s],l=([e],[t])=>((e??0)<(t??0)?-1:1)*(s?-1:1),O([...r?.entries()??[]],(([e,t])=>o(t,e))).sort(l)),n,R(a)?a:n+a),(([,e])=>e));var l,r,o},as=(e,t)=>oe(ce(ce(Se,w(e)),w(t))),ls=(e,t,s)=>ce(ce(ce(Se,w(e)),w(t)),w(s)),rs=()=>he(Me),os=()=>oe(Me),cs=e=>ce(Me,w(e)),is=()=>!se(Se),ds=e=>te(Se,w(e)),us=(e,t)=>te(ce(we,w(e)),w(t)),gs=(e,t)=>te(ce(Se,w(e)),w(t)),hs=(e,t,s)=>te(ce(ce(Se,w(e)),w(t)),w(s)),fs=()=>!se(Me),bs=e=>te(Me,w(e)),Cs=e=>Yt((()=>(e=>Y(e,gt,Nt))(e)?wt(e):0)),Ts=e=>Yt((()=>bt(e)?Lt(e):0)),ps=e=>{try{yt(Ge(e))}catch{}return Js},vs=t=>Yt((()=>{if((e=Y(t,(e=>Y(e,ut))))&&(vt(t),!se(Se))){const e=Zt();ys(),Cs(e)}})),Vs=e=>Yt((()=>{if(t=(e=>Y(e,ut))(e)){const s=rs();Is(),Ms(),t=!0,Vt(e),Ts(s)}})),ys=()=>Yt((()=>wt({}))),ws=e=>Yt((e=>te(Se,e)?Dt(e):0),e),Ss=(e,t)=>Yt(((e,t)=>L(ce(Se,e),(s=>te(s,t)?xt(e,s,t):0))),e,t),Ms=()=>Yt((()=>Lt({}))),ms=()=>Yt((()=>{vt({}),e=!1})),Is=()=>Yt((()=>{Vt({}),t=!1})),Rs=(e,t)=>{if(-1!=r){Ls();const s=e();return Hs(t),s}},Ls=()=>(-1!=r&&r++,1==r&&(d[0]?.(),ct(lt)),Js),Hs=e=>(r>0&&(r--,0==r&&(r=1,Gt(1),se(A)||Ut(1),Kt(1),se(W)||Xt(1),e?.(Js)&&(ae(A,((e,t)=>ae(e,((e,s)=>ae(e,(([e],n)=>Be(Js,t,s,n,e))))))),ne(A),ae(W,(([e],t)=>$e(Js,t,e))),ne(W)),ct(rt[0],void 0),r=-1,Gt(0),se(A)||Ut(0),Kt(0),se(W)||Xt(0),d[1]?.(),ct(rt[1],void 0),d[2]?.(),r=0,n=is(),a=fs(),F([S,M,m,I,E,A,j,P,W,k],ne))),Js),Js={getContent:()=>[Zt(),rs()],getTables:Zt,getTableIds:_t,getTable:e=>fe(ce(Se,w(e))),getTableCellIds:es,getRowCount:ts,getRowIds:ss,getSortedRowIds:ns,getRow:(e,t)=>he(ce(ce(Se,w(e)),w(t))),getCellIds:as,getCell:ls,getValues:rs,getValueIds:os,getValue:cs,hasTables:is,hasTable:ds,hasTableCell:us,hasRow:gs,hasCell:hs,hasValues:fs,hasValue:bs,getTablesJson:()=>qe(Se),getValuesJson:()=>qe(Me),getJson:()=>qe([Se,Me]),getTablesSchemaJson:()=>qe(N),getValuesSchemaJson:()=>qe(K),getSchemaJson:()=>qe([N,K]),hasTablesSchema:()=>e,hasValuesSchema:()=>t,setContent:([e,t])=>Yt((()=>{(U(e)?ys:Cs)(e),(U(t)?Ms:Ts)(t)})),setTables:Cs,setTable:(e,t)=>Yt((e=>gt(t,e)?St(e,t):0),e),setRow:(e,t,s)=>Yt(((e,t)=>ht(e,t,s)?Mt(e,Et(e),t,s):0),e,t),addRow:(e,t,s=!0)=>Rs((()=>{let n;return ht(e,n,t)&&(e=w(e),Mt(e,Et(e),n=Jt(e,s?1:0),t)),n})),setPartialRow:(e,t,s)=>Yt(((e,t)=>{if(ht(e,t,s,1)){const n=Et(e);Q(s,((s,a)=>It(e,n,t,a,s)))}}),e,t),setCell:(e,t,s,n)=>Yt(((e,t,s)=>L(ft(e,t,s,J(n)?n(ls(e,t,s)):n),(n=>It(e,Et(e),t,s,n)))),e,t,s),setValues:Ts,setPartialValues:e=>Yt((()=>bt(e,1)?Q(e,((e,t)=>Ht(t,e))):0)),setValue:(e,t)=>Yt((e=>L(Ct(e,J(t)?t(cs(e)):t),(t=>Ht(e,t)))),e),applyChanges:e=>Yt((()=>{Q(e[0],((e,t)=>R(e)?ws(t):Q(e,((e,s)=>R(e)?Ss(t,s):Q(e,((e,n)=>Be(Js,t,s,n,e))))))),Q(e[1],((e,t)=>$e(Js,t,e)))})),setTablesJson:ps,setValuesJson:e=>{try{Rt(Ge(e))}catch{}return Js},setJson:e=>Yt((()=>{try{const[t,s]=Ge(e);yt(t),Rt(s)}catch{ps(e)}})),setTablesSchema:vs,setValuesSchema:Vs,setSchema:(e,t)=>Yt((()=>{vs(e),Vs(t)})),delTables:ys,delTable:ws,delRow:Ss,delCell:(e,t,s,n)=>Yt(((e,t,s)=>L(ce(Se,e),(a=>L(ce(a,t),(l=>te(l,s)?Ft(e,a,t,l,s,n):0))))),e,t,s),delValues:Ms,delValue:e=>Yt((e=>te(Me,e)?Ot(e):0),e),delTablesSchema:ms,delValuesSchema:Is,delSchema:()=>Yt((()=>{ms(),Is()})),transaction:Rs,startTransaction:Ls,getTransactionChanges:()=>[he(A,((e,t)=>-1===ce(S,t)?void 0:he(e,((e,s)=>-1===ce(ce(I,t),s)?void 0:he(e,(([,e])=>e),(e=>je(e)))),se,U)),se,U),he(W,(([,e])=>e),(e=>je(e))),1],getTransactionLog:()=>[!se(A),!se(W),be(A,We,je),be(j),he(W,We,je),he(k),he(S),fe(I),be(E),he(P)],finishTransaction:Hs,forEachTable:e=>ae(Se,((t,s)=>e(s,(e=>ae(t,((t,s)=>e(s,(e=>ie(t,e))))))))),forEachTableCell:(e,t)=>ie(ce(we,w(e)),t),forEachRow:(e,t)=>ae(ce(Se,w(e)),((e,s)=>t(s,(t=>ie(e,t))))),forEachCell:(e,t,s)=>ie(ce(ce(Se,w(e)),w(t)),s),forEachValue:e=>ie(Me,e),addSortedRowIdsListener:(e,t,s,n,a,l,r)=>{let o=ns(e,t,s,n,a);return ot((()=>{const r=ns(e,t,s,n,a);var c,i,d;i=o,x(c=r)===x(i)&&(d=(e,t)=>i[t]===e,c.every(d))||(o=r,l(Js,e,t,s,n,a,o))}),Fe[r?1:0],[e,t],[_t])},addStartTransactionListener:e=>ot(e,lt),addWillFinishTransactionListener:e=>ot(e,rt[0]),addDidFinishTransactionListener:e=>ot(e,rt[1]),callListener:e=>(dt(e),Js),delListener:e=>(it(e),Js),getListenerStats:()=>({}),createStore:Qe,addListener:ot,callListeners:ct,setInternalListeners:(e,t,s,n,a)=>d=[e,t,s,n,a]};return Q({[i+g]:[0,me,[],()=>[is()]],[g]:[0,Ie],[h]:[0,Re],[i+u]:[1,Le,[_t],e=>[ds(...e)]],[u]:[1,He,[_t]],[u+p]:[1,Je,[_t]],[i+u+T]:[2,Ee,[_t,es],e=>[us(...e)]],[b]:[1,De,[_t]],[C]:[1,xe,[_t]],[i+f]:[2,Oe,[_t,ss],e=>[gs(...e)]],[f]:[2,Ne,[_t,ss]],[p]:[2,Ue,[_t,ss]],[i+T]:[3,Xe,[_t,ss,as],e=>[hs(...e)]],[T]:[3,Ye,[_t,ss,as],e=>Ae(ls(...e))],InvalidCell:[3,Ze],[i+V]:[0,et,[],()=>[fs()]],[V]:[0,tt],[y]:[0,st],[i+v]:[1,nt,[os],e=>[bs(...e)]],[v]:[1,at,[os],e=>Ae(cs(e[0]))],InvalidValue:[1,_e]},(([e,t,s,n],a)=>{Js["add"+a+"Listener"]=(...a)=>ot(a[e],t[a[e+1]?1:0],e>0?D(a,0,e):void 0,s,n)})),B(Js)},Ue=2**36,Xe=2**30,Ye=2**24,Ze=2**18,_e=4096,et=64,tt=e=>String.fromCharCode(48+(63&e)),st=(e,t)=>((e,t)=>e.charCodeAt(t))(e,t)-48,nt={HasTable:1,Table:1,TableCellIds:1,HasTableCell:2,RowCount:1,RowIds:1,SortedRowIds:5,HasRow:2,Row:2,CellIds:2,HasCell:3,Cell:3,HasValue:1,Value:1,InvalidCell:3,InvalidValue:1},at=(e=s)=>[Ee(e),Ee(e)];e.createMergeableStore=e=>{let t=1,n=at(),a=0;const l=re(),r=Z(),[o,c]=(e=>{let t=0,s=-1;const n=ye(e),a=e=>{const n=t,[a,l]=R(e)||""==e?[0,0]:[st(r=e,0)*Ue+st(r,1)*Xe+st(r,2)*Ye+st(r,3)*Ze+st(r,4)*_e+st(r,5)*et+st(r,6),st(r,7)*Ze+st(r,8)*_e+st(r,9)*et+st(r,10),st(r,11)*Ye+st(r,12)*Ze+st(r,13)*_e+st(r,14)*et+st(r,15)];var r;t=m(n,a,Date.now()),s=t==n?t==a?m(s,l):s:t==a?l:-1};return[()=>{return a(),l=++s,r=n,tt((e=t)/Ue)+tt(e/Xe)+tt(e/Ye)+tt(e/Ze)+tt(e/_e)+tt(e/et)+tt(e)+tt(l/Ze)+tt(l/_e)+tt(l/et)+tt(l)+tt(r/Ye)+tt(r/Ze)+tt(r/_e)+tt(r/et)+tt(r);var e,l,r},a]})(e),i=Qe(),d=e=>{const s=t;return t=0,e(),t=s,b},u=(e,t=0)=>{const a={},l={},[[r,o=s,i=0],d]=e,[u,h]=n,[f,b,C]=u;let T=t?i:C,p=o;K(r,(([e,n=s,l=0],r)=>{const o=ue(f,r,Ee),[c,i,d]=o;let u=t?l:d,h=n;K(e,((e,s)=>{const[n,l,o]=g(e,ue(c,s,Ee),X(X(a,r,$),s,$),t);u^=t?0:(l?Ie(s,l):0)^Ie(s,o),h=Le(h,n)})),u^=t?0:Re(i,n),He(o,u,n),T^=t?0:(d?Ie(r,d):0)^Ie(r,o[2]),p=Le(p,h)})),T^=t?0:Re(b,o),He(u,T,o);const[v]=g(d,h,l,t);return c(Le(p,v)),[a,l,1]},g=(e,t,n,a)=>{const[l,r=s,o=0]=e,[c,i,d]=t;let u=r,g=a?o:d;return K(l,(([e,t,l=0],r)=>{const o=ue(c,r,(()=>[void 0,s,0])),[,i,d]=o;(!i||t>i)&&(He(o,a?l:ye(qe(e??null)+":"+t),t),o[0]=e,n[r]=e,g^=a?0:Ie(r,d)^Ie(r,o[2]),u=Le(u,t))})),g^=a?0:Re(i,r),He(t,g,r),[u,d,t[2]]},h=()=>[De(n[0],(e=>De(e,(e=>De(e))))),De(n[1])],f=e=>d((()=>i.applyChanges(u(e)))),b={getId:()=>e,getMergeableContent:h,getMergeableContentHashes:()=>[n[0][2],n[1][2]],getMergeableTableHashes:()=>he(n[0][0],me),getMergeableTableDiff:e=>{const t=Je(n[0][1]),s={};return ie(n[0][0],((n,[a,l,r])=>q(e,n)?r!=e[n]?s[n]=r:0:t[0][n]=xe([a,l],(e=>xe(e))))),[t,s]},getMergeableRowHashes:e=>{const t={};return K(e,((e,s)=>L(ce(n[0][0],s),(([n,,a])=>a!=e?ie(n,((e,[,,n])=>X(t,s,$)[e]=n)):0)))),t},getMergeableRowDiff:e=>{const t=Je(n[0][1]),s={};return K(e,((e,a)=>ie(ce(n[0][0],a)?.[0],((n,[l,r,o])=>q(e,n)?o!==e[n]?X(s,a,$)[n]=o:0:X(t[0],a,Je)[0][n]=xe([l,r]))))),[t,s]},getMergeableCellHashes:e=>{const t={};return K(e,((e,s)=>L(ce(n[0][0],s),(([n])=>K(e,((e,a)=>L(ce(n,a),(([n,,l])=>l!==e?ie(n,((e,[,,n])=>X(X(t,s,$),a,$)[e]=n)):0)))))))),t},getMergeableCellDiff:e=>{const[[t,s]]=n,a={};return K(e,((e,s)=>K(e,((e,n)=>L(ce(t,s),(([t,l])=>L(ce(t,n),(([t,r])=>ie(t,((t,[o,c,i])=>i!==e[t]?X(X(a,s,(()=>Je(l)))[0],n,(()=>Je(r)))[0][t]=[o,c]:0)))))))))),Me(a,s)},getMergeableValuesHashes:()=>he(n[1][0],me),getMergeableValueDiff:e=>{const[,[t,s]]=n,a=he(t,Se,(([,,t],s)=>t==e?.[s]));return Me(a,s)},setMergeableContent:e=>d((()=>(e=>E(e)&&2==x(e)&&Fe(e[0],(e=>Y(e,(e=>Fe(e,(e=>Y(e,(e=>Fe(e,(e=>Y(e,(e=>Fe(e,Ne)),void 0,1)))),void 0,1)))),void 0,1)))&&Fe(e[1],(e=>Y(e,(e=>Fe(e,Ne)),void 0,1))))(e)?i.transaction((()=>{i.delTables().delValues(),n=at(),i.applyChanges(u(e,1))})):0)),setDefaultContent:e=>(i.transaction((()=>{a=1,i.setContent(e),a=0})),b),getTransactionMergeableChanges:()=>{const[[e,t],[s,a]]=n,o={};ae(l,((t,s)=>L(ce(e,s),(([e,n])=>{const a={};ae(t,((t,s)=>L(ce(e,s),(([e,n])=>{const l={};ae(t,(t=>{L(ce(e,t),(([e,s])=>l[t]=Me(e,s)))})),a[s]=Me(l,n)})))),o[s]=Me(a,n)}))));const c={};return ae(r,(e=>L(ce(s,e),(([t,s])=>c[e]=Me(t,s))))),[Me(o,t),Me(c,a),1]},applyMergeableChanges:f,merge:e=>{const t=h(),s=e.getMergeableContent();return e.applyMergeableChanges(t),f(s)}};return i.setInternalListeners((()=>{}),(()=>{}),(()=>{ne(l),ne(r)}),((e,n,r,c)=>{_(ue(ue(l,e,re),n,Z),r),t&&u([[{[e]:[{[n]:[{[r]:[c,a?s:o()]}]}]}],[{}],1])}),((e,n)=>{_(r,e),t&&u([[{}],[{[e]:[n,a?s:o()]}],1])})),Q(i,((e,t)=>b[t]=S(t,"set")||S(t,"del")||S(t,"apply")||M(t,"Transaction")||"callListener"==t?(...t)=>(e(...t),b):S(t,"add")&&M(t,"Listener")?(...s)=>{const n=nt[D(t,3,-8)]??0,a=s[n];return s[n]=(e,...t)=>a(b,...t),e(...s)}:e)),B(b)}},"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).TinyBaseMergeableStore={});
