var e,t;e=this,t=function(e){"use strict";const t=e=>typeof e,s="",n=t(s),l=t(!0),a=t(0),o=t(t),r="type",c="default",i="Has",d="Ids",u="Table",h=u+"s",f=u+d,g="Row",T=g+"Count",C=g+d,b="Cell",V=b+d,v="Value",S=v+"s",p=v+d,w=e=>s+e,y=(e,t)=>e.startsWith(t),I=(e,t)=>e.endsWith(t),m=(e,t=0)=>e.charCodeAt(t),R=isFinite,L=e=>null==e,J=(e,t,s)=>L(e)?s?.():t(e),M=e=>e==n||e==l,E=e=>t(e)==o,H=(e,t,s)=>e.slice(t,s),x=e=>e.length,P=(e,t)=>e.forEach(t),F=(e,t)=>e.map(t),O=(e,...t)=>e.push(...t),z=Object,A=e=>z.getPrototypeOf(e),W=z.entries,j=z.keys,k=z.isFrozen,D=z.freeze,N=e=>!L(e)&&J(A(e),(e=>e==z.prototype||L(A(e))),(()=>!0)),B=(e,t)=>!L(((e,t)=>J(e,(e=>e[t])))(e,t)),$=(e,t)=>(delete e[t],e),q=(e,t)=>F(W(e),(([e,s])=>t(s,e))),G=e=>N(e)&&0==(e=>x(j(e)))(e),K=e=>e?.size??0,Q=(e,t)=>e?.has(t)??!1,U=e=>L(e)||0==K(e),X=e=>e.clear(),Y=(e,t)=>e?.forEach(t),Z=(e,t)=>e?.delete(t),_=e=>new Map(e),ee=e=>[...e?.keys()??[]],te=(e,t)=>e?.get(t),se=(e,t)=>Y(e,((e,s)=>t(s,e))),ne=(e,t,s)=>L(s)?(Z(e,t),e):e?.set(t,s),le=(e,t,s)=>(Q(e,t)||ne(e,t,s()),te(e,t)),ae=(e,t,s,n=ne)=>(q(t,((t,n)=>s(e,n,t))),se(e,(s=>B(t,s)?0:n(e,s))),e),oe=(e,t,s)=>{const n={};return Y(e,((e,l)=>{const a=t?t(e,l):e;!s?.(a,e)&&(n[l]=a)})),n},re=(e,t,s)=>oe(e,(e=>oe(e,t,s)),G),ce=(e,t,s)=>oe(e,(e=>re(e,t,s)),G),ie=(e,t)=>{const s=_();return Y(e,((e,n)=>s.set(n,t?.(e)??e))),s},de=e=>ie(e,ie),ue=e=>ie(e,de),he=(e,t,s,n,l=0)=>J((s?le:te)(e,t[l],l>x(t)-2?s:_),(a=>{if(l>x(t)-2)return n?.(a)&&ne(e,t[l]),a;const o=he(a,t,s,n,l+1);return U(a)&&ne(e,t[l]),o})),fe=()=>[s,null],ge=()=>[s,_()],Te=(e,t)=>Ce(e,((e,s)=>[s,L(e)?null:oe(e,t)])),Ce=([e,t],s)=>s(t,e),be=([e,t],s,n,l=0)=>{const a=e>s[0];return(!l&&null!==s[1]||a)&&(s[1]=n(t,s[1])),a&&(s[0]=e),s},Ve=(e,t,s,n)=>{var l;return l=(e,l)=>be(e,le(t,l,fe),((e,t)=>!n||L(e)?s[l]=e??null:(t??=_(),s[l]={},n(e,t,l),t)),n?0:1),P(W(e),(([e,t])=>l(t,e))),t},ve=e=>new Set(Array.isArray(e)||L(e)?e:[e]),Se=(e,t)=>e?.add(t),pe=/^\d+$/,we=()=>{const e=[];let t=0;return[n=>(n?e.shift():null)??s+t++,t=>{pe.test(t)&&x(e)<1e3&&O(e,t)}]},ye=e=>[e,e],Ie=()=>[_(),_()],me=e=>[...e],Re=([e,t])=>e===t,Le=e=>{const s=t(e);return M(s)||s==a&&R(e)?s:void 0},Je=(e,t,s,n,l)=>L(l)?e.delCell(t,s,n,!0):e.setCell(t,s,n,l),Me=(e,t,s)=>L(s)?e.delValue(t):e.setValue(t,s),Ee=e=>JSON.stringify(e,((e,t)=>t instanceof Map?z.fromEntries([...t]):t)),He=JSON.parse,xe=(e,t,s)=>L(e)||!N(e)||G(e)||k(e)?(s?.(),!1):(q(e,((s,n)=>{t(s,n)||$(e,n)})),!G(e)),Pe=(e,t,s)=>ne(e,t,te(e,t)==-s?void 0:s),Fe=()=>{let e,t,n,l=!1,o=!1,d=!1,y=!1,I=0;const m=_(),R=_(),z=_(),A=_(),W=_(),j=_(),k=_(),N=_(),fe=_(),ge=_(),Te=_(),Ce=_(),be=_(),Ve=_(),pe=ve(),Oe=_(),ze=_(),Ae=_(),We=_(),je=Ie(),ke=Ie(),De=Ie(),Ne=Ie(),Be=Ie(),$e=Ie(),qe=Ie(),Ge=Ie(),Ke=Ie(),Qe=Ie(),Ue=Ie(),Xe=Ie(),Ye=Ie(),Ze=Ie(),_e=Ie(),et=Ie(),tt=Ie(),st=Ie(),nt=Ie(),lt=Ie(),at=Ie(),ot=Ie(),rt=_(),ct=Ie(),[it,dt,ut,ht]=(e=>{let t;const[n,l]=we(),a=_();return[(e,l,o,r=[],c=(()=>[]))=>{t??=Fs;const i=n(1);return ne(a,i,[e,l,o,r,c]),Se(he(l,o??[s],ve),i),i},(e,n,...l)=>P(((e,t=[s])=>{const n=[],l=(e,s)=>s==x(t)?O(n,e):null===t[s]?Y(e,(e=>l(e,s+1))):P([t[s],null],(t=>l(te(e,t),s+1)));return l(e,0),n})(e,n),(e=>Y(e,(e=>te(a,e)[0](t,...n??[],...l))))),e=>J(te(a,e),(([,t,n])=>(he(t,n??[s],void 0,(t=>(Z(t,e),U(t)?1:0))),ne(a,e),l(e),n))),e=>J(te(a,e),(([e,,s=[],n,l])=>{const a=(...o)=>{const r=x(o);r==x(s)?e(t,...o,...l(o)):L(s[r])?P(n[r]?.(...o)??[],(e=>a(...o,e))):a(...o,s[r])};a()}))]})(),ft=e=>{if(!xe(e,((e,t)=>[r,c].includes(t))))return!1;const t=e[r];return!(!M(t)&&t!=a||(Le(e[c])!=t&&$(e,c),0))},gt=(t,s)=>(!e||Q(Te,s)||$t(s))&&xe(t,((e,t)=>Tt(s,t,e)),(()=>$t(s))),Tt=(e,t,s,n)=>xe(n?s:vt(s,e,t),((n,l)=>J(Ct(e,t,l,n),(e=>(s[l]=e,!0)),(()=>!1))),(()=>$t(e,t))),Ct=(t,s,n,l)=>e?J(te(te(Te,t),n),(e=>Le(l)!=e[r]?$t(t,s,n,l,e[c]):l),(()=>$t(t,s,n,l))):L(Le(l))?$t(t,s,n,l):l,bt=(e,t)=>xe(t?e:St(e),((t,s)=>J(Vt(s,t),(t=>(e[s]=t,!0)),(()=>!1))),(()=>qt())),Vt=(e,s)=>t?J(te(be,e),(t=>Le(s)!=t[r]?qt(e,s,t[c]):s),(()=>qt(e,s))):L(Le(s))?qt(e,s):s,vt=(e,t,s)=>(J(te(Ce,t),(([n,l])=>{Y(n,((t,s)=>{B(e,s)||(e[s]=t)})),Y(l,(n=>{B(e,n)||$t(t,s,n)}))})),e),St=e=>(t&&(Y(Ve,((t,s)=>{B(e,s)||(e[s]=t)})),Y(pe,(t=>{B(e,t)||qt(t)}))),e),pt=e=>ae(Te,e,((e,t,s)=>{const n=_(),l=ve();ae(le(Te,t,_),s,((e,t,s)=>{ne(e,t,s),J(s[c],(e=>ne(n,t,e)),(()=>Se(l,t)))})),ne(Ce,t,[n,l])}),((e,t)=>{ne(Te,t),ne(Ce,t)})),wt=e=>ae(be,e,((e,t,s)=>{ne(be,t,s),J(s[c],(e=>ne(Ve,t,e)),(()=>Se(pe,t)))}),((e,t)=>{ne(be,t),ne(Ve,t),Z(pe,t)})),yt=e=>G(e)?ms():Ss(e),It=e=>ae(Ae,e,((e,t,s)=>mt(t,s)),((e,t)=>Ft(t))),mt=(e,t)=>ae(le(Ae,e,(()=>(Wt(e,1),ne(Oe,e,we()),ne(ze,e,_()),_()))),t,((t,s,n)=>Rt(e,t,s,n)),((t,s)=>Ot(e,t,s))),Rt=(e,t,s,n,l)=>ae(le(t,s,(()=>(jt(e,s,1),_()))),n,((t,n,l)=>Lt(e,s,t,n,l)),((n,a)=>zt(e,t,s,n,a,l))),Lt=(e,t,s,n,l)=>{Q(s,n)||kt(e,t,n,1);const a=te(s,n);l!==a&&(Dt(e,t,n,a,l),ne(s,n,l))},Jt=(e,t,s,n,l)=>J(te(t,s),(t=>Lt(e,s,t,n,l)),(()=>Rt(e,t,s,vt({[n]:l},e,s)))),Mt=e=>G(e)?Js():ps(e),Et=e=>ae(We,e,((e,t,s)=>Ht(t,s)),((e,t)=>At(t))),Ht=(e,t)=>{Q(We,e)||Nt(e,1);const s=te(We,e);t!==s&&(Bt(e,s,t),ne(We,e,t))},xt=(e,t)=>{const[s]=te(Oe,e),n=s(t);return Q(te(Ae,e),n)?xt(e,t):n},Pt=e=>te(Ae,e)??mt(e,{}),Ft=e=>mt(e,{}),Ot=(e,t,s)=>{const[,n]=te(Oe,e);n(s),Rt(e,t,s,{},!0)},zt=(e,t,s,n,l,a)=>{const o=te(te(Ce,e)?.[0],l);if(!L(o)&&!a)return Lt(e,s,n,l,o);const r=t=>{Dt(e,s,t,te(n,t)),kt(e,s,t,-1),ne(n,t)};L(o)?r(l):se(n,r),U(n)&&(jt(e,s,-1),U(ne(t,s))&&(Wt(e,-1),ne(Ae,e),ne(Oe,e),ne(ze,e)))},At=e=>{const t=te(Ve,e);if(!L(t))return Ht(e,t);Bt(e,te(We,e)),Nt(e,-1),ne(We,e)},Wt=(e,t)=>Pe(m,e,t),jt=(e,t,s)=>Pe(le(A,e,_),t,s)&&ne(z,e,le(z,e,(()=>0))+s),kt=(e,t,s,n)=>{const l=te(ze,e),a=te(l,s)??0;(0==a&&1==n||1==a&&-1==n)&&Pe(le(R,e,_),s,n),ne(l,s,a!=-n?a+n:null),Pe(le(le(W,e,_),t,_),s,n)},Dt=(e,t,s,n,l)=>le(le(le(j,e,_),t,_),s,(()=>[n,0]))[1]=l,Nt=(e,t)=>Pe(k,e,t),Bt=(e,t,s)=>le(N,e,(()=>[t,0]))[1]=s,$t=(e,t,s,n,l)=>(O(le(le(le(fe,e,_),t,_),s,(()=>[])),n),l),qt=(e,t,s)=>(O(le(ge,e,(()=>[])),t),s),Gt=(e,t,s)=>J(te(te(te(j,e),t),s),(([e,t])=>[!0,e,t]),(()=>[!1,...ye(is(e,t,s))])),Kt=e=>J(te(N,e),(([e,t])=>[!0,e,t]),(()=>[!1,...ye(hs(e))])),Qt=e=>U(fe)||U(et[e])?0:Y(e?ue(fe):fe,((t,s)=>Y(t,((t,n)=>Y(t,((t,l)=>dt(et[e],[s,n,l],t))))))),Ut=e=>U(ge)||U(tt[e])?0:Y(e?ie(ge):ge,((t,s)=>dt(tt[e],[s],t))),Xt=(e,t,s,n)=>{if(!U(e))return dt(t,n,(()=>oe(e))),se(e,((e,t)=>dt(s,[...n??[],e],1==t))),1},Yt=e=>{const t=fs();t!=d&&dt(je[e],void 0,t);const s=U(Qe[e]),n=U(Ye[e])&&U(Ze[e])&&U(Ke[e])&&U(Ue[e])&&U($e[e])&&U(qe[e])&&U(Ge[e])&&s&&U(De[e])&&U(Ne[e]),l=U(_e[e])&&U(Xe[e])&&U(Be[e])&&U(ke[e]);if(!n||!l){const t=e?[ie(m),de(R),ie(z),de(A),ue(W),ue(j)]:[m,R,z,A,W,j];if(!n){Xt(t[0],De[e],Ne[e]),Y(t[1],((t,s)=>Xt(t,$e[e],qe[e],[s]))),Y(t[2],((t,s)=>{0!=t&&dt(Ge[e],[s],as(s))}));const n=ve();Y(t[3],((t,l)=>{Xt(t,Ke[e],Ue[e],[l])&&!s&&(dt(Qe[e],[l,null]),Se(n,l))})),s||Y(t[5],((t,s)=>{if(!Q(n,s)){const n=ve();Y(t,(e=>Y(e,(([t,s],l)=>s!==t?Se(n,l):Z(e,l))))),Y(n,(t=>dt(Qe[e],[s,t])))}})),Y(t[4],((t,s)=>Y(t,((t,n)=>Xt(t,Ye[e],Ze[e],[s,n])))))}if(!l){let s;Y(t[5],((t,n)=>{let l;Y(t,((t,a)=>{let o;Y(t,(([t,r],c)=>{r!==t&&(dt(_e[e],[n,a,c],r,t,Gt),s=l=o=1)})),o&&dt(Xe[e],[n,a],Gt)})),l&&dt(Be[e],[n],Gt)})),s&&dt(ke[e],void 0,Gt)}}},Zt=e=>{const t=Vs();t!=y&&dt(st[e],void 0,t);const s=U(lt[e])&&U(at[e]),n=U(ot[e])&&U(nt[e]);if(!s||!n){const t=e?[ie(k),ie(N)]:[k,N];if(s||Xt(t[0],lt[e],at[e]),!n){let s;Y(t[1],(([t,n],l)=>{n!==t&&(dt(ot[e],[l],n,t,Kt),s=1)})),s&&dt(nt[e],void 0,Kt)}}},_t=(e,...t)=>(Hs((()=>e(...F(t,w)))),Fs),es=()=>[oe(j,((e,t)=>-1===te(m,t)?null:oe(e,((e,s)=>-1===te(te(A,t),s)?null:oe(e,(([,e])=>e??null),((e,t)=>Re(t)))),G)),G),oe(N,(([,e])=>e??null),((e,t)=>Re(t)))],ts=()=>({cellsTouched:l,valuesTouched:o,changedCells:ce(j,me,Re),invalidCells:ce(fe),changedValues:oe(N,me,Re),invalidValues:oe(ge),changedTableIds:oe(m),changedRowIds:re(A),changedCellIds:ce(W),changedValueIds:oe(k)}),ss=()=>ce(Ae),ns=()=>ee(Ae),ls=e=>ee(te(ze,w(e))),as=e=>K(te(Ae,w(e))),os=e=>ee(te(Ae,w(e))),rs=(e,t,s,n=0,l)=>{return F(H((o=te(Ae,w(e)),r=(e,s)=>[L(t)?s:te(e,w(t)),s],a=([e],[t])=>((e??0)<(t??0)?-1:1)*(s?-1:1),F([...o?.entries()??[]],(([e,t])=>r(t,e))).sort(a)),n,L(l)?l:n+l),(([,e])=>e));var a,o,r},cs=(e,t)=>ee(te(te(Ae,w(e)),w(t))),is=(e,t,s)=>te(te(te(Ae,w(e)),w(t)),w(s)),ds=()=>oe(We),us=()=>ee(We),hs=e=>te(We,w(e)),fs=()=>!U(Ae),gs=e=>Q(Ae,w(e)),Ts=(e,t)=>Q(te(ze,w(e)),w(t)),Cs=(e,t)=>Q(te(Ae,w(e)),w(t)),bs=(e,t,s)=>Q(te(te(Ae,w(e)),w(t)),w(s)),Vs=()=>!U(We),vs=e=>Q(We,w(e)),Ss=e=>_t((()=>(e=>xe(e,gt,$t))(e)?It(e):0)),ps=e=>_t((()=>bt(e)?Et(e):0)),ws=e=>{try{yt(He(e))}catch{}return Fs},ys=t=>_t((()=>{if((e=xe(t,(e=>xe(e,ft))))&&(pt(t),!U(Ae))){const e=ss();ms(),Ss(e)}})),Is=e=>_t((()=>{if(t=(e=>xe(e,ft))(e)){const s=ds();Es(),Js(),t=!0,wt(e),ps(s)}})),ms=()=>_t((()=>It({}))),Rs=e=>_t((e=>Q(Ae,e)?Ft(e):0),e),Ls=(e,t)=>_t(((e,t)=>J(te(Ae,e),(s=>Q(s,t)?Ot(e,s,t):0))),e,t),Js=()=>_t((()=>Et({}))),Ms=()=>_t((()=>{pt({}),e=!1})),Es=()=>_t((()=>{wt({}),t=!1})),Hs=(e,t)=>{if(-1!=I){xs();const s=e();return Ps(t),s}},xs=()=>(-1!=I&&I++,1==I&&dt(rt,void 0,es,ts),Fs),Ps=e=>(I>0&&(I--,0==I&&(l=!U(j),o=!U(N),I=1,Qt(1),l&&Yt(1),Ut(1),o&&Zt(1),e?.(es,ts)&&(Y(j,((e,t)=>Y(e,((e,s)=>Y(e,(([e],n)=>Je(Fs,t,s,n,e))))))),Y(N,(([e],t)=>Me(Fs,t,e))),l=o=!1),dt(ct[0],void 0,es,ts),I=-1,Qt(0),l&&Yt(0),Ut(0),o&&Zt(0),dt(ct[1],void 0,es,ts),n?.(Fs,es,ts),I=0,l=o=!1,d=fs(),y=Vs(),P([m,R,z,A,W,j,fe,k,N,ge],X))),Fs),Fs={getContent:()=>[ss(),ds()],getTables:ss,getTableIds:ns,getTable:e=>re(te(Ae,w(e))),getTableCellIds:ls,getRowCount:as,getRowIds:os,getSortedRowIds:rs,getRow:(e,t)=>oe(te(te(Ae,w(e)),w(t))),getCellIds:cs,getCell:is,getValues:ds,getValueIds:us,getValue:hs,hasTables:fs,hasTable:gs,hasTableCell:Ts,hasRow:Cs,hasCell:bs,hasValues:Vs,hasValue:vs,getTablesJson:()=>Ee(Ae),getValuesJson:()=>Ee(We),getJson:()=>Ee([Ae,We]),getTablesSchemaJson:()=>Ee(Te),getValuesSchemaJson:()=>Ee(be),getSchemaJson:()=>Ee([Te,be]),hasTablesSchema:()=>e,hasValuesSchema:()=>t,setContent:([e,t])=>_t((()=>{(G(e)?ms:Ss)(e),(G(t)?Js:ps)(t)})),setTables:Ss,setTable:(e,t)=>_t((e=>gt(t,e)?mt(e,t):0),e),setRow:(e,t,s)=>_t(((e,t)=>Tt(e,t,s)?Rt(e,Pt(e),t,s):0),e,t),addRow:(e,t,s=!0)=>Hs((()=>{let n;return Tt(e,n,t)&&(e=w(e),Rt(e,Pt(e),n=xt(e,s?1:0),t)),n})),setPartialRow:(e,t,s)=>_t(((e,t)=>{if(Tt(e,t,s,1)){const n=Pt(e);q(s,((s,l)=>Jt(e,n,t,l,s)))}}),e,t),setCell:(e,t,s,n)=>_t(((e,t,s)=>J(Ct(e,t,s,E(n)?n(is(e,t,s)):n),(n=>Jt(e,Pt(e),t,s,n)))),e,t,s),setValues:ps,setPartialValues:e=>_t((()=>bt(e,1)?q(e,((e,t)=>Ht(t,e))):0)),setValue:(e,t)=>_t((e=>J(Vt(e,E(t)?t(hs(e)):t),(t=>Ht(e,t)))),e),setTransactionChanges:e=>_t((()=>{q(e[0],((e,t)=>L(e)?Rs(t):q(e,((e,s)=>L(e)?Ls(t,s):q(e,((e,n)=>Je(Fs,t,s,n,e))))))),q(e[1],((e,t)=>Me(Fs,t,e)))})),setTablesJson:ws,setValuesJson:e=>{try{Mt(He(e))}catch{}return Fs},setJson:e=>_t((()=>{try{const[t,s]=He(e);yt(t),Mt(s)}catch{ws(e)}})),setTablesSchema:ys,setValuesSchema:Is,setSchema:(e,t)=>_t((()=>{ys(e),Is(t)})),delTables:ms,delTable:Rs,delRow:Ls,delCell:(e,t,s,n)=>_t(((e,t,s)=>J(te(Ae,e),(l=>J(te(l,t),(a=>Q(a,s)?zt(e,l,t,a,s,n):0))))),e,t,s),delValues:Js,delValue:e=>_t((e=>Q(We,e)?At(e):0),e),delTablesSchema:Ms,delValuesSchema:Es,delSchema:()=>_t((()=>{Ms(),Es()})),transaction:Hs,startTransaction:xs,finishTransaction:Ps,forEachTable:e=>Y(Ae,((t,s)=>e(s,(e=>Y(t,((t,s)=>e(s,(e=>se(t,e))))))))),forEachTableCell:(e,t)=>se(te(ze,w(e)),t),forEachRow:(e,t)=>Y(te(Ae,w(e)),((e,s)=>t(s,(t=>se(e,t))))),forEachCell:(e,t,s)=>se(te(te(Ae,w(e)),w(t)),s),forEachValue:e=>se(We,e),addSortedRowIdsListener:(e,t,s,n,l,a,o)=>{let r=rs(e,t,s,n,l);return it((()=>{const o=rs(e,t,s,n,l);var c,i,d;i=r,x(c=o)===x(i)&&(d=(e,t)=>i[t]===e,c.every(d))||(r=o,a(Fs,e,t,s,n,l,r))}),Qe[o?1:0],[e,t],[ns])},addStartTransactionListener:e=>it(e,rt),addWillFinishTransactionListener:e=>it(e,ct[0]),addDidFinishTransactionListener:e=>it(e,ct[1]),callListener:e=>(ht(e),Fs),delListener:e=>(ut(e),Fs),getListenerStats:()=>({}),createStore:Fe,addListener:it,callListeners:dt,addPostTransactionListener:e=>{n=e}};return q({[i+h]:[0,je,[],()=>[fs()]],[h]:[0,ke],[f]:[0,De],[i+u]:[1,Ne,[ns],e=>[gs(...e)]],[u]:[1,Be,[ns]],[u+V]:[1,$e,[ns]],[i+u+b]:[2,qe,[ns,ls],e=>[Ts(...e)]],[T]:[1,Ge,[ns]],[C]:[1,Ke,[ns]],[i+g]:[2,Ue,[ns,os],e=>[Cs(...e)]],[g]:[2,Xe,[ns,os]],[V]:[2,Ye,[ns,os]],[i+b]:[3,Ze,[ns,os,cs],e=>[bs(...e)]],[b]:[3,_e,[ns,os,cs],e=>ye(is(...e))],InvalidCell:[3,et],[i+S]:[0,st,[],()=>[Vs()]],[S]:[0,nt],[p]:[0,lt],[i+v]:[1,at,[us],e=>[vs(...e)]],[v]:[1,ot,[us],e=>ye(hs(e[0]))],InvalidValue:[1,tt]},(([e,t,s,n],l)=>{Fs["add"+l+"Listener"]=(...l)=>it(l[e],t[l[e+1]?1:0],e>0?H(l,0,e):void 0,s,n)})),D(Fs)},Oe=2**36,ze=2**30,Ae=2**24,We=2**18,je=4096,ke=64,De=e=>String.fromCharCode(48+(63&e)),Ne=(e,t)=>m(e,t)-48,Be={HasTable:1,Table:1,TableCellIds:1,HasTableCell:2,RowCount:1,RowIds:1,SortedRowIds:5,HasRow:2,Row:2,CellIds:2,HasCell:3,Cell:3,HasValue:1,Value:1,InvalidCell:3,InvalidValue:1};e.createMergeableStore=e=>{let t=1;const[n,l]=(e=>{let t=0,s=0;const n=(l=(e,t)=>(e<<5)+e^m(t),((e,t="",s)=>e.split(t,s))(e).reduce(l,5381)>>>0);var l;const a=e=>{const n=t,[l,a]=L(e)?[0,0]:[Ne(o=e,0)*Oe+Ne(o,1)*ze+Ne(o,2)*Ae+Ne(o,3)*We+Ne(o,4)*je+Ne(o,5)*ke+Ne(o,6),Ne(o,7)*We+Ne(o,8)*je+Ne(o,9)*ke+Ne(o,10),Ne(o,11)*Ae+Ne(o,12)*We+Ne(o,13)*je+Ne(o,14)*ke+Ne(o,15)];var o;t=Math.max(n,l,Date.now()),s=t==n?t==l?Math.max(s,a):s:t==l?a:-1};return[()=>{return a(),l=++s,o=n,De((e=t)/Oe)+De(e/ze)+De(e/Ae)+De(e/We)+De(e/je)+De(e/ke)+De(e)+De(l/We)+De(l/je)+De(l/ke)+De(l)+De(o/Ae)+De(o/We)+De(o/je)+De(o/ke)+De(o);var e,l,o},a]})(e),a=Fe(),o=[s,[ge(),ge()]],r=e=>{const s=[{},{}];return l(e[0]),be(e,o,(([e,t],[n,l])=>[be(e,n,((e,t)=>Ve(e,t,s[0],((e,t,n)=>Ve(e,t,s[0][n],((e,t,l)=>Ve(e,t,s[0][n][l]))))))),be(t,l,((e,t)=>Ve(e,t,s[1])))])),t=0,a.setTransactionChanges(s),t=1,c},c={getMergeableContent:()=>Ce(o,(([e,t],s)=>[s,[Te(e,(e=>Te(e,(e=>Te(e,me))))),Te(t,me)]])),applyMergeableContent:r,merge:e=>{const t=c.getMergeableContent(),s=e.getMergeableContent();return e.applyMergeableContent(t),r(s)}};return a.addPostTransactionListener(((e,s)=>{if(t){const e=n(),[t,l]=s(),[a,r]=o[1];o[0]=e,G(t)||(a[0]=e,q(t,((t,s)=>{const n=le(a[1],s,fe);if(n[0]=e,L(t))n[1]=null;else{const s=n[1]??=_();q(t,((t,n)=>{const l=le(s,n,fe);if(l[0]=e,L(t))l[1]=null;else{const s=l[1]??=_();q(t,((t,n)=>ne(s,n,[e,t])))}}))}}))),G(l)||(r[0]=e,q(l,((t,s)=>{ne(r[1],s,[e,t])})))}})),q(a,((e,t)=>c[t]=y(t,"set")||y(t,"del")||I(t,"Transaction")||"callListener"==t?(...t)=>(e(...t),c):y(t,"add")&&I(t,"Listener")?(...s)=>{const n=Be[H(t,3,-8)]??0,l=s[n];return s[n]=(e,...t)=>l(c,...t),e(...s)}:e)),D(c)}},"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).TinyBaseMergeableStore={});
