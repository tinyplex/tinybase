var e,t;e=this,t=function(e){"use strict";const t=e=>typeof e,s="",n=t(s),a=t(!0),l=t(0),o=t(t),r="type",i="default",c="Has",d="Ids",u="Table",g=u+"s",h=u+d,f="Row",T=f+"Count",b=f+d,C="Cell",p=C+d,V="Value",v=V+"s",y=V+d,S=e=>s+e,w=(e,t)=>e.startsWith(t),m=(e,t)=>e.endsWith(t),I=Math.max,R=isFinite,L=e=>null==e,H=(e,t,s)=>L(e)?s?.():t(e),J=e=>e==n||e==a,M=e=>t(e)==o,E=(e,t,s)=>e.slice(t,s),x=e=>e.length,F=(e,t)=>e.forEach(t),O=(e,t)=>e.map(t),z=(e,...t)=>e.push(...t),A=Object,P=e=>A.getPrototypeOf(e),W=A.entries,j=A.keys,k=A.isFrozen,D=A.freeze,N=e=>!L(e)&&H(P(e),(e=>e==A.prototype||L(P(e))),(()=>!0)),B=(e=[])=>A.fromEntries(e),$=(e,t)=>t in e,q=(e,t)=>(delete e[t],e),G=(e,t)=>F(W(e),(([e,s])=>t(s,e))),K=(e,t)=>O(W(e),(([e,s])=>t(s,e))),Q=e=>N(e)&&0==(e=>x(j(e)))(e),U=(e,t,s)=>($(e,t)||(e[t]=s()),e[t]),X=e=>e?.size??0,Y=(e,t)=>e?.has(t)??!1,Z=e=>L(e)||0==X(e),_=e=>e.clear(),ee=(e,t)=>e?.forEach(t),te=(e,t)=>e?.delete(t),se=e=>new Map(e),ne=e=>[...e?.keys()??[]],ae=(e,t)=>e?.get(t),le=(e,t)=>ee(e,((e,s)=>t(s,e))),oe=(e,t,s)=>L(s)?(te(e,t),e):e?.set(t,s),re=(e,t,s,n)=>(Y(e,t)?n?.(ae(e,t)):oe(e,t,s()),ae(e,t)),ie=(e,t,s,n=oe)=>(K(t,((t,n)=>s(e,n,t))),le(e,(s=>$(t,s)?0:n(e,s))),e),ce=(e,t,s)=>{const n={};return ee(e,((e,a)=>{const l=t?t(e,a):e;!s?.(l,e)&&(n[a]=l)})),n},de=(e,t,s)=>ce(e,(e=>ce(e,t,s)),Q),ue=(e,t,s)=>ce(e,(e=>de(e,t,s)),Q),ge=(e,t)=>{const s=se();return ee(e,((e,n)=>s.set(n,t?.(e)??e))),s},he=e=>ge(e,ge),fe=e=>ge(e,he),Te=(e,t,s,n,a=0)=>H((s?re:ae)(e,t[a],a>x(t)-2?s:se),(l=>{if(a>x(t)-2)return n?.(l)&&oe(e,t[a]),l;const o=Te(l,t,s,n,a+1);return Z(l)&&oe(e,t[a]),o})),be=new globalThis.TextEncoder,Ce=e=>{let t=2166136261;return F(be.encode(e),(e=>{t^=e,t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24)})),t>>>0},pe=([e,t,s])=>[e,t,s],Ve=(e,t)=>[e,t],ve=(e,t)=>Ce(e+":"+t),ye=(e,t,s)=>{e[2]=t>>>0,s>e[0]&&(e[0]=s)},Se=e=>Ve(e,B()),we=(e="")=>[e,se(),0],me=()=>[s,void 0,0],Ie=([e,t,s],n)=>[e,n(t,e),s],Re=(e,t=pe)=>Ie(e,(e=>ce(e,t))),Le=e=>new Set(Array.isArray(e)||L(e)?e:[e]),He=(e,t)=>e?.add(t),Je=/^\d+$/,Me=()=>{const e=[];let t=0;return[n=>(n?e.shift():null)??s+t++,t=>{Je.test(t)&&x(e)<1e3&&z(e,t)}]},Ee=e=>[e,e],xe=()=>[se(),se()],Fe=e=>[...e],Oe=([e,t])=>e===t,ze=e=>{const s=t(e);return J(s)||s==l&&R(e)?s:void 0},Ae=(e,t,s,n,a)=>L(a)?e.delCell(t,s,n,!0):e.setCell(t,s,n,a),Pe=(e,t,s)=>L(s)?e.delValue(t):e.setValue(t,s),We=e=>JSON.stringify(e,((e,t)=>t instanceof Map?A.fromEntries([...t]):t)),je=JSON.parse,ke=(e,t,s)=>L(e)||!N(e)||Q(e)||k(e)?(s?.(),!1):(K(e,((s,n)=>{t(s,n)||q(e,n)})),!Q(e)),De=(e,t,s)=>oe(e,t,ae(e,t)==-s?void 0:s),Ne=()=>{let e,t,n=!1,a=!1,o=0,d=[];const w=se(),m=se(),I=se(),R=se(),A=se(),P=se(),W=se(),j=se(),k=se(),N=se(),B=se(),G=se(),U=se(),be=se(),Ce=Le(),pe=se(),Ve=se(),ve=se(),ye=se(),Se=xe(),we=xe(),me=xe(),Ie=xe(),Re=xe(),Je=xe(),Be=xe(),$e=xe(),qe=xe(),Ge=xe(),Ke=xe(),Qe=xe(),Ue=xe(),Xe=xe(),Ye=xe(),Ze=xe(),_e=xe(),et=xe(),tt=xe(),st=xe(),nt=xe(),at=xe(),lt=se(),ot=xe(),[rt,it,ct,dt]=(e=>{let t;const[n,a]=Me(),l=se();return[(e,a,o,r=[],i=(()=>[]))=>{t??=Ms;const c=n(1);return oe(l,c,[e,a,o,r,i]),He(Te(a,o??[s],Le),c),c},(e,n,...a)=>F(((e,t=[s])=>{const n=[],a=(e,s)=>s==x(t)?z(n,e):null===t[s]?ee(e,(e=>a(e,s+1))):F([t[s],null],(t=>a(ae(e,t),s+1)));return a(e,0),n})(e,n),(e=>ee(e,(e=>ae(l,e)[0](t,...n??[],...a))))),e=>H(ae(l,e),(([,t,n])=>(Te(t,n??[s],void 0,(t=>(te(t,e),Z(t)?1:0))),oe(l,e),a(e),n))),e=>H(ae(l,e),(([e,,s=[],n,a])=>{const l=(...o)=>{const r=x(o);r==x(s)?e(t,...o,...a(o)):L(s[r])?F(n[r]?.(...o)??[],(e=>l(...o,e))):l(...o,s[r])};l()}))]})(),ut=e=>{if(!ke(e,((e,t)=>[r,i].includes(t))))return!1;const t=e[r];return!(!J(t)&&t!=l||(ze(e[i])!=t&&q(e,i),0))},gt=(t,s)=>(!e||Y(B,s)||Nt(s))&&ke(t,((e,t)=>ht(s,t,e)),(()=>Nt(s))),ht=(e,t,s,n)=>ke(n?s:Ct(s,e,t),((n,a)=>H(ft(e,t,a,n),(e=>(s[a]=e,!0)),(()=>!1))),(()=>Nt(e,t))),ft=(t,s,n,a)=>e?H(ae(ae(B,t),n),(e=>ze(a)!=e[r]?Nt(t,s,n,a,e[i]):a),(()=>Nt(t,s,n,a))):L(ze(a))?Nt(t,s,n,a):a,Tt=(e,t)=>ke(t?e:pt(e),((t,s)=>H(bt(s,t),(t=>(e[s]=t,!0)),(()=>!1))),(()=>Bt())),bt=(e,s)=>t?H(ae(U,e),(t=>ze(s)!=t[r]?Bt(e,s,t[i]):s),(()=>Bt(e,s))):L(ze(s))?Bt(e,s):s,Ct=(e,t,s)=>(H(ae(G,t),(([n,a])=>{ee(n,((t,s)=>{$(e,s)||(e[s]=t)})),ee(a,(n=>{$(e,n)||Nt(t,s,n)}))})),e),pt=e=>(t&&(ee(be,((t,s)=>{$(e,s)||(e[s]=t)})),ee(Ce,(t=>{$(e,t)||Bt(t)}))),e),Vt=e=>ie(B,e,((e,t,s)=>{const n=se(),a=Le();ie(re(B,t,se),s,((e,t,s)=>{oe(e,t,s),H(s[i],(e=>oe(n,t,e)),(()=>He(a,t)))})),oe(G,t,[n,a])}),((e,t)=>{oe(B,t),oe(G,t)})),vt=e=>ie(U,e,((e,t,s)=>{oe(U,t,s),H(s[i],(e=>oe(be,t,e)),(()=>He(Ce,t)))}),((e,t)=>{oe(U,t),oe(be,t),te(Ce,t)})),yt=e=>Q(e)?ys():bs(e),St=e=>ie(ve,e,((e,t,s)=>wt(t,s)),((e,t)=>xt(t))),wt=(e,t)=>ie(re(ve,e,(()=>(At(e,1),oe(pe,e,Me()),oe(Ve,e,se()),se()))),t,((t,s,n)=>mt(e,t,s,n)),((t,s)=>Ft(e,t,s))),mt=(e,t,s,n,a)=>ie(re(t,s,(()=>(Pt(e,s,1),se()))),n,((t,n,a)=>It(e,s,t,n,a)),((n,l)=>Ot(e,t,s,n,l,a))),It=(e,t,s,n,a)=>{Y(s,n)||Wt(e,t,n,1);const l=ae(s,n);a!==l&&(jt(e,t,n,l,a),oe(s,n,a))},Rt=(e,t,s,n,a)=>H(ae(t,s),(t=>It(e,s,t,n,a)),(()=>mt(e,t,s,Ct({[n]:a},e,s)))),Lt=e=>Q(e)?ms():Cs(e),Ht=e=>ie(ye,e,((e,t,s)=>Jt(t,s)),((e,t)=>zt(t))),Jt=(e,t)=>{Y(ye,e)||kt(e,1);const s=ae(ye,e);t!==s&&(Dt(e,s,t),oe(ye,e,t))},Mt=(e,t)=>{const[s]=ae(pe,e),n=s(t);return Y(ae(ve,e),n)?Mt(e,t):n},Et=e=>ae(ve,e)??wt(e,{}),xt=e=>wt(e,{}),Ft=(e,t,s)=>{const[,n]=ae(pe,e);n(s),mt(e,t,s,{},!0)},Ot=(e,t,s,n,a,l)=>{const o=ae(ae(G,e)?.[0],a);if(!L(o)&&!l)return It(e,s,n,a,o);const r=t=>{jt(e,s,t,ae(n,t)),Wt(e,s,t,-1),oe(n,t)};L(o)?r(a):le(n,r),Z(n)&&(Pt(e,s,-1),Z(oe(t,s))&&(At(e,-1),oe(ve,e),oe(pe,e),oe(Ve,e)))},zt=e=>{const t=ae(be,e);if(!L(t))return Jt(e,t);Dt(e,ae(ye,e)),kt(e,-1),oe(ye,e)},At=(e,t)=>De(w,e,t),Pt=(e,t,s)=>De(re(R,e,se),t,s)&&oe(I,e,re(I,e,(()=>0))+s),Wt=(e,t,s,n)=>{const a=ae(Ve,e),l=ae(a,s)??0;(0==l&&1==n||1==l&&-1==n)&&De(re(m,e,se),s,n),oe(a,s,l!=-n?l+n:null),De(re(re(A,e,se),t,se),s,n)},jt=(e,t,s,n,a)=>re(re(re(P,e,se),t,se),s,(()=>[n,0]))[1]=a,kt=(e,t)=>De(W,e,t),Dt=(e,t,s)=>re(j,e,(()=>[t,0]))[1]=s,Nt=(e,t,s,n,a)=>(z(re(re(re(k,e,se),t,se),s,(()=>[])),n),a),Bt=(e,t,s)=>(z(re(N,e,(()=>[])),t),s),$t=(e,t,s)=>H(ae(ae(ae(P,e),t),s),(([e,t])=>[!0,e,t]),(()=>[!1,...Ee(ls(e,t,s))])),qt=e=>H(ae(j,e),(([e,t])=>[!0,e,t]),(()=>[!1,...Ee(is(e))])),Gt=e=>Z(k)||Z(Ze[e])?0:ee(e?fe(k):k,((t,s)=>ee(t,((t,n)=>ee(t,((t,a)=>it(Ze[e],[s,n,a],t))))))),Kt=e=>Z(N)||Z(_e[e])?0:ee(e?ge(N):N,((t,s)=>it(_e[e],[s],t))),Qt=(e,t,s,n)=>{if(!Z(e))return it(t,n,(()=>ce(e))),le(e,((e,t)=>it(s,[...n??[],e],1==t))),1},Ut=e=>{const t=cs();t!=n&&it(Se[e],void 0,t);const s=Z(Ge[e]),a=Z(Ue[e])&&Z(Xe[e])&&Z(qe[e])&&Z(Ke[e])&&Z(Je[e])&&Z(Be[e])&&Z($e[e])&&s&&Z(me[e])&&Z(Ie[e]),l=Z(Ye[e])&&Z(Qe[e])&&Z(Re[e])&&Z(we[e]);if(!a||!l){const t=e?[ge(w),he(m),ge(I),he(R),fe(A),fe(P)]:[w,m,I,R,A,P];if(!a){Qt(t[0],me[e],Ie[e]),ee(t[1],((t,s)=>Qt(t,Je[e],Be[e],[s]))),ee(t[2],((t,s)=>{0!=t&&it($e[e],[s],ts(s))}));const n=Le();ee(t[3],((t,a)=>{Qt(t,qe[e],Ke[e],[a])&&!s&&(it(Ge[e],[a,null]),He(n,a))})),s||ee(t[5],((t,s)=>{if(!Y(n,s)){const n=Le();ee(t,(e=>ee(e,(([t,s],a)=>s!==t?He(n,a):te(e,a))))),ee(n,(t=>it(Ge[e],[s,t])))}})),ee(t[4],((t,s)=>ee(t,((t,n)=>Qt(t,Ue[e],Xe[e],[s,n])))))}if(!l){let s;ee(t[5],((t,n)=>{let a;ee(t,((t,l)=>{let o;ee(t,(([t,r],i)=>{r!==t&&(it(Ye[e],[n,l,i],r,t,$t),s=a=o=1)})),o&&it(Qe[e],[n,l],$t)})),a&&it(Re[e],[n],$t)})),s&&it(we[e],void 0,$t)}}},Xt=e=>{const t=fs();t!=a&&it(et[e],void 0,t);const s=Z(st[e])&&Z(nt[e]),n=Z(at[e])&&Z(tt[e]);if(!s||!n){const t=e?[ge(W),ge(j)]:[W,j];if(s||Qt(t[0],st[e],nt[e]),!n){let s;ee(t[1],(([t,n],a)=>{n!==t&&(it(at[e],[a],n,t,qt),s=1)})),s&&it(tt[e],void 0,qt)}}},Yt=(e,...t)=>(Ls((()=>e(...O(t,S)))),Ms),Zt=()=>ue(ve),_t=()=>ne(ve),es=e=>ne(ae(Ve,S(e))),ts=e=>X(ae(ve,S(e))),ss=e=>ne(ae(ve,S(e))),ns=(e,t,s,n=0,a)=>{return O(E((o=ae(ve,S(e)),r=(e,s)=>[L(t)?s:ae(e,S(t)),s],l=([e],[t])=>((e??0)<(t??0)?-1:1)*(s?-1:1),O([...o?.entries()??[]],(([e,t])=>r(t,e))).sort(l)),n,L(a)?a:n+a),(([,e])=>e));var l,o,r},as=(e,t)=>ne(ae(ae(ve,S(e)),S(t))),ls=(e,t,s)=>ae(ae(ae(ve,S(e)),S(t)),S(s)),os=()=>ce(ye),rs=()=>ne(ye),is=e=>ae(ye,S(e)),cs=()=>!Z(ve),ds=e=>Y(ve,S(e)),us=(e,t)=>Y(ae(Ve,S(e)),S(t)),gs=(e,t)=>Y(ae(ve,S(e)),S(t)),hs=(e,t,s)=>Y(ae(ae(ve,S(e)),S(t)),S(s)),fs=()=>!Z(ye),Ts=e=>Y(ye,S(e)),bs=e=>Yt((()=>(e=>ke(e,gt,Nt))(e)?St(e):0)),Cs=e=>Yt((()=>Tt(e)?Ht(e):0)),ps=e=>{try{yt(je(e))}catch{}return Ms},Vs=t=>Yt((()=>{if((e=ke(t,(e=>ke(e,ut))))&&(Vt(t),!Z(ve))){const e=Zt();ys(),bs(e)}})),vs=e=>Yt((()=>{if(t=(e=>ke(e,ut))(e)){const s=os();Rs(),ms(),t=!0,vt(e),Cs(s)}})),ys=()=>Yt((()=>St({}))),Ss=e=>Yt((e=>Y(ve,e)?xt(e):0),e),ws=(e,t)=>Yt(((e,t)=>H(ae(ve,e),(s=>Y(s,t)?Ft(e,s,t):0))),e,t),ms=()=>Yt((()=>Ht({}))),Is=()=>Yt((()=>{Vt({}),e=!1})),Rs=()=>Yt((()=>{vt({}),t=!1})),Ls=(e,t)=>{if(-1!=o){Hs();const s=e();return Js(t),s}},Hs=()=>(-1!=o&&o++,1==o&&it(lt,void 0),Ms),Js=e=>(o>0&&(o--,0==o&&(o=1,Gt(1),Z(P)||Ut(1),Kt(1),Z(j)||Xt(1),e?.(Ms)&&(ee(P,((e,t)=>ee(e,((e,s)=>ee(e,(([e],n)=>Ae(Ms,t,s,n,e))))))),_(P),ee(j,(([e],t)=>Pe(Ms,t,e))),_(j)),it(ot[0],void 0),o=-1,Gt(0),Z(P)||Ut(0),Kt(0),Z(j)||Xt(0),d[0]?.(Ms),it(ot[1],void 0),d[1]?.(Ms),o=0,n=cs(),a=fs(),F([w,m,I,R,A,P,k,W,j,N],_))),Ms),Ms={getContent:()=>[Zt(),os()],getTables:Zt,getTableIds:_t,getTable:e=>de(ae(ve,S(e))),getTableCellIds:es,getRowCount:ts,getRowIds:ss,getSortedRowIds:ns,getRow:(e,t)=>ce(ae(ae(ve,S(e)),S(t))),getCellIds:as,getCell:ls,getValues:os,getValueIds:rs,getValue:is,hasTables:cs,hasTable:ds,hasTableCell:us,hasRow:gs,hasCell:hs,hasValues:fs,hasValue:Ts,getTablesJson:()=>We(ve),getValuesJson:()=>We(ye),getJson:()=>We([ve,ye]),getTablesSchemaJson:()=>We(B),getValuesSchemaJson:()=>We(U),getSchemaJson:()=>We([B,U]),hasTablesSchema:()=>e,hasValuesSchema:()=>t,setContent:([e,t])=>Yt((()=>{(Q(e)?ys:bs)(e),(Q(t)?ms:Cs)(t)})),setTables:bs,setTable:(e,t)=>Yt((e=>gt(t,e)?wt(e,t):0),e),setRow:(e,t,s)=>Yt(((e,t)=>ht(e,t,s)?mt(e,Et(e),t,s):0),e,t),addRow:(e,t,s=!0)=>Ls((()=>{let n;return ht(e,n,t)&&(e=S(e),mt(e,Et(e),n=Mt(e,s?1:0),t)),n})),setPartialRow:(e,t,s)=>Yt(((e,t)=>{if(ht(e,t,s,1)){const n=Et(e);K(s,((s,a)=>Rt(e,n,t,a,s)))}}),e,t),setCell:(e,t,s,n)=>Yt(((e,t,s)=>H(ft(e,t,s,M(n)?n(ls(e,t,s)):n),(n=>Rt(e,Et(e),t,s,n)))),e,t,s),setValues:Cs,setPartialValues:e=>Yt((()=>Tt(e,1)?K(e,((e,t)=>Jt(t,e))):0)),setValue:(e,t)=>Yt((e=>H(bt(e,M(t)?t(is(e)):t),(t=>Jt(e,t)))),e),applyChanges:e=>Yt((()=>{K(e[0],((e,t)=>L(e)?Ss(t):K(e,((e,s)=>L(e)?ws(t,s):K(e,((e,n)=>Ae(Ms,t,s,n,e))))))),K(e[1],((e,t)=>Pe(Ms,t,e)))})),setTablesJson:ps,setValuesJson:e=>{try{Lt(je(e))}catch{}return Ms},setJson:e=>Yt((()=>{try{const[t,s]=je(e);yt(t),Lt(s)}catch{ps(e)}})),setTablesSchema:Vs,setValuesSchema:vs,setSchema:(e,t)=>Yt((()=>{Vs(e),vs(t)})),delTables:ys,delTable:Ss,delRow:ws,delCell:(e,t,s,n)=>Yt(((e,t,s)=>H(ae(ve,e),(a=>H(ae(a,t),(l=>Y(l,s)?Ot(e,a,t,l,s,n):0))))),e,t,s),delValues:ms,delValue:e=>Yt((e=>Y(ye,e)?zt(e):0),e),delTablesSchema:Is,delValuesSchema:Rs,delSchema:()=>Yt((()=>{Is(),Rs()})),transaction:Ls,startTransaction:Hs,getTransactionChanges:()=>[ce(P,((e,t)=>-1===ae(w,t)?void 0:ce(e,((e,s)=>-1===ae(ae(R,t),s)?void 0:ce(e,(([,e])=>e),((e,t)=>Oe(t)))),Q)),Q),ce(j,(([,e])=>e),((e,t)=>Oe(t)))],getTransactionLog:()=>[!Z(P),!Z(j),ue(P,Fe,Oe),ue(k),ce(j,Fe,Oe),ce(N),ce(w),de(R),ue(A),ce(W)],finishTransaction:Js,forEachTable:e=>ee(ve,((t,s)=>e(s,(e=>ee(t,((t,s)=>e(s,(e=>le(t,e))))))))),forEachTableCell:(e,t)=>le(ae(Ve,S(e)),t),forEachRow:(e,t)=>ee(ae(ve,S(e)),((e,s)=>t(s,(t=>le(e,t))))),forEachCell:(e,t,s)=>le(ae(ae(ve,S(e)),S(t)),s),forEachValue:e=>le(ye,e),addSortedRowIdsListener:(e,t,s,n,a,l,o)=>{let r=ns(e,t,s,n,a);return rt((()=>{const o=ns(e,t,s,n,a);var i,c,d;c=r,x(i=o)===x(c)&&(d=(e,t)=>c[t]===e,i.every(d))||(r=o,l(Ms,e,t,s,n,a,r))}),Ge[o?1:0],[e,t],[_t])},addStartTransactionListener:e=>rt(e,lt),addWillFinishTransactionListener:e=>rt(e,ot[0]),addDidFinishTransactionListener:e=>rt(e,ot[1]),callListener:e=>(dt(e),Ms),delListener:e=>(ct(e),Ms),getListenerStats:()=>({}),createStore:Ne,addListener:rt,callListeners:it,setInternalListeners:(e,t)=>d=[e,t]};return K({[c+g]:[0,Se,[],()=>[cs()]],[g]:[0,we],[h]:[0,me],[c+u]:[1,Ie,[_t],e=>[ds(...e)]],[u]:[1,Re,[_t]],[u+p]:[1,Je,[_t]],[c+u+C]:[2,Be,[_t,es],e=>[us(...e)]],[T]:[1,$e,[_t]],[b]:[1,qe,[_t]],[c+f]:[2,Ke,[_t,ss],e=>[gs(...e)]],[f]:[2,Qe,[_t,ss]],[p]:[2,Ue,[_t,ss]],[c+C]:[3,Xe,[_t,ss,as],e=>[hs(...e)]],[C]:[3,Ye,[_t,ss,as],e=>Ee(ls(...e))],InvalidCell:[3,Ze],[c+v]:[0,et,[],()=>[fs()]],[v]:[0,tt],[y]:[0,st],[c+V]:[1,nt,[rs],e=>[Ts(...e)]],[V]:[1,at,[rs],e=>Ee(is(e[0]))],InvalidValue:[1,_e]},(([e,t,s,n],a)=>{Ms["add"+a+"Listener"]=(...a)=>rt(a[e],t[a[e+1]?1:0],e>0?E(a,0,e):void 0,s,n)})),D(Ms)},Be=2**36,$e=2**30,qe=2**24,Ge=2**18,Ke=4096,Qe=64,Ue=e=>String.fromCharCode(48+(63&e)),Xe=(e,t)=>((e,t)=>e.charCodeAt(t))(e,t)-48,Ye={HasTable:1,Table:1,TableCellIds:1,HasTableCell:2,RowCount:1,RowIds:1,SortedRowIds:5,HasRow:2,Row:2,CellIds:2,HasCell:3,Cell:3,HasValue:1,Value:1,InvalidCell:3,InvalidValue:1},Ze=(e="")=>[e,[we(e),we(e)],0];e.createMergeableStore=e=>{let t,n,a=1,l=Ze();const[o,r]=(e=>{let t=0,s=-1;const n=Ce(e),a=e=>{const n=t,[a,l]=L(e)?[0,0]:[Xe(o=e,0)*Be+Xe(o,1)*$e+Xe(o,2)*qe+Xe(o,3)*Ge+Xe(o,4)*Ke+Xe(o,5)*Qe+Xe(o,6),Xe(o,7)*Ge+Xe(o,8)*Ke+Xe(o,9)*Qe+Xe(o,10),Xe(o,11)*qe+Xe(o,12)*Ge+Xe(o,13)*Ke+Xe(o,14)*Qe+Xe(o,15)];var o;t=I(n,a,Date.now()),s=t==n?t==a?I(s,l):s:t==a?l:-1};return[()=>{return a(),l=++s,o=n,Ue((e=t)/Be)+Ue(e/$e)+Ue(e/qe)+Ue(e/Ge)+Ue(e/Ke)+Ue(e/Qe)+Ue(e)+Ue(l/Ge)+Ue(l/Ke)+Ue(l/Qe)+Ue(l)+Ue(o/qe)+Ue(o/Ge)+Ue(o/Ke)+Ue(o/Qe)+Ue(o);var e,l,o},a]})(e),i=Ne(),c=e=>{const t=a;a=0,e(),a=t},d=(e,t=0)=>{const s={},n={},[a,[[o,r,i],c],d]=e,[,[g,h]]=l,[f,T,b]=g;if(o){let e=t?i:b^(o>f?(f?Ce(f):0)^Ce(o):0);G(r,(([n,a,l],o)=>{const r=re(T,o,we),[i,c,d]=r;let g=t?l:d^(n>i?(i?Ce(i):0)^Ce(n):0);G(a,((e,n)=>{const[a,l]=u(e,re(c,n,we),U(U(s,o,B),n,B),t);g^=t?0:(a?ve(n,a):0)^ve(n,l)})),ye(r,g,n),e^=t?0:(d?ve(o,d):0)^ve(o,r[2])})),ye(g,e,o)}return u(c,h,n,t),ye(l,t?d:g[2]^h[2],a),[s,n]},u=(e,t,s,n)=>{const[a,l,o]=e,[r,i,c]=t;if(a){let e=n?o:c^(a>r?(r?Ce(r):0)^Ce(a):0);G(l,(([t,a,l],o)=>{const r=re(i,o,me),[c,,d]=r;t>c&&(ye(r,n?l:Ce(We(a??null)+":"+t),t),r[1]=a,s[o]=a,e^=n?0:ve(o,d)^ve(o,r[2]))})),ye(t,e,a)}return[c,t[2]]},g=()=>Ie(l,(([e,t])=>[Re(e,(e=>Re(e,(e=>Re(e))))),Re(t)])),h=()=>{if(L(n)){const[,,e,,n]=i.getTransactionLog(),a=Q(e)&&Q(n)?s:t??(t=o()),l=Ve(a,[Se(Q(e)?s:a),Se(Q(n)?s:a)]),[[,r],[,c]]=l[1];return K(e,((e,t)=>{const[,s]=r[t]=Se(a);K(e,((e,t)=>{const[,n]=s[t]=Se(a);K(e,(([,e],t)=>n[t]=Ve(a,e)))}))})),K(n,(([,e],t)=>c[t]=Ve(a,e))),l}return n},f=e=>(r(e[0]),c((()=>i.applyChanges(d(e)))),T),T={getMergeableContent:g,setMergeableContent:e=>(c((()=>i.transaction((()=>{i.delTables().delValues(),l=Ze()})))),r(e[0]),c((()=>i.applyChanges(d(e,1)))),T),getTransactionMergeableChanges:h,applyMergeableChanges:f,merge:e=>{const t=g(),s=e.getMergeableContent();return e.applyMergeableChanges(t),f(s)},getContentHash:()=>l[2],getTablesHash:()=>l[1][0][2],getTableHash:e=>ae(l[1][0][1],e)?.[2]??0,getRowHash:(e,t)=>ae(ae(l[1][0][1],e)?.[1],t)?.[2]??0,getCellHash:(e,t,s)=>ae(ae(ae(l[1][0][1],e)?.[1],t)?.[1],s)?.[2]??0,getValuesHash:()=>l[1][1][2],getValueHash:e=>ae(l[1][1][1],e)?.[2]??0};return i.setInternalListeners((()=>{a&&(n=h(),d(n))}),(()=>t=n=void 0)),K(i,((e,t)=>T[t]=w(t,"set")||w(t,"del")||w(t,"apply")||m(t,"Transaction")||"callListener"==t?(...t)=>(e(...t),T):w(t,"add")&&m(t,"Listener")?(...s)=>{const n=Ye[E(t,3,-8)]??0,a=s[n];return s[n]=(e,...t)=>a(T,...t),e(...s)}:e)),D(T)}},"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).TinyBaseMergeableStore={});
