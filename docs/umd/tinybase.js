var e,t;e=this,t=function(e){"use strict";const t=e=>typeof e,s="",n=t(s),a=t(!0),o=t(0),r=t(t),l="type",i="default",c="Listener",d="Result",u="add",g="Has",h="Ids",f="Table",L=f+"s",C=f+h,w="Row",p=w+"Count",T=w+h,b="Sorted"+w+h,y="Cell",v=y+h,I="Value",R=I+"s",S=I+h,m=e=>s+e,V=(e,t)=>e.startsWith(t),M=(e,t)=>e.endsWith(t),E=Math.max,k=Math.min,x=isFinite,H=e=>null==e,D=(e,t,s)=>H(e)?s?.():t(e),A=e=>e==n||e==a,J=e=>t(e)==n,F=e=>t(e)==r,Q=e=>Array.isArray(e),z=(e,t,s)=>e.slice(t,s),N=e=>e.length,O=()=>{},P=(e,t)=>e.includes(t),W=(e,t)=>e.every(t),j=(e,t)=>N(e)===N(t)&&W(e,((e,s)=>t[s]===e)),B=(e,t)=>W(e,((s,n)=>0==n||t(e[n-1],s)<=0)),_=(e,t)=>e.sort(t),$=(e,t)=>e.forEach(t),q=(e,t)=>e.map(t),G=e=>U(e,((e,t)=>e+t),0),K=e=>0==N(e),U=(e,t,s)=>e.reduce(t,s),X=(e,...t)=>e.push(...t),Y=e=>e.pop(),Z=e=>e.shift(),ee=Object,te=e=>ee.getPrototypeOf(e),se=ee.entries,ne=ee.keys,ae=ee.isFrozen,oe=ee.freeze,re=e=>!H(e)&&D(te(e),(e=>e==ee.prototype||H(te(e))),(()=>!0)),le=(e=[])=>ee.fromEntries(e),ie=(e,t)=>t in e,ce=(e,t)=>(delete e[t],e),de=(e,t)=>$(se(e),(([e,s])=>t(s,e))),ue=(e,t)=>q(se(e),(([e,s])=>t(s,e))),ge=e=>re(e)&&0==(e=>N(ne(e)))(e),he=(e,t,s)=>(ie(e,t)||(e[t]=s()),e[t]),fe=e=>e?.size??0,Le=(e,t)=>e?.has(t)??!1,Ce=e=>H(e)||0==fe(e),we=e=>[...e?.values()??[]],pe=e=>e.clear(),Te=(e,t)=>e?.forEach(t),be=(e,t)=>e?.delete(t),ye=e=>new Map(e),ve=e=>[...e?.keys()??[]],Ie=(e,t)=>e?.get(t),Re=(e,t)=>Te(e,((e,s)=>t(s,e))),Se=(e,t,s)=>H(s)?(be(e,t),e):e?.set(t,s),me=(e,t,s,n)=>(Le(e,t)?n?.(Ie(e,t)):Se(e,t,s()),Ie(e,t)),Ve=(e,t,s,n=Se)=>(ue(t,((t,n)=>s(e,n,t))),Re(e,(s=>ie(t,s)?0:n(e,s))),e),Me=(e,t,s)=>{const n={};return Te(e,((e,a)=>{const o=t?t(e,a):e;!s?.(o,e)&&(n[a]=o)})),n},Ee=(e,t,s)=>Me(e,(e=>Me(e,t,s)),ge),ke=(e,t,s)=>Me(e,(e=>Ee(e,t,s)),ge),xe=(e,t)=>{const s=ye();return Te(e,((e,n)=>s.set(n,t?.(e)??e))),s},He=e=>xe(e,xe),De=e=>xe(e,He),Ae=(e,t,s,n,a=0)=>D((s?me:Ie)(e,t[a],a>N(t)-2?s:ye),(o=>{if(a>N(t)-2)return n?.(o)&&Se(e,t[a]),o;const r=Ae(o,t,s,n,a+1);return Ce(o)&&Se(e,t[a]),r})),Je=e=>{const s=t(e);return A(s)||s==o&&x(e)?s:void 0},Fe=(e,t,s,n,a)=>H(a)?e.delCell(t,s,n,!0):e.setCell(t,s,n,a),Qe=(e,t,s)=>H(s)?e.delValue(t):e.setValue(t,s),ze=e=>new Set(Q(e)||H(e)?e:[e]),Ne=(e,t)=>e?.add(t),Oe=(e,t,s,n,a)=>{const o=e.hasRow,r=ye(),l=ye(),i=ye(),c=ye(),d=ye(),u=ye(),g=(t,s,...n)=>{const a=me(u,t,ze);return $(n,(t=>Ne(a,t)&&s&&e.callListener(t))),n},h=(t,...s)=>D(Ie(u,t),(n=>{$(K(s)?we(n):s,(t=>{e.delListener(t),be(n,t)})),Ce(n)&&Se(u,t)})),f=(e,s)=>{Se(r,e,s),Le(l,e)||(Se(l,e,t()),Se(c,e,ye()),Se(d,e,ye()),a(i))},L=e=>{Se(r,e),Se(l,e),Se(c,e),Se(d,e),h(e),a(i)};return[()=>e,()=>ve(r),e=>Re(l,e),e=>Le(l,e),e=>Ie(r,e),e=>Ie(l,e),(e,t)=>Se(l,e,t),f,(t,n,a,r,l)=>{f(t,n);const i=ye(),u=ye(),L=Ie(c,t),C=Ie(d,t),w=t=>{const a=s=>e.getCell(n,t,s),c=Ie(L,t),d=o(n,t)?s(r(a,t)):void 0;if(c===d||Q(c)&&Q(d)&&j(c,d)||Se(i,t,[c,d]),!H(l)){const e=Ie(C,t),s=o(n,t)?l(a,t):void 0;e!=s&&Se(u,t,s)}},p=e=>{a((()=>{Te(i,(([,e],t)=>Se(L,t,e))),Te(u,((e,t)=>Se(C,t,e)))}),i,u,L,C,e),pe(i),pe(u)};Re(L,w),e.hasTable(n)&&$(e.getRowIds(n),(e=>{Le(L,e)||w(e)})),p(!0),h(t),g(t,0,e.addRowListener(n,null,((e,t,s)=>w(s))),e.addTableListener(n,(()=>p())))},L,e=>n(e,i),()=>Re(u,L),g,h]},Pe=(e,t)=>J(e)?t=>t(e):e??(()=>t??s),We=(e,t)=>{const s=new WeakMap;return n=>{s.has(n)||s.set(n,e(n));const a=s.get(n);return t?.(a),a}},je=/^\d+$/,Be=()=>{const e=[];let t=0;return[n=>(n?Z(e):null)??s+t++,t=>{je.test(t)&&N(e)<1e3&&X(e,t)}]},_e=e=>{let t;const[n,a]=Be(),o=ye();return[(a,r,l,i=[],c=(()=>[]))=>{t??=e();const d=n(1);return Se(o,d,[a,r,l,i,c]),Ne(Ae(r,l??[s],ze),d),d},(e,n,...a)=>$(((e,t=[s])=>{const n=[],a=(e,s)=>s==N(t)?X(n,e):null===t[s]?Te(e,(e=>a(e,s+1))):$([t[s],null],(t=>a(Ie(e,t),s+1)));return a(e,0),n})(e,n),(e=>Te(e,(e=>Ie(o,e)[0](t,...n??[],...a))))),e=>D(Ie(o,e),(([,t,n])=>(Ae(t,n??[s],void 0,(t=>(be(t,e),Ce(t)?1:0))),Se(o,e),a(e),n))),e=>D(Ie(o,e),(([e,,s=[],n,a])=>{const o=(...r)=>{const l=N(r);l==N(s)?e(t,...r,...a(r)):H(s[l])?$(n[l]?.(...r)??[],(e=>o(...r,e))):o(...r,s[l])};o()}))]},$e=We((e=>{let t,n,a,o=100,r=ye(),l=ye(),i=1;const c=ye(),d=ye(),[u,g,h]=_e((()=>J)),f=ye(),L=ye(),C=[],w=[],p=(t,s)=>{i=0,e.transaction((()=>{const[n,a]=Ie(f,s);Te(n,((s,n)=>Te(s,((s,a)=>Te(s,((s,o)=>Fe(e,n,a,o,s[t]))))))),Te(a,((s,n)=>Qe(e,n,s[t])))})),i=1},T=e=>{Se(f,e),Se(L,e),g(d,[e])},b=(e,t)=>$(((e,t)=>e.splice(0,t))(e,t??N(e)),T),y=()=>b(C,N(C)-o),v=()=>D(t,(()=>{X(C,t),y(),b(w),t=void 0,a=1})),I=()=>{t=Y(C),a=1};let R,S;const m=(e="")=>(H(t)&&(t=s+n++,Se(f,t,[r,l]),x(t,e),r=ye(),l=ye(),a=1),t),V=()=>{K(C)||(((e,...t)=>{e.unshift(...t)})(w,m()),p(0,t),t=Y(C),a=1)},M=()=>{K(w)||(X(C,t),t=Z(w),p(1,t),a=1)},E=()=>{a&&(g(c),a=0)},k=e=>{const t=m(e);return E(),t},x=(e,t)=>(A(e)&&Ie(L,e)!==t&&(Se(L,e,t),g(d,[e])),J),A=e=>Le(f,e),J={setSize:e=>(o=e,y(),J),addCheckpoint:k,setCheckpoint:x,getStore:()=>e,getCheckpointIds:()=>[[...C],t,[...w]],forEachCheckpoint:e=>Re(L,e),hasCheckpoint:A,getCheckpoint:e=>Ie(L,e),goBackward:()=>(V(),E(),J),goForward:()=>(M(),E(),J),goTo:e=>{const s=P(C,e)?V:P(w,e)?M:null;for(;!H(s)&&e!=t;)s();return E(),J},addCheckpointIdsListener:e=>u(e,c),addCheckpointListener:(e,t)=>u(t,d,[e]),delListener:e=>(h(e),J),clear:()=>(b(C),b(w),H(t)||T(t),t=void 0,n=0,k(),J),clearForward:()=>(K(w)||(b(w),g(c)),J),destroy:()=>{e.delListener(R),e.delListener(S)},getListenerStats:()=>({}),_registerListeners:()=>{R=e.addCellListener(null,null,null,((e,t,s,n,a,o)=>{if(i){v();const e=me(r,t,ye),l=me(e,s,ye),i=me(l,n,(()=>[o,void 0]));i[1]=a,i[0]===a&&Ce(Se(l,n))&&Ce(Se(e,s))&&Ce(Se(r,t))&&I(),E()}})),S=e.addValueListener(null,((e,t,s,n)=>{if(i){v();const e=me(l,t,(()=>[n,void 0]));e[1]=s,e[0]===s&&Ce(Se(l,t))&&I(),E()}}))}};return oe(J.clear())}),(e=>e._registerListeners())),qe=(e,t)=>(e??0)<(t??0)?-1:1,Ge=We((e=>{const t=ye(),n=ye(),[a,o,r]=_e((()=>T)),[l,i,c,d,u,g,h,,f,L,C,w]=Oe(e,ye,(e=>H(e)?s:Q(e)?q(e,m):m(e)),a,o),p=(t,s,n)=>{const a=u(t);Te(n,((t,n)=>s(n,(s=>Te(t,(t=>s(t,(s=>e.forEachCell(a,t,s)))))))))},T={setIndexDefinition:(e,s,a,r,l,i=qe)=>{const c=H(l)?void 0:([e],[t])=>l(e,t);return f(e,s,((s,a,l,d,u,f)=>{let L=0;const C=ze(),w=ze(),p=g(e);if(Te(a,(([e,t],s)=>{const n=ze(e),a=ze(t);Te(n,(e=>be(a,e)?be(n,e):0)),Te(n,(e=>{Ne(C,e),D(Ie(p,e),(t=>{be(t,s),Ce(t)&&(Se(p,e),L=1)}))})),Te(a,(e=>{Ne(C,e),Le(p,e)||(Se(p,e,ze()),L=1),Ne(Ie(p,e),s),H(r)||Ne(w,e)}))})),s(),Ce(u)||(f?Re(p,(e=>Ne(w,e))):Re(l,(e=>D(Ie(d,e),(e=>Ne(w,e))))),Te(w,(e=>{const t=(t,s)=>i(Ie(u,t),Ie(u,s),e),s=[...Ie(p,e)];B(s,t)||(Se(p,e,ze(_(s,t))),Ne(C,e))}))),(L||f)&&!H(c)){const t=[...p];B(t,c)||(h(e,ye(_(t,c))),L=1)}L&&o(t,[e]),Te(C,(t=>o(n,[e,t])))}),Pe(a),D(r,Pe)),T},delIndexDefinition:e=>(L(e),T),getStore:l,getIndexIds:i,forEachIndex:e=>c(((t,s)=>e(t,(e=>p(t,e,s))))),forEachSlice:(e,t)=>p(e,t,g(e)),hasIndex:d,hasSlice:(e,t)=>Le(g(e),t),getTableId:u,getSliceIds:e=>ve(g(e)),getSliceRowIds:(e,t)=>we(Ie(g(e),t)),addIndexIdsListener:C,addSliceIdsListener:(e,s)=>a(s,t,[e]),addSliceRowIdsListener:(e,t,s)=>a(s,n,[e,t]),delListener:e=>(r(e),T),destroy:w,getListenerStats:()=>({})};return oe(T)})),Ke=ye([["avg",[(e,t)=>G(e)/t,(e,t,s)=>e+(t-e)/(s+1),(e,t,s)=>e+(e-t)/(s-1),(e,t,s,n)=>e+(t-s)/n]],["max",[e=>E(...e),(e,t)=>E(t,e),(e,t)=>t==e?void 0:e,(e,t,s)=>s==e?void 0:E(t,e)]],["min",[e=>k(...e),(e,t)=>k(t,e),(e,t)=>t==e?void 0:e,(e,t,s)=>s==e?void 0:k(t,e)]],["sum",[e=>G(e),(e,t)=>e+t,(e,t)=>e-t,(e,t,s)=>e-s+t]]]),Ue=(e,t,s,n,a,o=!1)=>{if(Ce(s))return;const[r,l,i,c]=a;return o||=H(e),Te(n,(([s,n])=>{o||(e=H(s)?l?.(e,n,t++):H(n)?i?.(e,s,t--):c?.(e,n,s,t),o||=H(e))})),o?r(we(s),fe(s)):e},Xe=We((e=>{const t=ye(),[n,a,o]=_e((()=>w)),[r,l,i,c,d,u,g,,h,f,L,C]=Oe(e,O,(e=>isNaN(e)||H(e)||!0===e||!1===e||e===s?void 0:1*e),n,a),w={setMetricDefinition:(e,s,n,o,r,l,i)=>{const c=F(n)?[n,r,l,i]:Ie(Ke,n)??Ie(Ke,"sum");return h(e,s,((s,n,o,r,l,i)=>{const d=u(e),h=fe(r);i||=H(d),s();let f=Ue(d,h,r,n,c,i);x(f)||(f=void 0),f!=d&&(g(e,f),a(t,[e],f,d))}),Pe(o,1)),w},delMetricDefinition:e=>(f(e),w),getStore:r,getMetricIds:l,forEachMetric:i,hasMetric:c,getTableId:d,getMetric:u,addMetricIdsListener:L,addMetricListener:(e,s)=>n(s,t,[e]),delListener:e=>(o(e),w),destroy:C,getListenerStats:()=>({})};return oe(w)})),Ye=ye(),Ze=ye(),et=e=>J(e?.[0]),tt=We((e=>{const t=e.createStore,n=t(),a=t(),o=ye(),{addListener:r,callListeners:l,delListener:i}=a,[g,h,L,C,I,,,R,,S,m,V,M,E]=Oe(e,(()=>!0),O,r,l),k=(e,t,...s)=>$(s,(s=>Ne(me(me(o,t,ye),e,ze),s))),x=e=>{D(Ie(o,e),(e=>{Re(e,((e,t)=>Te(t,(t=>e.delListener(t))))),pe(e)})),$([a,n],(t=>t.delTable(e)))},A=(e,t,s)=>k(t,e,t.addStartTransactionListener(s.startTransaction),t.addDidFinishTransactionListener((()=>s.finishTransaction()))),J={setQueryDefinition:(t,o,r)=>{R(t,o),x(t);const l=[],i=[[null,[o,null,null,[],ye()]]],c=[],d=[],u=[];r({select:(e,t)=>{const n=F(e)?[N(l)+s,e]:[H(t)?e:t,s=>s(e,t)];return X(l,n),{as:e=>n[0]=e}},join:(e,t,s)=>{const n=H(s)||F(t)?null:t,a=H(n)?t:s,o=[e,[e,n,F(a)?a:e=>e(a),[],ye()]];return X(i,o),{as:e=>o[0]=e}},where:(e,t,s)=>X(c,F(e)?e:H(s)?s=>s(e)===t:n=>n(e,t)===s),group:(e,t,s,n,a)=>{const o=[e,[e,F(t)?[t,s,n,a]:Ie(Ke,t)??[(e,t)=>t]]];return X(d,o),{as:e=>o[0]=e}},having:(e,t)=>X(u,F(e)?e:s=>s(e)===t)});const g=ye(l);if(Ce(g))return J;const h=ye(i);Re(h,((e,[,t])=>D(Ie(h,t),(({3:t})=>H(e)?0:X(t,e)))));const f=ye(d);let L=n;if(Ce(f)&&K(u))L=a;else{A(t,L,a);const e=ye();Re(f,((t,[s,n])=>Ne(me(e,s,ze),[t,n])));const s=ze();Re(g,(t=>Le(e,t)?0:Ne(s,t)));const n=ye(),o=(s,n,o,r)=>D(s,(([l,i,c,d])=>{Re(n,((t,[s])=>{const n=me(l,t,ye),a=Ie(n,o),i=r?void 0:s;if(a!==i){const s=ze([[a,i]]),r=fe(n);Se(n,o,i),Te(Ie(e,t),(([e,t])=>{const a=Ue(d[e],r,n,s,t);d[e]=H(Je(a))?null:a}))}})),Ce(i)||!W(u,(e=>e((e=>d[e]))))?a.delRow(t,c):H(c)?s[2]=a.addRow(t,d):a.setRow(t,c,d)}));k(L,t,L.addRowListener(t,null,((a,r,l,i)=>{const c=[],d=[],u=ye(),g=L.hasRow(t,l);let h=!g;Te(s,(e=>{const[s,n,a]=i(t,l,e);X(c,n),X(d,a),h||=s})),Re(e,(e=>{const[s,,n]=i(t,l,e);(h||s)&&Se(u,e,[n])})),h&&o(Ae(n,c,void 0,(([,e])=>(be(e,l),Ce(e)))),u,l,1),g&&o(Ae(n,d,(()=>{const e={};return Te(s,(s=>e[s]=L.getCell(t,l,s))),[ye(),ze(),void 0,e]}),(([,e])=>{Ne(e,l)})),u,l)})))}A(t,e,L);const C=(s,n,a,r)=>{const l=t=>e.getCell(n,a,t);$(r,(n=>{const[a,,o,r,i]=Ie(h,n),c=o?.(l,s),[d,u]=Ie(i,s)??[];c!=d&&(H(u)||E(t,u),Se(i,s,H(c)?null:[c,...M(t,1,e.addRowListener(a,c,(()=>C(s,a,c,r))))]))})),(s=>{const n=(t,n)=>e.getCell(...H(n)?[o,s,t]:t===o?[o,s,n]:[Ie(h,t)?.[0],Ie(Ie(h,t)?.[4],s)?.[0],n]);L.transaction((()=>W(c,(e=>e(n)))?Re(g,((e,a)=>Fe(L,t,s,e,a(n,s)))):L.delRow(t,s)))})(s)},{3:w}=Ie(h,null);return L.transaction((()=>M(t,1,e.addRowListener(o,null,((s,n,a)=>{e.hasRow(o,a)?C(a,o,a,w):(L.delRow(t,a),Te(h,(({4:e})=>D(Ie(e,a),(([,s])=>{E(t,s),Se(e,a)})))))}))))),J},delQueryDefinition:e=>(x(e),S(e),J),getStore:g,getQueryIds:h,forEachQuery:L,hasQuery:C,getTableId:I,addQueryIdsListener:e=>m((()=>e(J))),delListener:e=>(i(e),J),destroy:V,getListenerStats:()=>{const{tables:e,tableIds:t,transaction:s,...n}=a.getListenerStats();return n}};return ue({[f]:[1,1],[f+v]:[0,1],[p]:[0,1],[T]:[0,1],[b]:[0,5],[w]:[1,2],[v]:[0,2],[y]:[1,3]},(([e,t],s)=>{$(e?["get","has","forEach"]:["get"],(e=>J[e+d+s]=(...t)=>a[e+s](...t))),J[u+d+s+c]=(...e)=>a[u+s+c](...z(e,0,t),((s,...n)=>e[t](J,...n)),!0)})),oe(J)})),st=We((e=>{const t=ye(),n=ye(),a=ye(),o=ye(),[r,l,i]=_e((()=>v)),[c,d,u,g,h,f,,,L,C,w,p]=Oe(e,(()=>[ye(),ye(),ye(),ye()]),(e=>H(e)?void 0:e+s),r,l),T=(e,t,s)=>D(f(e),(([n,,a])=>{if(!Le(a,t)){const o=ze();if(h(e)!=y(e))Ne(o,t);else{let e=t;for(;!H(e)&&!Le(o,e);)Ne(o,e),e=Ie(n,e)}if(s)return o;Se(a,t,o)}return Ie(a,t)})),b=(e,t)=>D(f(e),(([,,e])=>Se(e,t))),y=e=>Ie(t,e),v={setRelationshipDefinition:(e,s,r,i)=>(Se(t,e,r),L(e,s,((t,s)=>{const r=ze(),i=ze(),c=ze(),[d,u]=f(e);Te(s,(([t,s],n)=>{H(t)||(Ne(i,t),D(Ie(u,t),(e=>{be(e,n),Ce(e)&&Se(u,t)}))),H(s)||(Ne(i,s),Le(u,s)||Se(u,s,ze()),Ne(Ie(u,s),n)),Ne(r,n),Se(d,n,s),Re(Ie(o,e),(t=>{Le(T(e,t),n)&&Ne(c,t)}))})),t(),Te(r,(t=>l(n,[e,t]))),Te(i,(t=>l(a,[e,t]))),Te(c,(t=>{b(e,t),l(o,[e,t])}))}),Pe(i)),v),delRelationshipDefinition:e=>(Se(t,e),C(e),v),getStore:c,getRelationshipIds:d,forEachRelationship:t=>u((s=>t(s,(t=>e.forEachRow(h(s),t))))),hasRelationship:g,getLocalTableId:h,getRemoteTableId:y,getRemoteRowId:(e,t)=>Ie(f(e)?.[0],t),getLocalRowIds:(e,t)=>we(Ie(f(e)?.[1],t)),getLinkedRowIds:(e,t)=>H(f(e))?[t]:we(T(e,t,!0)),addRelationshipIdsListener:w,addRemoteRowIdListener:(e,t,s)=>r(s,n,[e,t]),addLocalRowIdsListener:(e,t,s)=>r(s,a,[e,t]),addLinkedRowIdsListener:(e,t,s)=>(T(e,t),r(s,o,[e,t])),delListener:e=>(b(...i(e)??[]),v),destroy:p,getListenerStats:()=>({})};return oe(v)})),nt=new globalThis.TextEncoder,at=e=>{let t=2166136261;return $(nt.encode(e),(e=>{t^=e,t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24)})),t>>>0},ot=([e,t,s])=>[e,t,s],rt=(e,t)=>[e,t],lt=(e,t)=>at(e+":"+t),it=(e,t,s)=>{e[2]=t>>>0,s>e[0]&&(e[0]=s)},ct=e=>rt(e,le()),dt=(e="")=>[e,ye(),0],ut=()=>[s,void 0,0],gt=([e,t,s],n)=>[e,n(t,e),s],ht=(e,t=ot)=>gt(e,(e=>Me(e,t))),ft=e=>[e,e],Lt=()=>[ye(),ye()],Ct=e=>[...e],wt=([e,t])=>e===t,pt=e=>JSON.stringify(e,((e,t)=>t instanceof Map?ee.fromEntries([...t]):t)),Tt=JSON.parse,bt=(e,t,s)=>H(e)||!re(e)||ge(e)||ae(e)?(s?.(),!1):(ue(e,((s,n)=>{t(s,n)||ce(e,n)})),!ge(e)),yt=(e,t,s)=>Se(e,t,Ie(e,t)==-s?void 0:s),vt=()=>{let e,t,s=!1,n=!1,a=0,r=[];const d=ye(),h=ye(),b=ye(),V=ye(),M=ye(),E=ye(),k=ye(),x=ye(),J=ye(),Q=ye(),N=ye(),O=ye(),W=ye(),B=ye(),G=ze(),K=ye(),U=ye(),Y=ye(),Z=ye(),ee=Lt(),te=Lt(),se=Lt(),ne=Lt(),ae=Lt(),re=Lt(),le=Lt(),de=Lt(),he=Lt(),we=Lt(),Ae=Lt(),Oe=Lt(),Pe=Lt(),We=Lt(),je=Lt(),$e=Lt(),Ge=Lt(),Ke=Lt(),Ue=Lt(),Xe=Lt(),Ye=Lt(),Ze=Lt(),et=ye(),tt=Lt(),[st,nt,at,ot]=_e((()=>As)),rt=e=>{if(!bt(e,((e,t)=>P([l,i],t))))return!1;const t=e[l];return!(!A(t)&&t!=o||(Je(e[i])!=t&&ce(e,i),0))},lt=(t,s)=>(!e||Le(N,s)||$t(s))&&bt(t,((e,t)=>it(s,t,e)),(()=>$t(s))),it=(e,t,s,n)=>bt(n?s:gt(s,e,t),((n,a)=>D(ct(e,t,a,n),(e=>(s[a]=e,!0)),(()=>!1))),(()=>$t(e,t))),ct=(t,s,n,a)=>e?D(Ie(Ie(N,t),n),(e=>Je(a)!=e[l]?$t(t,s,n,a,e[i]):a),(()=>$t(t,s,n,a))):H(Je(a))?$t(t,s,n,a):a,dt=(e,t)=>bt(t?e:ht(e),((t,s)=>D(ut(s,t),(t=>(e[s]=t,!0)),(()=>!1))),(()=>qt())),ut=(e,s)=>t?D(Ie(W,e),(t=>Je(s)!=t[l]?qt(e,s,t[i]):s),(()=>qt(e,s))):H(Je(s))?qt(e,s):s,gt=(e,t,s)=>(D(Ie(O,t),(([n,a])=>{Te(n,((t,s)=>{ie(e,s)||(e[s]=t)})),Te(a,(n=>{ie(e,n)||$t(t,s,n)}))})),e),ht=e=>(t&&(Te(B,((t,s)=>{ie(e,s)||(e[s]=t)})),Te(G,(t=>{ie(e,t)||qt(t)}))),e),It=e=>Ve(N,e,((e,t,s)=>{const n=ye(),a=ze();Ve(me(N,t,ye),s,((e,t,s)=>{Se(e,t,s),D(s[i],(e=>Se(n,t,e)),(()=>Ne(a,t)))})),Se(O,t,[n,a])}),((e,t)=>{Se(N,t),Se(O,t)})),Rt=e=>Ve(W,e,((e,t,s)=>{Se(W,t,s),D(s[i],(e=>Se(B,t,e)),(()=>Ne(G,t)))}),((e,t)=>{Se(W,t),Se(B,t),be(G,t)})),St=e=>ge(e)?Ss():bs(e),mt=e=>Ve(Y,e,((e,t,s)=>Vt(t,s)),((e,t)=>Ft(t))),Vt=(e,t)=>Ve(me(Y,e,(()=>(Ot(e,1),Se(K,e,Be()),Se(U,e,ye()),ye()))),t,((t,s,n)=>Mt(e,t,s,n)),((t,s)=>Qt(e,t,s))),Mt=(e,t,s,n,a)=>Ve(me(t,s,(()=>(Pt(e,s,1),ye()))),n,((t,n,a)=>Et(e,s,t,n,a)),((n,o)=>zt(e,t,s,n,o,a))),Et=(e,t,s,n,a)=>{Le(s,n)||Wt(e,t,n,1);const o=Ie(s,n);a!==o&&(jt(e,t,n,o,a),Se(s,n,a))},kt=(e,t,s,n,a)=>D(Ie(t,s),(t=>Et(e,s,t,n,a)),(()=>Mt(e,t,s,gt({[n]:a},e,s)))),xt=e=>ge(e)?Ms():ys(e),Ht=e=>Ve(Z,e,((e,t,s)=>Dt(t,s)),((e,t)=>Nt(t))),Dt=(e,t)=>{Le(Z,e)||Bt(e,1);const s=Ie(Z,e);t!==s&&(_t(e,s,t),Se(Z,e,t))},At=(e,t)=>{const[s]=Ie(K,e),n=s(t);return Le(Ie(Y,e),n)?At(e,t):n},Jt=e=>Ie(Y,e)??Vt(e,{}),Ft=e=>Vt(e,{}),Qt=(e,t,s)=>{const[,n]=Ie(K,e);n(s),Mt(e,t,s,{},!0)},zt=(e,t,s,n,a,o)=>{const r=Ie(Ie(O,e)?.[0],a);if(!H(r)&&!o)return Et(e,s,n,a,r);const l=t=>{jt(e,s,t,Ie(n,t)),Wt(e,s,t,-1),Se(n,t)};H(r)?l(a):Re(n,l),Ce(n)&&(Pt(e,s,-1),Ce(Se(t,s))&&(Ot(e,-1),Se(Y,e),Se(K,e),Se(U,e)))},Nt=e=>{const t=Ie(B,e);if(!H(t))return Dt(e,t);_t(e,Ie(Z,e)),Bt(e,-1),Se(Z,e)},Ot=(e,t)=>yt(d,e,t),Pt=(e,t,s)=>yt(me(V,e,ye),t,s)&&Se(b,e,me(b,e,(()=>0))+s),Wt=(e,t,s,n)=>{const a=Ie(U,e),o=Ie(a,s)??0;(0==o&&1==n||1==o&&-1==n)&&yt(me(h,e,ye),s,n),Se(a,s,o!=-n?o+n:null),yt(me(me(M,e,ye),t,ye),s,n)},jt=(e,t,s,n,a)=>me(me(me(E,e,ye),t,ye),s,(()=>[n,0]))[1]=a,Bt=(e,t)=>yt(k,e,t),_t=(e,t,s)=>me(x,e,(()=>[t,0]))[1]=s,$t=(e,t,s,n,a)=>(X(me(me(me(J,e,ye),t,ye),s,(()=>[])),n),a),qt=(e,t,s)=>(X(me(Q,e,(()=>[])),t),s),Gt=(e,t,s)=>D(Ie(Ie(Ie(E,e),t),s),(([e,t])=>[!0,e,t]),(()=>[!1,...ft(cs(e,t,s))])),Kt=e=>D(Ie(x,e),(([e,t])=>[!0,e,t]),(()=>[!1,...ft(gs(e))])),Ut=e=>Ce(J)||Ce($e[e])?0:Te(e?De(J):J,((t,s)=>Te(t,((t,n)=>Te(t,((t,a)=>nt($e[e],[s,n,a],t))))))),Xt=e=>Ce(Q)||Ce(Ge[e])?0:Te(e?xe(Q):Q,((t,s)=>nt(Ge[e],[s],t))),Yt=(e,t,s,n)=>{if(!Ce(e))return nt(t,n,(()=>Me(e))),Re(e,((e,t)=>nt(s,[...n??[],e],1==t))),1},Zt=e=>{const t=hs();t!=s&&nt(ee[e],void 0,t);const n=Ce(we[e]),a=Ce(Pe[e])&&Ce(We[e])&&Ce(he[e])&&Ce(Ae[e])&&Ce(re[e])&&Ce(le[e])&&Ce(de[e])&&n&&Ce(se[e])&&Ce(ne[e]),o=Ce(je[e])&&Ce(Oe[e])&&Ce(ae[e])&&Ce(te[e]);if(!a||!o){const t=e?[xe(d),He(h),xe(b),He(V),De(M),De(E)]:[d,h,b,V,M,E];if(!a){Yt(t[0],se[e],ne[e]),Te(t[1],((t,s)=>Yt(t,re[e],le[e],[s]))),Te(t[2],((t,s)=>{0!=t&&nt(de[e],[s],os(s))}));const s=ze();Te(t[3],((t,a)=>{Yt(t,he[e],Ae[e],[a])&&!n&&(nt(we[e],[a,null]),Ne(s,a))})),n||Te(t[5],((t,n)=>{if(!Le(s,n)){const s=ze();Te(t,(e=>Te(e,(([t,n],a)=>n!==t?Ne(s,a):be(e,a))))),Te(s,(t=>nt(we[e],[n,t])))}})),Te(t[4],((t,s)=>Te(t,((t,n)=>Yt(t,Pe[e],We[e],[s,n])))))}if(!o){let s;Te(t[5],((t,n)=>{let a;Te(t,((t,o)=>{let r;Te(t,(([t,l],i)=>{l!==t&&(nt(je[e],[n,o,i],l,t,Gt),s=a=r=1)})),r&&nt(Oe[e],[n,o],Gt)})),a&&nt(ae[e],[n],Gt)})),s&&nt(te[e],void 0,Gt)}}},es=e=>{const t=ps();t!=n&&nt(Ke[e],void 0,t);const s=Ce(Xe[e])&&Ce(Ye[e]),a=Ce(Ze[e])&&Ce(Ue[e]);if(!s||!a){const t=e?[xe(k),xe(x)]:[k,x];if(s||Yt(t[0],Xe[e],Ye[e]),!a){let s;Te(t[1],(([t,n],a)=>{n!==t&&(nt(Ze[e],[a],n,t,Kt),s=1)})),s&&nt(Ue[e],void 0,Kt)}}},ts=(e,...t)=>(xs((()=>e(...q(t,m)))),As),ss=()=>ke(Y),ns=()=>ve(Y),as=e=>ve(Ie(U,m(e))),os=e=>fe(Ie(Y,m(e))),rs=e=>ve(Ie(Y,m(e))),ls=(e,t,s,n=0,a)=>{return q(z(_((o=Ie(Y,m(e)),r=(e,s)=>[H(t)?s:Ie(e,m(t)),s],q([...o?.entries()??[]],(([e,t])=>r(t,e)))),(([e],[t])=>qe(e,t)*(s?-1:1))),n,H(a)?a:n+a),(([,e])=>e));var o,r},is=(e,t)=>ve(Ie(Ie(Y,m(e)),m(t))),cs=(e,t,s)=>Ie(Ie(Ie(Y,m(e)),m(t)),m(s)),ds=()=>Me(Z),us=()=>ve(Z),gs=e=>Ie(Z,m(e)),hs=()=>!Ce(Y),fs=e=>Le(Y,m(e)),Ls=(e,t)=>Le(Ie(U,m(e)),m(t)),Cs=(e,t)=>Le(Ie(Y,m(e)),m(t)),ws=(e,t,s)=>Le(Ie(Ie(Y,m(e)),m(t)),m(s)),ps=()=>!Ce(Z),Ts=e=>Le(Z,m(e)),bs=e=>ts((()=>(e=>bt(e,lt,$t))(e)?mt(e):0)),ys=e=>ts((()=>dt(e)?Ht(e):0)),vs=e=>{try{St(Tt(e))}catch{}return As},Is=t=>ts((()=>{if((e=bt(t,(e=>bt(e,rt))))&&(It(t),!Ce(Y))){const e=ss();Ss(),bs(e)}})),Rs=e=>ts((()=>{if(t=(e=>bt(e,rt))(e)){const s=ds();ks(),Ms(),t=!0,Rt(e),ys(s)}})),Ss=()=>ts((()=>mt({}))),ms=e=>ts((e=>Le(Y,e)?Ft(e):0),e),Vs=(e,t)=>ts(((e,t)=>D(Ie(Y,e),(s=>Le(s,t)?Qt(e,s,t):0))),e,t),Ms=()=>ts((()=>Ht({}))),Es=()=>ts((()=>{It({}),e=!1})),ks=()=>ts((()=>{Rt({}),t=!1})),xs=(e,t)=>{if(-1!=a){Hs();const s=e();return Ds(t),s}},Hs=()=>(-1!=a&&a++,1==a&&nt(et,void 0),As),Ds=e=>(a>0&&(a--,0==a&&(a=1,Ut(1),Ce(E)||Zt(1),Xt(1),Ce(x)||es(1),e?.(As)&&(Te(E,((e,t)=>Te(e,((e,s)=>Te(e,(([e],n)=>Fe(As,t,s,n,e))))))),pe(E),Te(x,(([e],t)=>Qe(As,t,e))),pe(x)),nt(tt[0],void 0),a=-1,Ut(0),Ce(E)||Zt(0),Xt(0),Ce(x)||es(0),r[0]?.(As),nt(tt[1],void 0),r[1]?.(As),a=0,s=hs(),n=ps(),$([d,h,b,V,M,E,J,k,x,Q],pe))),As),As={getContent:()=>[ss(),ds()],getTables:ss,getTableIds:ns,getTable:e=>Ee(Ie(Y,m(e))),getTableCellIds:as,getRowCount:os,getRowIds:rs,getSortedRowIds:ls,getRow:(e,t)=>Me(Ie(Ie(Y,m(e)),m(t))),getCellIds:is,getCell:cs,getValues:ds,getValueIds:us,getValue:gs,hasTables:hs,hasTable:fs,hasTableCell:Ls,hasRow:Cs,hasCell:ws,hasValues:ps,hasValue:Ts,getTablesJson:()=>pt(Y),getValuesJson:()=>pt(Z),getJson:()=>pt([Y,Z]),getTablesSchemaJson:()=>pt(N),getValuesSchemaJson:()=>pt(W),getSchemaJson:()=>pt([N,W]),hasTablesSchema:()=>e,hasValuesSchema:()=>t,setContent:([e,t])=>ts((()=>{(ge(e)?Ss:bs)(e),(ge(t)?Ms:ys)(t)})),setTables:bs,setTable:(e,t)=>ts((e=>lt(t,e)?Vt(e,t):0),e),setRow:(e,t,s)=>ts(((e,t)=>it(e,t,s)?Mt(e,Jt(e),t,s):0),e,t),addRow:(e,t,s=!0)=>xs((()=>{let n;return it(e,n,t)&&(e=m(e),Mt(e,Jt(e),n=At(e,s?1:0),t)),n})),setPartialRow:(e,t,s)=>ts(((e,t)=>{if(it(e,t,s,1)){const n=Jt(e);ue(s,((s,a)=>kt(e,n,t,a,s)))}}),e,t),setCell:(e,t,s,n)=>ts(((e,t,s)=>D(ct(e,t,s,F(n)?n(cs(e,t,s)):n),(n=>kt(e,Jt(e),t,s,n)))),e,t,s),setValues:ys,setPartialValues:e=>ts((()=>dt(e,1)?ue(e,((e,t)=>Dt(t,e))):0)),setValue:(e,t)=>ts((e=>D(ut(e,F(t)?t(gs(e)):t),(t=>Dt(e,t)))),e),applyChanges:e=>ts((()=>{ue(e[0],((e,t)=>H(e)?ms(t):ue(e,((e,s)=>H(e)?Vs(t,s):ue(e,((e,n)=>Fe(As,t,s,n,e))))))),ue(e[1],((e,t)=>Qe(As,t,e)))})),setTablesJson:vs,setValuesJson:e=>{try{xt(Tt(e))}catch{}return As},setJson:e=>ts((()=>{try{const[t,s]=Tt(e);St(t),xt(s)}catch{vs(e)}})),setTablesSchema:Is,setValuesSchema:Rs,setSchema:(e,t)=>ts((()=>{Is(e),Rs(t)})),delTables:Ss,delTable:ms,delRow:Vs,delCell:(e,t,s,n)=>ts(((e,t,s)=>D(Ie(Y,e),(a=>D(Ie(a,t),(o=>Le(o,s)?zt(e,a,t,o,s,n):0))))),e,t,s),delValues:Ms,delValue:e=>ts((e=>Le(Z,e)?Nt(e):0),e),delTablesSchema:Es,delValuesSchema:ks,delSchema:()=>ts((()=>{Es(),ks()})),transaction:xs,startTransaction:Hs,getTransactionChanges:()=>[Me(E,((e,t)=>-1===Ie(d,t)?void 0:Me(e,((e,s)=>-1===Ie(Ie(V,t),s)?void 0:Me(e,(([,e])=>e),((e,t)=>wt(t)))),ge)),ge),Me(x,(([,e])=>e),((e,t)=>wt(t)))],getTransactionLog:()=>[!Ce(E),!Ce(x),ke(E,Ct,wt),ke(J),Me(x,Ct,wt),Me(Q),Me(d),Ee(V),ke(M),Me(k)],finishTransaction:Ds,forEachTable:e=>Te(Y,((t,s)=>e(s,(e=>Te(t,((t,s)=>e(s,(e=>Re(t,e))))))))),forEachTableCell:(e,t)=>Re(Ie(U,m(e)),t),forEachRow:(e,t)=>Te(Ie(Y,m(e)),((e,s)=>t(s,(t=>Re(e,t))))),forEachCell:(e,t,s)=>Re(Ie(Ie(Y,m(e)),m(t)),s),forEachValue:e=>Re(Z,e),addSortedRowIdsListener:(e,t,s,n,a,o,r)=>{let l=ls(e,t,s,n,a);return st((()=>{const r=ls(e,t,s,n,a);j(r,l)||(l=r,o(As,e,t,s,n,a,l))}),we[r?1:0],[e,t],[ns])},addStartTransactionListener:e=>st(e,et),addWillFinishTransactionListener:e=>st(e,tt[0]),addDidFinishTransactionListener:e=>st(e,tt[1]),callListener:e=>(ot(e),As),delListener:e=>(at(e),As),getListenerStats:()=>({}),createStore:vt,addListener:st,callListeners:nt,setInternalListeners:(e,t)=>r=[e,t]};return ue({[g+L]:[0,ee,[],()=>[hs()]],[L]:[0,te],[C]:[0,se],[g+f]:[1,ne,[ns],e=>[fs(...e)]],[f]:[1,ae,[ns]],[f+v]:[1,re,[ns]],[g+f+y]:[2,le,[ns,as],e=>[Ls(...e)]],[p]:[1,de,[ns]],[T]:[1,he,[ns]],[g+w]:[2,Ae,[ns,rs],e=>[Cs(...e)]],[w]:[2,Oe,[ns,rs]],[v]:[2,Pe,[ns,rs]],[g+y]:[3,We,[ns,rs,is],e=>[ws(...e)]],[y]:[3,je,[ns,rs,is],e=>ft(cs(...e))],InvalidCell:[3,$e],[g+R]:[0,Ke,[],()=>[ps()]],[R]:[0,Ue],[S]:[0,Xe],[g+I]:[1,Ye,[us],e=>[Ts(...e)]],[I]:[1,Ze,[us],e=>ft(gs(e[0]))],InvalidValue:[1,Ge]},(([e,t,s,n],a)=>{As[u+a+c]=(...a)=>st(a[e],t[a[e+1]?1:0],e>0?z(a,0,e):void 0,s,n)})),oe(As)},It=2**36,Rt=2**30,St=2**24,mt=2**18,Vt=4096,Mt=64,Et=e=>String.fromCharCode(48+(63&e)),kt=(e,t)=>((e,t)=>e.charCodeAt(t))(e,t)-48,xt={HasTable:1,Table:1,TableCellIds:1,HasTableCell:2,RowCount:1,RowIds:1,SortedRowIds:5,HasRow:2,Row:2,CellIds:2,HasCell:3,Cell:3,HasValue:1,Value:1,InvalidCell:3,InvalidValue:1},Ht=(e="")=>[e,[dt(e),dt(e)],0];e.createCheckpoints=$e,e.createCustomPersister=(e,t,s,n,a,o,r,[l,i]=[],c=[])=>{let d,u,g,h=0,f=0;me(Ye,c,(()=>0)),me(Ze,c,(()=>[]));const[L,C,w,p]=((e,t)=>!e||H(t.getMergeableContent)?[0,t.getContent,t.getTransactionChanges,([e,t])=>!ge(e)||!ge(t)]:[1,t.getMergeableContent,t.getTransactionMergeableChanges,([,[[,e],[,t]]])=>!ge(e)||!ge(t)])(r,e),T=async e=>(2!=h&&(h=1,await b.schedule((async()=>{await e(),h=0}))),b),b={load:async(s,n)=>await T((async()=>{try{const s=await t();(L&&et(s)?e.setMergeableContent:e.setContent)(s)}catch{e.setContent([s,n])}})),startAutoLoad:async(s={},a={})=>(b.stopAutoLoad(),await b.load(s,a),f=1,g=n((async(s,n)=>{if(n){const t=n();await T((async()=>(L&&et(t)?e.applyMergeableChanges:e.applyChanges)(t)))}else await T((async()=>{try{const n=s?.()??await t();(L&&et(n)?e.setMergeableContent:e.setContent)(n)}catch(e){o?.(e)}}))})),b),stopAutoLoad:()=>(f&&(a(g),g=void 0,f=0),b),save:async e=>(1!=h&&(h=2,await b.schedule((async()=>{try{await s(C,e)}catch(e){o?.(e)}h=0}))),b),startAutoSave:async()=>(await b.stopAutoSave().save(),d=e.addDidFinishTransactionListener((()=>{const e=w();p(e)&&b.save((()=>e))})),b),stopAutoSave:()=>(D(d,e.delListener),d=void 0,b),schedule:async(...e)=>(X(Ie(Ze,c),...e),await(async()=>{if(!Ie(Ye,c)){for(Se(Ye,c,1);!H(u=Z(Ie(Ze,c)));)try{await u()}catch(e){o?.(e)}Se(Ye,c,0)}})(),b),getStore:()=>e,destroy:()=>b.stopAutoLoad().stopAutoSave(),getStats:()=>({})};return l&&(b[l]=()=>i),oe(b)},e.createIndexes=Ge,e.createMergeableStore=e=>{let t,n,a=1,o=Ht();const[r,l]=(e=>{let t=0,s=-1;const n=at(e),a=e=>{const n=t,[a,o]=H(e)?[0,0]:[kt(r=e,0)*It+kt(r,1)*Rt+kt(r,2)*St+kt(r,3)*mt+kt(r,4)*Vt+kt(r,5)*Mt+kt(r,6),kt(r,7)*mt+kt(r,8)*Vt+kt(r,9)*Mt+kt(r,10),kt(r,11)*St+kt(r,12)*mt+kt(r,13)*Vt+kt(r,14)*Mt+kt(r,15)];var r;t=E(n,a,Date.now()),s=t==n?t==a?E(s,o):s:t==a?o:-1};return[()=>{return a(),o=++s,r=n,Et((e=t)/It)+Et(e/Rt)+Et(e/St)+Et(e/mt)+Et(e/Vt)+Et(e/Mt)+Et(e)+Et(o/mt)+Et(o/Vt)+Et(o/Mt)+Et(o)+Et(r/St)+Et(r/mt)+Et(r/Vt)+Et(r/Mt)+Et(r);var e,o,r},a]})(e),i=vt(),c=e=>{const t=a;a=0,e(),a=t},d=(e,t=0)=>{const s={},n={},[a,[[r,l,i],c],d]=e,[,[g,h]]=o,[f,L,C]=g;if(r){let e=t?i:C^(r>f?(f?at(f):0)^at(r):0);de(l,(([n,a,o],r)=>{const l=me(L,r,dt),[i,c,d]=l;let g=t?o:d^(n>i?(i?at(i):0)^at(n):0);de(a,((e,n)=>{const[a,o]=u(e,me(c,n,dt),he(he(s,r,le),n,le),t);g^=t?0:(a?lt(n,a):0)^lt(n,o)})),it(l,g,n),e^=t?0:(d?lt(r,d):0)^lt(r,l[2])})),it(g,e,r)}return u(c,h,n,t),it(o,t?d:g[2]^h[2],a),[s,n]},u=(e,t,s,n)=>{const[a,o,r]=e,[l,i,c]=t;if(a){let e=n?r:c^(a>l?(l?at(l):0)^at(a):0);de(o,(([t,a,o],r)=>{const l=me(i,r,ut),[c,,d]=l;t>c&&(it(l,n?o:at(pt(a??null)+":"+t),t),l[1]=a,s[r]=a,e^=n?0:lt(r,d)^lt(r,l[2]))})),it(t,e,a)}return[c,t[2]]},g=()=>gt(o,(([e,t])=>[ht(e,(e=>ht(e,(e=>ht(e))))),ht(t)])),h=()=>{if(H(n)){const[,,e,,n]=i.getTransactionLog(),a=ge(e)&&ge(n)?s:t??(t=r()),o=rt(a,[ct(ge(e)?s:a),ct(ge(n)?s:a)]),[[,l],[,c]]=o[1];return ue(e,((e,t)=>{const[,s]=l[t]=ct(a);ue(e,((e,t)=>{const[,n]=s[t]=ct(a);ue(e,(([,e],t)=>n[t]=rt(a,e)))}))})),ue(n,(([,e],t)=>c[t]=rt(a,e))),o}return n},f=e=>(l(e[0]),c((()=>i.applyChanges(d(e)))),L),L={getMergeableContent:g,setMergeableContent:e=>(c((()=>i.transaction((()=>{i.delTables().delValues(),o=Ht()})))),l(e[0]),c((()=>i.applyChanges(d(e,1)))),L),getTransactionMergeableChanges:h,applyMergeableChanges:f,merge:e=>{const t=g(),s=e.getMergeableContent();return e.applyMergeableChanges(t),f(s)},getContentHash:()=>o[2],getTablesHash:()=>o[1][0][2],getTableHash:e=>Ie(o[1][0][1],e)?.[2]??0,getRowHash:(e,t)=>Ie(Ie(o[1][0][1],e)?.[1],t)?.[2]??0,getCellHash:(e,t,s)=>Ie(Ie(Ie(o[1][0][1],e)?.[1],t)?.[1],s)?.[2]??0,getValuesHash:()=>o[1][1][2],getValueHash:e=>Ie(o[1][1][1],e)?.[2]??0};return i.setInternalListeners((()=>{a&&(n=h(),d(n))}),(()=>t=n=void 0)),ue(i,((e,t)=>L[t]=V(t,"set")||V(t,"del")||V(t,"apply")||M(t,"Transaction")||"callListener"==t?(...t)=>(e(...t),L):V(t,"add")&&M(t,"Listener")?(...s)=>{const n=xt[z(t,3,-8)]??0,a=s[n];return s[n]=(e,...t)=>a(L,...t),e(...s)}:e)),oe(L)},e.createMetrics=Xe,e.createQueries=tt,e.createRelationships=st,e.createStore=vt,e.defaultSorter=qe},"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).TinyBase={});
