<nav><ul><li><a href="/">TinyBase</a></li></ul></nav><section class="s1" id="/" data-id="root"><h1>TinyBase</h1>&lt;section id=&quot;hero&quot;&gt; &lt;h2&gt; A JavaScript library for &lt;em&gt;structured&amp;nbsp;state&lt;/em&gt;. &lt;/h2&gt; &lt;p&gt; Using plain old JavaScript objects to manage data gets old very quickly. It&#x27;s error-prone, tricky to track changes efficiently, and easy to mistakenly incur performance costs. &lt;/p&gt; &lt;p&gt;&lt;em&gt;TinyBase is a smarter way to structure your application state:&lt;/em&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt; Familiar concepts of &lt;a href=&#x27;#set-and-get-tables-rows-and-cells&#x27;&gt;tables, rows, and cells&lt;/a&gt;, and &lt;a href=&#x27;#apply-schemas-to-tables&#x27;&gt;schematization&lt;/a&gt; to model your data domain. &lt;/li&gt; &lt;li&gt; &lt;a href=&#x27;#register-listeners-at-any-granularity&#x27;&gt;Flexibly reactive&lt;/a&gt; to reconciled updates, so you only spend cycles on the data that changes. &lt;/li&gt; &lt;li&gt; &lt;a href=&#x27;#create-indexes-for-fast-lookups&#x27;&gt;Indexing&lt;/a&gt;, &lt;a href=&#x27;#define-metrics-and-aggregations&#x27;&gt;metrics&lt;/a&gt;, &lt;a href=&#x27;#configure-relationships-between-tables&#x27;&gt;relationships&lt;/a&gt; - and even an &lt;a href=&#x27;#use-checkpoints-for-an-easy-undo-stack&#x27;&gt;undo stack&lt;/a&gt; for your app state! - out of the box. &lt;/li&gt; &lt;li&gt; Easily &lt;a href=&#x27;#persist-data-to-browser-file-or-server&#x27;&gt;sync your data&lt;/a&gt; to local or remote storage, and use &lt;a href=&#x27;#call-react-hooks-to-bind-to-data&#x27;&gt;idiomatic bindings&lt;/a&gt; to your React UI&lt;/a&gt;. &lt;/li&gt; &lt;/ul&gt; &lt;p&gt; &lt;em&gt;Tiny by name, tiny by nature&lt;/em&gt;, TinyBase only costs &lt;a href=&#x27;#did-we-say-tiny&#x27;&gt;@@EVAL(&quot;toKb(sizes.get(&#x27;store.js.gz&#x27;))&quot;) - @@EVAL(&quot;toKb(sizes.get(&#x27;tinybase.js.gz&#x27;))&quot;)&lt;/a&gt; when compressed, and has zero dependencies. And of course it&#x27;s &lt;a href=&#x27;#well-tested-and-documented&#x27;&gt; well tested&lt;/a&gt;, &lt;a href=&#x27;/guides/the-basics/getting-started&#x27;&gt;fully documented&lt;/a&gt;, and &lt;a href=&#x27;@@EVAL(&quot;metadata.repository&quot;)&#x27;&gt;open source&lt;/a&gt;. Other &lt;a href=&quot;/guides/faq/&quot;&gt;FAQs&lt;/a&gt;? &lt;/p&gt; &lt;/section&gt;<hr><p>&lt;a id=&#x27;start&#x27; href=&#x27;/guides/the-basics/getting-started&#x27;&gt;Get started&lt;/a&gt;</p><p>&lt;a href=&#x27;/demos&#x27;&gt;Try the demos&lt;/a&gt;</p><p>&lt;a href=&#x27;/api/store/interfaces/store/store/&#x27;&gt;Read the docs&lt;/a&gt;</p><hr><section><h3 id="set-and-get-tables-rows-and-cells">Set and get tables, rows, and cells.</h3><p>Creating a <a href="/api/store/interfaces/store/store"><code>Store</code></a> requires just a simple call to the <a href="/api/store/functions/creation/createstore"><code>createStore</code></a> function. Once you have one, you can easily set <a href="/api/store/type-aliases/store/table"><code>Table</code></a>, <a href="/api/store/type-aliases/store/row"><code>Row</code></a>, or <a href="/api/store/type-aliases/store/cell"><code>Cell</code></a> values by their <a href="/api/common/type-aliases/identity/id"><code>Id</code></a>. And of course you can easily get the values back out again.</p><p>Read more about setting and changing data in <a href="/guides/the-basics">The Basics</a> guide.</p></section><pre><code><span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/store/functions/creation/createstore">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span>
  <span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settable">setTable</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">fido</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'dog'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">)</span>
  <span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setcell">setCell</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">,</span> <span class="string">'color'</span><span class="punctuation">,</span> <span class="string">'brown'</span><span class="punctuation">)</span><span class="punctuation">;</span>

console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/getter/getrow">getRow</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {species: 'dog', color: 'brown'}</span>
</code></pre><section><h3 id="register-listeners-at-any-granularity">Register listeners at any granularity.</h3><p>The magic starts to happen when you register listeners on a <a href="/api/store/interfaces/store/store"><code>Store</code></a>, <a href="/api/store/type-aliases/store/table"><code>Table</code></a>, <a href="/api/store/type-aliases/store/row"><code>Row</code></a>, or <a href="/api/store/type-aliases/store/cell"><code>Cell</code></a>. They get called when any part of that object changes. You can also use wildcards - useful when you don&#x27;t know the <a href="/api/common/type-aliases/identity/id"><code>Id</code></a> of the objects that might change.</p><p>Read more about listeners in the <a href="/guides/the-basics/listening-to-stores">Listening To Stores</a> guide.</p></section><pre><code><span class="keyword">const</span> listenerId <span class="operator">=</span> store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/listener/addtablelistener">addTableListener</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span>
  console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="string">'changed'</span><span class="punctuation">)</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setcell">setCell</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">,</span> <span class="string">'sold'</span><span class="punctuation">,</span> <span class="boolean">false</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'changed'</span>

store<span class="punctuation">.</span><span class="function">delListener</span><span class="punctuation">(</span>listenerId<span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><section><h3 id="call-react-hooks-to-bind-to-data">Call React hooks to bind to data.</h3><p>If you&#x27;re using React in your application, the optional <a href="/api/ui-react"><code>ui-react</code></a> module provides hooks to bind to the data in a <a href="/api/store/interfaces/store/store"><code>Store</code></a>.</p><p>More magic! The <a href="/api/ui-react/functions/store-hooks/usecell"><code>useCell</code></a> hook in this example fetches the dog&#x27;s color. But it also registers a listener on that cell that will fire and re-render the component whenever the value changes.</p><p>Basically you simply describe what data you want in your user interface and TinyBase will take care of the whole lifecycle of updating it for you.</p><p>Read more about the using hooks in the <a href="/guides/building-uis/using-react-hooks">Using React Hooks</a> guide.</p></section><pre><code><span class="keyword">const</span> <span class="function-variable">App1</span> <span class="operator">=</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
  <span class="keyword">const</span> color <span class="operator">=</span> <span class="function"><a href="/api/ui-react/functions/store-hooks/usecell">useCell</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">,</span> <span class="string">'color'</span><span class="punctuation">,</span> store<span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="keyword">return</span> <span class="tag"><span class="tag"><span class="punctuation">&lt;</span></span><span class="punctuation">></span></span><span class="plain-text">Color: </span><span class="punctuation">{</span>color<span class="punctuation">}</span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span></span><span class="punctuation">></span></span><span class="punctuation">;</span>
<span class="punctuation">}</span><span class="punctuation">;</span>

<span class="keyword">const</span> app <span class="operator">=</span> document<span class="punctuation">.</span><span class="function">createElement</span><span class="punctuation">(</span><span class="string">'div'</span><span class="punctuation">)</span><span class="punctuation">;</span>
ReactDOM<span class="punctuation">.</span><span class="function">render</span><span class="punctuation">(</span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name">App1</span></span> <span class="punctuation">/></span></span><span class="punctuation">,</span> app<span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>app<span class="punctuation">.</span>innerHTML<span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Color: brown'</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setcell">setCell</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">,</span> <span class="string">'color'</span><span class="punctuation">,</span> <span class="string">'walnut'</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>app<span class="punctuation">.</span>innerHTML<span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Color: walnut'</span>
</code></pre><section><h3 id="use-components-to-make-reactive-apps">Use components to make reactive apps.</h3><p>The react module provides simple React components with bindings that make it easy to create a fully reactive user interface based on a <a href="/api/store/interfaces/store/store"><code>Store</code></a>.</p><p>In this example, the library&#x27;s <a href="/api/ui-react/functions/store-components/rowview"><code>RowView</code></a> component just needs a reference to the <a href="/api/store/interfaces/store/store"><code>Store</code></a>, the <code>tableId</code>, and the <code>rowId</code> in order to render the contents of that row. An optional <code>cellComponent</code> prop lets you override how you want each <a href="/api/store/type-aliases/store/cell"><code>Cell</code></a> rendered. Again, all the listeners and updates are taken care of for you.</p><p>The module also includes a context Provider that sets up default for an entire app to use, reducing the need to drill all your props down into your app&#x27;s hierarchy.</p><p>Most of the demos showcase the use of these React hooks and components. Take a look at <a href="/demos/todo-app/todo-app-v1-the-basics">Todo App v1 (the basics)</a> to see these user interface binding patterns in action.</p><p>Read more about the <a href="/api/ui-react"><code>ui-react</code></a> module in the <a href="/guides/building-uis">Building UIs</a> guides.</p></section><pre><code><span class="keyword">const</span> <span class="function-variable">MyCellView</span> <span class="operator">=</span> <span class="punctuation">(</span><span class="parameter">props</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">(</span>
  <span class="tag"><span class="tag"><span class="punctuation">&lt;</span></span><span class="punctuation">></span></span><span class="plain-text">
    </span><span class="punctuation">{</span>props<span class="punctuation">.</span>cellId<span class="punctuation">}</span><span class="plain-text">: </span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name"><a href="/api/ui-react/functions/store-components/cellview">CellView</a></span></span> <span class="spread"><span class="punctuation">{</span><span class="operator">...</span>props<span class="punctuation">}</span></span> <span class="punctuation">/></span></span><span class="plain-text">
    </span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span>hr</span> <span class="punctuation">/></span></span><span class="plain-text">
  </span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span></span><span class="punctuation">></span></span>
<span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> <span class="function-variable">App2</span> <span class="operator">=</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">(</span>
  <span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name"><a href="/api/ui-react/functions/store-components/rowview">RowView</a></span></span>
    <span class="attr-name">store</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span>store<span class="punctuation">}</span></span>
    <span class="attr-name">tableId</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>pets<span class="punctuation">"</span></span>
    <span class="attr-name">rowId</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>fido<span class="punctuation">"</span></span>
    <span class="attr-name">cellComponent</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span>MyCellView<span class="punctuation">}</span></span>
  <span class="punctuation">/></span></span>
<span class="punctuation">)</span><span class="punctuation">;</span>

ReactDOM<span class="punctuation">.</span><span class="function">render</span><span class="punctuation">(</span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name">App2</span></span> <span class="punctuation">/></span></span><span class="punctuation">,</span> app<span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>app<span class="punctuation">.</span>innerHTML<span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'species: dog&lt;hr>color: walnut&lt;hr>sold: false&lt;hr>'</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setcell">setCell</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">,</span> <span class="string">'sold'</span><span class="punctuation">,</span> <span class="boolean">true</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>app<span class="punctuation">.</span>innerHTML<span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'species: dog&lt;hr>color: walnut&lt;hr>sold: true&lt;hr>'</span>

ReactDOM<span class="punctuation">.</span><span class="function">unmountComponentAtNode</span><span class="punctuation">(</span>app<span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><section><h3 id="apply-schemas-to-tables">Apply schemas to tables.</h3><p>By default, a <a href="/api/store/type-aliases/store/row"><code>Row</code></a> can contain any arbitrary <a href="/api/store/type-aliases/store/cell"><code>Cell</code></a>. But you can add a schema to a <a href="/api/store/interfaces/store/store"><code>Store</code></a> to ensure that the values are always what you expect. For example, you can limit their types, and provide defaults. You can also create mutating listeners that can programmatically enforce a schema.</p><p>In this example, we set a second <a href="/api/store/type-aliases/store/row"><code>Row</code></a> without the <code>sold</code> <a href="/api/store/type-aliases/store/cell"><code>Cell</code></a> in it. The schema ensures it&#x27;s present with default of <code>false</code>.</p><p>Read more about schemas in the <a href="/guides/schemas-and-persistence/using-schemas">Using Schemas</a> guide.</p></section><pre><code>store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setschema">setSchema</a></span><span class="punctuation">(</span><span class="punctuation">{</span>
  <span class="literal-property">pets</span><span class="operator">:</span> <span class="punctuation">{</span>
    <span class="literal-property">species</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">type</span><span class="operator">:</span> <span class="string">'string'</span><span class="punctuation">}</span><span class="punctuation">,</span>
    <span class="literal-property">color</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">type</span><span class="operator">:</span> <span class="string">'string'</span><span class="punctuation">}</span><span class="punctuation">,</span>
    <span class="literal-property">sold</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">type</span><span class="operator">:</span> <span class="string">'boolean'</span><span class="punctuation">,</span> <span class="keyword">default</span><span class="operator">:</span> <span class="boolean">false</span><span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setrow">setRow</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'felix'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'cat'</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/getter/getrow">getRow</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'felix'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {species: 'cat', sold: false}</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/deleter/delschema">delSchema</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><section><h3 id="persist-data-to-browser-file-or-server">Persist data to browser, file, or server.</h3><p>You can easily persist a <a href="/api/store/interfaces/store/store"><code>Store</code></a> between browser page reloads or sessions. You can also synchronize it with a web endpoint, or (if you&#x27;re using TinyBase in an appropriate environment), load and save it to a file.</p><p>Read more about persisters in the <a href="/guides/schemas-and-persistence/persisting-data">Persisting Data</a> guide.</p></section><pre><code><span class="keyword">const</span> persister <span class="operator">=</span> <span class="function"><a href="/api/persisters/functions/creation/createsessionpersister">createSessionPersister</a></span><span class="punctuation">(</span>store<span class="punctuation">,</span> <span class="string">'demo'</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">await</span> persister<span class="punctuation">.</span><span class="function"><a href="/api/persisters/interfaces/persister/persister/methods/save/save">save</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>

console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>sessionStorage<span class="punctuation">.</span><span class="function">getItem</span><span class="punctuation">(</span><span class="string">'demo'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> '{"pets":{"fido":{"species":"dog","color":"walnut","sold":true},"felix":{"species":"cat","sold":false}}}'</span>

persister<span class="punctuation">.</span><span class="function">destroy</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
sessionStorage<span class="punctuation">.</span><span class="function"><a href="/api/checkpoints/interfaces/checkpoints/checkpoints/methods/lifecycle/clear">clear</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><section><h3 id="define-metrics-and-aggregations">Define metrics and aggregations.</h3><p>A <a href="/api/metrics/interfaces/metrics/metrics"><code>Metrics</code></a> object makes it easy to keep a running aggregation of <a href="/api/store/type-aliases/store/cell"><code>Cell</code></a> values in each <a href="/api/store/type-aliases/store/row"><code>Row</code></a> of a <a href="/api/store/type-aliases/store/table"><code>Table</code></a>. This is useful for counting rows, but also supports averages, ranges of values, or arbitrary aggregations.</p><p>In this example, we create a new table of the pet species, and keep a track of which is most expensive. When we add horses to our pet store, the listener detects that the highest price has changed.</p><p>Read more about <a href="/api/metrics/interfaces/metrics/metrics"><code>Metrics</code></a> in the <a href="/guides/metrics-and-indexes/using-metrics">Using Metrics</a> guide.</p></section><pre><code>store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settable">setTable</a></span><span class="punctuation">(</span><span class="string">'species'</span><span class="punctuation">,</span> <span class="punctuation">{</span>
  <span class="literal-property">dog</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">price</span><span class="operator">:</span> <span class="number">5</span><span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="literal-property">cat</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">price</span><span class="operator">:</span> <span class="number">4</span><span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="literal-property">worm</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">price</span><span class="operator">:</span> <span class="number">1</span><span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> metrics <span class="operator">=</span> <span class="function"><a href="/api/metrics/functions/creation/createmetrics">createMetrics</a></span><span class="punctuation">(</span>store<span class="punctuation">)</span><span class="punctuation">;</span>
metrics<span class="punctuation">.</span><span class="function"><a href="/api/metrics/interfaces/metrics/metrics/methods/configuration/setmetricdefinition">setMetricDefinition</a></span><span class="punctuation">(</span>
  <span class="string">'highestPrice'</span><span class="punctuation">,</span> <span class="comment">// metricId</span>
  <span class="string">'species'</span><span class="punctuation">,</span> <span class="comment">//      tableId to aggregate</span>
  <span class="string">'max'</span><span class="punctuation">,</span> <span class="comment">//          aggregation</span>
  <span class="string">'price'</span><span class="punctuation">,</span> <span class="comment">//        cellId to aggregate</span>
<span class="punctuation">)</span><span class="punctuation">;</span>

console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>metrics<span class="punctuation">.</span><span class="function"><a href="/api/metrics/interfaces/metrics/metrics/methods/getter/getmetric">getMetric</a></span><span class="punctuation">(</span><span class="string">'highestPrice'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 5</span>

metrics<span class="punctuation">.</span><span class="function"><a href="/api/metrics/interfaces/metrics/metrics/methods/listener/addmetriclistener">addMetricListener</a></span><span class="punctuation">(</span><span class="string">'highestPrice'</span><span class="punctuation">,</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span>
  console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>metrics<span class="punctuation">.</span><span class="function"><a href="/api/metrics/interfaces/metrics/metrics/methods/getter/getmetric">getMetric</a></span><span class="punctuation">(</span><span class="string">'highestPrice'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>
store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setcell">setCell</a></span><span class="punctuation">(</span><span class="string">'species'</span><span class="punctuation">,</span> <span class="string">'horse'</span><span class="punctuation">,</span> <span class="string">'price'</span><span class="punctuation">,</span> <span class="number">20</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 20</span>

metrics<span class="punctuation">.</span><span class="function">destroy</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><section><h3 id="create-indexes-for-fast-lookups">Create indexes for fast lookups.</h3><p>An <a href="/api/indexes/interfaces/indexes/indexes"><code>Indexes</code></a> object makes it easy to look up all the <a href="/api/store/type-aliases/store/row"><code>Row</code></a> objects that have a certain value in a <a href="/api/store/type-aliases/store/cell"><code>Cell</code></a>.</p><p>In this example, we create an index on the <code>species</code> <a href="/api/store/type-aliases/store/cell"><code>Cell</code></a> values. We can then get the the list of distinct <a href="/api/store/type-aliases/store/cell"><code>Cell</code></a> value present for that index (known as &#x27;slices&#x27;), and the set of <a href="/api/store/type-aliases/store/row"><code>Row</code></a> objects that match each value.</p><p><a href="/api/indexes/interfaces/indexes/indexes"><code>Indexes</code></a> objects are reactive too. So you can set listeners on them just as you do for the data in the underlying <a href="/api/store/interfaces/store/store"><code>Store</code></a>.</p><p>Read more about <a href="/api/indexes/interfaces/indexes/indexes"><code>Indexes</code></a> in the <a href="/guides/metrics-and-indexes/using-indexes">Using Indexes</a> guide.</p></section><pre><code><span class="keyword">const</span> indexes <span class="operator">=</span> <span class="function"><a href="/api/indexes/functions/creation/createindexes">createIndexes</a></span><span class="punctuation">(</span>store<span class="punctuation">)</span><span class="punctuation">;</span>
indexes<span class="punctuation">.</span><span class="function"><a href="/api/indexes/interfaces/indexes/indexes/methods/configuration/setindexdefinition">setIndexDefinition</a></span><span class="punctuation">(</span>
  <span class="string">'bySpecies'</span><span class="punctuation">,</span> <span class="comment">// indexId</span>
  <span class="string">'pets'</span><span class="punctuation">,</span> <span class="comment">//      tableId to index</span>
  <span class="string">'species'</span><span class="punctuation">,</span> <span class="comment">//   cellId to index</span>
<span class="punctuation">)</span><span class="punctuation">;</span>

console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>indexes<span class="punctuation">.</span><span class="function"><a href="/api/indexes/interfaces/indexes/indexes/methods/getter/getsliceids">getSliceIds</a></span><span class="punctuation">(</span><span class="string">'bySpecies'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> ['dog', 'cat']</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>indexes<span class="punctuation">.</span><span class="function"><a href="/api/indexes/interfaces/indexes/indexes/methods/getter/getslicerowids">getSliceRowIds</a></span><span class="punctuation">(</span><span class="string">'bySpecies'</span><span class="punctuation">,</span> <span class="string">'dog'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> ['fido']</span>

indexes<span class="punctuation">.</span><span class="function"><a href="/api/indexes/interfaces/indexes/indexes/methods/listener/addsliceidslistener">addSliceIdsListener</a></span><span class="punctuation">(</span><span class="string">'bySpecies'</span><span class="punctuation">,</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span>
  console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>indexes<span class="punctuation">.</span><span class="function"><a href="/api/indexes/interfaces/indexes/indexes/methods/getter/getsliceids">getSliceIds</a></span><span class="punctuation">(</span><span class="string">'bySpecies'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>
store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setrow">setRow</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'lowly'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'worm'</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> ['dog', 'cat', 'worm']</span>

indexes<span class="punctuation">.</span><span class="function">destroy</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><section><h3 id="model-relationships-between-tables">Model relationships between tables.</h3><p>A <a href="/api/relationships/interfaces/relationships/relationships"><code>Relationships</code></a> object lets you associate a <a href="/api/store/type-aliases/store/row"><code>Row</code></a> in a local <a href="/api/store/type-aliases/store/table"><code>Table</code></a> with the <a href="/api/common/type-aliases/identity/id"><code>Id</code></a> of a <a href="/api/store/type-aliases/store/row"><code>Row</code></a> in a remote <a href="/api/store/type-aliases/store/table"><code>Table</code></a>. You can also reference a table to itself to create linked lists.</p><p>In this example, the <code>species</code> <a href="/api/store/type-aliases/store/cell"><code>Cell</code></a> of the <code>pets</code> <a href="/api/store/type-aliases/store/table"><code>Table</code></a> is used to create a relationship to the <code>species</code> <a href="/api/store/type-aliases/store/table"><code>Table</code></a>, so that we can access the price of a given pet.</p><p>Like everything else, you can set listeners on <a href="/api/relationships/interfaces/relationships/relationships"><code>Relationships</code></a> too.</p><p>Read more about <a href="/api/relationships/interfaces/relationships/relationships"><code>Relationships</code></a> in the <a href="/guides/relationships-and-checkpoints/using-relationships">Using Relationships</a> guide.</p></section><pre><code><span class="keyword">const</span> relationships <span class="operator">=</span> <span class="function"><a href="/api/relationships/functions/creation/createrelationships">createRelationships</a></span><span class="punctuation">(</span>store<span class="punctuation">)</span><span class="punctuation">;</span>
relationships<span class="punctuation">.</span><span class="function"><a href="/api/relationships/interfaces/relationships/relationships/methods/configuration/setrelationshipdefinition">setRelationshipDefinition</a></span><span class="punctuation">(</span>
  <span class="string">'petSpecies'</span><span class="punctuation">,</span> <span class="comment">// relationshipId</span>
  <span class="string">'pets'</span><span class="punctuation">,</span> <span class="comment">//       local tableId to link from</span>
  <span class="string">'species'</span><span class="punctuation">,</span> <span class="comment">//    remote tableId to link to</span>
  <span class="string">'species'</span><span class="punctuation">,</span> <span class="comment">//    cellId containing remote key</span>
<span class="punctuation">)</span><span class="punctuation">;</span>

console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>
  store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/getter/getcell">getCell</a></span><span class="punctuation">(</span>
    relationships<span class="punctuation">.</span><span class="function"><a href="/api/relationships/interfaces/relationships/relationships/methods/getter/getremotetableid">getRemoteTableId</a></span><span class="punctuation">(</span><span class="string">'petSpecies'</span><span class="punctuation">)</span><span class="punctuation">,</span>
    relationships<span class="punctuation">.</span><span class="function"><a href="/api/relationships/interfaces/relationships/relationships/methods/getter/getremoterowid">getRemoteRowId</a></span><span class="punctuation">(</span><span class="string">'petSpecies'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">)</span><span class="punctuation">,</span>
    <span class="string">'price'</span><span class="punctuation">,</span>
  <span class="punctuation">)</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 5</span>

relationships<span class="punctuation">.</span><span class="function">destroy</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><section><h3 id="set-checkpoints-for-an-undo-stack">Set checkpoints for an undo stack.</h3><p>A <a href="/api/checkpoints/interfaces/checkpoints/checkpoints"><code>Checkpoints</code></a> object lets you set checkpoints on a <a href="/api/store/interfaces/store/store"><code>Store</code></a>. Move forward and backward through them to create undo and redo functions.</p><p>In this example, we set a checkpoint, then sell one of the pets. Later, the pet is brought back to the shop, and we go back to that checkpoint to revert the store to its previous state.</p><p>Read more about <a href="/api/checkpoints/interfaces/checkpoints/checkpoints"><code>Checkpoints</code></a> in the <a href="/guides/relationships-and-checkpoints/using-checkpoints">Using Checkpoints</a> guide.</p></section><pre><code><span class="keyword">const</span> checkpoints <span class="operator">=</span> <span class="function"><a href="/api/checkpoints/functions/creation/createcheckpoints">createCheckpoints</a></span><span class="punctuation">(</span>store<span class="punctuation">)</span><span class="punctuation">;</span>
checkpoints<span class="punctuation">.</span><span class="function"><a href="/api/checkpoints/interfaces/checkpoints/checkpoints/methods/setter/addcheckpoint">addCheckpoint</a></span><span class="punctuation">(</span><span class="string">'pre-sale'</span><span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setcell">setCell</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'felix'</span><span class="punctuation">,</span> <span class="string">'sold'</span><span class="punctuation">,</span> <span class="boolean">true</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/getter/getcell">getCell</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'felix'</span><span class="punctuation">,</span> <span class="string">'sold'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> true</span>

checkpoints<span class="punctuation">.</span><span class="function"><a href="/api/checkpoints/interfaces/checkpoints/checkpoints/methods/movement/gobackward">goBackward</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/getter/getcell">getCell</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'felix'</span><span class="punctuation">,</span> <span class="string">'sold'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> false</span>
</code></pre><section><h3 id="did-we-say-tiny">Did we say tiny?</h3><p>If you use the basic <a href="/api/store"><code>store</code></a> module alone, you&#x27;ll only add a gzipped <em>@@EVAL(&quot;toKb(sizes.get(&#x27;store.js.gz&#x27;))&quot;)</em> to your app. You can incrementally add the other modules as you need more functionality, or get it all for <em>@@EVAL(&quot;toKb(sizes.get(&#x27;tinybase.js.gz&#x27;))&quot;)</em>. The <code>ui-react</code> adaptor is just another <em>@@EVAL(&quot;toKb(sizes.get(&#x27;ui-react.js.gz&#x27;))&quot;)</em>, and everything is fast.</p><p>Life&#x27;s easy when you have zero dependencies.</p><p>Read more about how TinyBase is structured in the <a href="/guides/how-tinybase-is-built/architecture">Architecture</a> guide.</p></section><p>@@EVAL(&quot;getSizeTable()&quot;)</p><section><h3 id="well-tested-and-documented">Well tested and documented.</h3><p>TinyBase has <em>@@EVAL(&quot;coverage.lines.pct.toFixed(1)&quot;)%</em> test coverage, including the code throughout the documentation - even on this page! The guides, demos, and API examples are designed to make it as easy as possible to get up and running.</p><p>Read more about how TinyBase is tested in the Unit <a href="/guides/how-tinybase-is-built/testing">Testing</a> guide.</p></section><p>@@EVAL(&quot;getCoverageTable()&quot;)</p><hr><p>&lt;a id=&#x27;start&#x27; href=&#x27;/guides/the-basics/getting-started&#x27;&gt;Get started&lt;/a&gt;</p><p>&lt;a href=&#x27;/demos&#x27;&gt;Try the demos&lt;/a&gt;</p><p>&lt;a href=&#x27;/api/store/interfaces/store/store/&#x27;&gt;Read the docs&lt;/a&gt;</p><hr>&lt;section&gt; &lt;h2&gt;Follow&lt;/h2&gt; &lt;ul&gt; &lt;li&gt; News and updates on &lt;a href=&#x27;https://twitter.com/tinybasejs&#x27;&gt;Twitter&lt;/a&gt; and &lt;a href=&#x27;https://facebook.com/tinybasejs&#x27;&gt;Facebook&lt;/a&gt;. &lt;/li&gt; &lt;li&gt; &lt;a href=&#x27;/guides/releases/&#x27;&gt;Release notes&lt;/a&gt; for each minor version. &lt;/li&gt; &lt;li&gt; Packages on &lt;a href=&#x27;@@EVAL(&quot;metadata.package&quot;)&#x27;&gt;NPM&lt;/a&gt;. &lt;/li&gt; &lt;li&gt; &lt;a href=&#x27;@@EVAL(&quot;metadata.repository&quot;)/issues&#x27;&gt;Issues&lt;/a&gt; on &lt;a href=&#x27;@@EVAL(&quot;metadata.repository&quot;)&#x27;&gt;GitHub&lt;/a&gt;. &lt;/li&gt; &lt;/ul&gt; &lt;/section&gt;<section><h3 id="about">About</h3><p>Building TinyBase was an interesting exercise in API design, minification, and documentation. It&#x27;s not <a href="https://www.linkedin.com/in/jamespearce">my day job</a>, but I do intend to maintain it, so please provide feedback. I could not have done this without these great <a href="/guides/how-tinybase-is-built/credits/#giants">projects</a> and <a href="/guides/how-tinybase-is-built/credits/#and-friends">friends</a>, and I hope you enjoy using it!</p></section><section class="s2" id="/guides" data-id="G"><h2><a href="/guides">Guides</a></h2><p>This series of guides helps explain the concepts behind <a href="/">TinyBase</a> and is designed to complement the more comprehensive API documentation.</p><ul><li><a href="/guides/the-basics">The Basics</a></li><li><a href="/guides/building-uis">Building UIs</a></li><li><a href="/guides/schemas-and-persistence">Schemas And Persistence</a></li><li><a href="/guides/metrics-and-indexes">Metrics And Indexes</a></li><li><a href="/guides/relationships-and-checkpoints">Relationships And Checkpoints</a></li><li><a href="/guides/how-tinybase-is-built">How TinyBase Is Built</a></li><li><a href="/guides/faq">FAQ</a></li><li><a href="/guides/releases">Releases</a></li></ul></section><section class="s2" id="/demos" data-id="D2"><h2><a href="/demos">Demos</a></h2><p>This is a selection of demos that show how <a href="/">TinyBase</a> can be used in real-world applications.</p><ul><li><a href="/demos/hello-world">Hello World</a></li><li><a href="/demos/rolling-dice">Rolling Dice</a></li><li><a href="/demos/countries">Countries</a></li><li><a href="/demos/todo-app">Todo App</a></li><li><a href="/demos/tinydraw">TinyDraw</a></li></ul></section><section class="s2" id="/api" data-id="api"><h2><a href="/api">API</a></h2><ul><li><a href="/api/store"><code>store</code></a></li><li><a href="/api/metrics"><code>metrics</code></a></li><li><a href="/api/indexes"><code>indexes</code></a></li><li><a href="/api/relationships"><code>relationships</code></a></li><li><a href="/api/queries"><code>queries</code></a></li><li><a href="/api/checkpoints"><code>checkpoints</code></a></li><li><a href="/api/persisters"><code>persisters</code></a></li><li><a href="/api/ui-react"><code>ui-react</code></a></li><li><a href="/api/common"><code>common</code></a></li></ul></section></section>