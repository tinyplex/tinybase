<!DOCTYPE html><html lang="en"><head><link rel="dns-prefetch" href="https://www.googletagmanager.com/"><link href="https://www.googletagmanager.com/gtag/js?id=G-D1MGR8VRWJ" rel="preload" as="script"><link rel="preload" as="font" href="/fonts/inter.woff2" type="font/woff2" crossorigin="anonymous"><link rel="preload" as="font" href="/fonts/inconsolata.woff2" type="font/woff2" crossorigin="anonymous"><link rel="preload" as="font" href="/fonts/icons.woff2" type="font/woff2" crossorigin="anonymous"><link rel="preload" as="font" href="/fonts/shantell.woff2" type="font/woff2" crossorigin="anonymous"><title>addInvalidValueListener | TinyBase</title><meta name="description" content="The addInvalidValueListener method registers a listener function with the Store that will be called whenever invalid data was attempted to be written to a Value."><meta property="og:type" content="website"><meta property="og:title" content="addInvalidValueListener | TinyBase"><meta property="og:description" content="The addInvalidValueListener method registers a listener function with the Store that will be called whenever invalid data was attempted to be written to a Value."><meta property="og:url" content="https://beta.tinybase.org/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addinvalidvaluelistener/"><meta property="og:image" content="https://beta.tinybase.org/favicon_pad.png"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="addInvalidValueListener | TinyBase"><meta name="twitter:description" content="The addInvalidValueListener method registers a listener function with the Store that will be called whenever invalid data was attempted to be written to a Value."><meta name="twitter:site" content="@tinybasejs"><meta name="twitter:image" content="https://beta.tinybase.org/favicon_pad.png"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="stylesheet" href="/css/index.css"><link rel="canonical" href="https://beta.tinybase.org/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addinvalidvaluelistener/"><script src="/js/app.js"></script></head><body><header><a href="/"><img src="/favicon.svg" alt="TinyBase logo"><span>TinyBase <em title="5.0.0-beta.27">Î²</em></span></a><nav><ul><li><a href="/guides/">Guides</a></li><li><a href="/demos/">Demos</a></li><li><a href="/api/">API</a></li><li><a href="https://github.com/tinyplex/tinybase">GitHub</a></li></ul></nav><span id="dark"></span></header><main><nav><ul><li id="root" class="parent open"><span></span><a href="/">TinyBase</a><ul><li id="G" class="parent"><span></span><a href="/guides/">Guides</a></li><li id="D2" class="parent"><span></span><a href="/demos/">Demos</a></li><li id="api" class="parent open"><span></span><a href="/api/">API</a><ul><li id="s" class="parent"><span></span><a href="/api/store/"><code>store</code></a></li><li id="m" class="parent open"><span></span><a href="/api/mergeable-store/"><code>mergeable-store</code></a><ul><li id="m/I4" class="parent open"><span></span><a href="/api/mergeable-store/interfaces/">Interfaces</a><ul><li id="MS" class="parent open"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/"><code>MergeableStore</code></a><ul><li id="MS/M3" class="parent open"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/">Methods</a><ul><li id="MS/M3/G3" class="parent"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/getter/">Getter methods</a></li><li id="MS/M3/S8" class="parent"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/setter/">Setter methods</a></li><li id="MS/M3/L3" class="parent open"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/">Listener methods</a><ul><li id="aHTL3"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addhastableslistener/"><code>addHasTablesListener</code></a></li><li id="aTL3"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addtableslistener/"><code>addTablesListener</code></a></li><li id="aTIL2"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addtableidslistener/"><code>addTableIdsListener</code></a></li><li id="aHTCL2"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addhastablecelllistener/"><code>addHasTableCellListener</code></a></li><li id="aHTL4"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addhastablelistener/"><code>addHasTableListener</code></a></li><li id="aTCIL2"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addtablecellidslistener/"><code>addTableCellIdsListener</code></a></li><li id="aTL4"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addtablelistener/"><code>addTableListener</code></a></li><li id="aRIL2"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addrowidslistener/"><code>addRowIdsListener</code></a></li><li id="aSRIL2"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addsortedrowidslistener/"><code>addSortedRowIdsListener</code></a></li><li id="aHRL2"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addhasrowlistener/"><code>addHasRowListener</code></a></li><li id="aRCL2"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addrowcountlistener/"><code>addRowCountListener</code></a></li><li id="aRL2"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addrowlistener/"><code>addRowListener</code></a></li><li id="aCIL2"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addcellidslistener/"><code>addCellIdsListener</code></a></li><li id="aCL2"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addcelllistener/"><code>addCellListener</code></a></li><li id="aHCL2"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addhascelllistener/"><code>addHasCellListener</code></a></li><li id="aICL2"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addinvalidcelllistener/"><code>addInvalidCellListener</code></a></li><li id="aHVL3"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addhasvalueslistener/"><code>addHasValuesListener</code></a></li><li id="aVL3"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addvalueslistener/"><code>addValuesListener</code></a></li><li id="aHVL4"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addhasvaluelistener/"><code>addHasValueListener</code></a></li><li id="aIVL2" class="current"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addinvalidvaluelistener/"><code>addInvalidValueListener</code></a></li><li id="aVIL2"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addvalueidslistener/"><code>addValueIdsListener</code></a></li><li id="aVL4"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addvaluelistener/"><code>addValueListener</code></a></li><li id="aDFTL2"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/adddidfinishtransactionlistener/"><code>addDidFinishTransactionListener</code></a></li><li id="aSTL2"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addstarttransactionlistener/"><code>addStartTransactionListener</code></a></li><li id="aWFTL2"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addwillfinishtransactionlistener/"><code>addWillFinishTransactionListener</code></a></li><li id="cL2"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/calllistener/"><code>callListener</code></a></li><li id="dL2"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/dellistener/"><code>delListener</code></a></li></ul></li><li id="MS/M3/I5" class="parent"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/iterator/">Iterator methods</a></li><li id="MS/M3/S9" class="parent"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/syncing/">Syncing methods</a></li><li id="MS/M3/T7" class="parent"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/transaction/">Transaction methods</a></li><li id="MS/M3/D7" class="parent"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/deleter/">Deleter methods</a></li><li id="MS/M3/D8" class="parent"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/development/">Development methods</a></li></ul></li><li id="MS/P3" class="parent"><span></span><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/properties/">Properties</a></li></ul></li></ul></li><li id="m/F2" class="parent"><span></span><a href="/api/mergeable-store/functions/">Functions</a></li><li id="m/TA9" class="parent"><span></span><a href="/api/mergeable-store/type-aliases/">Type Aliases</a></li></ul></li><li id="m3" class="parent"><span></span><a href="/api/metrics/"><code>metrics</code></a></li><li id="i" class="parent"><span></span><a href="/api/indexes/"><code>indexes</code></a></li><li id="r" class="parent"><span></span><a href="/api/relationships/"><code>relationships</code></a></li><li id="q" class="parent"><span></span><a href="/api/queries/"><code>queries</code></a></li><li id="c" class="parent"><span></span><a href="/api/checkpoints/"><code>checkpoints</code></a></li><li id="c3" class="parent"><span></span><a href="/api/common/"><code>common</code></a></li><li id="p" class="parent"><span></span><a href="/api/persisters/"><code>persisters</code></a></li><li id="p2" class="parent"><span></span><a href="/api/persister-automerge/"><code>persister-automerge</code></a></li><li id="p3" class="parent"><span></span><a href="/api/persister-browser/"><code>persister-browser</code></a></li><li id="p4" class="parent"><span></span><a href="/api/persister-cr-sqlite-wasm/"><code>persister-cr-sqlite-wasm</code></a></li><li id="p5" class="parent"><span></span><a href="/api/persister-electric-sql/"><code>persister-electric-sql</code></a></li><li id="p6" class="parent"><span></span><a href="/api/persister-expo-sqlite/"><code>persister-expo-sqlite</code></a></li><li id="p7" class="parent"><span></span><a href="/api/persister-file/"><code>persister-file</code></a></li><li id="p8" class="parent"><span></span><a href="/api/persister-indexed-db/"><code>persister-indexed-db</code></a></li><li id="p9" class="parent"><span></span><a href="/api/persister-libsql/"><code>persister-libsql</code></a></li><li id="p10" class="parent"><span></span><a href="/api/persister-partykit-client/"><code>persister-partykit-client</code></a></li><li id="p11" class="parent"><span></span><a href="/api/persister-partykit-server/"><code>persister-partykit-server</code></a></li><li id="p12" class="parent"><span></span><a href="/api/persister-powersync/"><code>persister-powersync</code></a></li><li id="p13" class="parent"><span></span><a href="/api/persister-remote/"><code>persister-remote</code></a></li><li id="p14" class="parent"><span></span><a href="/api/persister-sqlite-wasm/"><code>persister-sqlite-wasm</code></a></li><li id="p15" class="parent"><span></span><a href="/api/persister-sqlite3/"><code>persister-sqlite3</code></a></li><li id="p16" class="parent"><span></span><a href="/api/persister-yjs/"><code>persister-yjs</code></a></li><li id="s34" class="parent"><span></span><a href="/api/synchronizers/"><code>synchronizers</code></a></li><li id="s37" class="parent"><span></span><a href="/api/synchronizer-local/"><code>synchronizer-local</code></a></li><li id="s40" class="parent"><span></span><a href="/api/synchronizer-ws-client/"><code>synchronizer-ws-client</code></a></li><li id="s43" class="parent"><span></span><a href="/api/synchronizer-ws-server/"><code>synchronizer-ws-server</code></a></li><li id="t3" class="parent"><span></span><a href="/api/tools/"><code>tools</code></a></li><li id="u" class="parent"><span></span><a href="/api/ui-react/"><code>ui-react</code></a></li><li id="u2" class="parent"><span></span><a href="/api/ui-react-dom/"><code>ui-react-dom</code></a></li><li id="u3" class="parent"><span></span><a href="/api/ui-react-inspector/"><code>ui-react-inspector</code></a></li></ul></li></ul></li></ul></nav><article><nav><ul><li><a href="/">TinyBase</a></li><li><a href="/api/">API</a></li><li><a href="/api/mergeable-store/"><code>mergeable-store</code></a></li><li><a href="/api/mergeable-store/interfaces/">Interfaces</a></li><li><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/"><code>MergeableStore</code></a></li><li><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/">Methods</a></li><li><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/">Listener methods</a></li><li><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addinvalidvaluelistener/"><code>addInvalidValueListener</code></a></li></ul></nav><section class="s1" id="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addinvalidvaluelistener/" data-id="aIVL2"><h1><code>addInvalidValueListener</code></h1><p>The <code>addInvalidValueListener</code> method registers a listener function with the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> that will be called whenever invalid data was attempted to be written to a <a href="/api/store/type-aliases/store/value/"><code>Value</code></a>.</p><pre><code><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addinvalidvaluelistener/">addInvalidValueListener</a></span><span class="punctuation">(</span>
  valueId<span class="operator">:</span> <span class="type"><a href="/api/common/type-aliases/identity/idornull/">IdOrNull</a></span><span class="punctuation">,</span>
  listener<span class="operator">:</span> <span class="type"><a href="/api/store/type-aliases/listener/invalidvaluelistener/">InvalidValueListener</a></span><span class="operator">&lt;</span><span class="type"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/">MergeableStore</a></span><span class="operator">></span><span class="punctuation">,</span>
  mutator<span class="operator">?</span><span class="operator">:</span> <span class="builtin">boolean</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="operator">:</span> <span class="builtin">string</span></code></pre><div class="table"><table><tr><th></th><th>Type</th><th>Description</th></tr><tr><th><code>valueId</code></th><td><code><span class="type"><a href="/api/common/type-aliases/identity/idornull/">IdOrNull</a></span></code></td><td><p>The <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a> of the <a href="/api/store/type-aliases/store/value/"><code>Value</code></a> to listen to, or <code>null</code> as a wildcard.</p></td></tr><tr><th><code>listener</code></th><td><code><span class="type"><a href="/api/store/type-aliases/listener/invalidvaluelistener/">InvalidValueListener</a></span><span class="operator">&lt;</span><span class="type"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/">MergeableStore</a></span><span class="operator">></span></code></td><td><p>The function that will be called whenever an attempt to write invalid data to the matching <a href="/api/store/type-aliases/store/value/"><code>Value</code></a> was made.</p></td></tr><tr><th><code>mutator<span class="operator">?</span></code></th><td><code><span class="builtin">boolean</span></code></td><td><p>An optional boolean that indicates that the listener mutates <a href="/api/store/interfaces/store/store/"><code>Store</code></a> data.</p></td></tr><tr><th class="right">returns</th><td><code><span class="builtin">string</span></code></td><td><p></p><p>A unique <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a> for the listener that can later be used to call it explicitly, or to remove it.</p><p></p></td></tr></table></div><p>The provided listener is an <a href="/api/store/type-aliases/listener/invalidvaluelistener/"><code>InvalidValueListener</code></a> function, and will be called with a reference to the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> and the <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a> of <a href="/api/store/type-aliases/store/value/"><code>Value</code></a> that was being attempted to be changed. It is also given the invalid value of the <a href="/api/store/type-aliases/store/value/"><code>Value</code></a>, which could have been of absolutely any type. Since there could have been multiple failed attempts to set the <a href="/api/store/type-aliases/store/value/"><code>Value</code></a> within a single transaction, this is an array containing each attempt, chronologically.</p><p>You can either listen to a single <a href="/api/store/type-aliases/store/value/"><code>Value</code></a> (by specifying the <a href="/api/store/type-aliases/store/value/"><code>Value</code></a> <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a> as the method&#x27;s first parameter) or invalid attempts to change any <a href="/api/store/type-aliases/store/value/"><code>Value</code></a> (by providing a <code>null</code> wildcard).</p><p>Use the optional mutator parameter to indicate that there is code in the listener that will mutate <a href="/api/store/interfaces/store/store/"><code>Store</code></a> data. If set to <code>false</code> (or omitted), such mutations will be silently ignored. All relevant mutator listeners (with this flag set to <code>true</code>) are called <em>before</em> any non-mutator listeners (since the latter may become relevant due to changes made in the former). The changes made by mutator listeners do not fire other mutating listeners, though they will fire non-mutator listeners.</p><p>Special note should be made for how the listener will be called when a <a href="/api/store/type-aliases/schema/valuesschema/"><code>ValuesSchema</code></a> is present. The listener will be called:</p><ul><li>if a <a href="/api/store/type-aliases/store/value/"><code>Value</code></a> is being updated that is not specified in the <a href="/api/store/type-aliases/schema/valuesschema/"><code>ValuesSchema</code></a>,</li><li>if a <a href="/api/store/type-aliases/store/value/"><code>Value</code></a> is of the wrong type specified in the <a href="/api/store/type-aliases/schema/valuesschema/"><code>ValuesSchema</code></a>,</li><li>or if a <a href="/api/store/type-aliases/store/value/"><code>Value</code></a> is omitted when using setValues that is not defaulted in the <a href="/api/store/type-aliases/schema/valuesschema/"><code>ValuesSchema</code></a>.</li></ul><p>The listener will not be called if a <a href="/api/store/type-aliases/store/value/"><code>Value</code></a> that is defaulted in the <a href="/api/store/type-aliases/schema/valuesschema/"><code>ValuesSchema</code></a> is not provided, as long as all of the <a href="/api/store/type-aliases/store/values/"><code>Values</code></a> that are <em>not</em> defaulted <em>are</em> provided.</p><p>To help understand all of these schema-based conditions, please see the <a href="/api/store/type-aliases/schema/valuesschema/"><code>ValuesSchema</code></a> example below.</p><section class="s2"><h2>Examples</h2><p>This example registers a listener that responds to any invalid changes to a specific <a href="/api/store/type-aliases/store/value/"><code>Value</code></a>.</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>createStore<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase'</span><span class="punctuation">;</span>

<span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/store/functions/creation/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/setter/setvalues/">setValues</a></span><span class="punctuation">(</span><span class="punctuation">{</span><span class="literal-property">open</span><span class="operator">:</span> <span class="boolean">true</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> listenerId <span class="operator">=</span> store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addinvalidvaluelistener/">addInvalidValueListener</a></span><span class="punctuation">(</span>
  <span class="string">'open'</span><span class="punctuation">,</span>
  <span class="punctuation">(</span><span class="parameter">store<span class="punctuation">,</span> valueId<span class="punctuation">,</span> invalidValues</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
    console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="string">'Invalid open value'</span><span class="punctuation">)</span><span class="punctuation">;</span>
    console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>invalidValues<span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/setter/setvalue/">setValue</a></span><span class="punctuation">(</span><span class="string">'open'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">yes</span><span class="operator">:</span> <span class="boolean">true</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Invalid open value'</span>
<span class="comment">// -> [{yes: true}]</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/dellistener/">delListener</a></span><span class="punctuation">(</span>listenerId<span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>This example registers a listener that responds to any invalid changes to any <a href="/api/store/type-aliases/store/value/"><code>Value</code></a> - in a <a href="/api/store/interfaces/store/store/"><code>Store</code></a> <em>without</em> a <a href="/api/store/type-aliases/schema/valuesschema/"><code>ValuesSchema</code></a>. Note also how it then responds to cases where an empty <a href="/api/store/type-aliases/store/values/"><code>Values</code></a> object is provided.</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>createStore<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase'</span><span class="punctuation">;</span>

<span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/store/functions/creation/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/setter/setvalues/">setValues</a></span><span class="punctuation">(</span><span class="punctuation">{</span><span class="literal-property">open</span><span class="operator">:</span> <span class="boolean">true</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> listenerId <span class="operator">=</span> store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addinvalidvaluelistener/">addInvalidValueListener</a></span><span class="punctuation">(</span>
  <span class="keyword">null</span><span class="punctuation">,</span>
  <span class="punctuation">(</span><span class="parameter">store<span class="punctuation">,</span> valueId</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
    console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="template-string"><span class="template-punctuation">`</span><span class="string">Invalid </span><span class="interpolation"><span class="interpolation-punctuation">${</span>valueId<span class="interpolation-punctuation">}</span></span><span class="string"> value</span><span class="template-punctuation">`</span></span><span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/setter/setvalue/">setValue</a></span><span class="punctuation">(</span><span class="string">'open'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">yes</span><span class="operator">:</span> <span class="boolean">true</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Invalid open value'</span>
store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/setter/setvalue/">setValue</a></span><span class="punctuation">(</span><span class="string">'employees'</span><span class="punctuation">,</span> <span class="punctuation">[</span><span class="string">'alice'</span><span class="punctuation">,</span> <span class="string">'bob'</span><span class="punctuation">]</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Invalid employees value'</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/setter/setvalues/">setValues</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'felix'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Invalid undefined value'</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/dellistener/">delListener</a></span><span class="punctuation">(</span>listenerId<span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>This example registers a listener that responds to any invalid changes to any <a href="/api/store/type-aliases/store/value/"><code>Value</code></a> - in a <a href="/api/store/interfaces/store/store/"><code>Store</code></a> <em>with</em> a <a href="/api/store/type-aliases/schema/valuesschema/"><code>ValuesSchema</code></a>. Note how it responds to cases where missing parameters are provided for optional, and defaulted <a href="/api/store/type-aliases/store/values/"><code>Values</code></a>.</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>createStore<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase'</span><span class="punctuation">;</span>

<span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/store/functions/creation/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/setter/setvaluesschema/">setValuesSchema</a></span><span class="punctuation">(</span><span class="punctuation">{</span>
  <span class="literal-property">open</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">type</span><span class="operator">:</span> <span class="string">'boolean'</span><span class="punctuation">,</span> <span class="keyword">default</span><span class="operator">:</span> <span class="boolean">false</span><span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="literal-property">employees</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">type</span><span class="operator">:</span> <span class="string">'number'</span><span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>

console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/getter/getvalues/">getValues</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {open: false}</span>

<span class="keyword">const</span> listenerId <span class="operator">=</span> store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addinvalidvaluelistener/">addInvalidValueListener</a></span><span class="punctuation">(</span>
  <span class="keyword">null</span><span class="punctuation">,</span>
  <span class="punctuation">(</span><span class="parameter">store<span class="punctuation">,</span> valueId</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
    console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="template-string"><span class="template-punctuation">`</span><span class="string">Invalid </span><span class="interpolation"><span class="interpolation-punctuation">${</span>valueId<span class="interpolation-punctuation">}</span></span><span class="string"> value</span><span class="template-punctuation">`</span></span><span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/setter/setvalue/">setValue</a></span><span class="punctuation">(</span><span class="string">'website'</span><span class="punctuation">,</span> <span class="boolean">true</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Invalid website value'</span>
<span class="comment">// The listener is called, because the website Value is not in the schema</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/setter/setvalue/">setValue</a></span><span class="punctuation">(</span><span class="string">'open'</span><span class="punctuation">,</span> <span class="string">'yes'</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Invalid open value'</span>
<span class="comment">// The listener is called, because 'open' is invalid...</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/getter/getvalues/">getValues</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {open: false}</span>
<span class="comment">// ...even though it is still present with the default value</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/setter/setvalues/">setValues</a></span><span class="punctuation">(</span><span class="punctuation">{</span><span class="literal-property">open</span><span class="operator">:</span> <span class="boolean">true</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Invalid employees value'</span>
<span class="comment">// The listener is called because employees is missing and not defaulted...</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/getter/getvalues/">getValues</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {open: true}</span>
<span class="comment">// ...even though the Values were set</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/setter/setvalues/">setValues</a></span><span class="punctuation">(</span><span class="punctuation">{</span><span class="literal-property">employees</span><span class="operator">:</span> <span class="number">3</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/getter/getvalues/">getValues</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {open: false, employees: 3}</span>
<span class="comment">// The listener is not called, because 'open' is defaulted</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/setter/setvaluesschema/">setValuesSchema</a></span><span class="punctuation">(</span><span class="punctuation">{</span>
  <span class="literal-property">open</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">type</span><span class="operator">:</span> <span class="string">'boolean'</span><span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="literal-property">employees</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">type</span><span class="operator">:</span> <span class="string">'number'</span><span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/setter/setvalues/">setValues</a></span><span class="punctuation">(</span><span class="punctuation">{</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Invalid open value'</span>
<span class="comment">// -> 'Invalid employees value'</span>
<span class="comment">// -> 'Invalid undefined value'</span>
<span class="comment">// The listener is called multiple times, because neither Value is</span>
<span class="comment">// defaulted and the Values as a whole were empty</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/dellistener/">delListener</a></span><span class="punctuation">(</span>listenerId<span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>This example registers a listener that responds to any changes to a specific <a href="/api/store/type-aliases/store/value/"><code>Value</code></a>, and which also mutates the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> itself.</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>createStore<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase'</span><span class="punctuation">;</span>

<span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/store/functions/creation/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/setter/setvalues/">setValues</a></span><span class="punctuation">(</span><span class="punctuation">{</span><span class="literal-property">open</span><span class="operator">:</span> <span class="boolean">true</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> listenerId <span class="operator">=</span> store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/addinvalidvaluelistener/">addInvalidValueListener</a></span><span class="punctuation">(</span>
  <span class="string">'open'</span><span class="punctuation">,</span>
  <span class="punctuation">(</span><span class="parameter">store<span class="punctuation">,</span> valueId<span class="punctuation">,</span> invalidValues</span><span class="punctuation">)</span> <span class="operator">=></span>
    store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/setter/setvalue/">setValue</a></span><span class="punctuation">(</span><span class="string">'invalid_updates'</span><span class="punctuation">,</span> <span class="constant">JSON</span><span class="punctuation">.</span><span class="function">stringify</span><span class="punctuation">(</span>invalidValues<span class="punctuation">[</span><span class="number">0</span><span class="punctuation">]</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">,</span>
  <span class="boolean">true</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/setter/setvalue/">setValue</a></span><span class="punctuation">(</span><span class="string">'open'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">yes</span><span class="operator">:</span> <span class="boolean">true</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/getter/getvalue/">getValue</a></span><span class="punctuation">(</span><span class="string">'invalid_updates'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> '{"yes":true}'</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeable/mergeablestore/methods/listener/dellistener/">delListener</a></span><span class="punctuation">(</span>listenerId<span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre></section><section class="s2"><h2>Since</h2><p>v3.0.0</p></section></section></article><aside></aside></main><footer><nav><a id="tw" href="https://twitter.com/tinybasejs" target="_blank">Twitter</a><a id="fb" href="https://facebook.com/tinybasejs" target="_blank">Facebook</a></nav><nav><a href="/">TinyBase 5.0.0-beta.27</a> Â© 2021- All Rights Reserved</nav></footer></body><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-D1MGR8VRWJ"></script><script>window.dataLayer=window.dataLayer||[];function g(){dataLayer.push(arguments);}g('js',new Date());g('config','G-D1MGR8VRWJ');</script></html>