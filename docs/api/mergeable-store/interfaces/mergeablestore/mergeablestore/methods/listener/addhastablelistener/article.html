<nav><ul><li><a href="/">TinyBase</a></li><li><a href="/api/">API</a></li><li><a href="/api/mergeable-store/"><code>mergeable-store</code></a></li><li><a href="/api/mergeable-store/interfaces/">Interfaces</a></li><li><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/"><code>MergeableStore</code></a></li><li><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/listener/">Listener methods</a></li><li><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/listener/addhastablelistener/"><code>addHasTableListener</code></a></li></ul></nav><section class="s1" id="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/listener/addhastablelistener/" data-id="aHTL4"><h1><code>addHasTableListener</code></h1><p>The <code>addHasTableListener</code> method registers a listener function with the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> that will be called when a <a href="/api/store/type-aliases/store/table/"><code>Table</code></a> is added to or removed from the <a href="/api/store/interfaces/store/store/"><code>Store</code></a>.</p><pre><code><span class="function"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/listener/addhastablelistener/">addHasTableListener</a></span><span class="punctuation">(</span>
  tableId<span class="operator">:</span> <span class="type"><a href="/api/common/type-aliases/identity/idornull/">IdOrNull</a></span><span class="punctuation">,</span>
  listener<span class="operator">:</span> <span class="type"><a href="/api/store/type-aliases/listener/hastablelistener/">HasTableListener</a></span><span class="operator">&lt;</span><span class="type"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/">MergeableStore</a></span><span class="operator">></span><span class="punctuation">,</span>
  mutator<span class="operator">?</span><span class="operator">:</span> <span class="builtin">boolean</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="operator">:</span> <span class="builtin">string</span></code></pre><div class="table"><table><tr><th></th><th>Type</th><th>Description</th></tr><tr><th><code>tableId</code></th><td><code><span class="type"><a href="/api/common/type-aliases/identity/idornull/">IdOrNull</a></span></code></td><td><p>The <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a> of the <a href="/api/store/type-aliases/store/table/"><code>Table</code></a> to listen to, or <code>null</code> as a wildcard.</p></td></tr><tr><th><code>listener</code></th><td><code><span class="type"><a href="/api/store/type-aliases/listener/hastablelistener/">HasTableListener</a></span><span class="operator">&lt;</span><span class="type"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/">MergeableStore</a></span><span class="operator">></span></code></td><td><p>The function that will be called whenever the matching <a href="/api/store/type-aliases/store/table/"><code>Table</code></a> is added or removed.</p></td></tr><tr><th><code>mutator<span class="operator">?</span></code></th><td><code><span class="builtin">boolean</span></code></td><td><p>An optional boolean that indicates that the listener mutates <a href="/api/store/interfaces/store/store/"><code>Store</code></a> data.</p></td></tr><tr><th class="right">returns</th><td><code><span class="builtin">string</span></code></td><td><p></p><p>A unique <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a> for the listener that can later be used to call it explicitly, or to remove it.</p><p></p></td></tr></table></div><p>The provided listener is a <a href="/api/store/type-aliases/listener/hastablelistener/"><code>HasTableListener</code></a> function, and will be called with a reference to the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> and the <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a> of the <a href="/api/store/type-aliases/store/table/"><code>Table</code></a> that changed. It is also given a flag to indicate whether the <a href="/api/store/type-aliases/store/table/"><code>Table</code></a> now exists (having not done previously), or does not (having done so previously).</p><p>You can either listen to a single <a href="/api/store/type-aliases/store/table/"><code>Table</code></a> being added or removed (by specifying the <a href="/api/store/type-aliases/store/table/"><code>Table</code></a> <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a> as the method&#x27;s first parameter) or changes to any <a href="/api/store/type-aliases/store/table/"><code>Table</code></a> (by providing a <code>null</code> wildcard).</p><p>Use the optional mutator parameter to indicate that there is code in the listener that will mutate <a href="/api/store/interfaces/store/store/"><code>Store</code></a> data. If set to <code>false</code> (or omitted), such mutations will be silently ignored. All relevant mutator listeners (with this flag set to <code>true</code>) are called <em>before</em> any non-mutator listeners (since the latter may become relevant due to changes made in the former). The changes made by mutator listeners do not fire other mutating listeners, though they will fire non-mutator listeners.</p><section class="s2"><h2>Examples</h2><p>This example registers a listener that responds to a specific <a href="/api/store/type-aliases/store/table/"><code>Table</code></a> being added or removed.</p><pre><code><span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/store/functions/creation/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/setter/settables/">setTables</a></span><span class="punctuation">(</span><span class="punctuation">{</span>
  <span class="literal-property">pets</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">fido</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'dog'</span><span class="punctuation">,</span> <span class="literal-property">color</span><span class="operator">:</span> <span class="string">'brown'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> listenerId <span class="operator">=</span> store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/listener/addhastablelistener/">addHasTableListener</a></span><span class="punctuation">(</span>
  <span class="string">'pets'</span><span class="punctuation">,</span>
  <span class="punctuation">(</span><span class="parameter">store<span class="punctuation">,</span> tableId<span class="punctuation">,</span> hasTable</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
    console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="string">'pets table '</span> <span class="operator">+</span> <span class="punctuation">(</span>hasTable <span class="operator">?</span> <span class="string">'added'</span> <span class="operator">:</span> <span class="string">'removed'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/deleter/deltable/">delTable</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'pets table removed'</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/setter/settable/">setTable</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">fido</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'dog'</span><span class="punctuation">,</span> <span class="literal-property">color</span><span class="operator">:</span> <span class="string">'brown'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'pets table added'</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/listener/dellistener/">delListener</a></span><span class="punctuation">(</span>listenerId<span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>This example registers a listener that responds to any <a href="/api/store/type-aliases/store/table/"><code>Table</code></a> being added or removed.</p><pre><code><span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/store/functions/creation/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/setter/settables/">setTables</a></span><span class="punctuation">(</span><span class="punctuation">{</span>
  <span class="literal-property">pets</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">fido</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'dog'</span><span class="punctuation">,</span> <span class="literal-property">color</span><span class="operator">:</span> <span class="string">'brown'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> listenerId <span class="operator">=</span> store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/listener/addhastablelistener/">addHasTableListener</a></span><span class="punctuation">(</span>
  <span class="keyword">null</span><span class="punctuation">,</span>
  <span class="punctuation">(</span><span class="parameter">store<span class="punctuation">,</span> tableId<span class="punctuation">,</span> hasTable</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
    console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="template-string"><span class="template-punctuation">`</span><span class="interpolation"><span class="interpolation-punctuation">${</span>tableId<span class="interpolation-punctuation">}</span></span><span class="string"> table </span><span class="template-punctuation">`</span></span> <span class="operator">+</span> <span class="punctuation">(</span>hasTable <span class="operator">?</span> <span class="string">'added'</span> <span class="operator">:</span> <span class="string">'removed'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/deleter/deltable/">delTable</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'pets table removed'</span>
store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/setter/settable/">setTable</a></span><span class="punctuation">(</span><span class="string">'species'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">dog</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">price</span><span class="operator">:</span> <span class="number">5</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'species table added'</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/listener/dellistener/">delListener</a></span><span class="punctuation">(</span>listenerId<span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>This example registers a listener that responds to a specific <a href="/api/store/type-aliases/store/table/"><code>Table</code></a> being added or removed, and which also mutates the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> itself.</p><pre><code><span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/store/functions/creation/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/setter/settables/">setTables</a></span><span class="punctuation">(</span><span class="punctuation">{</span>
  <span class="literal-property">pets</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">fido</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'dog'</span><span class="punctuation">,</span> <span class="literal-property">color</span><span class="operator">:</span> <span class="string">'brown'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> listenerId <span class="operator">=</span> store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/listener/addhastablelistener/">addHasTableListener</a></span><span class="punctuation">(</span>
  <span class="string">'pets'</span><span class="punctuation">,</span>
  <span class="punctuation">(</span><span class="parameter">store<span class="punctuation">,</span> tableId</span><span class="punctuation">)</span> <span class="operator">=></span> store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/setter/setcell/">setCell</a></span><span class="punctuation">(</span><span class="string">'meta'</span><span class="punctuation">,</span> <span class="string">'update'</span><span class="punctuation">,</span> tableId<span class="punctuation">,</span> <span class="boolean">true</span><span class="punctuation">)</span><span class="punctuation">,</span>
  <span class="boolean">true</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/deleter/deltable/">delTable</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/getter/gettable/">getTable</a></span><span class="punctuation">(</span><span class="string">'meta'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {update: {pets: true}}</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/listener/dellistener/">delListener</a></span><span class="punctuation">(</span>listenerId<span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre></section><section class="s2"><h2>Since</h2><p>v4.4.0</p></section></section>