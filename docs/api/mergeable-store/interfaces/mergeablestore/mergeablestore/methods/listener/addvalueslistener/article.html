<nav><ul><li><a href="/">TinyBase</a></li><li><a href="/api/">API</a></li><li><a href="/api/mergeable-store/"><code>mergeable-store</code></a></li><li><a href="/api/mergeable-store/interfaces/">Interfaces</a></li><li><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/"><code>MergeableStore</code></a></li><li><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/listener/">Listener methods</a></li><li><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/listener/addvalueslistener/"><code>addValuesListener</code></a></li></ul></nav><section class="s1" id="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/listener/addvalueslistener/" data-id="aVL3"><h1><code>addValuesListener</code></h1><p>The <code>addValuesListener</code> method registers a listener function with the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> that will be called whenever the <a href="/api/store/type-aliases/store/values/"><code>Values</code></a> change.</p><pre><code><span class="function"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/listener/addvalueslistener/">addValuesListener</a></span><span class="punctuation">(</span>
  listener<span class="operator">:</span> <span class="type"><a href="/api/store/type-aliases/listener/valueslistener/">ValuesListener</a></span><span class="operator">&lt;</span><span class="type"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/">MergeableStore</a></span><span class="operator">></span><span class="punctuation">,</span>
  mutator<span class="operator">?</span><span class="operator">:</span> <span class="builtin">boolean</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="operator">:</span> <span class="builtin">string</span></code></pre><div class="table"><table><tr><th></th><th>Type</th><th>Description</th></tr><tr><th><code>listener</code></th><td><code><span class="type"><a href="/api/store/type-aliases/listener/valueslistener/">ValuesListener</a></span><span class="operator">&lt;</span><span class="type"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/">MergeableStore</a></span><span class="operator">></span></code></td><td><p>The function that will be called whenever data in the <a href="/api/store/type-aliases/store/values/"><code>Values</code></a> changes.</p></td></tr><tr><th><code>mutator<span class="operator">?</span></code></th><td><code><span class="builtin">boolean</span></code></td><td><p>An optional boolean that indicates that the listener mutates <a href="/api/store/interfaces/store/store/"><code>Store</code></a> data.</p></td></tr><tr><th class="right">returns</th><td><code><span class="builtin">string</span></code></td><td><p></p><p>A unique <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a> for the listener that can later be used to call it explicitly, or to remove it.</p><p></p></td></tr></table></div><p>The provided listener is a <a href="/api/store/type-aliases/listener/valueslistener/"><code>ValuesListener</code></a> function, and will be called with a reference to the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> and a <a href="/api/store/type-aliases/listener/getvaluechange/"><code>GetValueChange</code></a> function in case you need to inspect any changes that occurred.</p><p>Use the optional mutator parameter to indicate that there is code in the listener that will mutate <a href="/api/store/interfaces/store/store/"><code>Store</code></a> data. If set to <code>false</code> (or omitted), such mutations will be silently ignored. All relevant mutator listeners (with this flag set to <code>true</code>) are called <em>before</em> any non-mutator listeners (since the latter may become relevant due to changes made in the former). The changes made by mutator listeners do not fire other mutating listeners, though they will fire non-mutator listeners.</p><section class="s2"><h2>Examples</h2><p>This example registers a listener that responds to any changes to the <a href="/api/store/interfaces/store/store/"><code>Store</code></a>&#x27;s <a href="/api/store/type-aliases/store/values/"><code>Values</code></a>.</p><pre><code><span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/store/functions/creation/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/setter/setvalues/">setValues</a></span><span class="punctuation">(</span><span class="punctuation">{</span><span class="literal-property">open</span><span class="operator">:</span> <span class="boolean">true</span><span class="punctuation">,</span> <span class="literal-property">employees</span><span class="operator">:</span> <span class="number">3</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> listenerId <span class="operator">=</span> store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/listener/addvalueslistener/">addValuesListener</a></span><span class="punctuation">(</span><span class="punctuation">(</span><span class="parameter">store<span class="punctuation">,</span> getValueChange</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
  console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="string">'values changed'</span><span class="punctuation">)</span><span class="punctuation">;</span>
  console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="function">getValueChange</span><span class="punctuation">(</span><span class="string">'employees'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/setter/setvalue/">setValue</a></span><span class="punctuation">(</span><span class="string">'employees'</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'values changed'</span>
<span class="comment">// -> [true, 3, 4]</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/listener/dellistener/">delListener</a></span><span class="punctuation">(</span>listenerId<span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>This example registers a listener that responds to any changes to the <a href="/api/store/interfaces/store/store/"><code>Store</code></a>&#x27;s <a href="/api/store/type-aliases/store/values/"><code>Values</code></a>, and which also mutates the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> itself.</p><pre><code><span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/store/functions/creation/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/setter/setvalues/">setValues</a></span><span class="punctuation">(</span><span class="punctuation">{</span><span class="literal-property">open</span><span class="operator">:</span> <span class="boolean">true</span><span class="punctuation">,</span> <span class="literal-property">employees</span><span class="operator">:</span> <span class="number">3</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> listenerId <span class="operator">=</span> store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/listener/addvalueslistener/">addValuesListener</a></span><span class="punctuation">(</span>
  <span class="punctuation">(</span><span class="parameter">store<span class="punctuation">,</span> getValueChange</span><span class="punctuation">)</span> <span class="operator">=></span> store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/setter/setvalue/">setValue</a></span><span class="punctuation">(</span><span class="string">'updated'</span><span class="punctuation">,</span> <span class="boolean">true</span><span class="punctuation">)</span><span class="punctuation">,</span>
  <span class="boolean">true</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/setter/setvalue/">setValue</a></span><span class="punctuation">(</span><span class="string">'employees'</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/getter/getvalues/">getValues</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {open: true, employees: 4, updated: true}</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/mergeable-store/interfaces/mergeablestore/mergeablestore/methods/listener/dellistener/">delListener</a></span><span class="punctuation">(</span>listenerId<span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre></section><section class="s2"><h2>Since</h2><p>v3.0.0</p></section></section>