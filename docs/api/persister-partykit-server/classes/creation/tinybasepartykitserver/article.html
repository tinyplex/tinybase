<nav><ul><li><a href="/">TinyBase</a></li><li><a href="/api/">API</a></li><li><a href="/api/persister-partykit-server/"><code>persister-partykit-server</code></a></li><li><a href="/api/persister-partykit-server/classes/">Classes</a></li><li><a href="/api/persister-partykit-server/classes/creation/tinybasepartykitserver/"><code>TinyBasePartyKitServer</code></a></li></ul></nav><section class="s1" id="/api/persister-partykit-server/classes/creation/tinybasepartykitserver/" data-id="TBPKS"><h1><code>TinyBasePartyKitServer</code></h1><p>A TinyBasePartyKitServer is the server component for persisting the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> to durable PartyKit storage, enabling synchronization of the same <a href="/api/store/interfaces/store/store/"><code>Store</code></a> across multiple clients.</p><p>This extends the PartyKit Server class, which provides a selection of methods you are expected to implement. The TinyBasePartyKitServer implements only two of them, the <a href="/api/persister-partykit-server/classes/creation/tinybasepartykitserver/methods/connection/onmessage/"><code>onMessage</code></a> method and the <a href="/api/persister-partykit-server/classes/creation/tinybasepartykitserver/methods/connection/onrequest/"><code>onRequest</code></a> method, as well as the constructor.</p><p>If you wish to use TinyBasePartyKitServer as a general PartyKit server, you can implement other methods. But you must remember to call the super implementations of those methods to ensure the <a href="/">TinyBase</a> synchronization stays supported in addition to your own custom functionality. The same applies to the constructor if you choose to implement that.</p><pre><code><span class="comment">// This is your PartyKit server entry point.</span>

<span class="keyword">class</span> <span class="class-name">MyServer</span> <span class="keyword">extends</span> <span class="class-name">TinyBasePartyKitServer</span> <span class="punctuation">{</span>
  <span class="function">constructor</span><span class="punctuation">(</span><span class="parameter">party</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">super</span><span class="punctuation">(</span>party<span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="comment">// custom constructor code</span>
  <span class="punctuation">}</span>

  <span class="keyword">async</span> <span class="function">onStart</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="comment">// no need to call super.onStart()</span>
    console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="string">'Server started'</span><span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="punctuation">}</span>

  <span class="keyword">async</span> <span class="function"><a href="/api/persister-partykit-server/classes/creation/tinybasepartykitserver/methods/connection/onmessage/">onMessage</a></span><span class="punctuation">(</span><span class="parameter">message<span class="punctuation">,</span> connection</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">await</span> <span class="keyword">super</span><span class="punctuation">.</span><span class="function"><a href="/api/persister-partykit-server/classes/creation/tinybasepartykitserver/methods/connection/onmessage/">onMessage</a></span><span class="punctuation">(</span>message<span class="punctuation">,</span> connection<span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="comment">// custom onMessage code</span>
  <span class="punctuation">}</span>

  <span class="keyword">async</span> <span class="function"><a href="/api/persister-partykit-server/classes/creation/tinybasepartykitserver/methods/connection/onrequest/">onRequest</a></span><span class="punctuation">(</span><span class="parameter">request</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="comment">// custom onRequest code, else:</span>
    <span class="keyword">return</span> <span class="keyword">await</span> <span class="keyword">super</span><span class="punctuation">.</span><span class="function"><a href="/api/persister-partykit-server/classes/creation/tinybasepartykitserver/methods/connection/onrequest/">onRequest</a></span><span class="punctuation">(</span>request<span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="punctuation">}</span>
<span class="punctuation">}</span>
</code></pre><p>See the <a href="https://docs.partykit.io/reference/partyserver-api/">PartyKit server API documentation</a> for more details.</p><section class="s2"><h2>Since</h2><p>v4.3.0</p></section><section class="s2" id="/api/persister-partykit-server/classes/creation/tinybasepartykitserver/constructors/" data-id="TBPKS/C47"><h2><a href="/api/persister-partykit-server/classes/creation/tinybasepartykitserver/constructors/">Constructors</a></h2><p>There is one constructor, <a href="/api/persister-partykit-server/classes/creation/tinybasepartykitserver/constructors/creation/constructor/"><code>constructor</code></a>, within the <a href="/api/persister-partykit-server/classes/creation/tinybasepartykitserver/"><code>TinyBasePartyKitServer</code></a> class.</p><ul><li><a href="/api/persister-partykit-server/classes/creation/tinybasepartykitserver/constructors/creation/constructor/"><code>constructor</code></a></li></ul></section><section class="s2" id="/api/persister-partykit-server/classes/creation/tinybasepartykitserver/methods/" data-id="TBPKS/M27"><h2><a href="/api/persister-partykit-server/classes/creation/tinybasepartykitserver/methods/">Methods</a></h2><p>These are the methods within the <a href="/api/persister-partykit-server/classes/creation/tinybasepartykitserver/"><code>TinyBasePartyKitServer</code></a> class.</p><ul><li><a href="/api/persister-partykit-server/classes/creation/tinybasepartykitserver/methods/connection/">Connection methods</a></li><li><a href="/api/persister-partykit-server/classes/creation/tinybasepartykitserver/methods/sanitization/">Sanitization methods</a></li></ul></section><section class="s2" id="/api/persister-partykit-server/classes/creation/tinybasepartykitserver/properties/" data-id="TBPKS/P13"><h2><a href="/api/persister-partykit-server/classes/creation/tinybasepartykitserver/properties/">Properties</a></h2><p>There is one property, <a href="/api/persister-partykit-server/classes/creation/tinybasepartykitserver/properties/configuration/config/"><code>config</code></a>, within the <a href="/api/persister-partykit-server/classes/creation/tinybasepartykitserver/"><code>TinyBasePartyKitServer</code></a> class.</p><ul><li><a href="/api/persister-partykit-server/classes/creation/tinybasepartykitserver/properties/configuration/config/"><code>config</code></a></li></ul></section></section>