<!DOCTYPE html><html lang="en"><head><link rel="dns-prefetch" href="https://www.googletagmanager.com/"><link href="https://www.googletagmanager.com/gtag/js?id=G-D1MGR8VRWJ" rel="preload" as="script"><link rel="preload" as="font" href="/fonts/inter.woff2" type="font/woff2" crossorigin="anonymous"><link rel="preload" as="font" href="/fonts/inconsolata.woff2" type="font/woff2" crossorigin="anonymous"><link rel="preload" as="font" href="/fonts/shantell.woff2" type="font/woff2" crossorigin="anonymous"><title>TinyBasePartyKitServer | TinyBase</title><meta name="description" content="A TinyBasePartyKitServer is the server component for persisting the Store to durable PartyKit storage, enabling synchronization of the same Store across multiple clients."><meta property="og:type" content="website"><meta property="og:title" content="TinyBasePartyKitServer | TinyBase"><meta property="og:description" content="A TinyBasePartyKitServer is the server component for persisting the Store to durable PartyKit storage, enabling synchronization of the same Store across multiple clients."><meta property="og:url" content="https://beta.tinybase.org/api/persister-partykit-server/classes/server/tinybasepartykitserver/"><meta property="og:image" content="https://beta.tinybase.org/favicon_pad.png"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="TinyBasePartyKitServer | TinyBase"><meta name="twitter:description" content="A TinyBasePartyKitServer is the server component for persisting the Store to durable PartyKit storage, enabling synchronization of the same Store across multiple clients."><meta name="twitter:site" content="@tinybasejs"><meta name="twitter:image" content="https://beta.tinybase.org/favicon_pad.png"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="stylesheet" href="/css/index.css"><link rel="canonical" href="https://beta.tinybase.org/api/persister-partykit-server/classes/server/tinybasepartykitserver/"><script src="/js/app.js"></script></head><body><header><a href="/"><img src="/favicon.svg" alt="TinyBase logo"><span>TinyBase <em>Î²</em></span></a><nav><ul><li><a href="/guides/">Guides</a></li><li><a href="/demos/">Demos</a></li><li><a href="/api/">API</a></li><li><a href="https://github.com/tinyplex/tinybase">GitHub</a></li></ul></nav><span id="dark"></span></header><main><nav><ul><li id="root" class="parent open"><span></span><a href="/">TinyBase</a><ul><li id="G" class="parent"><span></span><a href="/guides/">Guides</a></li><li id="D2" class="parent"><span></span><a href="/demos/">Demos</a></li><li id="api" class="parent open"><span></span><a href="/api/">API</a><ul><li id="s" class="parent"><span></span><a href="/api/store/"><code>store</code></a></li><li id="m" class="parent"><span></span><a href="/api/mergeable-store/"><code>mergeable-store</code></a></li><li id="m3" class="parent"><span></span><a href="/api/metrics/"><code>metrics</code></a></li><li id="i" class="parent"><span></span><a href="/api/indexes/"><code>indexes</code></a></li><li id="r" class="parent"><span></span><a href="/api/relationships/"><code>relationships</code></a></li><li id="q" class="parent"><span></span><a href="/api/queries/"><code>queries</code></a></li><li id="c" class="parent"><span></span><a href="/api/checkpoints/"><code>checkpoints</code></a></li><li id="c3" class="parent"><span></span><a href="/api/common/"><code>common</code></a></li><li id="p" class="parent"><span></span><a href="/api/persisters/"><code>persisters</code></a></li><li id="p2" class="parent"><span></span><a href="/api/persister-automerge/"><code>persister-automerge</code></a></li><li id="p3" class="parent"><span></span><a href="/api/persister-browser/"><code>persister-browser</code></a></li><li id="p4" class="parent"><span></span><a href="/api/persister-cr-sqlite-wasm/"><code>persister-cr-sqlite-wasm</code></a></li><li id="p5" class="parent"><span></span><a href="/api/persister-durable-object-storage/"><code>persister-durable-object-storage</code></a></li><li id="p6" class="parent"><span></span><a href="/api/persister-electric-sql/"><code>persister-electric-sql</code></a></li><li id="p7" class="parent"><span></span><a href="/api/persister-expo-sqlite/"><code>persister-expo-sqlite</code></a></li><li id="p8" class="parent"><span></span><a href="/api/persister-file/"><code>persister-file</code></a></li><li id="p9" class="parent"><span></span><a href="/api/persister-indexed-db/"><code>persister-indexed-db</code></a></li><li id="p10" class="parent"><span></span><a href="/api/persister-libsql/"><code>persister-libsql</code></a></li><li id="p11" class="parent"><span></span><a href="/api/persister-partykit-client/"><code>persister-partykit-client</code></a></li><li id="p12" class="parent open"><span></span><a href="/api/persister-partykit-server/"><code>persister-partykit-server</code></a><ul><li id="p12/C45" class="parent open"><span></span><a href="/api/persister-partykit-server/classes/">Classes</a><ul><li id="TBPKS" class="current parent open"><span></span><a href="/api/persister-partykit-server/classes/server/tinybasepartykitserver/"><code>TinyBasePartyKitServer</code></a><ul><li id="TBPKS/C46" class="parent"><span></span><a href="/api/persister-partykit-server/classes/server/tinybasepartykitserver/constructors/">Constructors</a></li><li id="TBPKS/M29" class="parent"><span></span><a href="/api/persister-partykit-server/classes/server/tinybasepartykitserver/methods/">Methods</a></li><li id="TBPKS/P16" class="parent"><span></span><a href="/api/persister-partykit-server/classes/server/tinybasepartykitserver/properties/">Properties</a></li></ul></li></ul></li><li id="p12/F20" class="parent"><span></span><a href="/api/persister-partykit-server/functions/">Functions</a></li><li id="p12/TA18" class="parent"><span></span><a href="/api/persister-partykit-server/type-aliases/">Type Aliases</a></li></ul></li><li id="p13" class="parent"><span></span><a href="/api/persister-pglite/"><code>persister-pglite</code></a></li><li id="p14" class="parent"><span></span><a href="/api/persister-postgres/"><code>persister-postgres</code></a></li><li id="p15" class="parent"><span></span><a href="/api/persister-powersync/"><code>persister-powersync</code></a></li><li id="p16" class="parent"><span></span><a href="/api/persister-remote/"><code>persister-remote</code></a></li><li id="p17" class="parent"><span></span><a href="/api/persister-sqlite-wasm/"><code>persister-sqlite-wasm</code></a></li><li id="p18" class="parent"><span></span><a href="/api/persister-sqlite3/"><code>persister-sqlite3</code></a></li><li id="p19" class="parent"><span></span><a href="/api/persister-yjs/"><code>persister-yjs</code></a></li><li id="s40" class="parent"><span></span><a href="/api/synchronizers/"><code>synchronizers</code></a></li><li id="s43" class="parent"><span></span><a href="/api/synchronizer-broadcast-channel/"><code>synchronizer-broadcast-channel</code></a></li><li id="s46" class="parent"><span></span><a href="/api/synchronizer-local/"><code>synchronizer-local</code></a></li><li id="s49" class="parent"><span></span><a href="/api/synchronizer-ws-client/"><code>synchronizer-ws-client</code></a></li><li id="s52" class="parent"><span></span><a href="/api/synchronizer-ws-server/"><code>synchronizer-ws-server</code></a></li><li id="s53" class="parent"><span></span><a href="/api/synchronizer-ws-server-durable-object/"><code>synchronizer-ws-server-durable-object</code></a></li><li id="s54" class="parent"><span></span><a href="/api/synchronizer-ws-server-simple/"><code>synchronizer-ws-server-simple</code></a></li><li id="t3" class="parent"><span></span><a href="/api/tools/"><code>tools</code></a></li><li id="u" class="parent"><span></span><a href="/api/ui-react/"><code>ui-react</code></a></li><li id="u2" class="parent"><span></span><a href="/api/ui-react-dom/"><code>ui-react-dom</code></a></li><li id="u3" class="parent"><span></span><a href="/api/ui-react-inspector/"><code>ui-react-inspector</code></a></li></ul></li></ul></li></ul></nav><article><nav><ul><li><a href="/">TinyBase</a></li><li><a href="/api/">API</a></li><li><a href="/api/persister-partykit-server/"><code>persister-partykit-server</code></a></li><li><a href="/api/persister-partykit-server/classes/">Classes</a></li><li><a href="/api/persister-partykit-server/classes/server/tinybasepartykitserver/"><code>TinyBasePartyKitServer</code></a></li></ul></nav><section class="s1" id="/api/persister-partykit-server/classes/server/tinybasepartykitserver/" data-id="TBPKS"><h1><code>TinyBasePartyKitServer</code></h1><p>This extends the PartyKit Server class, which provides a selection of methods you are expected to implement. The <code>TinyBasePartyKitServer</code> implements only two of them, the <a href="/api/persister-partykit-server/classes/server/tinybasepartykitserver/methods/connection/onmessage/"><code>onMessage</code></a> method and the <a href="/api/persister-partykit-server/classes/server/tinybasepartykitserver/methods/connection/onrequest/"><code>onRequest</code></a> method, as well as the constructor.</p><p>If you wish to use <code>TinyBasePartyKitServer</code> as a general PartyKit server, you can implement other methods. But you must remember to call the super implementations of those methods to ensure the TinyBase synchronization stays supported in addition to your own custom functionality. The same applies to the constructor if you choose to implement that.</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>TinyBasePartyKitServer<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/persisters/persister-partykit-server'</span><span class="punctuation">;</span>

<span class="comment">// This is your PartyKit server entry point.</span>
<span class="keyword">export</span> <span class="keyword">class</span> <span class="class-name">MyServer</span> <span class="keyword">extends</span> <span class="class-name"><a href="/api/persister-partykit-server/classes/server/tinybasepartykitserver/">TinyBasePartyKitServer</a></span> <span class="punctuation">{</span>
  <span class="function">constructor</span><span class="punctuation">(</span><span class="parameter">party</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">super</span><span class="punctuation">(</span>party<span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="comment">// custom constructor code</span>
  <span class="punctuation">}</span>

  <span class="keyword">async</span> <span class="function">onStart</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="comment">// no need to call super.onStart()</span>
    console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="string">'Server started'</span><span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="punctuation">}</span>

  <span class="keyword">async</span> <span class="function"><a href="/api/persister-partykit-server/classes/server/tinybasepartykitserver/methods/connection/onmessage/">onMessage</a></span><span class="punctuation">(</span><span class="parameter">message<span class="punctuation">,</span> connection</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">await</span> <span class="keyword">super</span><span class="punctuation">.</span><span class="function"><a href="/api/persister-partykit-server/classes/server/tinybasepartykitserver/methods/connection/onmessage/">onMessage</a></span><span class="punctuation">(</span>message<span class="punctuation">,</span> connection<span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="comment">// custom onMessage code</span>
  <span class="punctuation">}</span>

  <span class="keyword">async</span> <span class="function"><a href="/api/persister-partykit-server/classes/server/tinybasepartykitserver/methods/connection/onrequest/">onRequest</a></span><span class="punctuation">(</span><span class="parameter">request</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="comment">// custom onRequest code, else:</span>
    <span class="keyword">return</span> <span class="keyword">await</span> <span class="keyword">super</span><span class="punctuation">.</span><span class="function"><a href="/api/persister-partykit-server/classes/server/tinybasepartykitserver/methods/connection/onrequest/">onRequest</a></span><span class="punctuation">(</span>request<span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="punctuation">}</span>
<span class="punctuation">}</span>
</code></pre><p>See the <a href="https://docs.partykit.io/reference/partyserver-api/">PartyKit server API documentation</a> for more details.</p><section class="s2"><h2>Since</h2><p>v4.3.0</p></section><section class="s2" id="/api/persister-partykit-server/classes/server/tinybasepartykitserver/constructors/" data-id="TBPKS/C46"><h2>Constructors</h2><ul><li><a href="/api/persister-partykit-server/classes/server/tinybasepartykitserver/constructors/creation/constructor/"><code>constructor</code></a></li></ul></section><section class="s2" id="/api/persister-partykit-server/classes/server/tinybasepartykitserver/methods/" data-id="TBPKS/M29"><h2>Methods</h2><ul><li><a href="/api/persister-partykit-server/classes/server/tinybasepartykitserver/methods/connection/">Connection methods</a></li><li><a href="/api/persister-partykit-server/classes/server/tinybasepartykitserver/methods/sanitization/">Sanitization methods</a></li></ul></section><section class="s2" id="/api/persister-partykit-server/classes/server/tinybasepartykitserver/properties/" data-id="TBPKS/P16"><h2>Properties</h2><ul><li><a href="/api/persister-partykit-server/classes/server/tinybasepartykitserver/properties/configuration/config/"><code>config</code></a></li></ul></section></section></article><aside></aside></main><footer><nav><a id="gh" href="https://github.com/tinyplex/tinybase" target="_blank">GitHub</a><a id="bs" href="https://bsky.app/profile/tinybase.bsky.social" target="_blank">Bluesky</a><a id="tw" href="https://x.com/tinybasejs" target="_blank">X / Twitter</a><a id="dc" href="https://discord.com/invite/mGz3mevwP8" target="_blank">Discord</a></nav><nav><a href="/">TinyBase <span id="version"></span></a> Â© 2022-</nav></footer></body><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-D1MGR8VRWJ"></script><script>window.dataLayer=window.dataLayer||[];function g(){dataLayer.push(arguments);}g('js',new Date());g('config','G-D1MGR8VRWJ');</script></html>