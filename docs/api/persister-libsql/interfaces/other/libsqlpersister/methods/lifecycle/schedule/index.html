<!DOCTYPE html><html lang="en"><head><link rel="dns-prefetch" href="https://www.googletagmanager.com/"><link href="https://www.googletagmanager.com/gtag/js?id=G-D1MGR8VRWJ" rel="preload" as="script"><link rel="preload" as="font" href="/fonts/inter.woff2" type="font/woff2" crossorigin="anonymous"><link rel="preload" as="font" href="/fonts/inconsolata.woff2" type="font/woff2" crossorigin="anonymous"><link rel="preload" as="font" href="/fonts/icons.woff2" type="font/woff2" crossorigin="anonymous"><link rel="preload" as="font" href="/fonts/shantell.woff2" type="font/woff2" crossorigin="anonymous"><title>schedule | TinyBase</title><meta name="description" content="The schedule method allows you to queue up a series of asynchronous actions that must run in sequence during persistence."><meta property="og:type" content="website"><meta property="og:title" content="schedule | TinyBase"><meta property="og:description" content="The schedule method allows you to queue up a series of asynchronous actions that must run in sequence during persistence."><meta property="og:url" content="https://tinybase.org/api/persister-libsql/interfaces/other/libsqlpersister/methods/lifecycle/schedule/"><meta property="og:image" content="https://tinybase.org/favicon_pad.png"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="schedule | TinyBase"><meta name="twitter:description" content="The schedule method allows you to queue up a series of asynchronous actions that must run in sequence during persistence."><meta name="twitter:site" content="@tinybasejs"><meta name="twitter:image" content="https://tinybase.org/favicon_pad.png"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="stylesheet" href="/css/index.css"><link rel="canonical" href="https://tinybase.org/api/persister-libsql/interfaces/other/libsqlpersister/methods/lifecycle/schedule/"><script src="/js/app.js"></script></head><body><header><a href="/"><img src="/favicon.svg" alt="TinyBase logo"><span>TinyBase</span></a><nav><ul><li><a href="/guides/">Guides</a></li><li><a href="/demos/">Demos</a></li><li><a href="/api/">API</a></li><li><a href="https://github.com/tinyplex/tinybase">GitHub</a></li></ul></nav><span id="dark"></span></header><main><nav><ul><li id="root" class="parent open"><span></span><a href="/">TinyBase</a><ul><li id="G" class="parent"><span></span><a href="/guides/">Guides</a></li><li id="D2" class="parent"><span></span><a href="/demos/">Demos</a></li><li id="api" class="parent open"><span></span><a href="/api/">API</a><ul><li id="s" class="parent"><span></span><a href="/api/store/"><code>store</code></a></li><li id="m" class="parent"><span></span><a href="/api/metrics/"><code>metrics</code></a></li><li id="i" class="parent"><span></span><a href="/api/indexes/"><code>indexes</code></a></li><li id="r" class="parent"><span></span><a href="/api/relationships/"><code>relationships</code></a></li><li id="q" class="parent"><span></span><a href="/api/queries/"><code>queries</code></a></li><li id="c" class="parent"><span></span><a href="/api/checkpoints/"><code>checkpoints</code></a></li><li id="c3" class="parent"><span></span><a href="/api/common/"><code>common</code></a></li><li id="p" class="parent"><span></span><a href="/api/persisters/"><code>persisters</code></a></li><li id="p2" class="parent"><span></span><a href="/api/persister-automerge/"><code>persister-automerge</code></a></li><li id="p3" class="parent"><span></span><a href="/api/persister-browser/"><code>persister-browser</code></a></li><li id="p4" class="parent"><span></span><a href="/api/persister-cr-sqlite-wasm/"><code>persister-cr-sqlite-wasm</code></a></li><li id="p5" class="parent"><span></span><a href="/api/persister-electric-sql/"><code>persister-electric-sql</code></a></li><li id="p6" class="parent"><span></span><a href="/api/persister-expo-sqlite/"><code>persister-expo-sqlite</code></a></li><li id="p7" class="parent"><span></span><a href="/api/persister-expo-sqlite-next/"><code>persister-expo-sqlite-next</code></a></li><li id="p8" class="parent"><span></span><a href="/api/persister-file/"><code>persister-file</code></a></li><li id="p9" class="parent"><span></span><a href="/api/persister-indexed-db/"><code>persister-indexed-db</code></a></li><li id="p10" class="parent open"><span></span><a href="/api/persister-libsql/"><code>persister-libsql</code></a><ul><li id="p10/I29" class="parent open"><span></span><a href="/api/persister-libsql/interfaces/">Interfaces</a><ul><li id="LSP" class="parent open"><span></span><a href="/api/persister-libsql/interfaces/other/libsqlpersister/"><code>LibSqlPersister</code></a><ul><li id="LSP/M22/G20" class="parent"><span></span><a href="/api/persister-libsql/interfaces/other/libsqlpersister/methods/getter/">Getter methods</a></li><li id="LSP/M22/L38" class="parent open"><span></span><a href="/api/persister-libsql/interfaces/other/libsqlpersister/methods/lifecycle/">Lifecycle methods</a><ul><li id="d16"><span></span><a href="/api/persister-libsql/interfaces/other/libsqlpersister/methods/lifecycle/destroy/"><code>destroy</code></a></li><li id="s22" class="current"><span></span><a href="/api/persister-libsql/interfaces/other/libsqlpersister/methods/lifecycle/schedule/"><code>schedule</code></a></li></ul></li><li id="LSP/M22/L39" class="parent"><span></span><a href="/api/persister-libsql/interfaces/other/libsqlpersister/methods/load/">Load methods</a></li><li id="LSP/M22/S19" class="parent"><span></span><a href="/api/persister-libsql/interfaces/other/libsqlpersister/methods/save/">Save methods</a></li><li id="LSP/M22/D29" class="parent"><span></span><a href="/api/persister-libsql/interfaces/other/libsqlpersister/methods/development/">Development methods</a></li></ul></li></ul></li><li id="p10/F17" class="parent"><span></span><a href="/api/persister-libsql/functions/">Functions</a></li></ul></li><li id="p11" class="parent"><span></span><a href="/api/persister-partykit-client/"><code>persister-partykit-client</code></a></li><li id="p12" class="parent"><span></span><a href="/api/persister-partykit-server/"><code>persister-partykit-server</code></a></li><li id="p13" class="parent"><span></span><a href="/api/persister-powersync/"><code>persister-powersync</code></a></li><li id="p14" class="parent"><span></span><a href="/api/persister-remote/"><code>persister-remote</code></a></li><li id="p15" class="parent"><span></span><a href="/api/persister-sqlite-wasm/"><code>persister-sqlite-wasm</code></a></li><li id="p16" class="parent"><span></span><a href="/api/persister-sqlite3/"><code>persister-sqlite3</code></a></li><li id="p17" class="parent"><span></span><a href="/api/persister-yjs/"><code>persister-yjs</code></a></li><li id="t2" class="parent"><span></span><a href="/api/tools/"><code>tools</code></a></li><li id="u" class="parent"><span></span><a href="/api/ui-react/"><code>ui-react</code></a></li><li id="u2" class="parent"><span></span><a href="/api/ui-react-dom/"><code>ui-react-dom</code></a></li></ul></li></ul></li></ul></nav><article><nav><ul><li><a href="/">TinyBase</a></li><li><a href="/api/">API</a></li><li><a href="/api/persister-libsql/"><code>persister-libsql</code></a></li><li><a href="/api/persister-libsql/interfaces/">Interfaces</a></li><li><a href="/api/persister-libsql/interfaces/other/libsqlpersister/"><code>LibSqlPersister</code></a></li><li><a href="/api/persister-libsql/interfaces/other/libsqlpersister/methods/lifecycle/">Lifecycle methods</a></li><li><a href="/api/persister-libsql/interfaces/other/libsqlpersister/methods/lifecycle/schedule/"><code>schedule</code></a></li></ul></nav><section class="s1" id="/api/persister-libsql/interfaces/other/libsqlpersister/methods/lifecycle/schedule/" data-id="s22"><h1><code>schedule</code></h1><p>The <code>schedule</code> method allows you to queue up a series of asynchronous actions that must run in sequence during persistence.</p><pre><code><span class="function"><a href="/api/persister-libsql/interfaces/other/libsqlpersister/methods/lifecycle/schedule/">schedule</a></span><span class="punctuation">(</span>actions<span class="operator">:</span> <span class="builtin">Promise</span><span class="operator">&lt;</span><span class="builtin">any</span><span class="operator">></span><span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">)</span><span class="operator">:</span> <span class="builtin">Promise</span><span class="operator">&lt;</span><span class="type"><a href="/api/persisters/interfaces/persister/persister/">Persister</a></span><span class="operator">></span></code></pre><div class="table"><table><tr><th></th><th>Type</th><th>Description</th></tr><tr><th><code>actions</code></th><td><code><span class="builtin">Promise</span><span class="operator">&lt;</span><span class="builtin">any</span><span class="operator">></span><span class="punctuation">[</span><span class="punctuation">]</span></code></td><td></td></tr><tr><th class="right">returns</th><td><code><span class="builtin">Promise</span><span class="operator">&lt;</span><span class="type"><a href="/api/persisters/interfaces/persister/persister/">Persister</a></span><span class="operator">></span></code></td><td><p></p><p>A reference to the <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> object.</p><p></p></td></tr></table></div><p>For example, a database <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> may need to ensure that multiple asynchronous tasks to check and update the database schema are completed before data is written to it. Therefore it&#x27;s most likely you will be using this method inside your <code>setPersisted</code> implementation.</p><p>Call this method to add a single asynchronous action, or a sequence of them in one call. This will also start to run the first task in the queue (which once complete will then run the next, and so on), and so this method itself is also asynchronous and returns a promise of the <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a>.</p><section class="s2"><h2>Example</h2><p>This example creates a custom <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> object against a newly-created <a href="/api/store/interfaces/store/store/"><code>Store</code></a> and then sequences two tasks in order to update its data on a hypothetical remote system.</p><pre><code><span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/store/functions/creation/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> persister <span class="operator">=</span> <span class="function"><a href="/api/persisters/functions/creation/createcustompersister/">createCustomPersister</a></span><span class="punctuation">(</span>
  store<span class="punctuation">,</span>
  <span class="keyword">async</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
    <span class="comment">// getPersisted</span>
    <span class="keyword">return</span> <span class="keyword">await</span> <span class="function">getDataFromRemoteSystem</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="keyword">async</span> <span class="punctuation">(</span><span class="parameter">getContent</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
    <span class="comment">// setPersisted</span>
    <span class="keyword">await</span> persister<span class="punctuation">.</span><span class="function"><a href="/api/persister-libsql/interfaces/other/libsqlpersister/methods/lifecycle/schedule/">schedule</a></span><span class="punctuation">(</span>
      <span class="keyword">async</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="keyword">await</span> <span class="function">checkRemoteSystemIsReady</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">,</span>
      <span class="keyword">async</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="keyword">await</span> <span class="function">sendDataToRemoteSystem</span><span class="punctuation">(</span><span class="function"><a href="/api/store/interfaces/store/store/methods/getter/getcontent/">getContent</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">,</span>
    <span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="punctuation">(</span><span class="parameter">listener</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="function">setInterval</span><span class="punctuation">(</span>listener<span class="punctuation">,</span> <span class="number">1000</span><span class="punctuation">)</span><span class="punctuation">,</span>
  <span class="punctuation">(</span><span class="parameter">interval</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="function">clearInterval</span><span class="punctuation">(</span>interval<span class="punctuation">)</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre></section><section class="s2"><h2>Since</h2><p>v4.0.0</p></section></section></article><aside></aside></main><footer><nav><a id="tw" href="https://twitter.com/tinybasejs" target="_blank">Twitter</a><a id="fb" href="https://facebook.com/tinybasejs" target="_blank">Facebook</a></nav><nav><a href="/">TinyBase 4.8.11</a> Â© 2021- All Rights Reserved</nav></footer></body><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-D1MGR8VRWJ"></script><script>window.dataLayer=window.dataLayer||[];function g(){dataLayer.push(arguments);}g('js',new Date());g('config','G-D1MGR8VRWJ');</script></html>