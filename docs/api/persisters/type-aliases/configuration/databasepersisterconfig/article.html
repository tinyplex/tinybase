<nav><ul><li><a href="/">TinyBase</a></li><li><a href="/api/">API</a></li><li><a href="/api/persisters/"><code>persisters</code></a></li><li><a href="/api/persisters/type-aliases/">Type Aliases</a></li><li><a href="/api/persisters/type-aliases/configuration/">Configuration type aliases</a></li><li><a href="/api/persisters/type-aliases/configuration/databasepersisterconfig/"><code>DatabasePersisterConfig</code></a></li></ul></nav><section class="s1" id="/api/persisters/type-aliases/configuration/databasepersisterconfig/" data-id="DPC"><h1><code>DatabasePersisterConfig</code></h1><pre><code><span class="type"><a href="/api/persisters/type-aliases/configuration/dpcjson/">DpcJson</a></span> <span class="operator">|</span> <span class="type"><a href="/api/persisters/type-aliases/configuration/dpctabular/">DpcTabular</a></span></code></pre><p>There are two modes for persisting a <a href="/api/store/interfaces/store/store/"><code>Store</code></a> with a database:</p><ul><li>A JSON serialization of the whole <a href="/api/store/interfaces/store/store/"><code>Store</code></a>, which is stored in a single row of a table (normally called <code>tinybase</code>) within the database. This is configured by providing a <a href="/api/persisters/type-aliases/configuration/dpcjson/"><code>DpcJson</code></a> object.</li><li>A tabular mapping of <a href="/api/store/type-aliases/store/table/"><code>Table</code></a> <a href="/api/common/type-aliases/identity/ids/"><code>Ids</code></a> to database table names (and vice-versa). <a href="/api/store/type-aliases/store/values/"><code>Values</code></a> are stored in a separate special table (normally called <code>tinybase_values</code>). This is configured by providing a <a href="/api/persisters/type-aliases/configuration/dpctabular/"><code>DpcTabular</code></a> object.</li></ul><p>Please see the <a href="/api/persisters/type-aliases/configuration/dpcjson/"><code>DpcJson</code></a> and <a href="/api/persisters/type-aliases/configuration/dpctabular/"><code>DpcTabular</code></a> type documentation for more detail on each. If not specified otherwise, JSON serialization will be used for persistence.</p><p><a href="/api/store/type-aliases/transaction/changes/"><code>Changes</code></a> made to the database (outside of this <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a>) are picked up immediately if they are made via the same connection or library that it is using. If the database is being changed by another client, the <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> needs to poll for changes. Hence both configuration types also contain an <code>autoLoadIntervalSeconds</code> property which indicates how often it should do that. This defaults to 1 second.</p><p>Note that all the nested types within this type have a &#x27;Dpc&#x27; prefix, short for &#x27;<code>DatabasePersisterConfig</code>&#x27;.</p><section class="s2"><h2>Examples</h2><p>When applied to a database <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a>, this <code>DatabasePersisterConfig</code> will load and save a JSON serialization from and to a table called <code>my_tinybase</code>, polling the database every 2 seconds. See <a href="/api/persisters/type-aliases/configuration/dpcjson/"><code>DpcJson</code></a> for more details on these settings.</p><pre><code><span class="keyword">import</span> type <span class="punctuation">{</span>DatabasePersisterConfig<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase'</span><span class="punctuation">;</span>

<span class="keyword">export</span> <span class="keyword">const</span> <span class="literal-property">databasePersisterConfig</span><span class="operator">:</span> DatabasePersisterConfig <span class="operator">=</span> <span class="punctuation">{</span>
  <span class="literal-property">mode</span><span class="operator">:</span> <span class="string">'json'</span><span class="punctuation">,</span>
  <span class="literal-property">storeTableName</span><span class="operator">:</span> <span class="string">'my_tinybase'</span><span class="punctuation">,</span>
  <span class="literal-property">autoLoadIntervalSeconds</span><span class="operator">:</span> <span class="number">2</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">;</span>
</code></pre><p>When applied to a database <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a>, this <code>DatabasePersisterConfig</code> will load and save tabular data from and to tables specified in the <code>load</code> and <code>save</code> mappings. See <a href="/api/persisters/type-aliases/configuration/dpctabular/"><code>DpcTabular</code></a> for more details on these settings.</p><pre><code><span class="keyword">import</span> type <span class="punctuation">{</span>DatabasePersisterConfig<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase'</span><span class="punctuation">;</span>

<span class="keyword">export</span> <span class="keyword">const</span> <span class="literal-property">databasePersisterConfig</span><span class="operator">:</span> DatabasePersisterConfig <span class="operator">=</span> <span class="punctuation">{</span>
  <span class="literal-property">mode</span><span class="operator">:</span> <span class="string">'tabular'</span><span class="punctuation">,</span>
  <span class="literal-property">tables</span><span class="operator">:</span> <span class="punctuation">{</span>
    <span class="literal-property">load</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">petsInDb</span><span class="operator">:</span> <span class="string">'pets'</span><span class="punctuation">,</span> <span class="literal-property">speciesInDb</span><span class="operator">:</span> <span class="string">'species'</span><span class="punctuation">}</span><span class="punctuation">,</span>
    <span class="literal-property">save</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">pets</span><span class="operator">:</span> <span class="string">'petsInDb'</span><span class="punctuation">,</span> <span class="literal-property">species</span><span class="operator">:</span> <span class="string">'speciesInDb'</span><span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">;</span>
</code></pre></section><section class="s2"><h2>Since</h2><p>v4.0.0</p></section></section>