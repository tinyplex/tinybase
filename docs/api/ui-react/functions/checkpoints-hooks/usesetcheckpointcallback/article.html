<nav><ul><li><a href="/">TinyBase</a></li><li><a href="/api/">API</a></li><li><a href="/api/ui-react/"><code>ui-react</code></a></li><li><a href="/api/ui-react/functions/">Functions</a></li><li><a href="/api/ui-react/functions/checkpoints-hooks/">Checkpoints hooks</a></li><li><a href="/api/ui-react/functions/checkpoints-hooks/usesetcheckpointcallback/"><code>useSetCheckpointCallback</code></a></li></ul></nav><section class="s1" id="/api/ui-react/functions/checkpoints-hooks/usesetcheckpointcallback/" data-id="uSCC"><h1><code>useSetCheckpointCallback</code></h1><p>The <code>useSetCheckpointCallback</code> hook returns a parameterized callback that can be used to record a checkpoint of a <a href="/api/store/interfaces/store/store/"><code>Store</code></a> into a <a href="/api/checkpoints/interfaces/checkpoints/checkpoints/"><code>Checkpoints</code></a> object that can be reverted to in the future.</p><pre><code><span class="generic-function"><span class="function"><a href="/api/ui-react/functions/checkpoints-hooks/usesetcheckpointcallback/">useSetCheckpointCallback</a></span><span class="generic"><span class="operator">&lt;</span>Parameter<span class="operator">></span></span></span><span class="punctuation">(</span>
  getCheckpoint<span class="operator">?</span><span class="operator">:</span> <span class="punctuation">(</span>parameter<span class="operator">:</span> Parameter<span class="punctuation">)</span> <span class="operator">=></span> <span class="builtin">string</span><span class="punctuation">,</span>
  getCheckpointDeps<span class="operator">?</span><span class="operator">:</span> DependencyList<span class="punctuation">,</span>
  checkpointsOrCheckpointsId<span class="operator">?</span><span class="operator">:</span> <span class="type"><a href="/api/ui-react/type-aliases/identity/checkpointsorcheckpointsid/">CheckpointsOrCheckpointsId</a></span><span class="punctuation">,</span>
  then<span class="operator">?</span><span class="operator">:</span> <span class="punctuation">(</span>checkpointId<span class="operator">:</span> <span class="builtin">string</span><span class="punctuation">,</span> checkpoints<span class="operator">:</span> <span class="type"><a href="/api/checkpoints/interfaces/checkpoints/checkpoints/">Checkpoints</a></span><span class="punctuation">,</span> label<span class="operator">?</span><span class="operator">:</span> <span class="builtin">string</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="keyword">void</span><span class="punctuation">,</span>
  thenDeps<span class="operator">?</span><span class="operator">:</span> DependencyList<span class="punctuation">,</span>
<span class="punctuation">)</span><span class="operator">:</span> <span class="type"><a href="/api/common/type-aliases/callback/parameterizedcallback/">ParameterizedCallback</a></span><span class="operator">&lt;</span>Parameter<span class="operator">></span></code></pre><div class="table"><table><tr><th></th><th>Type</th><th>Description</th></tr><tr><th><code>getCheckpoint<span class="operator">?</span></code></th><td><code><span class="punctuation">(</span>parameter<span class="operator">:</span> Parameter<span class="punctuation">)</span> <span class="operator">=></span> <span class="builtin">string</span></code></td><td><p>An optional function which returns a string that will be used to describe the actions leading up to this checkpoint, based on the parameter the callback will receive (and which is most likely a DOM event).</p></td></tr><tr><th><code>getCheckpointDeps<span class="operator">?</span></code></th><td><code>DependencyList</code></td><td><p>An optional array of dependencies for the <code>getCheckpoint</code> function, which, if any change, result in the regeneration of the callback. This parameter defaults to an empty array.</p></td></tr><tr><th><code>checkpointsOrCheckpointsId<span class="operator">?</span></code></th><td><code><span class="type"><a href="/api/ui-react/type-aliases/identity/checkpointsorcheckpointsid/">CheckpointsOrCheckpointsId</a></span></code></td><td><p>The <a href="/api/checkpoints/interfaces/checkpoints/checkpoints/"><code>Checkpoints</code></a> object to be updated: omit for the default context <a href="/api/checkpoints/interfaces/checkpoints/checkpoints/"><code>Checkpoints</code></a> object, provide an <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a> for a named context <a href="/api/checkpoints/interfaces/checkpoints/checkpoints/"><code>Checkpoints</code></a> object, or provide an explicit reference.</p></td></tr><tr><th><code>then<span class="operator">?</span></code></th><td><code><span class="punctuation">(</span>checkpointId<span class="operator">:</span> <span class="builtin">string</span><span class="punctuation">,</span> checkpoints<span class="operator">:</span> <span class="type"><a href="/api/checkpoints/interfaces/checkpoints/checkpoints/">Checkpoints</a></span><span class="punctuation">,</span> label<span class="operator">?</span><span class="operator">:</span> <span class="builtin">string</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="keyword">void</span></code></td><td><p>A function which is called after the checkpoint is set, with the new checkpoint <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a>, a reference to the <a href="/api/checkpoints/interfaces/checkpoints/checkpoints/"><code>Checkpoints</code></a> object and the label provided, if any.</p></td></tr><tr><th><code>thenDeps<span class="operator">?</span></code></th><td><code>DependencyList</code></td><td><p>An optional array of dependencies for the <code>then</code> function, which, if any change, result in the regeneration of the callback. This parameter defaults to an empty array.</p></td></tr><tr><th class="right">returns</th><td><code><span class="type"><a href="/api/common/type-aliases/callback/parameterizedcallback/">ParameterizedCallback</a></span><span class="operator">&lt;</span>Parameter<span class="operator">></span></code></td><td><p></p><p>A parameterized callback for subsequent use.</p><p></p></td></tr></table></div><p>This hook is useful, for example, when creating an event handler that will set the checkpoint. In this case, the parameter will likely be the event, so that you can use data from it as the checkpoint label.</p><p>The optional first parameter is a function which will produce the label that will then be used to name the checkpoint.</p><p>If that function has any other dependencies, the changing of which should also cause the callback to be recreated, you can provide them in an array in the optional second parameter, just as you would for any React hook with dependencies.</p><p>For convenience, you can optionally provide a <code>then</code> function (with its own set of dependencies) which will be called just after the checkpoint has been set.</p><p>The <a href="/api/checkpoints/interfaces/checkpoints/checkpoints/"><code>Checkpoints</code></a> object for which the callback will set the checkpoint (indicated by the hook&#x27;s <code>checkpointsOrCheckpointsId</code> parameter) is always automatically used as a hook dependency for the callback.</p><section class="s2"><h2>Example</h2><p>This example uses the <code>useSetCheckpointCallback</code> hook to create an event handler which sets a checkpoint when the <code>span</code> element is clicked.</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>createCheckpoints<span class="punctuation">,</span> createStore<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase'</span><span class="punctuation">;</span>
<span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">{</span>createRoot<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'react-dom/client'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">{</span>useSetCheckpointCallback<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/ui-react'</span><span class="punctuation">;</span>

<span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/store/functions/creation/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settables/">setTables</a></span><span class="punctuation">(</span><span class="punctuation">{</span><span class="literal-property">pets</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">nemo</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'fish'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> checkpoints <span class="operator">=</span> <span class="function"><a href="/api/checkpoints/functions/creation/createcheckpoints/">createCheckpoints</a></span><span class="punctuation">(</span>store<span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> <span class="function-variable">App</span> <span class="operator">=</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
  <span class="keyword">const</span> handleClick <span class="operator">=</span> <span class="function"><a href="/api/ui-react/functions/checkpoints-hooks/usesetcheckpointcallback/">useSetCheckpointCallback</a></span><span class="punctuation">(</span>
    <span class="punctuation">(</span><span class="parameter">e</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="template-string"><span class="template-punctuation">`</span><span class="string">with #</span><span class="interpolation"><span class="interpolation-punctuation">${</span>e<span class="punctuation">.</span>target<span class="punctuation">.</span>id<span class="interpolation-punctuation">}</span></span><span class="string"> button</span><span class="template-punctuation">`</span></span><span class="punctuation">,</span>
    <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span>
    checkpoints<span class="punctuation">,</span>
    <span class="punctuation">(</span><span class="parameter">checkpointId<span class="punctuation">,</span> checkpoints<span class="punctuation">,</span> label</span><span class="punctuation">)</span> <span class="operator">=></span>
      console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="template-string"><span class="template-punctuation">`</span><span class="string">Checkpoint </span><span class="interpolation"><span class="interpolation-punctuation">${</span>checkpointId<span class="interpolation-punctuation">}</span></span><span class="string"> set, </span><span class="interpolation"><span class="interpolation-punctuation">${</span>label<span class="interpolation-punctuation">}</span></span><span class="template-punctuation">`</span></span><span class="punctuation">)</span><span class="punctuation">,</span>
  <span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="keyword">return</span> <span class="punctuation">(</span>
    <span class="tag"><span class="tag"><span class="punctuation">&lt;</span>span</span> <span class="attr-name">id</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>span<span class="punctuation">"</span></span> <span class="attr-name">onClick</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span>handleClick<span class="punctuation">}</span></span><span class="punctuation">></span></span><span class="plain-text">
      Set
    </span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span>span</span><span class="punctuation">></span></span>
  <span class="punctuation">)</span><span class="punctuation">;</span>
<span class="punctuation">}</span><span class="punctuation">;</span>

<span class="keyword">const</span> app <span class="operator">=</span> document<span class="punctuation">.</span><span class="function">createElement</span><span class="punctuation">(</span><span class="string">'div'</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="function">createRoot</span><span class="punctuation">(</span>app<span class="punctuation">)</span><span class="punctuation">.</span><span class="function">render</span><span class="punctuation">(</span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name">App</span></span> <span class="punctuation">/></span></span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> _span <span class="operator">=</span> app<span class="punctuation">.</span><span class="function">querySelector</span><span class="punctuation">(</span><span class="string">'span'</span><span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setcell/">setCell</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'nemo'</span><span class="punctuation">,</span> <span class="string">'color'</span><span class="punctuation">,</span> <span class="string">'orange'</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="comment">// User clicks the &lt;span> element:</span>
<span class="comment">// -> _span MouseEvent('click', {bubbles: true})</span>
<span class="comment">// -> 'Checkpoint 1 set, with #span button'</span>
</code></pre></section></section>