<!DOCTYPE html><html lang="en"><head><link rel="dns-prefetch" href="https://www.googletagmanager.com/"><link href="https://www.googletagmanager.com/gtag/js?id=G-D1MGR8VRWJ" rel="preload" as="script"><link rel="preload" as="font" href="/fonts/inter.woff2" type="font/woff2" crossorigin="anonymous"><link rel="preload" as="font" href="/fonts/inconsolata.woff2" type="font/woff2" crossorigin="anonymous"><link rel="preload" as="font" href="/fonts/icons.woff2" type="font/woff2" crossorigin="anonymous"><link rel="preload" as="font" href="/fonts/shantell.woff2" type="font/woff2" crossorigin="anonymous"><title>useCreatePersister | TinyBase</title><meta name="description" content="The useCreatePersister hook is used to create a Persister within a React application along with convenient memoization and callbacks."><meta property="og:type" content="website"><meta property="og:title" content="useCreatePersister | TinyBase"><meta property="og:description" content="The useCreatePersister hook is used to create a Persister within a React application along with convenient memoization and callbacks."><meta property="og:url" content="https://beta.tinybase.org/api/ui-react/functions/persister-hooks/usecreatepersister/"><meta property="og:image" content="https://beta.tinybase.org/favicon_pad.png"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="useCreatePersister | TinyBase"><meta name="twitter:description" content="The useCreatePersister hook is used to create a Persister within a React application along with convenient memoization and callbacks."><meta name="twitter:site" content="@tinybasejs"><meta name="twitter:image" content="https://beta.tinybase.org/favicon_pad.png"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="stylesheet" href="/css/index.css"><link rel="canonical" href="https://beta.tinybase.org/api/ui-react/functions/persister-hooks/usecreatepersister/"><script src="/js/app.js"></script></head><body><header><a href="/"><img src="/favicon.svg" alt="TinyBase logo"><span>TinyBase <em title="5.0.0-beta.5">β</em></span></a><nav><ul><li><a href="/guides/">Guides</a></li><li><a href="/demos/">Demos</a></li><li><a href="/api/">API</a></li><li><a href="https://github.com/tinyplex/tinybase">GitHub</a></li></ul></nav><span id="dark"></span></header><main><nav><ul><li id="root" class="parent open"><span></span><a href="/">TinyBase</a><ul><li id="G" class="parent"><span></span><a href="/guides/">Guides</a></li><li id="D2" class="parent"><span></span><a href="/demos/">Demos</a></li><li id="api" class="parent open"><span></span><a href="/api/">API</a><ul><li id="s" class="parent"><span></span><a href="/api/store/"><code>store</code></a></li><li id="m" class="parent"><span></span><a href="/api/mergeable-store/"><code>mergeable-store</code></a></li><li id="m3" class="parent"><span></span><a href="/api/metrics/"><code>metrics</code></a></li><li id="i" class="parent"><span></span><a href="/api/indexes/"><code>indexes</code></a></li><li id="r" class="parent"><span></span><a href="/api/relationships/"><code>relationships</code></a></li><li id="q" class="parent"><span></span><a href="/api/queries/"><code>queries</code></a></li><li id="c" class="parent"><span></span><a href="/api/checkpoints/"><code>checkpoints</code></a></li><li id="c3" class="parent"><span></span><a href="/api/common/"><code>common</code></a></li><li id="p" class="parent"><span></span><a href="/api/persisters/"><code>persisters</code></a></li><li id="p2" class="parent"><span></span><a href="/api/persister-automerge/"><code>persister-automerge</code></a></li><li id="p3" class="parent"><span></span><a href="/api/persister-browser/"><code>persister-browser</code></a></li><li id="p4" class="parent"><span></span><a href="/api/persister-cr-sqlite-wasm/"><code>persister-cr-sqlite-wasm</code></a></li><li id="p5" class="parent"><span></span><a href="/api/persister-electric-sql/"><code>persister-electric-sql</code></a></li><li id="p6" class="parent"><span></span><a href="/api/persister-expo-sqlite/"><code>persister-expo-sqlite</code></a></li><li id="p7" class="parent"><span></span><a href="/api/persister-expo-sqlite-next/"><code>persister-expo-sqlite-next</code></a></li><li id="p8" class="parent"><span></span><a href="/api/persister-file/"><code>persister-file</code></a></li><li id="p9" class="parent"><span></span><a href="/api/persister-indexed-db/"><code>persister-indexed-db</code></a></li><li id="p10" class="parent"><span></span><a href="/api/persister-libsql/"><code>persister-libsql</code></a></li><li id="p11" class="parent"><span></span><a href="/api/persister-partykit-client/"><code>persister-partykit-client</code></a></li><li id="p12" class="parent"><span></span><a href="/api/persister-partykit-server/"><code>persister-partykit-server</code></a></li><li id="p13" class="parent"><span></span><a href="/api/persister-powersync/"><code>persister-powersync</code></a></li><li id="p14" class="parent"><span></span><a href="/api/persister-remote/"><code>persister-remote</code></a></li><li id="p15" class="parent"><span></span><a href="/api/persister-sqlite-wasm/"><code>persister-sqlite-wasm</code></a></li><li id="p16" class="parent"><span></span><a href="/api/persister-sqlite3/"><code>persister-sqlite3</code></a></li><li id="p17" class="parent"><span></span><a href="/api/persister-yjs/"><code>persister-yjs</code></a></li><li id="t3" class="parent"><span></span><a href="/api/tools/"><code>tools</code></a></li><li id="u" class="parent open"><span></span><a href="/api/ui-react/"><code>ui-react</code></a><ul><li id="u/F27" class="parent open"><span></span><a href="/api/ui-react/functions/">Functions</a><ul><li id="u/F27/C59" class="parent"><span></span><a href="/api/ui-react/functions/checkpoints-hooks/">Checkpoints hooks</a></li><li id="u/F27/I39" class="parent"><span></span><a href="/api/ui-react/functions/indexes-hooks/">Indexes hooks</a></li><li id="u/F27/M36" class="parent"><span></span><a href="/api/ui-react/functions/metrics-hooks/">Metrics hooks</a></li><li id="u/F27/P18" class="parent open"><span></span><a href="/api/ui-react/functions/persister-hooks/">Persister hooks</a><ul><li id="uCP" class="current"><span></span><a href="/api/ui-react/functions/persister-hooks/usecreatepersister/"><code>useCreatePersister</code></a></li></ul></li><li id="u/F27/Q3" class="parent"><span></span><a href="/api/ui-react/functions/queries-hooks/">Queries hooks</a></li><li id="u/F27/R8" class="parent"><span></span><a href="/api/ui-react/functions/relationships-hooks/">Relationships hooks</a></li><li id="u/F27/S33" class="parent"><span></span><a href="/api/ui-react/functions/store-hooks/">Store hooks</a></li><li id="u/F27/C60" class="parent"><span></span><a href="/api/ui-react/functions/checkpoints-components/">Checkpoints components</a></li><li id="u/F27/C61" class="parent"><span></span><a href="/api/ui-react/functions/context-components/">Context components</a></li><li id="u/F27/I40" class="parent"><span></span><a href="/api/ui-react/functions/indexes-components/">Indexes components</a></li><li id="u/F27/M37" class="parent"><span></span><a href="/api/ui-react/functions/metrics-components/">Metrics components</a></li><li id="u/F27/Q4" class="parent"><span></span><a href="/api/ui-react/functions/queries-components/">Queries components</a></li><li id="u/F27/R9" class="parent"><span></span><a href="/api/ui-react/functions/relationships-components/">Relationships components</a></li><li id="u/F27/S34" class="parent"><span></span><a href="/api/ui-react/functions/store-components/">Store components</a></li></ul></li><li id="u/TA20" class="parent"><span></span><a href="/api/ui-react/type-aliases/">Type Aliases</a></li></ul></li><li id="u2" class="parent"><span></span><a href="/api/ui-react-dom/"><code>ui-react-dom</code></a></li></ul></li></ul></li></ul></nav><article><nav><ul><li><a href="/">TinyBase</a></li><li><a href="/api/">API</a></li><li><a href="/api/ui-react/"><code>ui-react</code></a></li><li><a href="/api/ui-react/functions/">Functions</a></li><li><a href="/api/ui-react/functions/persister-hooks/">Persister hooks</a></li><li><a href="/api/ui-react/functions/persister-hooks/usecreatepersister/"><code>useCreatePersister</code></a></li></ul></nav><section class="s1" id="/api/ui-react/functions/persister-hooks/usecreatepersister/" data-id="uCP"><h1><code>useCreatePersister</code></h1><p>The <code>useCreatePersister</code> hook is used to create a <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> within a React application along with convenient memoization and callbacks.</p><pre><code><span class="generic-function"><span class="function"><a href="/api/ui-react/functions/persister-hooks/usecreatepersister/">useCreatePersister</a></span><span class="generic"><span class="operator">&lt;</span>PersisterOrUndefined<span class="operator">></span></span></span><span class="punctuation">(</span>
  store<span class="operator">:</span> <span class="type"><a href="/api/store/interfaces/store/store/">Store</a></span><span class="punctuation">,</span>
  <span class="function-variable">create</span><span class="operator">:</span> <span class="punctuation">(</span>store<span class="operator">:</span> <span class="type"><a href="/api/store/interfaces/store/store/">Store</a></span><span class="punctuation">)</span> <span class="operator">=></span> PersisterOrUndefined<span class="punctuation">,</span>
  createDeps<span class="operator">?</span><span class="operator">:</span> DependencyList<span class="punctuation">,</span>
  then<span class="operator">?</span><span class="operator">:</span> <span class="punctuation">(</span>persister<span class="operator">:</span> <span class="type"><a href="/api/persisters/interfaces/persister/persister/">Persister</a></span><span class="operator">&lt;</span><span class="boolean">false</span><span class="operator">></span><span class="punctuation">)</span> <span class="operator">=></span> <span class="builtin">Promise</span><span class="operator">&lt;</span><span class="keyword">void</span><span class="operator">></span><span class="punctuation">,</span>
  thenDeps<span class="operator">?</span><span class="operator">:</span> DependencyList<span class="punctuation">,</span>
  destroy<span class="operator">?</span><span class="operator">:</span> <span class="punctuation">(</span>persister<span class="operator">:</span> <span class="type"><a href="/api/persisters/interfaces/persister/persister/">Persister</a></span><span class="operator">&lt;</span><span class="boolean">false</span><span class="operator">></span><span class="punctuation">)</span> <span class="operator">=></span> <span class="keyword">void</span><span class="punctuation">,</span>
  destroyDeps<span class="operator">?</span><span class="operator">:</span> DependencyList<span class="punctuation">,</span>
<span class="punctuation">)</span><span class="operator">:</span> PersisterOrUndefined</code></pre><div class="table"><table><tr><th></th><th>Type</th><th>Description</th></tr><tr><th><code>store</code></th><td><code><span class="type"><a href="/api/store/interfaces/store/store/">Store</a></span></code></td><td><p>A reference to the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> for which to create a new <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> object.</p></td></tr><tr><th><code>create</code></th><td><code><span class="punctuation">(</span>store<span class="operator">:</span> <span class="type"><a href="/api/store/interfaces/store/store/">Store</a></span><span class="punctuation">)</span> <span class="operator">=></span> PersisterOrUndefined</code></td><td><p>A function for performing the creation steps of the <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> object for the <a href="/api/store/interfaces/store/store/"><code>Store</code></a>.</p></td></tr><tr><th><code>createDeps<span class="operator">?</span></code></th><td><code>DependencyList</code></td><td><p>An optional array of dependencies for the <code>create</code> function, which, if any change, result in its rerun. This parameter defaults to an empty array.</p></td></tr><tr><th><code>then<span class="operator">?</span></code></th><td><code><span class="punctuation">(</span>persister<span class="operator">:</span> <span class="type"><a href="/api/persisters/interfaces/persister/persister/">Persister</a></span><span class="operator">&lt;</span><span class="boolean">false</span><span class="operator">></span><span class="punctuation">)</span> <span class="operator">=></span> <span class="builtin">Promise</span><span class="operator">&lt;</span><span class="keyword">void</span><span class="operator">></span></code></td><td><p>An optional callback for performing asynchronous post-creation steps on the <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a>, such as starting automatic loading and saving.</p></td></tr><tr><th><code>thenDeps<span class="operator">?</span></code></th><td><code>DependencyList</code></td><td><p>An optional array of dependencies for the <code>then</code> callback, which, if any change, result in its rerun. This parameter defaults to an empty array.</p></td></tr><tr><th><code>destroy<span class="operator">?</span></code></th><td><code><span class="punctuation">(</span>persister<span class="operator">:</span> <span class="type"><a href="/api/persisters/interfaces/persister/persister/">Persister</a></span><span class="operator">&lt;</span><span class="boolean">false</span><span class="operator">></span><span class="punctuation">)</span> <span class="operator">=></span> <span class="keyword">void</span></code></td><td><p>An optional callback whenever the <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> is destroyed due to a change in the <code>createDeps</code> dependencies.</p></td></tr><tr><th><code>destroyDeps<span class="operator">?</span></code></th><td><code>DependencyList</code></td><td><p>An optional array of dependencies for the <code>destroy</code> callback, which, if any change, result in <code>destroy</code> and <code>then</code> being rerun. This parameter defaults to an empty array.</p></td></tr><tr><th class="right">returns</th><td><code>PersisterOrUndefined</code></td><td><p></p><p>A reference to the <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a>.</p><p></p></td></tr></table></div><p>It is possible to create a <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> outside of the React app with the regular createPersister function and pass it in, but you may prefer to create it within the app, perhaps inside the top-level component. To prevent a new <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> being created every time the app renders or re-renders, since v5.0 the <a href="/api/ui-react/functions/metrics-hooks/usecreatemetrics/"><code>useCreateMetrics</code></a> hook performs the creation in an effect.</p><p>If your <code>create</code> function (the second parameter to the hook) contains dependencies, the changing of which should cause the <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> to be recreated, you can provide them in an array in the third parameter, just as you would for any React hook with dependencies. The <a href="/api/store/interfaces/store/store/"><code>Store</code></a> passed in as the first parameter of this hook is used as a dependency by default.</p><p>A second callback, called <code>then</code>, can be provided as the fourth parameter. This is called after the creation, and, importantly, can be asynchronous, so that you can configure the <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> with the <a href="/api/persisters/interfaces/persister/persister/methods/load/startautoload/"><code>startAutoLoad</code></a> method and <a href="/api/persisters/interfaces/persister/persister/methods/save/startautosave/"><code>startAutoSave</code></a> method, for example. If this callback contains dependencies, the changing of which should cause the <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> to be reconfigured, you can provide them in an array in the fifth parameter. The <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> itself is used as a dependency by default.</p><p>Since v4.3.0, the <code>create</code> function can return undefined, meaning that you can enable or disable persistence conditionally within this hook. This is useful for applications which might turn on or off their cloud persistence or collaboration features.</p><p>Since v4.3.19, a <code>destroy</code> function can be provided which will be called after an old <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> is destroyed due to a change in the <code>createDeps</code> dependencies that causes a new one to be created. Use this to clean up any underlying storage objects that you set up during the <code>then</code> function, for example. If this callback itself contains additional dependencies, you can provide them in an array in the seventh parameter.</p><p>This hook ensures the <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> object is destroyed whenever a new one is created or the component is unmounted.</p><section class="s2"><h2>Examples</h2><p>This example creates a <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> at the top level of a React application. Even though the App component is rendered twice, the <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> creation only occurs once by default.</p><pre><code><span class="keyword">const</span> <span class="function-variable">App</span> <span class="operator">=</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
  <span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/ui-react/functions/store-hooks/usecreatestore/">useCreateStore</a></span><span class="punctuation">(</span>createStore<span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="keyword">const</span> persister <span class="operator">=</span> <span class="function"><a href="/api/ui-react/functions/persister-hooks/usecreatepersister/">useCreatePersister</a></span><span class="punctuation">(</span>
    store<span class="punctuation">,</span>
    <span class="punctuation">(</span><span class="parameter">store</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
      console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="string">'Persister created'</span><span class="punctuation">)</span><span class="punctuation">;</span>
      <span class="keyword">return</span> <span class="function"><a href="/api/persister-browser/functions/creation/createsessionpersister/">createSessionPersister</a></span><span class="punctuation">(</span>store<span class="punctuation">,</span> <span class="string">'pets'</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="punctuation">}</span><span class="punctuation">,</span>
    <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span>
    <span class="keyword">async</span> <span class="punctuation">(</span><span class="parameter">persister</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
      <span class="keyword">await</span> persister<span class="punctuation">.</span><span class="function"><a href="/api/persisters/interfaces/persister/persister/methods/load/startautoload/">startAutoLoad</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
      <span class="keyword">await</span> persister<span class="punctuation">.</span><span class="function"><a href="/api/persisters/interfaces/persister/persister/methods/save/startautosave/">startAutoSave</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="keyword">return</span> <span class="tag"><span class="tag"><span class="punctuation">&lt;</span>span</span><span class="punctuation">></span></span><span class="punctuation">{</span><span class="constant">JSON</span><span class="punctuation">.</span><span class="function">stringify</span><span class="punctuation">(</span><span class="function"><a href="/api/ui-react/functions/store-hooks/usetables/">useTables</a></span><span class="punctuation">(</span>store<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">}</span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span>span</span><span class="punctuation">></span></span><span class="punctuation">;</span>
<span class="punctuation">}</span><span class="punctuation">;</span>

sessionStorage<span class="punctuation">.</span><span class="function">setItem</span><span class="punctuation">(</span>
  <span class="string">'pets'</span><span class="punctuation">,</span>
  <span class="string">'[{"pets":{"fido":{"species":"dog"}}}, {}]'</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> app <span class="operator">=</span> document<span class="punctuation">.</span><span class="function">createElement</span><span class="punctuation">(</span><span class="string">'div'</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> root <span class="operator">=</span> ReactDOMClient<span class="punctuation">.</span><span class="function">createRoot</span><span class="punctuation">(</span>app<span class="punctuation">)</span><span class="punctuation">;</span>
root<span class="punctuation">.</span><span class="function">render</span><span class="punctuation">(</span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name">App</span></span> <span class="punctuation">/></span></span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Persister created'</span>

<span class="comment">// ...</span>
root<span class="punctuation">.</span><span class="function">render</span><span class="punctuation">(</span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name">App</span></span> <span class="punctuation">/></span></span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// No second Persister creation</span>

console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>app<span class="punctuation">.</span>innerHTML<span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> '&lt;span>{\"pets\":{\"fido\":{\"species\":\"dog\"}}}&lt;/span>'</span>

root<span class="punctuation">.</span><span class="function">unmount</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>This example creates a <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> at the top level of a React application. The App component is rendered twice, each with a different top-level prop. The <code>useCreatePersister</code> hook takes the <code>sessionKey</code> prop as a dependency, and so the <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> object is created again on the second render. The first is destroyed and the <code>destroy</code> parameter is called for it.</p><pre><code><span class="keyword">const</span> <span class="function-variable">App</span> <span class="operator">=</span> <span class="punctuation">(</span><span class="parameter"><span class="punctuation">{</span>sessionKey<span class="punctuation">}</span></span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
  <span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/ui-react/functions/store-hooks/usecreatestore/">useCreateStore</a></span><span class="punctuation">(</span>createStore<span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="keyword">const</span> persister <span class="operator">=</span> <span class="function"><a href="/api/ui-react/functions/persister-hooks/usecreatepersister/">useCreatePersister</a></span><span class="punctuation">(</span>
    store<span class="punctuation">,</span>
    <span class="punctuation">(</span><span class="parameter">store</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
      console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="template-string"><span class="template-punctuation">`</span><span class="string">Persister created for session key </span><span class="interpolation"><span class="interpolation-punctuation">${</span>sessionKey<span class="interpolation-punctuation">}</span></span><span class="template-punctuation">`</span></span><span class="punctuation">)</span><span class="punctuation">;</span>
      <span class="keyword">return</span> <span class="function"><a href="/api/persister-browser/functions/creation/createsessionpersister/">createSessionPersister</a></span><span class="punctuation">(</span>store<span class="punctuation">,</span> sessionKey<span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="punctuation">}</span><span class="punctuation">,</span>
    <span class="punctuation">[</span>sessionKey<span class="punctuation">]</span><span class="punctuation">,</span>
    <span class="keyword">async</span> <span class="punctuation">(</span><span class="parameter">persister</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
      <span class="keyword">await</span> persister<span class="punctuation">.</span><span class="function"><a href="/api/persisters/interfaces/persister/persister/methods/load/startautoload/">startAutoLoad</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="punctuation">}</span><span class="punctuation">,</span>
    <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span>
    <span class="punctuation">(</span><span class="parameter">persister</span><span class="punctuation">)</span> <span class="operator">=></span>
      console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>
        <span class="template-string"><span class="template-punctuation">`</span><span class="string">Persister destroyed for session key </span><span class="interpolation"><span class="interpolation-punctuation">${</span>persister<span class="punctuation">.</span><span class="function"><a href="/api/persister-browser/interfaces/persister/localpersister/methods/getter/getstoragename/">getStorageName</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="interpolation-punctuation">}</span></span><span class="template-punctuation">`</span></span><span class="punctuation">,</span>
      <span class="punctuation">)</span><span class="punctuation">,</span>
  <span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="keyword">return</span> <span class="tag"><span class="tag"><span class="punctuation">&lt;</span>span</span><span class="punctuation">></span></span><span class="punctuation">{</span><span class="constant">JSON</span><span class="punctuation">.</span><span class="function">stringify</span><span class="punctuation">(</span><span class="function"><a href="/api/ui-react/functions/store-hooks/usetables/">useTables</a></span><span class="punctuation">(</span>store<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">}</span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span>span</span><span class="punctuation">></span></span><span class="punctuation">;</span>
<span class="punctuation">}</span><span class="punctuation">;</span>

sessionStorage<span class="punctuation">.</span><span class="function">setItem</span><span class="punctuation">(</span>
  <span class="string">'fidoStore'</span><span class="punctuation">,</span>
  <span class="string">'[{"pets":{"fido":{"species":"dog"}}}, {}]'</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>
sessionStorage<span class="punctuation">.</span><span class="function">setItem</span><span class="punctuation">(</span>
  <span class="string">'cujoStore'</span><span class="punctuation">,</span>
  <span class="string">'[{"pets":{"cujo":{"species":"dog"}}}, {}]'</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> app <span class="operator">=</span> document<span class="punctuation">.</span><span class="function">createElement</span><span class="punctuation">(</span><span class="string">'div'</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> root <span class="operator">=</span> ReactDOMClient<span class="punctuation">.</span><span class="function">createRoot</span><span class="punctuation">(</span>app<span class="punctuation">)</span><span class="punctuation">;</span>
root<span class="punctuation">.</span><span class="function">render</span><span class="punctuation">(</span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name">App</span></span> <span class="attr-name">sessionKey</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>fidoStore<span class="punctuation">"</span></span> <span class="punctuation">/></span></span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Persister created for session key fidoStore'</span>

<span class="comment">// ...</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>app<span class="punctuation">.</span>innerHTML<span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> '&lt;span>{\"pets\":{\"fido\":{\"species\":\"dog\"}}}&lt;/span>'</span>

root<span class="punctuation">.</span><span class="function">render</span><span class="punctuation">(</span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name">App</span></span> <span class="attr-name">sessionKey</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>cujoStore<span class="punctuation">"</span></span> <span class="punctuation">/></span></span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Persister destroyed for session key fidoStore'</span>
<span class="comment">// -> 'Persister created for session key cujoStore'</span>

<span class="comment">// ...</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>app<span class="punctuation">.</span>innerHTML<span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> '&lt;span>{\"pets\":{\"cujo\":{\"species\":\"dog\"}}}&lt;/span>'</span>

root<span class="punctuation">.</span><span class="function">unmount</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Persister destroyed for session key cujoStore'</span>
</code></pre></section></section></article><aside></aside></main><footer><nav><a id="tw" href="https://twitter.com/tinybasejs" target="_blank">Twitter</a><a id="fb" href="https://facebook.com/tinybasejs" target="_blank">Facebook</a></nav><nav><a href="/">TinyBase 5.0.0-beta.5</a> © 2021- All Rights Reserved</nav></footer></body><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-D1MGR8VRWJ"></script><script>window.dataLayer=window.dataLayer||[];function g(){dataLayer.push(arguments);}g('js',new Date());g('config','G-D1MGR8VRWJ');</script></html>