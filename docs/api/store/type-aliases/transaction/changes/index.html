<!DOCTYPE html><html lang="en"><head><link rel="dns-prefetch" href="https://www.googletagmanager.com/"><link href="https://www.googletagmanager.com/gtag/js?id=G-D1MGR8VRWJ" rel="preload" as="script"><link rel="preload" as="font" href="/fonts/inter.woff2" type="font/woff2" crossorigin="anonymous"><link rel="preload" as="font" href="/fonts/inconsolata.woff2" type="font/woff2" crossorigin="anonymous"><link rel="preload" as="font" href="/fonts/icons.woff2" type="font/woff2" crossorigin="anonymous"><link rel="preload" as="font" href="/fonts/shantell.woff2" type="font/woff2" crossorigin="anonymous"><title>Changes | TinyBase</title><meta name="description" content="The Changes type describes the net meaningful changes that were made to a Store during a transaction."><meta property="og:type" content="website"><meta property="og:title" content="Changes | TinyBase"><meta property="og:description" content="The Changes type describes the net meaningful changes that were made to a Store during a transaction."><meta property="og:url" content="https://beta.tinybase.org/api/store/type-aliases/transaction/changes/"><meta property="og:image" content="https://beta.tinybase.org/favicon_pad.png"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Changes | TinyBase"><meta name="twitter:description" content="The Changes type describes the net meaningful changes that were made to a Store during a transaction."><meta name="twitter:site" content="@tinybasejs"><meta name="twitter:image" content="https://beta.tinybase.org/favicon_pad.png"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="stylesheet" href="/css/index.css"><link rel="canonical" href="https://beta.tinybase.org/api/store/type-aliases/transaction/changes/"><script src="/js/app.js"></script></head><body><header><a href="/"><img src="/favicon.svg" alt="TinyBase logo"><span>TinyBase <em title="5.0.0-beta.6">β</em></span></a><nav><ul><li><a href="/guides/">Guides</a></li><li><a href="/demos/">Demos</a></li><li><a href="/api/">API</a></li><li><a href="https://github.com/tinyplex/tinybase">GitHub</a></li></ul></nav><span id="dark"></span></header><main><nav><ul><li id="root" class="parent open"><span></span><a href="/">TinyBase</a><ul><li id="G" class="parent"><span></span><a href="/guides/">Guides</a></li><li id="D2" class="parent"><span></span><a href="/demos/">Demos</a></li><li id="api" class="parent open"><span></span><a href="/api/">API</a><ul><li id="s" class="parent open"><span></span><a href="/api/store/"><code>store</code></a><ul><li id="s/I" class="parent"><span></span><a href="/api/store/interfaces/">Interfaces</a></li><li id="s/F" class="parent"><span></span><a href="/api/store/functions/">Functions</a></li><li id="s/TA8" class="parent open"><span></span><a href="/api/store/type-aliases/">Type Aliases</a><ul><li id="s/TA8/L2" class="parent"><span></span><a href="/api/store/type-aliases/listener/">Listener type aliases</a></li><li id="s/TA8/C4" class="parent"><span></span><a href="/api/store/type-aliases/callback/">Callback type aliases</a></li><li id="s/TA8/S4" class="parent"><span></span><a href="/api/store/type-aliases/schema/">Schema type aliases</a></li><li id="s/TA8/S5" class="parent"><span></span><a href="/api/store/type-aliases/store/">Store type aliases</a></li><li id="s/TA8/T6" class="parent open"><span></span><a href="/api/store/type-aliases/transaction/">Transaction type aliases</a><ul><li id="CTI"><span></span><a href="/api/store/type-aliases/transaction/changedtableids/"><code>ChangedTableIds</code></a></li><li id="CRI"><span></span><a href="/api/store/type-aliases/transaction/changedrowids/"><code>ChangedRowIds</code></a></li><li id="CCI"><span></span><a href="/api/store/type-aliases/transaction/changedcellids/"><code>ChangedCellIds</code></a></li><li id="CC3"><span></span><a href="/api/store/type-aliases/transaction/changedcell/"><code>ChangedCell</code></a></li><li id="CC4"><span></span><a href="/api/store/type-aliases/transaction/changedcells/"><code>ChangedCells</code></a></li><li id="IC"><span></span><a href="/api/store/type-aliases/transaction/invalidcells/"><code>InvalidCells</code></a></li><li id="CV"><span></span><a href="/api/store/type-aliases/transaction/changedvalues/"><code>ChangedValues</code></a></li><li id="IV"><span></span><a href="/api/store/type-aliases/transaction/invalidvalues/"><code>InvalidValues</code></a></li><li id="CV2"><span></span><a href="/api/store/type-aliases/transaction/changedvalue/"><code>ChangedValue</code></a></li><li id="CVI"><span></span><a href="/api/store/type-aliases/transaction/changedvalueids/"><code>ChangedValueIds</code></a></li><li id="C7" class="current"><span></span><a href="/api/store/type-aliases/transaction/changes/"><code>Changes</code></a></li><li id="IAOR"><span></span><a href="/api/store/type-aliases/transaction/idaddedorremoved/"><code>IdAddedOrRemoved</code></a></li><li id="TL4"><span></span><a href="/api/store/type-aliases/transaction/transactionlog/"><code>TransactionLog</code></a></li></ul></li><li id="s/TA8/D6" class="parent"><span></span><a href="/api/store/type-aliases/development/">Development type aliases</a></li></ul></li></ul></li><li id="m" class="parent"><span></span><a href="/api/mergeable-store/"><code>mergeable-store</code></a></li><li id="m3" class="parent"><span></span><a href="/api/metrics/"><code>metrics</code></a></li><li id="i" class="parent"><span></span><a href="/api/indexes/"><code>indexes</code></a></li><li id="r" class="parent"><span></span><a href="/api/relationships/"><code>relationships</code></a></li><li id="q" class="parent"><span></span><a href="/api/queries/"><code>queries</code></a></li><li id="c" class="parent"><span></span><a href="/api/checkpoints/"><code>checkpoints</code></a></li><li id="c3" class="parent"><span></span><a href="/api/common/"><code>common</code></a></li><li id="p" class="parent"><span></span><a href="/api/persisters/"><code>persisters</code></a></li><li id="p2" class="parent"><span></span><a href="/api/persister-automerge/"><code>persister-automerge</code></a></li><li id="p3" class="parent"><span></span><a href="/api/persister-browser/"><code>persister-browser</code></a></li><li id="p4" class="parent"><span></span><a href="/api/persister-cr-sqlite-wasm/"><code>persister-cr-sqlite-wasm</code></a></li><li id="p5" class="parent"><span></span><a href="/api/persister-electric-sql/"><code>persister-electric-sql</code></a></li><li id="p6" class="parent"><span></span><a href="/api/persister-expo-sqlite/"><code>persister-expo-sqlite</code></a></li><li id="p7" class="parent"><span></span><a href="/api/persister-expo-sqlite-next/"><code>persister-expo-sqlite-next</code></a></li><li id="p8" class="parent"><span></span><a href="/api/persister-file/"><code>persister-file</code></a></li><li id="p9" class="parent"><span></span><a href="/api/persister-file/"><code>persister-file</code></a></li><li id="p10" class="parent"><span></span><a href="/api/persister-indexed-db/"><code>persister-indexed-db</code></a></li><li id="p11" class="parent"><span></span><a href="/api/persister-libsql/"><code>persister-libsql</code></a></li><li id="p12" class="parent"><span></span><a href="/api/persister-partykit-client/"><code>persister-partykit-client</code></a></li><li id="p13" class="parent"><span></span><a href="/api/persister-partykit-server/"><code>persister-partykit-server</code></a></li><li id="p14" class="parent"><span></span><a href="/api/persister-powersync/"><code>persister-powersync</code></a></li><li id="p15" class="parent"><span></span><a href="/api/persister-remote/"><code>persister-remote</code></a></li><li id="p16" class="parent"><span></span><a href="/api/persister-sqlite-wasm/"><code>persister-sqlite-wasm</code></a></li><li id="p17" class="parent"><span></span><a href="/api/persister-sqlite3/"><code>persister-sqlite3</code></a></li><li id="p18" class="parent"><span></span><a href="/api/persister-yjs/"><code>persister-yjs</code></a></li><li id="t3" class="parent"><span></span><a href="/api/tools/"><code>tools</code></a></li><li id="u" class="parent"><span></span><a href="/api/ui-react/"><code>ui-react</code></a></li><li id="u2" class="parent"><span></span><a href="/api/ui-react-dom/"><code>ui-react-dom</code></a></li></ul></li></ul></li></ul></nav><article><nav><ul><li><a href="/">TinyBase</a></li><li><a href="/api/">API</a></li><li><a href="/api/store/"><code>store</code></a></li><li><a href="/api/store/type-aliases/">Type Aliases</a></li><li><a href="/api/store/type-aliases/transaction/">Transaction type aliases</a></li><li><a href="/api/store/type-aliases/transaction/changes/"><code>Changes</code></a></li></ul></nav><section class="s1" id="/api/store/type-aliases/transaction/changes/" data-id="C7"><h1><code>Changes</code></h1><p>The <code>Changes</code> type describes the net meaningful changes that were made to a <a href="/api/store/interfaces/store/store/"><code>Store</code></a> during a transaction.</p><pre><code><span class="punctuation">[</span>changedTables<span class="operator">:</span> <span class="punctuation">{</span><span class="punctuation">[</span>tableId<span class="operator">:</span> <span class="type"><a href="/api/common/type-aliases/identity/id/">Id</a></span><span class="punctuation">]</span><span class="operator">:</span> <span class="punctuation">{</span><span class="punctuation">[</span>rowId<span class="operator">:</span> <span class="type"><a href="/api/common/type-aliases/identity/id/">Id</a></span><span class="punctuation">]</span><span class="operator">:</span> <span class="punctuation">{</span><span class="punctuation">[</span>cellId<span class="operator">:</span> <span class="type"><a href="/api/common/type-aliases/identity/id/">Id</a></span><span class="punctuation">]</span><span class="operator">:</span> <span class="type"><a href="/api/store/type-aliases/store/cellorundefined/">CellOrUndefined</a></span><span class="punctuation">}</span> <span class="operator">|</span> <span class="keyword">undefined</span><span class="punctuation">}</span> <span class="operator">|</span> <span class="keyword">undefined</span><span class="punctuation">}</span><span class="punctuation">,</span> changedValues<span class="operator">:</span> <span class="punctuation">{</span><span class="punctuation">[</span>valueId<span class="operator">:</span> <span class="type"><a href="/api/common/type-aliases/identity/id/">Id</a></span><span class="punctuation">]</span><span class="operator">:</span> <span class="type"><a href="/api/store/type-aliases/store/valueorundefined/">ValueOrUndefined</a></span><span class="punctuation">}</span><span class="punctuation">,</span> isChanges<span class="operator">:</span> <span class="number">1</span><span class="punctuation">]</span></code></pre><p>This contains mostly equivalent information to a <a href="/api/store/type-aliases/transaction/transactionlog/"><code>TransactionLog</code></a>, but in a form that can be more efficiently parsed and serialized (for example in the case of synchronization between systems).</p><p>It is an array of two objects, representing tabular and keyed value changes. If the first item is an empty object, it means no tabular changes were made. If the second item is an empty object, it means no keyed value changes were made.</p><p>If not empty, the first object has an entry for each <a href="/api/store/type-aliases/store/table/"><code>Table</code></a> in a <a href="/api/store/interfaces/store/store/"><code>Store</code></a> that has had a change within it. If the entry is null, it means that whole <a href="/api/store/type-aliases/store/table/"><code>Table</code></a> was deleted. Otherwise, the entry will be an object with an entry for each <a href="/api/store/type-aliases/store/row/"><code>Row</code></a> in that <a href="/api/store/type-aliases/store/table/"><code>Table</code></a> that had a change within it. In turn, if that entry is null, it means the <a href="/api/store/type-aliases/store/row/"><code>Row</code></a> was deleted. Otherwise, the entry will be an object with an entry for each <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> in that <a href="/api/store/type-aliases/store/row/"><code>Row</code></a> that had a change within it. If the entry is null, the <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> was deleted, otherwise it will contain the new value the <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> was changed to during the transaction.</p><p>If not empty, the second object has an entry for each <a href="/api/store/type-aliases/store/value/"><code>Value</code></a> in a <a href="/api/store/interfaces/store/store/"><code>Store</code></a> that has had a change. If the entry is null, the <a href="/api/store/type-aliases/store/value/"><code>Value</code></a> was deleted, otherwise it will contain the new <a href="/api/store/type-aliases/store/value/"><code>Value</code></a> it was changed to during the transaction.</p><p>A third, required, item in the array is the digit <code>1</code>, so that instances of <a href="/api/store/type-aliases/store/content/"><code>Content</code></a> and <code>Changes</code> types can be disambiguated.</p><section class="s2"><h2>Example</h2><p>The following is a valid <code>Changes</code> array that conveys the following:</p><pre><code><span class="punctuation">[</span>
  <span class="punctuation">{</span>                     <span class="comment">// changes to tabular data in the Store</span>
    <span class="property">"pets"</span><span class="operator">:</span> <span class="punctuation">{</span>             <span class="comment">// this Table was changed</span>
      <span class="property">"fido"</span><span class="operator">:</span> <span class="null">null</span><span class="punctuation">,</span>         <span class="comment">// this Row was deleted</span>
      <span class="property">"felix"</span><span class="operator">:</span> <span class="punctuation">{</span>            <span class="comment">// this Row was changed</span>
        <span class="property">"sold"</span><span class="operator">:</span> <span class="boolean">true</span><span class="punctuation">,</span>         <span class="comment">// this Cell was changed</span>
        <span class="property">"price"</span><span class="operator">:</span> <span class="null">null</span><span class="punctuation">,</span>        <span class="comment">// this Cell was deleted</span>
      <span class="punctuation">}</span><span class="punctuation">,</span>
    <span class="punctuation">}</span><span class="punctuation">,</span>
    <span class="property">"pendingSales"</span><span class="operator">:</span> <span class="null">null</span><span class="punctuation">,</span> <span class="comment">// this Table was deleted</span>
  <span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="punctuation">{</span><span class="punctuation">}</span><span class="punctuation">,</span>                   <span class="comment">// no changes to keyed value data in the Store</span>
  <span class="number">1</span><span class="punctuation">,</span>                    <span class="comment">// indicates that this is a Changes array</span>
<span class="punctuation">]</span>
</code></pre></section><section class="s2"><h2>Since</h2><p>v4.0.0</p></section></section></article><aside></aside></main><footer><nav><a id="tw" href="https://twitter.com/tinybasejs" target="_blank">Twitter</a><a id="fb" href="https://facebook.com/tinybasejs" target="_blank">Facebook</a></nav><nav><a href="/">TinyBase 5.0.0-beta.6</a> © 2021- All Rights Reserved</nav></footer></body><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-D1MGR8VRWJ"></script><script>window.dataLayer=window.dataLayer||[];function g(){dataLayer.push(arguments);}g('js',new Date());g('config','G-D1MGR8VRWJ');</script></html>