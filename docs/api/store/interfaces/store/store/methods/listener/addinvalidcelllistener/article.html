<nav><ul><li><a href="/">TinyBase</a></li><li><a href="/api/">API</a></li><li><a href="/api/store/"><code>store</code></a></li><li><a href="/api/store/interfaces/">Interfaces</a></li><li><a href="/api/store/interfaces/store/store/"><code>Store</code></a></li><li><a href="/api/store/interfaces/store/store/methods/listener/">Listener methods</a></li><li><a href="/api/store/interfaces/store/store/methods/listener/addinvalidcelllistener/"><code>addInvalidCellListener</code></a></li></ul></nav><section class="s1" id="/api/store/interfaces/store/store/methods/listener/addinvalidcelllistener/" data-id="aICL"><h1><code>addInvalidCellListener</code></h1><p>The <code>addInvalidCellListener</code> method registers a listener function with the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> that will be called whenever invalid data was attempted to be written to a <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a>.</p><pre><code><span class="function"><a href="/api/store/interfaces/store/store/methods/listener/addinvalidcelllistener/">addInvalidCellListener</a></span><span class="punctuation">(</span>
  tableId<span class="operator">:</span> <span class="type"><a href="/api/common/type-aliases/identity/idornull/">IdOrNull</a></span><span class="punctuation">,</span>
  rowId<span class="operator">:</span> <span class="type"><a href="/api/common/type-aliases/identity/idornull/">IdOrNull</a></span><span class="punctuation">,</span>
  cellId<span class="operator">:</span> <span class="type"><a href="/api/common/type-aliases/identity/idornull/">IdOrNull</a></span><span class="punctuation">,</span>
  listener<span class="operator">:</span> <span class="type"><a href="/api/store/type-aliases/listener/invalidcelllistener/">InvalidCellListener</a></span><span class="operator">&lt;</span><span class="type"><a href="/api/store/interfaces/store/store/">Store</a></span><span class="operator">></span><span class="punctuation">,</span>
  mutator<span class="operator">?</span><span class="operator">:</span> <span class="builtin">boolean</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="operator">:</span> <span class="builtin">string</span></code></pre><div class="table"><table><tr><th></th><th>Type</th><th>Description</th></tr><tr><th><code>tableId</code></th><td><code><span class="type"><a href="/api/common/type-aliases/identity/idornull/">IdOrNull</a></span></code></td><td><p>The <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a> of the <a href="/api/store/type-aliases/store/table/"><code>Table</code></a> to listen to, or <code>null</code> as a wildcard.</p></td></tr><tr><th><code>rowId</code></th><td><code><span class="type"><a href="/api/common/type-aliases/identity/idornull/">IdOrNull</a></span></code></td><td><p>The <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a> of the <a href="/api/store/type-aliases/store/row/"><code>Row</code></a> to listen to, or <code>null</code> as a wildcard.</p></td></tr><tr><th><code>cellId</code></th><td><code><span class="type"><a href="/api/common/type-aliases/identity/idornull/">IdOrNull</a></span></code></td><td><p>The <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a> of the <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> to listen to, or <code>null</code> as a wildcard.</p></td></tr><tr><th><code>listener</code></th><td><code><span class="type"><a href="/api/store/type-aliases/listener/invalidcelllistener/">InvalidCellListener</a></span><span class="operator">&lt;</span><span class="type"><a href="/api/store/interfaces/store/store/">Store</a></span><span class="operator">></span></code></td><td><p>The function that will be called whenever an attempt to write invalid data to the matching <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> was made.</p></td></tr><tr><th><code>mutator<span class="operator">?</span></code></th><td><code><span class="builtin">boolean</span></code></td><td><p>An optional boolean that indicates that the listener mutates <a href="/api/store/interfaces/store/store/"><code>Store</code></a> data.</p></td></tr><tr><th class="right">returns</th><td><code><span class="builtin">string</span></code></td><td><p></p><p>A unique <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a> for the listener that can later be used to call it explicitly, or to remove it.</p><p></p></td></tr></table></div><p>The provided listener is an <a href="/api/store/type-aliases/listener/invalidcelllistener/"><code>InvalidCellListener</code></a> function, and will be called with a reference to the <a href="/api/store/interfaces/store/store/"><code>Store</code></a>, the <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a> of the <a href="/api/store/type-aliases/store/table/"><code>Table</code></a>, the <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a> of the <a href="/api/store/type-aliases/store/row/"><code>Row</code></a>, and the <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a> of <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> that was being attempted to be changed. It is also given the invalid value of the <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a>, which could have been of absolutely any type. Since there could have been multiple failed attempts to set the <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> within a single transaction, this is an array containing each attempt, chronologically.</p><p>You can either listen to a single <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> (by specifying the <a href="/api/store/type-aliases/store/table/"><code>Table</code></a> <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a>, <a href="/api/store/type-aliases/store/row/"><code>Row</code></a> <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a>, and <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a> as the method&#x27;s first three parameters) or invalid attempts to change any <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> (by providing <code>null</code> wildcards).</p><p>All, some, or none of the <code>tableId</code>, <code>rowId</code>, and <code>cellId</code> parameters can be wildcarded with <code>null</code>. You can listen to a specific <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> in a specific <a href="/api/store/type-aliases/store/row/"><code>Row</code></a> in a specific <a href="/api/store/type-aliases/store/table/"><code>Table</code></a>, any <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> in any <a href="/api/store/type-aliases/store/row/"><code>Row</code></a> in any <a href="/api/store/type-aliases/store/table/"><code>Table</code></a>, for example - or every other combination of wildcards.</p><p>Use the optional mutator parameter to indicate that there is code in the listener that will mutate <a href="/api/store/interfaces/store/store/"><code>Store</code></a> data. If set to <code>false</code> (or omitted), such mutations will be silently ignored. All relevant mutator listeners (with this flag set to <code>true</code>) are called <em>before</em> any non-mutator listeners (since the latter may become relevant due to changes made in the former). The changes made by mutator listeners do not fire other mutating listeners, though they will fire non-mutator listeners.</p><p>Special note should be made for how the listener will be called when a <a href="/api/store/type-aliases/schema/tablesschema/"><code>TablesSchema</code></a> is present. The listener will be called:</p><ul><li>if a <a href="/api/store/type-aliases/store/table/"><code>Table</code></a> is being updated that is not specified in the <a href="/api/store/type-aliases/schema/tablesschema/"><code>TablesSchema</code></a></li><li>if a <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> is of the wrong type specified in the <a href="/api/store/type-aliases/schema/tablesschema/"><code>TablesSchema</code></a></li><li>if a <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> is omitted and is not defaulted in the <a href="/api/store/type-aliases/schema/tablesschema/"><code>TablesSchema</code></a></li><li>if an empty <a href="/api/store/type-aliases/store/row/"><code>Row</code></a> is provided and there are no <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> defaults in the <a href="/api/store/type-aliases/schema/tablesschema/"><code>TablesSchema</code></a></li></ul><p>The listener will not be called if a <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> that is defaulted in the <a href="/api/store/type-aliases/schema/tablesschema/"><code>TablesSchema</code></a> is not provided, as long as all of the Cells that are <em>not</em> defaulted <em>are</em> provided.</p><p>To help understand all of these schema-based conditions, please see the <a href="/api/store/type-aliases/schema/tablesschema/"><code>TablesSchema</code></a> example below.</p><section class="s2"><h2>Examples</h2><p>This example registers a listener that responds to any invalid changes to a specific <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a>.</p><pre><code><span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/store/functions/creation/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settables/">setTables</a></span><span class="punctuation">(</span><span class="punctuation">{</span>
  <span class="literal-property">pets</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">fido</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'dog'</span><span class="punctuation">,</span> <span class="literal-property">color</span><span class="operator">:</span> <span class="string">'brown'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> listenerId <span class="operator">=</span> store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/listener/addinvalidcelllistener/">addInvalidCellListener</a></span><span class="punctuation">(</span>
  <span class="string">'pets'</span><span class="punctuation">,</span>
  <span class="string">'fido'</span><span class="punctuation">,</span>
  <span class="string">'color'</span><span class="punctuation">,</span>
  <span class="punctuation">(</span><span class="parameter">store<span class="punctuation">,</span> tableId<span class="punctuation">,</span> rowId<span class="punctuation">,</span> cellId<span class="punctuation">,</span> invalidCells</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
    console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="string">'Invalid color cell in fido row in pets table'</span><span class="punctuation">)</span><span class="punctuation">;</span>
    console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>invalidCells<span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setcell/">setCell</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">,</span> <span class="string">'color'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">r</span><span class="operator">:</span> <span class="string">'96'</span><span class="punctuation">,</span> <span class="literal-property">g</span><span class="operator">:</span> <span class="string">'4B'</span><span class="punctuation">,</span> <span class="literal-property">b</span><span class="operator">:</span> <span class="string">'00'</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Invalid color cell in fido row in pets table'</span>
<span class="comment">// -> [{r: '96', g: '4B', b: '00'}]</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/listener/dellistener/">delListener</a></span><span class="punctuation">(</span>listenerId<span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>This example registers a listener that responds to any invalid changes to any <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> - in a <a href="/api/store/interfaces/store/store/"><code>Store</code></a> <em>without</em> a <a href="/api/store/type-aliases/schema/tablesschema/"><code>TablesSchema</code></a>. Note also how it then responds to cases where empty or invalid <a href="/api/store/type-aliases/store/row/"><code>Row</code></a> objects, or <a href="/api/store/type-aliases/store/table/"><code>Table</code></a> objects, or <a href="/api/store/type-aliases/store/tables/"><code>Tables</code></a> objects are provided.</p><pre><code><span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/store/functions/creation/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settables/">setTables</a></span><span class="punctuation">(</span><span class="punctuation">{</span>
  <span class="literal-property">pets</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">fido</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'dog'</span><span class="punctuation">,</span> <span class="literal-property">color</span><span class="operator">:</span> <span class="string">'brown'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> listenerId <span class="operator">=</span> store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/listener/addinvalidcelllistener/">addInvalidCellListener</a></span><span class="punctuation">(</span>
  <span class="keyword">null</span><span class="punctuation">,</span>
  <span class="keyword">null</span><span class="punctuation">,</span>
  <span class="keyword">null</span><span class="punctuation">,</span>
  <span class="punctuation">(</span><span class="parameter">store<span class="punctuation">,</span> tableId<span class="punctuation">,</span> rowId<span class="punctuation">,</span> cellId</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
    console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>
      <span class="template-string"><span class="template-punctuation">`</span><span class="string">Invalid </span><span class="interpolation"><span class="interpolation-punctuation">${</span>cellId<span class="interpolation-punctuation">}</span></span><span class="string"> cell in </span><span class="interpolation"><span class="interpolation-punctuation">${</span>rowId<span class="interpolation-punctuation">}</span></span><span class="string"> row in </span><span class="interpolation"><span class="interpolation-punctuation">${</span>tableId<span class="interpolation-punctuation">}</span></span><span class="string"> table</span><span class="template-punctuation">`</span></span><span class="punctuation">,</span>
    <span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setcell/">setCell</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">,</span> <span class="string">'color'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">r</span><span class="operator">:</span> <span class="string">'96'</span><span class="punctuation">,</span> <span class="literal-property">g</span><span class="operator">:</span> <span class="string">'4B'</span><span class="punctuation">,</span> <span class="literal-property">b</span><span class="operator">:</span> <span class="string">'00'</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Invalid color cell in fido row in pets table'</span>
store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settable/">setTable</a></span><span class="punctuation">(</span><span class="string">'sales'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">fido</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">date</span><span class="operator">:</span> <span class="keyword">new</span> <span class="class-name">Date</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Invalid date cell in fido row in sales table'</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setrow/">setRow</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'felix'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Invalid undefined cell in felix row in pets table'</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setrow/">setRow</a></span><span class="punctuation">(</span><span class="string">'filter'</span><span class="punctuation">,</span> <span class="string">'name'</span><span class="punctuation">,</span> <span class="regex"><span class="regex-delimiter">/</span><span class="regex-source">[a-z]?</span><span class="regex-delimiter">/</span></span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Invalid undefined cell in name row in filter table'</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setrow/">setRow</a></span><span class="punctuation">(</span><span class="string">'sales'</span><span class="punctuation">,</span> <span class="string">'2021'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">forecast</span><span class="operator">:</span> <span class="keyword">undefined</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Invalid forecast cell in 2021 row in sales table'</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/addrow/">addRow</a></span><span class="punctuation">(</span><span class="string">'filter'</span><span class="punctuation">,</span> <span class="regex"><span class="regex-delimiter">/</span><span class="regex-source">[0-9]?</span><span class="regex-delimiter">/</span></span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Invalid undefined cell in undefined row in filter table'</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settable/">setTable</a></span><span class="punctuation">(</span><span class="string">'raw'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Invalid undefined cell in undefined row in raw table'</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settable/">setTable</a></span><span class="punctuation">(</span><span class="string">'raw'</span><span class="punctuation">,</span> <span class="punctuation">[</span><span class="string">'row1'</span><span class="punctuation">,</span> <span class="string">'row2'</span><span class="punctuation">]</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Invalid undefined cell in undefined row in raw table'</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settables/">setTables</a></span><span class="punctuation">(</span><span class="punctuation">[</span><span class="string">'table1'</span><span class="punctuation">,</span> <span class="string">'table2'</span><span class="punctuation">]</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Invalid undefined cell in undefined row in undefined table'</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/listener/dellistener/">delListener</a></span><span class="punctuation">(</span>listenerId<span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>This example registers a listener that responds to any invalid changes to any <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> - in a <a href="/api/store/interfaces/store/store/"><code>Store</code></a> <em>with</em> a <a href="/api/store/type-aliases/schema/tablesschema/"><code>TablesSchema</code></a>. Note how it responds to cases where missing parameters are provided for optional, and defaulted <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> values in a <a href="/api/store/type-aliases/store/row/"><code>Row</code></a>.</p><pre><code><span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/store/functions/creation/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settablesschema/">setTablesSchema</a></span><span class="punctuation">(</span><span class="punctuation">{</span>
  <span class="literal-property">pets</span><span class="operator">:</span> <span class="punctuation">{</span>
    <span class="literal-property">species</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">type</span><span class="operator">:</span> <span class="string">'string'</span><span class="punctuation">}</span><span class="punctuation">,</span>
    <span class="literal-property">color</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">type</span><span class="operator">:</span> <span class="string">'string'</span><span class="punctuation">,</span> <span class="keyword">default</span><span class="operator">:</span> <span class="string">'unknown'</span><span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> listenerId <span class="operator">=</span> store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/listener/addinvalidcelllistener/">addInvalidCellListener</a></span><span class="punctuation">(</span>
  <span class="keyword">null</span><span class="punctuation">,</span>
  <span class="keyword">null</span><span class="punctuation">,</span>
  <span class="keyword">null</span><span class="punctuation">,</span>
  <span class="punctuation">(</span><span class="parameter">store<span class="punctuation">,</span> tableId<span class="punctuation">,</span> rowId<span class="punctuation">,</span> cellId</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
    console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>
      <span class="template-string"><span class="template-punctuation">`</span><span class="string">Invalid </span><span class="interpolation"><span class="interpolation-punctuation">${</span>cellId<span class="interpolation-punctuation">}</span></span><span class="string"> cell in </span><span class="interpolation"><span class="interpolation-punctuation">${</span>rowId<span class="interpolation-punctuation">}</span></span><span class="string"> row in </span><span class="interpolation"><span class="interpolation-punctuation">${</span>tableId<span class="interpolation-punctuation">}</span></span><span class="string"> table</span><span class="template-punctuation">`</span></span><span class="punctuation">,</span>
    <span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setrow/">setRow</a></span><span class="punctuation">(</span><span class="string">'sales'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">price</span><span class="operator">:</span> <span class="number">5</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Invalid price cell in fido row in sales table'</span>
<span class="comment">// The listener is called, because the sales Table is not in the schema</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setrow/">setRow</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'felix'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="boolean">true</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Invalid species cell in felix row in pets table'</span>
<span class="comment">// The listener is called, because species is invalid...</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/getter/getrow/">getRow</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'felix'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {color: 'unknown'}</span>
<span class="comment">// ...even though a Row was set with the default value</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setrow/">setRow</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">color</span><span class="operator">:</span> <span class="string">'brown'</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Invalid species cell in fido row in pets table'</span>
<span class="comment">// The listener is called, because species is missing and not defaulted...</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/getter/getrow/">getRow</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {color: 'brown'}</span>
<span class="comment">// ...even though a Row was set</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setrow/">setRow</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'rex'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'dog'</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/getter/getrow/">getRow</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'rex'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {species: 'dog', color: 'unknown'}</span>
<span class="comment">// The listener is not called, because color is defaulted</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/deleter/deltables/">delTables</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settablesschema/">setTablesSchema</a></span><span class="punctuation">(</span><span class="punctuation">{</span>
  <span class="literal-property">pets</span><span class="operator">:</span> <span class="punctuation">{</span>
    <span class="literal-property">species</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">type</span><span class="operator">:</span> <span class="string">'string'</span><span class="punctuation">}</span><span class="punctuation">,</span>
    <span class="literal-property">color</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">type</span><span class="operator">:</span> <span class="string">'string'</span><span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setrow/">setRow</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'cujo'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'Invalid species cell in cujo row in pets table'</span>
<span class="comment">// -> 'Invalid color cell in cujo row in pets table'</span>
<span class="comment">// -> 'Invalid undefined cell in cujo row in pets table'</span>
<span class="comment">// The listener is called multiple times, because neither Cell is defaulted</span>
<span class="comment">// and the Row as a whole is empty</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/listener/dellistener/">delListener</a></span><span class="punctuation">(</span>listenerId<span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>This example registers a listener that responds to any changes to a specific <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a>, and which also mutates the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> itself.</p><pre><code><span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/store/functions/creation/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settables/">setTables</a></span><span class="punctuation">(</span><span class="punctuation">{</span>
  <span class="literal-property">pets</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">fido</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'dog'</span><span class="punctuation">,</span> <span class="literal-property">color</span><span class="operator">:</span> <span class="string">'brown'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> listenerId <span class="operator">=</span> store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/listener/addinvalidcelllistener/">addInvalidCellListener</a></span><span class="punctuation">(</span>
  <span class="string">'pets'</span><span class="punctuation">,</span>
  <span class="string">'fido'</span><span class="punctuation">,</span>
  <span class="string">'color'</span><span class="punctuation">,</span>
  <span class="punctuation">(</span><span class="parameter">store<span class="punctuation">,</span> tableId<span class="punctuation">,</span> rowId<span class="punctuation">,</span> cellId<span class="punctuation">,</span> invalidCells</span><span class="punctuation">)</span> <span class="operator">=></span>
    store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setcell/">setCell</a></span><span class="punctuation">(</span>
      <span class="string">'meta'</span><span class="punctuation">,</span>
      <span class="string">'invalid_updates'</span><span class="punctuation">,</span>
      <span class="template-string"><span class="template-punctuation">`</span><span class="interpolation"><span class="interpolation-punctuation">${</span>tableId<span class="interpolation-punctuation">}</span></span><span class="string">_</span><span class="interpolation"><span class="interpolation-punctuation">${</span>rowId<span class="interpolation-punctuation">}</span></span><span class="string">_</span><span class="interpolation"><span class="interpolation-punctuation">${</span>cellId<span class="interpolation-punctuation">}</span></span><span class="template-punctuation">`</span></span><span class="punctuation">,</span>
      <span class="constant">JSON</span><span class="punctuation">.</span><span class="function">stringify</span><span class="punctuation">(</span>invalidCells<span class="punctuation">[</span><span class="number">0</span><span class="punctuation">]</span><span class="punctuation">)</span><span class="punctuation">,</span>
    <span class="punctuation">)</span><span class="punctuation">,</span>
  <span class="boolean">true</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setcell/">setCell</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'fido'</span><span class="punctuation">,</span> <span class="string">'color'</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="literal-property">r</span><span class="operator">:</span> <span class="string">'96'</span><span class="punctuation">,</span> <span class="literal-property">g</span><span class="operator">:</span> <span class="string">'4B'</span><span class="punctuation">,</span> <span class="literal-property">b</span><span class="operator">:</span> <span class="string">'00'</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/getter/getrow/">getRow</a></span><span class="punctuation">(</span><span class="string">'meta'</span><span class="punctuation">,</span> <span class="string">'invalid_updates'</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {'pets_fido_color': '{"r":"96","g":"4B","b":"00"}'}</span>

store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/listener/dellistener/">delListener</a></span><span class="punctuation">(</span>listenerId<span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre></section><section class="s2"><h2>Since</h2><p>v1.1.0</p></section></section>