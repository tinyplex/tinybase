<nav><ul><li><a href="/">TinyBase</a></li><li><a href="/api/">API</a></li><li><a href="/api/persister-browser/"><code>persister-browser</code></a></li><li><a href="/api/persister-browser/interfaces/">Interfaces</a></li><li><a href="/api/persister-browser/interfaces/persister/sessionpersister/"><code>SessionPersister</code></a></li><li><a href="/api/persister-browser/interfaces/persister/sessionpersister/methods/load/">Load methods</a></li><li><a href="/api/persister-browser/interfaces/persister/sessionpersister/methods/load/load/"><code>load</code></a></li></ul></nav><section class="s1" id="/api/persister-browser/interfaces/persister/sessionpersister/methods/load/load/" data-id="l4"><h1><code>load</code></h1><p>The <code>load</code> method gets persisted data from storage, and loads it into the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> with which the <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> is associated, once.</p><pre><code><span class="function"><a href="/api/persister-browser/interfaces/persister/sessionpersister/methods/load/load/">load</a></span><span class="punctuation">(</span>
  initialTables<span class="operator">?</span><span class="operator">:</span> <span class="type"><a href="/api/store/type-aliases/store/tables/">Tables</a></span><span class="punctuation">,</span>
  initialValues<span class="operator">?</span><span class="operator">:</span> <span class="type"><a href="/api/store/type-aliases/store/values/">Values</a></span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="operator">:</span> <span class="builtin">Promise</span><span class="operator">&lt;</span><span class="type"><a href="/api/persister-browser/interfaces/persister/sessionpersister/">SessionPersister</a></span><span class="operator">></span></code></pre><div class="table"><table><tr><th></th><th>Type</th><th>Description</th></tr><tr><th><code>initialTables<span class="operator">?</span></code></th><td><code><span class="type"><a href="/api/store/type-aliases/store/tables/">Tables</a></span></code></td><td><p>An optional <a href="/api/store/type-aliases/store/tables/"><code>Tables</code></a> object used when the underlying storage has not previously been populated.</p></td></tr><tr><th><code>initialValues<span class="operator">?</span></code></th><td><code><span class="type"><a href="/api/store/type-aliases/store/values/">Values</a></span></code></td><td><p>An optional <a href="/api/store/type-aliases/store/values/"><code>Values</code></a> object used when the underlying storage has not previously been populated, since v3.0.</p></td></tr><tr><th class="right">returns</th><td><code><span class="builtin">Promise</span><span class="operator">&lt;</span><span class="type"><a href="/api/persister-browser/interfaces/persister/sessionpersister/">SessionPersister</a></span><span class="operator">></span></code></td><td><p></p><p>A Promise containing a reference to the <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> object.</p><p></p></td></tr></table></div><p>The optional parameters allow you to specify what the initial content for the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> will be if there is nothing currently persisted or if the load fails (for example when the <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> is remote and the environment is offline). This allows you to fallback or instantiate a <a href="/api/store/interfaces/store/store/"><code>Store</code></a> whether it&#x27;s loading from previously persisted storage or being run for the first time.</p><p>This method is asynchronous because the persisted data may be on a remote machine or a filesystem. Even for those storage types that are synchronous (like browser storage) it is still recommended that you <code>await</code> calls to this method or handle the return type natively as a Promise.</p><section class="s2"><h2>Examples</h2><p>This example creates an empty <a href="/api/store/interfaces/store/store/"><code>Store</code></a>, and loads data into it from the browser&#x27;s session storage, which for the purposes of this example has been previously populated.</p><pre><code>sessionStorage<span class="punctuation">.</span><span class="function">setItem</span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'[{"pets":{"fido":{"species":"dog"}}},{}]'</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/store/functions/creation/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> persister <span class="operator">=</span> <span class="function"><a href="/api/persister-browser/functions/creation/createsessionpersister/">createSessionPersister</a></span><span class="punctuation">(</span>store<span class="punctuation">,</span> <span class="string">'pets'</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">await</span> persister<span class="punctuation">.</span><span class="function"><a href="/api/persister-browser/interfaces/persister/sessionpersister/methods/load/load/">load</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/getter/gettables/">getTables</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {pets: {fido: {species: 'dog'}}}</span>

sessionStorage<span class="punctuation">.</span><span class="function"><a href="/api/checkpoints/interfaces/checkpoints/checkpoints/methods/lifecycle/clear/">clear</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>This example creates an empty <a href="/api/store/interfaces/store/store/"><code>Store</code></a>, and loads data into it from the browser&#x27;s session storage, which is at first empty, so the optional parameter is used. The second time the <code>load</code> method is called, data has previously been persisted and instead, that is loaded.</p><pre><code><span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/store/functions/creation/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> persister <span class="operator">=</span> <span class="function"><a href="/api/persister-browser/functions/creation/createsessionpersister/">createSessionPersister</a></span><span class="punctuation">(</span>store<span class="punctuation">,</span> <span class="string">'pets'</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">await</span> persister<span class="punctuation">.</span><span class="function"><a href="/api/persister-browser/interfaces/persister/sessionpersister/methods/load/load/">load</a></span><span class="punctuation">(</span><span class="punctuation">{</span><span class="literal-property">pets</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">fido</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'dog'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/getter/gettables/">getTables</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {pets: {fido: {species: 'dog'}}}</span>

sessionStorage<span class="punctuation">.</span><span class="function">setItem</span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="string">'[{"pets":{"toto":{"species":"dog"}}},{}]'</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">await</span> persister<span class="punctuation">.</span><span class="function"><a href="/api/persister-browser/interfaces/persister/sessionpersister/methods/load/load/">load</a></span><span class="punctuation">(</span><span class="punctuation">{</span><span class="literal-property">pets</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">fido</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">species</span><span class="operator">:</span> <span class="string">'dog'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>store<span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/getter/gettables/">getTables</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> {pets: {toto: {species: 'dog'}}}</span>

sessionStorage<span class="punctuation">.</span><span class="function"><a href="/api/checkpoints/interfaces/checkpoints/checkpoints/methods/lifecycle/clear/">clear</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre></section></section>