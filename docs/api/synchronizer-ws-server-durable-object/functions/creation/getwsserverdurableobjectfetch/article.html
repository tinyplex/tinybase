<nav><ul><li><a href="/">TinyBase</a></li><li><a href="/api/">API</a></li><li><a href="/api/synchronizer-ws-server-durable-object/"><code>synchronizer-ws-server-durable-object</code></a></li><li><a href="/api/synchronizer-ws-server-durable-object/functions/">Functions</a></li><li><a href="/api/synchronizer-ws-server-durable-object/functions/creation/getwsserverdurableobjectfetch/"><code>getWsServerDurableObjectFetch</code></a></li></ul></nav><section class="s1" id="/api/synchronizer-ws-server-durable-object/functions/creation/getwsserverdurableobjectfetch/" data-id="gWSDOF"><h1><code>getWsServerDurableObjectFetch</code></h1><p>The <code>getWsServerDurableObjectFetch</code> function returns a convenient handler for a Cloudflare worker to route requests to the fetch handler of a <a href="/api/synchronizer-ws-server-durable-object/classes/creation/wsserverdurableobject/"><code>WsServerDurableObject</code></a> for the given namespace.</p><pre><code><span class="generic-function"><span class="function"><a href="/api/synchronizer-ws-server-durable-object/functions/creation/getwsserverdurableobjectfetch/">getWsServerDurableObjectFetch</a></span><span class="generic"><span class="operator">&lt;</span>Namespace<span class="operator">></span></span></span><span class="punctuation">(</span>namespace<span class="operator">:</span> Namespace<span class="punctuation">)</span><span class="operator">:</span> <span class="punctuation">(</span>request<span class="operator">:</span> Request<span class="punctuation">,</span> env<span class="operator">:</span> <span class="punctuation">{</span><span class="punctuation">[</span><span class="keyword">namespace</span> <span class="keyword">in</span> Namespace<span class="punctuation">]</span><span class="operator">:</span> DurableObjectNamespace<span class="operator">&lt;</span>WsServerDurableObject<span class="operator">></span><span class="punctuation">}</span><span class="punctuation">)</span> <span class="operator">=></span> Response</code></pre><div class="table"><table><tr><th></th><th>Type</th><th>Description</th></tr><tr><th><code><span class="keyword">namespace</span></code></th><td><code>Namespace</code></td><td><p>A string for the namespace of the Durable Objects that you want this worker to route requests to.</p></td></tr><tr><th class="right">returns</th><td><code><span class="punctuation">(</span>request<span class="operator">:</span> Request<span class="punctuation">,</span> env<span class="operator">:</span> <span class="punctuation">{</span><span class="punctuation">[</span><span class="keyword">namespace</span> <span class="keyword">in</span> Namespace<span class="punctuation">]</span><span class="operator">:</span> DurableObjectNamespace<span class="operator">&lt;</span>WsServerDurableObject<span class="operator">></span><span class="punctuation">}</span><span class="punctuation">)</span> <span class="operator">=></span> Response</code></td><td><p></p><p>A fetch handler that routes WebSocket upgrade requests to a Durable Object.</p><p></p></td></tr></table></div><p>The implementation of the function that this returns requires the request to be a WebSocket &#x27;Upgrade&#x27; request, and for the client to have provided a <code>sec-websocket-key</code> header that the server can use as a unique key for the client.</p><p>It then takes the path of the HTTP request and routes the upgrade request to a Durable Object (in the given namespace) for that path. From then on, the Durable Object handles all the WebSocket communication.</p><p>Note that you&#x27;ll need to have a Wrangler configuration that connects your Durable Object class to the namespace. In other words, you&#x27;ll have something like this in your <code>wrangler.toml</code> file.</p><pre><code><span class="punctuation">[</span><span class="punctuation">[</span><span class="table">durable_objects.bindings</span><span class="punctuation">]</span><span class="punctuation">]</span>
<span class="key">name</span> <span class="punctuation">=</span> <span class="string">"MyDurableObjects"</span>
<span class="key">class_name</span> <span class="punctuation">=</span> <span class="string">"MyDurableObject"</span>
</code></pre><p>Note that it is not required to use this handler to route <a href="/">TinyBase</a> client requests in your Cloudflare app. If you have your own custom routing logic, path scheme, or authentication, for example, you can easily implement that in the worker&#x27;s fetch method yourself. See the <a href="https://developers.cloudflare.com/durable-objects/best-practices/create-durable-object-stubs-and-send-requests/#invoking-the-fetch-handler">Durable Objects documentation</a> for examples.</p><p>You can also pass a newly created request to the Durable Object&#x27;s <code>fetch</code> method. For example, you can overwrite the &#x27;path&#x27; that the Durable Object thinks it is serving, perhaps to inject a unique authenticated user <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a> that wasn&#x27;t actually provided by the client WebSocket.</p><section class="s2"><h2>Example</h2><p>This example sets up default routing of the WebSocket upgrade request to a Durable Object in the <code>MyDurableObjects</code> namespace. This would require the <code>wrangler.toml</code> configuration shown above.</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>
  WsServerDurableObject<span class="punctuation">,</span>
  getWsServerDurableObjectFetch<span class="punctuation">,</span>
<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/synchronizers/synchronizer-ws-server-durable-object'</span><span class="punctuation">;</span>

<span class="keyword">export</span> <span class="keyword">class</span> <span class="class-name">MyDurableObject</span> <span class="keyword">extends</span> <span class="class-name"><a href="/api/synchronizer-ws-server-durable-object/classes/creation/wsserverdurableobject/">WsServerDurableObject</a></span> <span class="punctuation">{</span><span class="punctuation">}</span>

<span class="keyword">export</span> <span class="keyword">default</span> <span class="punctuation">{</span><span class="literal-property">fetch</span><span class="operator">:</span> <span class="function"><a href="/api/synchronizer-ws-server-durable-object/functions/creation/getwsserverdurableobjectfetch/">getWsServerDurableObjectFetch</a></span><span class="punctuation">(</span><span class="string">'MyDurableObjects'</span><span class="punctuation">)</span><span class="punctuation">}</span><span class="punctuation">;</span>
</code></pre></section><section class="s2"><h2>Since</h2><p>v5.4.0</p></section></section>