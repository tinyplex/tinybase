<nav><ul><li><a href="/">TinyBase</a></li><li><a href="/api/">API</a></li><li><a href="/api/tools/"><code>tools</code></a></li><li><a href="/api/tools/interfaces/">Interfaces</a></li><li><a href="/api/tools/interfaces/tools/tools/"><code>Tools</code></a></li><li><a href="/api/tools/interfaces/tools/tools/methods/modelling/">Modelling methods</a></li><li><a href="/api/tools/interfaces/tools/tools/methods/modelling/getstoreapi/"><code>getStoreApi</code></a></li></ul></nav><section class="s1" id="/api/tools/interfaces/tools/tools/methods/modelling/getstoreapi/" data-id="gSA"><h1><code>getStoreApi</code></h1><p>The <code>getStoreApi</code> method returns code-generated <code>.d.ts</code> and <code>.ts(x)</code> files that describe the schema of a <a href="/api/store/interfaces/store/store/"><code>Store</code></a> and React bindings (since v3.1) in an ORM style.</p><pre><code><span class="function"><a href="/api/tools/interfaces/tools/tools/methods/modelling/getstoreapi/">getStoreApi</a></span><span class="punctuation">(</span>storeName<span class="operator">:</span> <span class="builtin">string</span><span class="punctuation">)</span><span class="operator">:</span> <span class="punctuation">[</span><span class="builtin">string</span><span class="punctuation">,</span> <span class="builtin">string</span><span class="punctuation">,</span> <span class="builtin">string</span><span class="punctuation">,</span> <span class="builtin">string</span><span class="punctuation">]</span></code></pre><div class="table"><table><tr><th></th><th>Type</th><th>Description</th></tr><tr><th><code>storeName</code></th><td><code><span class="builtin">string</span></code></td><td><p>The name you want to provide to the generated <a href="/api/store/interfaces/store/store/"><code>Store</code></a>, which should also be used to save the <code>.d.ts</code>, <code>.ts</code>, and <code>.tsx</code> files.</p></td></tr><tr><th class="right">returns</th><td><code><span class="punctuation">[</span><span class="builtin">string</span><span class="punctuation">,</span> <span class="builtin">string</span><span class="punctuation">,</span> <span class="builtin">string</span><span class="punctuation">,</span> <span class="builtin">string</span><span class="punctuation">]</span></code></td><td><p></p><p>A set of four strings representing the contents of the <code>.d.ts</code>, <code>.ts</code>, and <code>.tsx</code> files for the generated <a href="/api/store/interfaces/store/store/"><code>Store</code></a> and React modules.</p><p></p></td></tr></table></div><p>If the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> does not already have an explicit <a href="/api/store/type-aliases/schema/tablesschema/"><code>TablesSchema</code></a> or <a href="/api/store/type-aliases/schema/valuesschema/"><code>ValuesSchema</code></a> associated with it, the data in the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> will be scanned to attempt to infer new schemas. The method returns four strings (which should be saved as files) though if no schema can be inferred, the strings will be empty.</p><p>The method takes a single argument which represents the name you want the generated store object to have in code. You are expected to save the four files yourself, as the following:</p><ul><li><code>[storeName].d.ts</code> as the main definition,</li><li><code>[storeName].ts</code> as the main library,</li><li><code>[storeName]-ui-react.d.ts</code> as the <a href="/api/ui-react/"><code>ui-react</code></a> module definition,</li><li><code>[storeName]-ui-react.tsx</code> as the <a href="/api/ui-react/"><code>ui-react</code></a> module library.</li></ul><p>Also you should save these alongside each other so that the <code>.ts(x)</code> files can import types from the <code>.d.ts</code> files.</p><p>The <code>.d.ts</code> and <code>.ts(x)</code> files that are generated are designed to resemble the main <a href="/">TinyBase</a> <a href="/api/store/interfaces/store/store/"><code>Store</code></a> and React binding files, but provide named types and methods that describe the domain of the schema in the <a href="/api/store/interfaces/store/store/"><code>Store</code></a>.</p><p>For example, from a <a href="/api/store/interfaces/store/store/"><code>Store</code></a> that has a <code>pets</code> <a href="/api/store/type-aliases/store/table/"><code>Table</code></a>, you will get methods like <code>getPetsTable</code>, types like <code>PetsRow</code>, and hooks and components that are more specific versions of the underlying <a href="/api/store/interfaces/store/store/methods/getter/gettable/"><code>getTable</code></a> method or the <a href="/api/store/type-aliases/store/row/"><code>Row</code></a> type, and so on. For example:</p><div class="table"><table><thead><tr><th><a href="/api/store/interfaces/store/store/"><code>Store</code></a> type</th><th>Equivalent generated type</th></tr></thead><tbody><tr><td><a href="/api/store/type-aliases/store/table/"><code>Table</code></a></td><td>[Table]<a href="/api/store/type-aliases/store/table/"><code>Table</code></a></td></tr><tr><td><a href="/api/store/type-aliases/store/row/"><code>Row</code></a></td><td>[Table]<a href="/api/store/type-aliases/store/row/"><code>Row</code></a></td></tr><tr><td>(<a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a>) <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a></td><td>[Table]CellId</td></tr><tr><td><a href="/api/store/type-aliases/callback/cellcallback/"><code>CellCallback</code></a></td><td>[Table]<a href="/api/store/type-aliases/callback/cellcallback/"><code>CellCallback</code></a></td></tr><tr><td>...</td><td>...</td></tr></tbody></table></div><div class="table"><table><thead><tr><th><a href="/api/store/interfaces/store/store/"><code>Store</code></a> method</th><th>Equivalent generated method</th></tr></thead><tbody><tr><td><a href="/api/store/interfaces/store/store/methods/setter/settable/"><code>setTable</code></a></td><td>set[Table]<a href="/api/store/type-aliases/store/table/"><code>Table</code></a></td></tr><tr><td><a href="/api/store/interfaces/store/store/methods/getter/hasrow/"><code>hasRow</code></a></td><td>has[Table]<a href="/api/store/type-aliases/store/row/"><code>Row</code></a></td></tr><tr><td><a href="/api/store/interfaces/store/store/methods/getter/getcell/"><code>getCell</code></a></td><td>get[Table][Cell]<a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a></td></tr><tr><td>...</td><td>...</td></tr></tbody></table></div><p>Equivalent to the <a href="/">TinyBase</a> <a href="/api/store/functions/creation/createstore/"><code>createStore</code></a> function, a <code>create[StoreName]</code> function will also be created. This acts as the main entry point to the generated implementation.</p><p>Each method is refined correctly to take, or return, the types specified by the schema. For example, if the <code>pets</code> <a href="/api/store/type-aliases/store/table/"><code>Table</code></a> has a numeric <code>price</code> <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> in the schema, the <code>getPetsPriceCell</code> method will be typed to return a number.</p><p>The tables above include just a sample of the generated output. For the full set of methods and types generated by this method, inspect the output directly.</p><section class="s2"><h2>Examples</h2><p>This example creates a <a href="/api/tools/interfaces/tools/tools/"><code>Tools</code></a> object and generates code for a <a href="/api/store/interfaces/store/store/"><code>Store</code></a> that already has a <a href="/api/store/type-aliases/schema/tablesschema/"><code>TablesSchema</code></a>.</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>createStore<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">{</span>createTools<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/tools'</span><span class="punctuation">;</span>

<span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/store/functions/creation/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settablesschema/">setTablesSchema</a></span><span class="punctuation">(</span><span class="punctuation">{</span>
  <span class="literal-property">pets</span><span class="operator">:</span> <span class="punctuation">{</span>
    <span class="literal-property">price</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">type</span><span class="operator">:</span> <span class="string">'number'</span><span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> <span class="punctuation">[</span>dTs<span class="punctuation">,</span> ts<span class="punctuation">,</span> _uiReactDTs<span class="punctuation">,</span> _uiReactTsx<span class="punctuation">]</span> <span class="operator">=</span>
  <span class="function"><a href="/api/tools/functions/creation/createtools/">createTools</a></span><span class="punctuation">(</span>store<span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/tools/interfaces/tools/tools/methods/modelling/getstoreapi/">getStoreApi</a></span><span class="punctuation">(</span><span class="string">'shop'</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> dTsLines <span class="operator">=</span> dTs<span class="punctuation">.</span><span class="function">split</span><span class="punctuation">(</span><span class="string">'\n'</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>dTsLines<span class="punctuation">[</span><span class="number">3</span><span class="punctuation">]</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> `export type Tables = {'pets'?: {[rowId: Id]: {'price'?: number}}};`</span>

<span class="keyword">const</span> tsLines <span class="operator">=</span> ts<span class="punctuation">.</span><span class="function">split</span><span class="punctuation">(</span><span class="string">'\n'</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>tsLines<span class="punctuation">[</span><span class="number">39</span><span class="punctuation">]</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'getPetsTable: (): PetsTable => store.getTable(PETS) as PetsTable,'</span>
</code></pre><p>This example creates a <a href="/api/tools/interfaces/tools/tools/"><code>Tools</code></a> object and generates code for a <a href="/api/store/interfaces/store/store/"><code>Store</code></a> that doesn&#x27;t already have a <a href="/api/store/type-aliases/schema/tablesschema/"><code>TablesSchema</code></a>.</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>createStore<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase'</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">{</span>createTools<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/tools'</span><span class="punctuation">;</span>

<span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/store/functions/creation/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settable/">setTable</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="punctuation">{</span>
  <span class="literal-property">fido</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">price</span><span class="operator">:</span> <span class="number">5</span><span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="literal-property">felix</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">price</span><span class="operator">:</span> <span class="number">4</span><span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> <span class="punctuation">[</span>dTs<span class="punctuation">,</span> ts<span class="punctuation">,</span> _uiReactDTs<span class="punctuation">,</span> _uiReactTsx<span class="punctuation">]</span> <span class="operator">=</span>
  <span class="function"><a href="/api/tools/functions/creation/createtools/">createTools</a></span><span class="punctuation">(</span>store<span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/tools/interfaces/tools/tools/methods/modelling/getstoreapi/">getStoreApi</a></span><span class="punctuation">(</span><span class="string">'shop'</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> dTsLines <span class="operator">=</span> dTs<span class="punctuation">.</span><span class="function">split</span><span class="punctuation">(</span><span class="string">'\n'</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>dTsLines<span class="punctuation">[</span><span class="number">3</span><span class="punctuation">]</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> `export type Tables = {'pets'?: {[rowId: Id]: {'price': number}}};`</span>

<span class="keyword">const</span> tsLines <span class="operator">=</span> ts<span class="punctuation">.</span><span class="function">split</span><span class="punctuation">(</span><span class="string">'\n'</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span>tsLines<span class="punctuation">[</span><span class="number">41</span><span class="punctuation">]</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// -> 'getPetsTable: (): PetsTable => store.getTable(PETS) as PetsTable,'</span>
</code></pre></section><section class="s2"><h2>Since</h2><p>v2.2.0</p></section></section>