"use strict";(()=>{var M=document,o=t=>M.querySelector(t);var L=t=>M.getElementById(t);var T=(t,s,e)=>{let n=(t.className??"").split(" ");e(n,n.indexOf(s)),t.className=n.join(" ")},v=(t,s)=>T(t,s,(e,n)=>n==-1?e.push(s):null),p=(t,s)=>T(t,s,(e,n)=>n!=-1?e.splice(n,1):null);var l="dark",g="light",u="auto",H=()=>f(),f=()=>{let t=matchMedia("(prefers-color-scheme: dark)"),s=()=>{let e=localStorage.getItem(l)??u;o("#dark")?.setAttribute("class",e),o("html").className=e==l||e==u&&t.matches?l:g};t.addEventListener("change",s),window.addEventListener("storage",e=>{e.storageArea==localStorage&&e.key==l&&s()}),addEventListener("load",()=>{o("#dark").addEventListener("click",()=>{let e=localStorage.getItem(l);localStorage.setItem(l,e==l?g:e==g?u:l),s()}),s()}),s()};H();addEventListener("load",()=>{let t=o("body > main > nav"),s=o("body > main > article");if(t==null||s==null)return;let e=new Map,n=new IntersectionObserver(m=>{m.forEach(a=>{let r=a.target,d=a.target.className,c=/s\d+/.test(d)?parseInt(d.substr(1)):0,i=e.get(c);i==null&&(i=new Set,e.set(c,i)),a.isIntersecting?i.add(r):(i.delete(r),p(L(r.dataset.id),"current"))});let E=0;e.forEach((a,r)=>{a.size>0&&r>E&&(E=r)}),e.forEach((a,r)=>a.forEach(d=>{let c=L(d.dataset.id);r==E?v(c,"current"):p(c,"current")}))});s.querySelectorAll("section[data-id]").forEach(m=>n.observe(m))});})();
