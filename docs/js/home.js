"use strict";(()=>{var Ee="v7.0.0-beta.1";var zo="TinyBase",st=document,pe=()=>{addEventListener("load",()=>{let t=Hs("#version");t.innerText=Ee,t.style.width=t.scrollWidth+"px"})},jo=null,Se=()=>jo??=Hs("body > main > nav"),_o=null,Ce=()=>_o??=Hs("body > main > article"),Pt=t=>t.preventDefault(),Hs=t=>st.querySelector(t),Is=(t,n)=>t.querySelector(n),Bo=t=>st.getElementById(t),ns=(t,n,c={},r)=>{let a=st.createElement(t);return Object.entries(c).forEach(d=>a.setAttribute(...d)),r!=null&&(a.innerText=r),n!=null?n.appendChild(a):a},Js=(t,n)=>t.classList.add(n);var ht=(t,n)=>t.classList.remove(n);var ye=(t,n=!0)=>{let c=Se();["?","#"].forEach(r=>{t.includes(r)&&(t=t.substring(0,t.indexOf(r)))}),fetch(`${t}nav.json`).then(r=>r.json()).then(r=>{ht(Is(c,"li.current"),"current"),me(r,Is(c,"ul"))}),fetch(`${t}article.html`).then(r=>r.text()).then(r=>{let a=Ce();a.innerHTML=r,a.scrollTo(0,0),Wo()}),n&&history.pushState(null,"",t)},Wo=()=>{let t=Is(Ce(),":scope iframe"),n=t?.parentElement;if(t==null||n==null)return;let c=n.insertBefore(ns("form",null,{action:"https://codepen.io/pen/define",method:"post",target:"_blank"}),t);n.insertBefore(ns("a",null,{id:"penEdit"},"Open this demo in CodePen"),t).onclick=()=>{c.childNodes.length==0?fetch("pen.json").then(r=>r.text()).then(r=>{ns("input",c,{type:"hidden",name:"data",value:r}),c.submit()}):c.submit()}},me=({i:t,n,u:c,r,c:a,p:d,o:T,_:z},Y)=>{let S=Se(),E=Bo(t);if(E==null){E=ns("li",Y,{id:t}),ns("span",E);let f=ns("a",E,{href:c});r?ns("code",f,{},n):f.innerText=n,d&&Js(E,"parent")}if(T&&Js(E,"open"),z!=null){let f=Is(E,"ul")??ns("ul",E);z.forEach(u=>{me(u,f)})}if(a){Js(E,"current"),st.title=`${n} | ${zo}`;let f=E.getBoundingClientRect(),u=S.getBoundingClientRect();f.top<u.top?S.scrollBy(0,f.top-u.top):f.bottom>u.bottom&&S.scrollBy(0,Math.min(f.bottom-u.bottom,f.top-u.top))}};var js="dark",rn="light",ln="auto",Ve=()=>{let t=matchMedia("(prefers-color-scheme: dark)"),n=()=>{let c=localStorage.getItem(js)??ln;Hs("#dark")?.setAttribute("class",c),Hs("html").className=c==js||c==ln&&t.matches?js:rn};t.addEventListener("change",n),window.addEventListener("storage",c=>{c.storageArea==localStorage&&c.key==js&&n()}),addEventListener("load",()=>{Hs("#dark").addEventListener("click",()=>{let c=localStorage.getItem(js);localStorage.setItem(js,c==js?rn:c==rn?ln:js),n()}),n()}),n()};var De=t=>typeof t,Bs="",Po=De(Bs),Re=t=>Bs+t,ms=t=>t==null,Ks=(t,n,c)=>ms(t)?c?.():n(t),Uo=t=>De(t)==Po,ut=t=>Array.isArray(t),bs=t=>t.length,ko=(t,n)=>t.test(n),He=(t,n)=>t.every(n),qo=(t,n)=>bs(t)===bs(n)&&He(t,(c,r)=>n[r]===c),ve=(t,n)=>He(t,(c,r)=>r==0||n(t[r-1],c)<=0),we=(t,n)=>t.sort(n),Gs=(t,n)=>t.forEach(n),Jo=(t,n)=>t.map(n),Ko=t=>bs(t)==0,Go=(t,n,c)=>t.reduce(n,c),Ne=(t,...n)=>t.push(...n),$o=t=>t.shift(),be=t=>n=>Go(fn(n),(c,r)=>c+t(r),0),Fe=t=>t?.size??0,Ae=be(Fe),Yo=be(Ae),tt=(t,n)=>t?.has(n)??!1,dt=t=>ms(t)||Fe(t)==0,fn=t=>[...t?.values()??[]],Me=t=>t.clear(),ds=(t,n)=>t?.forEach(n),nt=(t,n)=>t?.delete(n),Zo=Object,Oo=Zo.freeze,es=t=>new Map(t),ze=t=>[...t?.keys()??[]],k=(t,n)=>t?.get(n),gt=(t,n)=>ds(t,(c,r)=>n(r,c)),U=(t,n,c)=>ms(c)?(nt(t,n),t):t?.set(n,c),je=(t,n,c,r)=>(tt(t,n)?r?.(k(t,n)):U(t,n,c()),k(t,n)),an=(t,n,c,r,a=0)=>Ks((c?je:k)(t,n[a],a>bs(n)-2?c:es),d=>{if(a>bs(n)-2)return r?.(d)&&U(t,n[a]),d;let T=an(d,n,c,r,a+1);return dt(d)&&U(t,n[a]),T}),_s=t=>new Set(ut(t)||ms(t)?t:[t]),Ns=(t,n)=>t?.add(n),Qo=(t,n,c,r,a)=>{let d=t.hasRow,T=es(),z=es(),Y=es(),S=es(),E=es(),f=es(),u=()=>t,m=()=>ze(T),v=C=>gt(z,C),V=C=>tt(z,C),H=C=>k(T,C),q=C=>k(z,C),Ls=(C,_)=>U(z,C,_),Ts=(C,_,...cs)=>{let O=je(f,C,_s);return Gs(cs,p=>Ns(O,p)&&_&&t.callListener(p)),cs},Rs=(C,..._)=>Ks(k(f,C),cs=>{Gs(Ko(_)?fn(cs):_,O=>{t.delListener(O),nt(cs,O)}),dt(cs)&&U(f,C)}),Cs=(C,_)=>{U(T,C,_),tt(z,C)||(U(z,C,n()),U(S,C,es()),U(E,C,es()),a(Y))},vs=(C,_,cs,O,p)=>{Cs(C,_);let A=es(),Q=es(),X=k(S,C),is=k(E,C),Es=F=>{let $=ps=>t.getCell(_,F,ps),I=k(X,F),Ss=d(_,F)?c(O($,F)):void 0;if(I===Ss||ut(I)&&ut(Ss)&&qo(I,Ss)||U(A,F,[I,Ss]),!ms(p)){let ps=k(is,F),ws=d(_,F)?p($,F):void 0;ps!=ws&&U(Q,F,ws)}},gs=F=>{cs(()=>{ds(A,([,$],I)=>U(X,I,$)),ds(Q,($,I)=>U(is,I,$))},A,Q,X,is,F),Me(A),Me(Q)};gt(X,Es),t.hasTable(_)&&Gs(t.getRowIds(_),F=>{tt(X,F)||Es(F)}),gs(!0),Rs(C),Ts(C,0,t.addRowListener(_,null,(F,$,I)=>Es(I)),t.addTableListener(_,()=>gs()))},M=C=>{U(T,C),U(z,C),U(S,C),U(E,C),Rs(C),a(Y)};return[u,m,v,V,H,q,Ls,Cs,vs,M,C=>r(C,Y),()=>gt(f,M),Ts,Rs]},xe=(t,n)=>Uo(t)?c=>c(t):t??(()=>n??Bs),Xo=(t,n)=>{let c=new WeakMap;return r=>(c.has(r)||c.set(r,t(r)),c.get(r))},Io=(t,n)=>(t??0)<(n??0)?-1:1,sc=/^\d+$/,tc=()=>{let t=[],n=0;return[c=>(c?$o(t):null)??Bs+n++,c=>{ko(sc,c)&&bs(t)<1e3&&Ne(t,c)}]},nc=(t,n=[Bs])=>{let c=[],r=(a,d)=>d==bs(n)?Ne(c,a):n[d]===null?ds(a,T=>r(T,d+1)):Gs([n[d],null],T=>r(k(a,T),d+1));return r(t,0),c},ec=t=>{let n,[c,r]=tc(),a=es();return[(S,E,f,u=[],m=()=>[])=>{n??=t();let v=c(1);return U(a,v,[S,E,f,u,m]),Ns(an(E,f??[Bs],_s),v),v},(S,E,...f)=>Gs(nc(S,E),u=>ds(u,m=>k(a,m)[0](n,...E??[],...f))),S=>Ks(k(a,S),([,E,f])=>(an(E,f??[Bs],void 0,u=>(nt(u,S),dt(u)?1:0)),U(a,S),r(S),f)),S=>Ks(k(a,S),([E,,f=[],u,m])=>{let v=(...V)=>{let H=bs(V);H==bs(f)?E(n,...V,...m(V)):ms(f[H])?Gs(u[H]?.(...V)??[],q=>v(...V,q)):v(...V,f[H])};v()})]},_e=Xo(t=>{let n=es(),c=es(),[r,a,d]=ec(()=>O),[T,z,Y,S,E,f,u,,m,v,V,H]=Qo(t,es,p=>ms(p)?Bs:ut(p)?Jo(p,Re):Re(p),r,a),q=(p,A)=>tt(f(p),A),Ls=(p,A,Q,X,is,Es=Io)=>{let gs=ms(is)?void 0:([F],[$])=>is(F,$);return m(p,A,(F,$,I,Ss,ps,ws)=>{let ys=0,Ms=_s(),xs=_s(),rs=f(p);if(ds($,([J,ls],as)=>{let j=_s(J),Qs=_s(ls);ds(j,fs=>nt(Qs,fs)?nt(j,fs):0),ds(j,fs=>{Ns(Ms,fs),Ks(k(rs,fs),Vt=>{nt(Vt,as),dt(Vt)&&(U(rs,fs),ys=1)})}),ds(Qs,fs=>{Ns(Ms,fs),tt(rs,fs)||(U(rs,fs,_s()),ys=1),Ns(k(rs,fs),as),ms(X)||Ns(xs,fs)})}),F(),dt(ps)||(ws?gt(rs,J=>Ns(xs,J)):gt(I,J=>Ks(k(Ss,J),ls=>Gs(ut(ls)?ls:[ls],as=>Ns(xs,as)))),ds(xs,J=>{let ls=(j,Qs)=>Es(k(ps,j),k(ps,Qs),J),as=[...k(rs,J)];ve(as,ls)||(U(rs,J,_s(we(as,ls))),Ns(Ms,J))})),(ys||ws)&&!ms(gs)){let J=[...rs];ve(J,gs)||(u(p,es(we(J,gs))),ys=1)}ys&&a(n,[p]),ds(Ms,J=>a(c,[p,J]))},xe(Q),Ks(X,xe)),O},Ts=p=>Y((A,Q)=>p(A,X=>Cs(A,X,Q))),Rs=(p,A)=>Cs(p,A,f(p)),Cs=(p,A,Q)=>{let X=E(p);ds(Q,(is,Es)=>A(Es,gs=>ds(is,F=>gs(F,$=>t.forEachCell(X,F,$)))))},O={setIndexDefinition:Ls,delIndexDefinition:p=>(v(p),O),getStore:T,getIndexIds:z,forEachIndex:Ts,forEachSlice:Rs,hasIndex:S,hasSlice:q,getTableId:E,getSliceIds:p=>ze(f(p)),getSliceRowIds:(p,A)=>fn(k(f(p),A)),addIndexIdsListener:V,addSliceIdsListener:(p,A)=>r(A,n,[p]),addSliceRowIdsListener:(p,A,Q)=>r(Q,c,[p,A]),delListener:p=>(d(p),O),destroy:H,getListenerStats:()=>({sliceIds:Ae(n),sliceRowIds:Yo(c)})};return Oo(O)});var Os=t=>typeof t,ct="",oc=Os(ct),cc=Os(!0),Ge=Os(0),ic=Os(Os),Ut="type",$s="default",rc="Listener",lc="add",Ys="Has",Xt="Ids",ot="Table",Be=ot+"s",ac=ot+Xt,Gt="Row",fc=Gt+"Count",hc=Gt+Xt,Kt="Cell",We=Kt+Xt,$t="Value",Pe=$t+"s",gc=$t+Xt,N=t=>ct+t,uc=isFinite,dc=(t,n)=>t instanceof n,G=t=>t==null,K=(t,n,c)=>G(t)?c?.():n(t),$e=t=>t==oc||t==cc,hn=t=>Os(t)==ic,Ye=t=>Array.isArray(t),Ue=(t,n,c)=>t.slice(n,c),Fs=t=>t.length,Lc=(t,n)=>t.test(n),gn=async(t,n,c)=>{try{return await t()}catch(r){n?.(r)}},Tc=(t,n)=>t.includes(n),Ec=(t,n)=>t.every(n),pc=(t,n)=>Fs(t)===Fs(n)&&Ec(t,(c,r)=>n[r]===c),Sc=(t,n)=>t.sort(n),mt=(t,n)=>t.forEach(n),Yt=(t,n)=>t.map(n),Cc=(t,n,c)=>t.reduce(n,c),Zt=(t,...n)=>t.push(...n),yc=t=>t.shift(),Lt=t=>{let n=Os(t);return $e(n)||n==Ge&&uc(t)?n:void 0},ke=(t,n,c,r,a)=>G(a)?t.delCell(n,c,r,!0):t.setCell(n,c,r,a),qe=(t,n,c)=>G(c)?t.delValue(n):t.setValue(n,c),Cn=t=>n=>Cc(mc(n),(c,r)=>c+t(r),0),yn=t=>t?.size??0,mn=Cn(yn),pt=Cn(mn),un=Cn(pt),os=(t,n)=>t?.has(n)??!1,y=t=>G(t)||yn(t)==0,mc=t=>[...t?.values()??[]],dn=t=>t.clear(),w=(t,n)=>t?.forEach(n),Ot=(t,n)=>t?.delete(n),qs=Object,Je=t=>qs.getPrototypeOf(t),Vc=qs.isFrozen,Ze=qs.entries,Qt=t=>!G(t)&&K(Je(t),n=>n==qs.prototype||G(Je(n)),()=>!0),Rc=qs.keys,vc=qs.freeze,wc=(t=[])=>qs.fromEntries(t),St=(t,n)=>n in t,Oe=(t,n)=>(delete t[n],t),Mc=(t,n)=>mt(Ze(t),([c,r])=>n(r,c)),xc=(t,n)=>Yt(Ze(t),([c,r])=>n(r,c)),Ps=(t,n)=>wc(xc(t,(c,r)=>[r,n(c,r)])),Dc=t=>Fs(Rc(t)),Vs=t=>Qt(t)&&Dc(t)==0,Ws=(t,n,c,r=0)=>G(t)||!Qt(t)||!r&&Vs(t)||Vc(t)?(c?.(),!1):(Mc(t,(a,d)=>{n(a,d)||Oe(t,d)}),r?!0:!Vs(t)),R=t=>new Map(t),Tt=t=>[...t?.keys()??[]],g=(t,n)=>t?.get(n),Us=(t,n)=>w(t,(c,r)=>n(r,c)),Hc=(t,n)=>Yt([...t?.entries()??[]],([c,r])=>n(r,c)),b=(t,n,c)=>G(c)?(Ot(t,n),t):t?.set(n,c),ss=(t,n,c,r)=>(os(t,n)?r?.(g(t,n)):b(t,n,c()),g(t,n)),Zs=(t,n,c,r=b)=>(Ps(n,(a,d)=>c(t,d,a)),Us(t,a=>St(n,a)?0:r(t,a)),t),hs=(t,n,c,r)=>{let a={};return w(t,(d,T)=>{if(!c?.(d,T)){let z=n?n(d,T):d;r?.(z)||(a[T]=z)}}),a},En=(t,n,c)=>hs(t,r=>hs(r,n,c),y,Vs),kt=(t,n,c)=>hs(t,r=>En(r,n,c),y,Vs),ks=(t,n)=>{let c=R();return w(t,(r,a)=>c.set(a,n?.(r)??r)),c},pn=t=>ks(t,ks),Ln=t=>ks(t,pn),Sn=(t,n,c,r,a=0)=>K((c?ss:g)(t,n[a],a>Fs(n)-2?c:R),d=>{if(a>Fs(n)-2)return r?.(d)&&b(t,n[a]),d;let T=Sn(d,n,c,r,a+1);return y(d)&&b(t,n[a]),T}),Nc=JSON.stringify,Tn=JSON.parse,et=t=>Nc(t,(n,c)=>dc(c,Map)?qs.fromEntries([...c]):c),bc=(t,n)=>(t??0)<(n??0)?-1:1,Fc=/^\d+$/,Qe=()=>{let t=[],n=0;return[c=>(c?yc(t):null)??ct+n++,c=>{Lc(Fc,c)&&Fs(t)<1e3&&Zt(t,c)}]},Ct=t=>new Set(Ye(t)||G(t)?t:[t]),yt=(t,n)=>t?.add(n),Ac=(t,n=[ct])=>{let c=[],r=(a,d)=>d==Fs(n)?Zt(c,a):n[d]===null?w(a,T=>r(T,d+1)):mt([n[d],null],T=>r(g(a,T),d+1));return r(t,0),c},zc=t=>{let n,[c,r]=Qe(),a=R();return[(S,E,f,u=[],m=()=>[])=>{n??=t();let v=c(1);return b(a,v,[S,E,f,u,m]),yt(Sn(E,f??[ct],Ct),v),v},(S,E,...f)=>mt(Ac(S,E),u=>w(u,m=>g(a,m)[0](n,...E??[],...f))),S=>K(g(a,S),([,E,f])=>(Sn(E,f??[ct],void 0,u=>(Ot(u,S),y(u)?1:0)),b(a,S),r(S),f)),S=>K(g(a,S),([E,,f=[],u,m])=>{let v=(...V)=>{let H=Fs(V);H==Fs(f)?E(n,...V,...m(V)):G(f[H])?mt(u[H]?.(...V)??[],q=>v(...V,q)):v(...V,f[H])};v()})]},qt=t=>[t,t],W=(t,n=mn)=>n(t[0])+n(t[1]),P=()=>[R(),R()],Ke=t=>[...t],Jt=([t,n])=>t===n,Et=(t,n,c)=>b(t,n,g(t,n)==-c?void 0:c),Vn=()=>{let t,n,c=!1,r=!1,a=0,d=[],T=R(),z=R(),Y=R(),S=R(),E=R(),f=R(),u=R(),m=R(),v=R(),V=R(),H=R(),q=R(),Ls=R(),Ts=R(),Rs=Ct(),Cs=R(),vs=R(),M=R(),Z=R(),it=P(),C=P(),_=P(),cs=P(),O=P(),p=P(),A=P(),Q=P(),X=P(),is=P(),Es=P(),gs=P(),F=P(),$=P(),I=P(),Ss=P(),ps=P(),ws=P(),ys=P(),Ms=P(),xs=P(),rs=P(),J=R(),ls=P(),[as,j,Qs,fs]=zc(()=>ts),Vt=s=>Ws(s,e=>Ws(e,wn)),to=s=>Ws(s,wn),wn=s=>{if(!Ws(s,(o,i)=>Tc([Ut,$s],i)))return!1;let e=s[Ut];return!$e(e)&&e!=Ge?!1:(Lt(s[$s])!=e&&Oe(s,$s),!0)},no=Ye,eo=s=>Ws(s,Mn,As),Mn=(s,e)=>(!t||os(H,e)||As(e))&&Ws(s,(o,i)=>Rt(e,i,o),()=>As(e)),Rt=(s,e,o,i)=>Ws(i?o:Nn(o,s,e),(l,h)=>K(xn(s,e,h,l),L=>(o[h]=L,!0),()=>!1),()=>As(s,e)),xn=(s,e,o,i)=>t?K(g(g(H,s),o),l=>Lt(i)!=l[Ut]?As(s,e,o,i,l[$s]):i,()=>As(s,e,o,i)):G(Lt(i))?As(s,e,o,i):i,Dn=(s,e)=>Ws(e?s:oo(s),(o,i)=>K(Hn(i,o),l=>(s[i]=l,!0),()=>!1),()=>lt()),Hn=(s,e)=>n?K(g(Ls,s),o=>Lt(e)!=o[Ut]?lt(s,e,o[$s]):e,()=>lt(s,e)):G(Lt(e))?lt(s,e):e,Nn=(s,e,o)=>(K(g(q,e),([i,l])=>{w(i,(h,L)=>{St(s,L)||(s[L]=h)}),w(l,h=>{St(s,h)||As(e,o,h)})}),s),oo=s=>(n&&(w(Ts,(e,o)=>{St(s,o)||(s[o]=e)}),w(Rs,e=>{St(s,e)||lt(e)})),s),bn=s=>Zs(H,s,(e,o,i)=>{let l=R(),h=Ct();Zs(ss(H,o,R),i,(L,x,D)=>{b(L,x,D),K(D[$s],Ds=>b(l,x,Ds),()=>yt(h,x))}),b(q,o,[l,h])},(e,o)=>{b(H,o),b(q,o)}),Fn=s=>Zs(Ls,s,(e,o,i)=>{b(Ls,o,i),K(i[$s],l=>b(Ts,o,l),()=>yt(Rs,o))},(e,o)=>{b(Ls,o),b(Ts,o),Ot(Rs,o)}),An=s=>Vs(s)?jt():At(s),co=([s,e])=>{(Vs(s)?jt:At)(s),(Vs(e)?_t:zt)(e)},zn=s=>Zs(M,s,(e,o,i)=>vt(o,i),(e,o)=>Wn(o)),vt=(s,e)=>Zs(ss(M,s,()=>(qn(s,1),b(Cs,s,Qe()),b(vs,s,R()),R())),e,(o,i,l)=>rt(s,o,i,l),(o,i)=>Pn(s,o,i)),rt=(s,e,o,i,l)=>Zs(ss(e,o,()=>(Jn(s,o,1),R())),i,(h,L,x)=>It(s,o,h,L,x),(h,L)=>Un(s,e,o,h,L,l)),It=(s,e,o,i,l)=>{os(o,i)||Kn(s,e,i,1);let h=g(o,i);l!==h&&(Gn(s,e,i,h,l),b(o,i,l))},jn=(s,e,o,i,l)=>K(g(e,o),h=>It(s,o,h,i,l),()=>rt(s,e,o,Nn({[i]:l},s,o))),_n=s=>Vs(s)?_t():zt(s),Bn=s=>Zs(Z,s,(e,o,i)=>wt(o,i),(e,o)=>kn(o)),wt=(s,e)=>{os(Z,s)||$n(s,1);let o=g(Z,s);e!==o&&(Yn(s,o,e),b(Z,s,e))},io=(s,e)=>{let[o]=g(Cs,s),i;do i=o(e);while(os(g(M,s),i));return i},Mt=s=>g(M,s)??vt(s,{}),Wn=s=>vt(s,{}),Pn=(s,e,o)=>{let[,i]=g(Cs,s);i(o),rt(s,e,o,{},!0)},Un=(s,e,o,i,l,h)=>{let L=g(g(q,s)?.[0],l);if(!G(L)&&!h)return It(s,o,i,l,L);let x=D=>{Gn(s,o,D,g(i,D)),Kn(s,o,D,-1),b(i,D)};G(L)?x(l):Us(i,x),y(i)&&(Jn(s,o,-1),y(b(e,o))&&(qn(s,-1),b(M,s),b(Cs,s),b(vs,s)))},kn=s=>{let e=g(Ts,s);if(!G(e))return wt(s,e);Yn(s,g(Z,s)),$n(s,-1),b(Z,s)},qn=(s,e)=>Et(T,s,e),Jn=(s,e,o)=>Et(ss(S,s,R),e,o)&&b(Y,s,ss(Y,s,()=>0)+o),Kn=(s,e,o,i)=>{let l=g(vs,s),h=g(l,o)??0;(h==0&&i==1||h==1&&i==-1)&&Et(ss(z,s,R),o,i),b(l,o,h!=-i?h+i:null),Et(ss(ss(E,s,R),e,R),o,i)},Gn=(s,e,o,i,l)=>{ss(ss(ss(f,s,R),e,R),o,()=>[i,0])[1]=l,d[3]?.(s,e,o,l)},$n=(s,e)=>Et(u,s,e),Yn=(s,e,o)=>{ss(m,s,()=>[e,0])[1]=o,d[4]?.(s,o)},As=(s,e,o,i,l)=>(Zt(ss(ss(ss(v,s,R),e,R),o,()=>[]),i),l),lt=(s,e,o)=>(Zt(ss(V,s,()=>[]),e),o),xt=(s,e,o)=>K(g(g(g(f,s),e),o),([i,l])=>[!0,i,l],()=>[!1,...qt(Ht(s,e,o))]),Zn=s=>K(g(m,s),([e,o])=>[!0,e,o],()=>[!1,...qt(Nt(s))]),On=s=>!y(v)&&!y(Ss[s])?w(s?Ln(v):v,(e,o)=>w(e,(i,l)=>w(i,(h,L)=>j(Ss[s],[o,l,L],h)))):0,Qn=s=>!y(V)&&!y(ps[s])?w(s?ks(V):V,(e,o)=>j(ps[s],[o],e)):0,at=(s,e,o,i)=>{if(!y(s))return j(e,i,()=>hs(s)),Us(s,(l,h)=>j(o,[...i??[],l],h==1)),1},Xn=s=>{let e=bt();e!=c&&j(it[s],void 0,e);let o=y(is[s]),i=y(F[s])&&y($[s])&&y(X[s])&&y(Es[s])&&y(p[s])&&y(A[s])&&y(Q[s])&&o&&y(_[s])&&y(cs[s]),l=y(I[s])&&y(gs[s])&&y(O[s])&&y(C[s]);if(!i||!l){let h=s?[ks(T),pn(z),ks(Y),pn(S),Ln(E),Ln(f)]:[T,z,Y,S,E,f];if(!i){at(h[0],_[s],cs[s]),w(h[1],(x,D)=>at(x,p[s],A[s],[D])),w(h[2],(x,D)=>{x!=0&&j(Q[s],[D],ne(D))});let L=Ct();w(h[3],(x,D)=>{at(x,X[s],Es[s],[D])&&!o&&(j(is[s],[D,null]),yt(L,D))}),o||w(h[5],(x,D)=>{if(!os(L,D)){let Ds=Ct();w(x,zs=>w(zs,([Bt,Wt],ft)=>Wt!==Bt?yt(Ds,ft):Ot(zs,ft))),w(Ds,zs=>j(is[s],[D,zs]))}}),w(h[4],(x,D)=>w(x,(Ds,zs)=>at(Ds,F[s],$[s],[D,zs])))}if(!l){let L;w(h[5],(x,D)=>{let Ds;w(x,(zs,Bt)=>{let Wt;w(zs,([ft,Te],Ao)=>{Te!==ft&&(j(I[s],[D,Bt,Ao],Te,ft,xt),L=Ds=Wt=1)}),Wt&&j(gs[s],[D,Bt],xt)}),Ds&&j(O[s],[D],xt)}),L&&j(C[s],void 0,xt)}}},In=s=>{let e=Ft();e!=r&&j(ws[s],void 0,e);let o=y(Ms[s])&&y(xs[s]),i=y(rs[s])&&y(ys[s]);if(!o||!i){let l=s?[ks(u),ks(m)]:[u,m];if(o||at(l[0],Ms[s],xs[s]),!i){let h;w(l[1],([L,x],D)=>{x!==L&&(j(rs[s],[D],x,L,Zn),h=1)}),h&&j(ys[s],void 0,Zn)}}},B=(s,...e)=>(cn(()=>s(...Yt(e,N))),ts),se=(s,e,o,i,l)=>{let h=Dt(s,e,...o);return as(()=>{let L=Dt(s,e,...o);pc(L,h)||(h=L,i(ts,s,e,...o,h))},is[l?1:0],[s,e],[us])},ro=()=>[sn(),nn()],sn=()=>kt(M),us=()=>Tt(M),lo=s=>En(g(M,N(s))),te=s=>Tt(g(vs,N(s))),ne=s=>yn(g(M,N(s))),Xs=s=>Tt(g(M,N(s))),Dt=(s,e,o,i=0,l)=>Qt(s)?Dt(s.tableId,s.cellId,s.descending,s.offset,s.limit):Yt(Ue(Sc(Hc(g(M,N(s)),(h,L)=>[G(e)?L:g(h,N(e)),L]),([h],[L])=>bc(h,L)*(o?-1:1)),i,G(l)?l:i+l),([,h])=>h),ao=(s,e)=>hs(g(g(M,N(s)),N(e))),tn=(s,e)=>Tt(g(g(M,N(s)),N(e))),Ht=(s,e,o)=>g(g(g(M,N(s)),N(e)),N(o)),nn=()=>hs(Z),en=()=>Tt(Z),Nt=s=>g(Z,N(s)),bt=()=>!y(M),ee=s=>os(M,N(s)),oe=(s,e)=>os(g(vs,N(s)),N(e)),ce=(s,e)=>os(g(M,N(s)),N(e)),ie=(s,e,o)=>os(g(g(M,N(s)),N(e)),N(o)),Ft=()=>!y(Z),re=s=>os(Z,N(s)),fo=()=>et(M),ho=()=>et(Z),go=()=>et([M,Z]),uo=()=>et(H),Lo=()=>et(Ls),To=()=>et([H,Ls]),Eo=s=>B(()=>{let e=hn(s)?s():s;no(e)&&co(e)}),At=s=>B(()=>eo(s)?zn(s):0),po=(s,e)=>B(o=>Mn(e,o)?vt(o,e):0,s),So=(s,e,o)=>B((i,l)=>Rt(i,l,o)?rt(i,Mt(i),l,o):0,s,e),Co=(s,e,o=!0)=>cn(()=>{let i;return Rt(s,i,e)&&(s=N(s),rt(s,Mt(s),i=io(s,o?1:0),e)),i}),yo=(s,e,o)=>B((i,l)=>{if(Rt(i,l,o,1)){let h=Mt(i);Ps(o,(L,x)=>jn(i,h,l,x,L))}},s,e),mo=(s,e,o,i)=>B((l,h,L)=>K(xn(l,h,L,hn(i)?i(Ht(l,h,L)):i),x=>jn(l,Mt(l),h,L,x)),s,e,o),zt=s=>B(()=>Dn(s)?Bn(s):0),Vo=s=>B(()=>Dn(s,1)?Ps(s,(e,o)=>wt(o,e)):0),Ro=(s,e)=>B(o=>K(Hn(o,hn(e)?e(Nt(o)):e),i=>wt(o,i)),s),vo=s=>B(()=>{Ps(s[0],(e,o)=>G(e)?he(o):Ps(e,(i,l)=>G(i)?ge(o,l):Ps(i,(h,L)=>ke(ts,o,l,L,h)))),Ps(s[1],(e,o)=>qe(ts,o,e))}),le=s=>(gn(()=>An(Tn(s))),ts),wo=s=>(gn(()=>_n(Tn(s))),ts),Mo=s=>B(()=>gn(()=>{let[e,o]=Tn(s);An(e),_n(o)},()=>le(s))),ae=s=>B(()=>{if((t=Vt(s))&&(bn(s),!y(M))){let e=sn();jt(),At(e)}}),fe=s=>B(()=>{if(n=to(s)){let e=nn();on(),_t(),n=!0,Fn(s),zt(e)}}),xo=(s,e)=>B(()=>{ae(s),fe(e)}),jt=()=>B(()=>zn({})),he=s=>B(e=>os(M,e)?Wn(e):0,s),ge=(s,e)=>B((o,i)=>K(g(M,o),l=>os(l,i)?Pn(o,l,i):0),s,e),Do=(s,e,o,i)=>B((l,h,L)=>K(g(M,l),x=>K(g(x,h),D=>os(D,L)?Un(l,x,h,D,L,i):0)),s,e,o),_t=()=>B(()=>Bn({})),Ho=s=>B(e=>os(Z,e)?kn(e):0,s),ue=()=>B(()=>{bn({}),t=!1}),on=()=>B(()=>{Fn({}),n=!1}),No=()=>B(()=>{ue(),on()}),cn=(s,e)=>{if(a!=-1){de();let o=s();return Le(e),o}},de=()=>(a!=-1&&a++,a==1&&(d[0]?.(),j(J)),ts),bo=()=>[hs(f,(s,e)=>g(T,e)===-1?void 0:hs(s,(o,i)=>g(g(S,e),i)===-1?void 0:hs(o,([,l])=>l,l=>Jt(l)),y,Vs),y,Vs),hs(m,([,s])=>s,s=>Jt(s)),1],Fo=()=>[!y(f),!y(m),kt(f,Ke,Jt),kt(v),hs(m,Ke,Jt),hs(V),hs(T),En(S),kt(E),hs(u)],Le=s=>(a>0&&(a--,a==0&&(a=1,On(1),y(f)||Xn(1),Qn(1),y(m)||In(1),s?.(ts)&&(w(f,(e,o)=>w(e,(i,l)=>w(i,([h],L)=>ke(ts,o,l,L,h)))),dn(f),w(m,([e],o)=>qe(ts,o,e)),dn(m)),j(ls[0],void 0),a=-1,On(0),y(f)||Xn(0),Qn(0),y(m)||In(0),d[1]?.(),j(ls[1],void 0),d[2]?.(),a=0,c=bt(),r=Ft(),mt([T,z,Y,S,E,f,v,u,m,V],dn))),ts),ts={getContent:ro,getTables:sn,getTableIds:us,getTable:lo,getTableCellIds:te,getRowCount:ne,getRowIds:Xs,getSortedRowIds:Dt,getRow:ao,getCellIds:tn,getCell:Ht,getValues:nn,getValueIds:en,getValue:Nt,hasTables:bt,hasTable:ee,hasTableCell:oe,hasRow:ce,hasCell:ie,hasValues:Ft,hasValue:re,getTablesJson:fo,getValuesJson:ho,getJson:go,getTablesSchemaJson:uo,getValuesSchemaJson:Lo,getSchemaJson:To,hasTablesSchema:()=>t,hasValuesSchema:()=>n,setContent:Eo,setTables:At,setTable:po,setRow:So,addRow:Co,setPartialRow:yo,setCell:mo,setValues:zt,setPartialValues:Vo,setValue:Ro,applyChanges:vo,setTablesJson:le,setValuesJson:wo,setJson:Mo,setTablesSchema:ae,setValuesSchema:fe,setSchema:xo,delTables:jt,delTable:he,delRow:ge,delCell:Do,delValues:_t,delValue:Ho,delTablesSchema:ue,delValuesSchema:on,delSchema:No,transaction:cn,startTransaction:de,getTransactionChanges:bo,getTransactionLog:Fo,finishTransaction:Le,forEachTable:s=>w(M,(e,o)=>s(o,i=>w(e,(l,h)=>i(h,L=>Us(l,L))))),forEachTableCell:(s,e)=>Us(g(vs,N(s)),e),forEachRow:(s,e)=>w(g(M,N(s)),(o,i)=>e(i,l=>Us(o,l))),forEachCell:(s,e,o)=>Us(g(g(M,N(s)),N(e)),o),forEachValue:s=>Us(Z,s),addSortedRowIdsListener:(s,e,o,i,l,h,L)=>Qt(s)?se(s.tableId,s.cellId,[s.descending??!1,s.offset??0,s.limit],e,o):se(s,e,[o,i,l],h,L),addStartTransactionListener:s=>as(s,J),addWillFinishTransactionListener:s=>as(s,ls[0]),addDidFinishTransactionListener:s=>as(s,ls[1]),callListener:s=>(fs(s),ts),delListener:s=>(Qs(s),ts),getListenerStats:()=>({hasTables:W(it),tables:W(C),tableIds:W(_),hasTable:W(cs),table:W(O),tableCellIds:W(p),hasTableCell:W(A,pt),rowCount:W(Q),rowIds:W(X),sortedRowIds:W(is),hasRow:W(Es,pt),row:W(gs,pt),cellIds:W(F,pt),hasCell:W($,un),cell:W(I,un),invalidCell:W(Ss,un),hasValues:W(ws),values:W(ys),valueIds:W(Ms),hasValue:W(xs),value:W(rs),invalidValue:W(ps),transaction:mn(J)+W(ls)}),isMergeable:()=>!1,createStore:Vn,addListener:as,callListeners:j,setInternalListeners:(s,e,o,i,l)=>d=[s,e,o,i,l]};return Ps({[Ys+Be]:[0,it,[],()=>[bt()]],[Be]:[0,C],[ac]:[0,_],[Ys+ot]:[1,cs,[us],s=>[ee(...s)]],[ot]:[1,O,[us]],[ot+We]:[1,p,[us]],[Ys+ot+Kt]:[2,A,[us,te],s=>[oe(...s)]],[fc]:[1,Q,[us]],[hc]:[1,X,[us]],[Ys+Gt]:[2,Es,[us,Xs],s=>[ce(...s)]],[Gt]:[2,gs,[us,Xs]],[We]:[2,F,[us,Xs]],[Ys+Kt]:[3,$,[us,Xs,tn],s=>[ie(...s)]],[Kt]:[3,I,[us,Xs,tn],s=>qt(Ht(...s))],InvalidCell:[3,Ss],[Ys+Pe]:[0,ws,[],()=>[Ft()]],[Pe]:[0,ys],[gc]:[0,Ms],[Ys+$t]:[1,xs,[en],s=>[re(...s)]],[$t]:[1,rs,[en],s=>qt(Nt(s[0]))],InvalidValue:[1,ps]},([s,e,o,i],l)=>{ts[lc+l+rc]=(...h)=>as(h[s],e[h[s+1]?1:0],s>0?Ue(h,0,s):void 0,o,i)}),vc(ts)};var jc=["db","id","ids","no","ui","ws","add","api","bun","del","dom","for","get","has","hlc","log","map","row","set","sql","use","web","yjs"],so=(t=!1)=>{addEventListener("load",()=>{let n=Hs("body > header > nav");if(n==null)return;let c=ns("div",null,{id:"search"}),r=ns("input",c,{type:"text",placeholder:(navigator.platform.startsWith("Mac")?"\u2318":"cmd-")+"K Search"}),a=ns("ol",c),d=ns("li",a,{},"No results found"),T=Vn(),z=_e(T);z.setIndexDefinition("p","p",f=>{let u=[];return f("t").split(" ").forEach(m=>{for(let v=0;v<m.length;v++)u.push(m.slice(0,v+1))}),u},"t",void 0,(f,u,m)=>vn(u,m)-vn(f,m)),fetch("/pages.json").then(f=>f.json()).then(f=>{T.transaction(()=>{T.setContent(f),T.forEachRow("p",u=>{let{n:m,s:v}=T.getRow("p",u),V=new Set;Rn(u,V,!0),Rn(m,V),Rn(v,V),T.setCell("p",u,"t",Array.from(V.values()).join(" "))})}),Y()});let Y=()=>{n.prepend(c);let f=()=>(r.value?Js:ht)(a,"show");r.addEventListener("focus",f),r.addEventListener("input",()=>{f(),S()}),r.addEventListener("blur",()=>ht(a,"show")),E()},S=()=>{let f=r.value.toLowerCase().split(/[^a-z0-9]+/),u=new Map;f.forEach(V=>z.getSliceRowIds("p",V).slice(0,50).forEach(H=>u.set(H,(u.get(H)??0)+vn(T.getCell("p",H,"t"),V))));let m=Array.from(u.keys()).sort((V,H)=>u.get(H)-u.get(V)).slice(0,10),v=m.length==0?[d]:m.map((V,H)=>{let q=ns("li"),{n:Ls,s:Ts}=T.getRow("p",V);return Xe(ns("b",q),Ls,f[0]),Xe(ns("span",q),Ts,f[0]),q.title=Ts,q.addEventListener("mousedown",()=>t?location.href=V:ye(V)),H==0&&Js(q,"hover"),q});a.replaceChildren(...v)},E=()=>addEventListener("keydown",f=>{if(st.activeElement==r){let u=Is(a,".hover");switch(f.code){case"Escape":return r.blur();case"ArrowDown":return Pt(f),Ie(u,u?.nextSibling??a.firstChild);case"ArrowUp":return Pt(f),Ie(u,u?.previousSibling??a.lastChild);case"Enter":return u?.dispatchEvent(new MouseEvent("mousedown"))}}else f.code=="KeyK"&&f.metaKey&&(r.focus(),Pt(f))})})},Xe=(t,n,c)=>{let r=n.toLowerCase().indexOf(c);t.innerHTML=r==-1?n:n.substring(0,r)+"<em>"+n.substring(r,r+c.length)+"</em>"+n.substring(r+c.length)},Ie=(t,n)=>{t!=n&&(t&&ht(t,"hover"),n&&(Js(n,"hover"),n.scrollIntoView({block:"nearest",inline:"nearest"})))},Rn=(t,n,c)=>{let r=t.replaceAll(/[^a-zA-Z0-9]/g," ").split(/\s+/);c&&r.reverse(),r.forEach(a=>{[a,...a.replaceAll(/([a-z])([A-Z])/g,"$1 $2").split(" ")].forEach(d=>{let T=d.toLowerCase();(T.length>3||jc.includes(T))&&n.add(T)})})},vn=(t,n)=>{let c=t.length,r=t.indexOf(n);return r===-1?0:(c-r)/c};pe();Ve();so(!0);})();
