"use strict";(()=>{var Se="v7.3.0-beta.1";var jo="TinyBase",tt=document,pe=()=>{addEventListener("load",()=>{let t=Ds("#version");t.innerText=Se,t.style.width=t.scrollWidth+"px"})},Go=null,Ce=()=>Go??=Ds("body > main > nav"),Uo=null,ye=()=>Uo??=Ds("body > main > article"),Gt=t=>t.preventDefault(),Ds=t=>tt.querySelector(t),st=(t,n)=>t.querySelector(n),Wo=t=>tt.getElementById(t),ts=(t,n,c={},r)=>{let a=tt.createElement(t);return Object.entries(c).forEach(d=>a.setAttribute(...d)),r!=null&&(a.innerText=r),n!=null?n.appendChild(a):a},ks=(t,n)=>t.classList.add(n);var ft=(t,n)=>t.classList.remove(n);var Re=(t,n=!0)=>{let c=Ce();["?","#"].forEach(r=>{t.includes(r)&&(t=t.substring(0,t.indexOf(r)))}),fetch(`${t}nav.json`).then(r=>r.json()).then(r=>{ft(st(c,"li.current"),"current"),me(r,st(c,"ul"))}),fetch(`${t}article.html`).then(r=>r.text()).then(r=>{let a=ye();a.innerHTML=r,a.scrollTo(0,0),Yo()}),n&&history.pushState(null,"",t)},Yo=()=>{let t=st(ye(),":scope iframe"),n=t?.parentElement;if(t==null||n==null)return;let c=n.insertBefore(ts("form",null,{action:"https://codepen.io/pen/define",method:"post",target:"_blank"}),t);n.insertBefore(ts("a",null,{id:"penEdit"},"Open this demo in CodePen"),t).onclick=()=>{c.childNodes.length==0?fetch("pen.json").then(r=>r.text()).then(r=>{ts("input",c,{type:"hidden",name:"data",value:r}),c.submit()}):c.submit()}},me=({i:t,n,u:c,r,c:a,p:d,o:T,_:P},K)=>{let p=Ce(),E=Wo(t);if(E==null){E=ts("li",K,{id:t}),ts("span",E);let f=ts("a",E,{href:c});r?ts("code",f,{},n):f.innerText=n,d&&ks(E,"parent")}if(T&&ks(E,"open"),P!=null){let f=st(E,"ul")??ts("ul",E);P.forEach(u=>{me(u,f)})}if(a){ks(E,"current"),tt.title=`${n} | ${jo}`;let f=E.getBoundingClientRect(),u=p.getBoundingClientRect();f.top<u.top?p.scrollBy(0,f.top-u.top):f.bottom>u.bottom&&p.scrollBy(0,Math.min(f.bottom-u.bottom,f.top-u.top))}};var zs="dark",ln="light",an="auto",Ve=()=>{let t=matchMedia("(prefers-color-scheme: dark)"),n=()=>{let c=localStorage.getItem(zs)??an;Ds("#dark")?.setAttribute("class",c),Ds("html").className=c==zs||c==an&&t.matches?zs:ln};t.addEventListener("change",n),window.addEventListener("storage",c=>{c.storageArea==localStorage&&c.key==zs&&n()}),addEventListener("load",()=>{Ds("#dark").addEventListener("click",()=>{let c=localStorage.getItem(zs);localStorage.setItem(zs,c==zs?ln:c==ln?an:zs),n()}),n()}),n()};var De=t=>typeof t;var Bo=De(""),Ne=t=>""+t,ko=t=>(n,c,r)=>t(n)?r?.():c(n),_s=t=>t===void 0,He=t=>t===null,qs=ko(_s),qo=t=>De(t)==Bo,gt=t=>Array.isArray(t),Fs=t=>t.length,Jo=(t,n)=>t.test(n),_e=(t,n)=>t.every(n),Ko=(t,n)=>Fs(t)===Fs(n)&&_e(t,(c,r)=>n[r]===c),Me=(t,n)=>_e(t,(c,r)=>r==0||n(t[r-1],c)<=0),ve=(t,n)=>t.sort(n),Js=(t,n)=>t.forEach(n),$o=(t,n)=>t.map(n),Zo=t=>Fs(t)==0,Oo=(t,n,c)=>t.reduce(n,c),Fe=(t,...n)=>t.push(...n),Qo=t=>t.shift(),be=t=>n=>Oo(hn(n),(c,r)=>c+t(r),0),Pe=t=>t?.size??0,Ae=be(Pe),Xo=be(Ae),nt=(t,n)=>t?.has(n)??!1,ut=t=>_s(t)||Pe(t)==0,hn=t=>[...t?.values()??[]],we=t=>t.clear(),ds=(t,n)=>t?.forEach(n),et=(t,n)=>t?.delete(n),Io=Object,sc=Io.freeze,ns=t=>new Map(t),ze=t=>[...t?.keys()??[]],Y=(t,n)=>t?.get(n),ht=(t,n)=>ds(t,(c,r)=>n(r,c)),W=(t,n,c)=>_s(c)?(et(t,n),t):t?.set(n,c),je=(t,n,c,r)=>(nt(t,n)?r?.(Y(t,n)):W(t,n,c()),Y(t,n)),fn=(t,n,c,r,a=0)=>qs((c?je:Y)(t,n[a],a>Fs(n)-2?c:ns),d=>{if(a>Fs(n)-2)return r?.(d)&&W(t,n[a]),d;let T=fn(d,n,c,r,a+1);return ut(d)&&W(t,n[a]),T}),js=t=>new Set(gt(t)||_s(t)?t:[t]),Hs=(t,n)=>t?.add(n),tc=(t,n,c,r,a)=>{let d=t.hasRow,T=ns(),P=ns(),K=ns(),p=ns(),E=ns(),f=ns(),u=()=>t,R=()=>ze(T),N=C=>ht(P,C),m=C=>nt(P,C),D=C=>Y(T,C),B=C=>Y(P,C),Ls=(C,z)=>W(P,C,z),Ts=(C,z,...cs)=>{let Z=je(f,C,js);return Js(cs,S=>Hs(Z,S)&&z&&t.callListener(S)),cs},ms=(C,...z)=>qs(Y(f,C),cs=>{Js(Zo(z)?hn(cs):z,Z=>{t.delListener(Z),et(cs,Z)}),ut(cs)&&W(f,C)}),Cs=(C,z)=>{W(T,C,z),nt(P,C)||(W(P,C,n()),W(p,C,ns()),W(E,C,ns()),a(K))},Vs=(C,z,cs,Z,S)=>{Cs(C,z);let b=ns(),O=ns(),Q=Y(p,C),is=Y(E,C),Es=F=>{let q=Ss=>t.getCell(z,F,Ss),X=Y(Q,F),ps=d(z,F)?c(Z(q,F)):void 0;if(X===ps||gt(X)&&gt(ps)&&Ko(X,ps)||W(b,F,[X,ps]),!_s(S)){let Ss=Y(is,F),Ns=d(z,F)?S(q,F):void 0;Ss!=Ns&&W(O,F,Ns)}},gs=F=>{cs(()=>{ds(b,([,q],X)=>W(Q,X,q)),ds(O,(q,X)=>W(is,X,q))},b,O,Q,is,F),we(b),we(O)};ht(Q,Es),t.hasTable(z)&&Js(t.getRowIds(z),F=>{nt(Q,F)||Es(F)}),gs(!0),ms(C),Ts(C,0,t.addRowListener(z,null,(F,q,X)=>Es(X)),t.addTableListener(z,()=>gs()))},v=C=>{W(T,C),W(P,C),W(p,C),W(E,C),ms(C),a(K)};return[u,R,N,m,D,B,Ls,Cs,Vs,v,C=>r(C,K),()=>ht(f,v),Ts,ms]},xe=(t,n)=>qo(t)?c=>c(t):t??(()=>n??""),nc=(t,n)=>{let c=new WeakMap;return r=>(c.has(r)||c.set(r,t(r)),c.get(r))},ec=(t,n)=>(t??0)<(n??0)?-1:1,oc=/^\d+$/,cc=()=>{let t=[],n=0;return[c=>(c?Qo(t):null)??""+n++,c=>{Jo(oc,c)&&Fs(t)<1e3&&Fe(t,c)}]},ic=(t,n=[""])=>{let c=[],r=(a,d)=>d==Fs(n)?Fe(c,a):He(n[d])?ds(a,T=>r(T,d+1)):Js([n[d],null],T=>r(Y(a,T),d+1));return r(t,0),c},rc=t=>{let n,[c,r]=cc(),a=ns();return[(p,E,f,u=[],R=()=>[])=>{n??=t();let N=c(1);return W(a,N,[p,E,f,u,R]),Hs(fn(E,f??[""],js),N),N},(p,E,...f)=>Js(ic(p,E),u=>ds(u,R=>Y(a,R)[0](n,...E??[],...f))),p=>qs(Y(a,p),([,E,f])=>(fn(E,f??[""],void 0,u=>(et(u,p),ut(u)?1:0)),W(a,p),r(p),f)),p=>qs(Y(a,p),([E,,f=[],u,R])=>{let N=(...m)=>{let D=Fs(m);D==Fs(f)?E(n,...m,...R(m)):He(f[D])?Js(u[D]?.(...m)??[],B=>N(...m,B)):N(...m,f[D])};N()})]},Ge=nc(t=>{let n=ns(),c=ns(),[r,a,d]=rc(()=>Z),[T,P,K,p,E,f,u,,R,N,m,D]=tc(t,ns,S=>_s(S)?"":gt(S)?$o(S,Ne):Ne(S),r,a),B=(S,b)=>nt(f(S),b),Ls=(S,b,O,Q,is,Es=ec)=>{let gs=_s(is)?void 0:([F],[q])=>is(F,q);return R(S,b,(F,q,X,ps,Ss,Ns)=>{let ys=0,Ms=js(),vs=js(),rs=f(S);if(ds(q,([k,ls],as)=>{let A=js(k),Qs=js(ls);ds(A,fs=>et(Qs,fs)?et(A,fs):0),ds(A,fs=>{Hs(Ms,fs),qs(Y(rs,fs),Rt=>{et(Rt,as),ut(Rt)&&(W(rs,fs),ys=1)})}),ds(Qs,fs=>{Hs(Ms,fs),nt(rs,fs)||(W(rs,fs,js()),ys=1),Hs(Y(rs,fs),as),_s(Q)||Hs(vs,fs)})}),F(),ut(Ss)||(Ns?ht(rs,k=>Hs(vs,k)):ht(X,k=>qs(Y(ps,k),ls=>Js(gt(ls)?ls:[ls],as=>Hs(vs,as)))),ds(vs,k=>{let ls=(A,Qs)=>Es(Y(Ss,A),Y(Ss,Qs),k),as=[...Y(rs,k)];Me(as,ls)||(W(rs,k,js(ve(as,ls))),Hs(Ms,k))})),(ys||Ns)&&!_s(gs)){let k=[...rs];Me(k,gs)||(u(S,ns(ve(k,gs))),ys=1)}ys&&a(n,[S]),ds(Ms,k=>a(c,[S,k]))},xe(O),qs(Q,xe)),Z},Ts=S=>K((b,O)=>S(b,Q=>Cs(b,Q,O))),ms=(S,b)=>Cs(S,b,f(S)),Cs=(S,b,O)=>{let Q=E(S);ds(O,(is,Es)=>b(Es,gs=>ds(is,F=>gs(F,q=>t.forEachCell(Q,F,q)))))},Z={setIndexDefinition:Ls,delIndexDefinition:S=>(N(S),Z),getStore:T,getIndexIds:P,forEachIndex:Ts,forEachSlice:ms,hasIndex:p,hasSlice:B,getTableId:E,getSliceIds:S=>ze(f(S)),getSliceRowIds:(S,b)=>hn(Y(f(S),b)),addIndexIdsListener:m,addSliceIdsListener:(S,b)=>r(b,n,[S]),addSliceRowIdsListener:(S,b,O)=>r(O,c,[S,b]),delListener:S=>(d(S),Z),destroy:D,getListenerStats:()=>({sliceIds:Ae(n),sliceRowIds:Xo(c)})};return sc(Z)});var Os=t=>typeof t;var lc=Os(""),ac=Os(!0),$e=Os(0),fc=Os(Os),Ut="type",bs="default",Wt="allowNull",hc="null",gc="Listener",uc="add",Ks="Has",It="Ids",ct="Table",Ue=ct+"s",dc=ct+It,Jt="Row",Lc=Jt+"Count",Tc=Jt+It,qt="Cell",We=qt+It,Kt="Value",Ye=Kt+"s",Ec=Kt+It,H=t=>""+t,Ze=t=>(n,c,r)=>t(n)?r?.():c(n),Sc=isFinite,pc=(t,n)=>t instanceof n,$t=t=>t==null,os=t=>t===void 0,Zs=t=>t===null,Cc=Ze($t),J=Ze(os),Oe=t=>t==lc||t==ac,gn=t=>Os(t)==fc,Qe=t=>Array.isArray(t),Be=(t,n,c)=>t.slice(n,c),Ps=t=>t.length,yc=(t,n)=>t.test(n),un=async(t,n,c)=>{try{return await t()}catch(r){n?.(r)}},Rc=(t,n)=>t.includes(n),mc=(t,n)=>t.every(n),Vc=(t,n)=>Ps(t)===Ps(n)&&mc(t,(c,r)=>n[r]===c),Nc=(t,n)=>t.sort(n),yt=(t,n)=>t.forEach(n),Zt=(t,n)=>t.map(n),Mc=(t,n,c)=>t.reduce(n,c),Ot=(t,...n)=>t.push(...n),vc=t=>t.shift(),dt=t=>{if(Zs(t))return hc;let n=Os(t);return Oe(n)||n==$e&&Sc(t)?n:void 0},ke=(t,n,c,r,a)=>os(a)?t.delCell(n,c,r,!0):t.setCell(n,c,r,a),qe=(t,n,c)=>os(c)?t.delValue(n):t.setValue(n,c),yn=t=>n=>Mc(wc(n),(c,r)=>c+t(r),0),Rn=t=>t?.size??0,mn=yn(Rn),Et=yn(mn),dn=yn(Et),es=(t,n)=>t?.has(n)??!1,y=t=>os(t)||Rn(t)==0,wc=t=>[...t?.values()??[]],Ln=t=>t.clear(),M=(t,n)=>t?.forEach(n),Qt=(t,n)=>t?.delete(n),Bs=Object,Je=t=>Bs.getPrototypeOf(t),xc=Bs.isFrozen,Xe=Bs.entries,Xt=t=>!$t(t)&&Cc(Je(t),n=>n==Bs.prototype||$t(Je(n)),()=>!0),Dc=Bs.keys,Hc=Bs.freeze,_c=(t=[])=>Bs.fromEntries(t),St=(t,n)=>n in t,Ie=(t,n)=>(delete t[n],t),Fc=(t,n)=>yt(Xe(t),([c,r])=>n(r,c)),bc=(t,n)=>Zt(Xe(t),([c,r])=>n(r,c)),Us=(t,n)=>_c(bc(t,(c,r)=>[r,n(c,r)])),Pc=t=>Ps(Dc(t)),Rs=t=>Xt(t)&&Pc(t)==0,Gs=(t,n,c,r=0)=>$t(t)||!Xt(t)||!r&&Rs(t)||xc(t)?(c?.(),!1):(Fc(t,(a,d)=>{n(a,d)||Ie(t,d)}),r?!0:!Rs(t)),V=t=>new Map(t),Lt=t=>[...t?.keys()??[]],g=(t,n)=>t?.get(n),Ws=(t,n)=>M(t,(c,r)=>n(r,c)),Ac=(t,n)=>Zt([...t?.entries()??[]],([c,r])=>n(r,c)),_=(t,n,c)=>os(c)?(Qt(t,n),t):t?.set(n,c),I=(t,n,c,r)=>(es(t,n)?r?.(g(t,n)):_(t,n,c()),g(t,n)),$s=(t,n,c,r=_)=>(Us(n,(a,d)=>c(t,d,a)),Ws(t,a=>St(n,a)?0:r(t,a)),t),hs=(t,n,c,r)=>{let a={};return M(t,(d,T)=>{if(!c?.(d,T)){let P=n?n(d,T):d;r?.(P)||(a[T]=P)}}),a},Sn=(t,n,c)=>hs(t,r=>hs(r,n,c),y,Rs),Yt=(t,n,c)=>hs(t,r=>Sn(r,n,c),y,Rs),Ys=(t,n)=>{let c=V();return M(t,(r,a)=>c.set(a,n?.(r)??r)),c},pn=t=>Ys(t,Ys),Tn=t=>Ys(t,pn),Cn=(t,n,c,r,a=0)=>J((c?I:g)(t,n[a],a>Ps(n)-2?c:V),d=>{if(a>Ps(n)-2)return r?.(d)&&_(t,n[a]),d;let T=Cn(d,n,c,r,a+1);return y(d)&&_(t,n[a]),T}),zc=JSON.stringify,En=JSON.parse,ot=t=>zc(t,(n,c)=>pc(c,Map)?Bs.fromEntries([...c]):c),jc=(t,n)=>(t??0)<(n??0)?-1:1,Gc=/^\d+$/,so=()=>{let t=[],n=0;return[c=>(c?vc(t):null)??""+n++,c=>{yc(Gc,c)&&Ps(t)<1e3&&Ot(t,c)}]},pt=t=>new Set(Qe(t)||os(t)?t:[t]),Ct=(t,n)=>t?.add(n),Uc=(t,n=[""])=>{let c=[],r=(a,d)=>d==Ps(n)?Ot(c,a):Zs(n[d])?M(a,T=>r(T,d+1)):yt([n[d],null],T=>r(g(a,T),d+1));return r(t,0),c},Wc=t=>{let n,[c,r]=so(),a=V();return[(p,E,f,u=[],R=()=>[])=>{n??=t();let N=c(1);return _(a,N,[p,E,f,u,R]),Ct(Cn(E,f??[""],pt),N),N},(p,E,...f)=>yt(Uc(p,E),u=>M(u,R=>g(a,R)[0](n,...E??[],...f))),p=>J(g(a,p),([,E,f])=>(Cn(E,f??[""],void 0,u=>(Qt(u,p),y(u)?1:0)),_(a,p),r(p),f)),p=>J(g(a,p),([E,,f=[],u,R])=>{let N=(...m)=>{let D=Ps(m);D==Ps(f)?E(n,...m,...R(m)):Zs(f[D])?yt(u[D]?.(...m)??[],B=>N(...m,B)):N(...m,f[D])};N()})]},Bt=t=>[t,t],G=(t,n=mn)=>n(t[0])+n(t[1]),U=()=>[V(),V()],Ke=t=>[...t],kt=([t,n])=>t===n,Tt=(t,n,c)=>_(t,n,g(t,n)==-c?void 0:c),Vn=()=>{let t,n,c=!1,r=!1,a=0,d=[],T=V(),P=V(),K=V(),p=V(),E=V(),f=V(),u=V(),R=V(),N=V(),m=V(),D=V(),B=V(),Ls=V(),Ts=V(),ms=pt(),Cs=V(),Vs=V(),v=V(),$=V(),it=U(),C=U(),z=U(),cs=U(),Z=U(),S=U(),b=U(),O=U(),Q=U(),is=U(),Es=U(),gs=U(),F=U(),q=U(),X=U(),ps=U(),Ss=U(),Ns=U(),ys=U(),Ms=U(),vs=U(),rs=U(),k=V(),ls=U(),[as,A,Qs,fs]=Wc(()=>ss),Rt=s=>Gs(s,e=>Gs(e,vn)),oo=s=>Gs(s,vn),vn=s=>{if(!Gs(s,(i,l)=>Rc([Ut,bs,Wt],l)))return!1;let e=s[Ut];if(!Oe(e)&&e!=$e)return!1;let o=s[bs];return Zs(o)&&!s[Wt]?!1:(!Zs(o)&&dt(o)!=e&&Ie(s,bs),!0)},co=Qe,io=s=>Gs(s,wn,ws),wn=(s,e)=>(!t||es(D,e)||ws(e))&&Gs(s,(o,i)=>mt(e,i,o),()=>ws(e)),mt=(s,e,o,i)=>Gs(i?o:_n(o,s,e),(l,h)=>J(xn(s,e,h,l),L=>(o[h]=L,!0),()=>!1),()=>ws(s,e)),xn=(s,e,o,i)=>t?J(g(g(D,s),o),l=>Zs(i)?l[Wt]?i:ws(s,e,o,i,l[bs]):dt(i)==l[Ut]?i:ws(s,e,o,i,l[bs]),()=>ws(s,e,o,i)):os(dt(i))?ws(s,e,o,i):i,Dn=(s,e)=>Gs(e?s:ro(s),(o,i)=>J(Hn(i,o),l=>(s[i]=l,!0),()=>!1),()=>Xs()),Hn=(s,e)=>n?J(g(Ls,s),o=>Zs(e)?o[Wt]?e:Xs(s,e,o[bs]):dt(e)==o[Ut]?e:Xs(s,e,o[bs]),()=>Xs(s,e)):os(dt(e))?Xs(s,e):e,_n=(s,e,o)=>(J(g(B,e),([i,l])=>{M(i,(h,L)=>{St(s,L)||(s[L]=h)}),M(l,h=>{St(s,h)||ws(e,o,h)})}),s),ro=s=>(n&&(M(Ts,(e,o)=>{St(s,o)||(s[o]=e)}),M(ms,e=>{St(s,e)||Xs(e)})),s),Fn=s=>$s(D,s,(e,o,i)=>{let l=V(),h=pt();$s(I(D,o,V),i,(L,w,x)=>{_(L,w,x),J(x[bs],xs=>_(l,w,xs),()=>Ct(h,w))}),_(B,o,[l,h])},(e,o)=>{_(D,o),_(B,o)}),bn=s=>$s(Ls,s,(e,o,i)=>{_(Ls,o,i),J(i[bs],l=>_(Ts,o,l),()=>Ct(ms,o))},(e,o)=>{_(Ls,o),_(Ts,o),Qt(ms,o)}),Pn=s=>Rs(s)?Pt():Ft(s),lo=([s,e])=>{(Rs(s)?Pt:Ft)(s),(Rs(e)?At:bt)(e)},An=s=>$s(v,s,(e,o,i)=>Vt(o,i),(e,o)=>Un(o)),Vt=(s,e)=>$s(I(v,s,()=>(kn(s,1),_(Cs,s,so()),_(Vs,s,V()),V())),e,(o,i,l)=>rt(s,o,i,l),(o,i)=>Wn(s,o,i)),rt=(s,e,o,i,l)=>$s(I(e,o,()=>(qn(s,o,1),V())),i,(h,L,w)=>sn(s,o,h,L,w),(h,L)=>Yn(s,e,o,h,L,l)),sn=(s,e,o,i,l)=>{es(o,i)||Jn(s,e,i,1);let h=g(o,i);l!==h&&(Kn(s,e,i,h,l),_(o,i,l))},zn=(s,e,o,i,l)=>J(g(e,o),h=>sn(s,o,h,i,l),()=>rt(s,e,o,_n({[i]:l},s,o))),jn=s=>Rs(s)?At():bt(s),Gn=s=>$s($,s,(e,o,i)=>Nt(o,i),(e,o)=>Bn(o)),Nt=(s,e)=>{es($,s)||$n(s,1);let o=g($,s);e!==o&&(Zn(s,o,e),_($,s,e))},ao=(s,e)=>{let[o]=g(Cs,s),i;do i=o(e);while(es(g(v,s),i));return i},Mt=s=>g(v,s)??Vt(s,{}),Un=s=>Vt(s,{}),Wn=(s,e,o)=>{let[,i]=g(Cs,s);i(o),rt(s,e,o,{},!0)},Yn=(s,e,o,i,l,h)=>{let L=g(g(B,s)?.[0],l);if(!os(L)&&!h)return sn(s,o,i,l,L);let w=x=>{Kn(s,o,x,g(i,x)),Jn(s,o,x,-1),_(i,x)};os(L)?w(l):Ws(i,w),y(i)&&(qn(s,o,-1),y(_(e,o))&&(kn(s,-1),_(v,s),_(Cs,s),_(Vs,s)))},Bn=s=>{let e=g(Ts,s);if(!os(e))return Nt(s,e);Zn(s,g($,s)),$n(s,-1),_($,s)},kn=(s,e)=>Tt(T,s,e),qn=(s,e,o)=>Tt(I(p,s,V),e,o)&&_(K,s,I(K,s,()=>0)+o),Jn=(s,e,o,i)=>{let l=g(Vs,s),h=g(l,o)??0;(h==0&&i==1||h==1&&i==-1)&&Tt(I(P,s,V),o,i),_(l,o,h!=-i?h+i:void 0),Tt(I(I(E,s,V),e,V),o,i)},Kn=(s,e,o,i,l)=>{I(I(I(f,s,V),e,V),o,()=>[i,0])[1]=l,d[3]?.(s,e,o,l)},$n=(s,e)=>Tt(u,s,e),Zn=(s,e,o)=>{I(R,s,()=>[e,0])[1]=o,d[4]?.(s,o)},ws=(s,e,o,i,l)=>(Ot(I(I(I(N,s,V),e,V),o,()=>[]),i),l),Xs=(s,e,o)=>(Ot(I(m,s,()=>[]),e),o),vt=(s,e,o)=>J(g(g(g(f,s),e),o),([i,l])=>[!0,i,l],()=>[!1,...Bt(xt(s,e,o))]),On=s=>J(g(R,s),([e,o])=>[!0,e,o],()=>[!1,...Bt(Dt(s))]),Qn=s=>!y(N)&&!y(ps[s])?M(s?Tn(N):N,(e,o)=>M(e,(i,l)=>M(i,(h,L)=>A(ps[s],[o,l,L],h)))):0,Xn=s=>!y(m)&&!y(Ss[s])?M(s?Ys(m):m,(e,o)=>A(Ss[s],[o],e)):0,lt=(s,e,o,i)=>{if(!y(s))return A(e,i,()=>hs(s)),Ws(s,(l,h)=>A(o,[...i??[],l],h==1)),1},In=s=>{let e=Ht();e!=c&&A(it[s],void 0,e);let o=y(is[s]),i=y(F[s])&&y(q[s])&&y(Q[s])&&y(Es[s])&&y(S[s])&&y(b[s])&&y(O[s])&&o&&y(z[s])&&y(cs[s]),l=y(X[s])&&y(gs[s])&&y(Z[s])&&y(C[s]);if(!i||!l){let h=s?[Ys(T),pn(P),Ys(K),pn(p),Tn(E),Tn(f)]:[T,P,K,p,E,f];if(!i){lt(h[0],z[s],cs[s]),M(h[1],(w,x)=>lt(w,S[s],b[s],[x])),M(h[2],(w,x)=>{w!=0&&A(O[s],[x],ee(x))});let L=pt();M(h[3],(w,x)=>{lt(w,Q[s],Es[s],[x])&&!o&&(A(is[s],[x,null]),Ct(L,x))}),o||M(h[5],(w,x)=>{if(!es(L,x)){let xs=pt();M(w,As=>M(As,([zt,jt],at)=>jt!==zt?Ct(xs,at):Qt(As,at))),M(xs,As=>A(is[s],[x,As]))}}),M(h[4],(w,x)=>M(w,(xs,As)=>lt(xs,F[s],q[s],[x,As])))}if(!l){let L;M(h[5],(w,x)=>{let xs;M(w,(As,zt)=>{let jt;M(As,([at,Ee],zo)=>{Ee!==at&&(A(X[s],[x,zt,zo],Ee,at,vt),L=xs=jt=1)}),jt&&A(gs[s],[x,zt],vt)}),xs&&A(Z[s],[x],vt)}),L&&A(C[s],void 0,vt)}}},se=s=>{let e=_t();e!=r&&A(Ns[s],void 0,e);let o=y(Ms[s])&&y(vs[s]),i=y(rs[s])&&y(ys[s]);if(!o||!i){let l=s?[Ys(u),Ys(R)]:[u,R];if(o||lt(l[0],Ms[s],vs[s]),!i){let h;M(l[1],([L,w],x)=>{w!==L&&(A(rs[s],[x],w,L,On),h=1)}),h&&A(ys[s],void 0,On)}}},j=(s,...e)=>(rn(()=>s(...Zt(e,H))),ss),te=(s,e,o,i,l)=>{let h=wt(s,e,...o);return as(()=>{let L=wt(s,e,...o);Vc(L,h)||(h=L,i(ss,s,e,...o,h))},is[l?1:0],[s,e],[us])},fo=()=>[tn(),en()],tn=()=>Yt(v),us=()=>Lt(v),ho=s=>Sn(g(v,H(s))),ne=s=>Lt(g(Vs,H(s))),ee=s=>Rn(g(v,H(s))),Is=s=>Lt(g(v,H(s))),wt=(s,e,o,i=0,l)=>Xt(s)?wt(s.tableId,s.cellId,s.descending,s.offset,s.limit):Zt(Be(Nc(Ac(g(v,H(s)),(h,L)=>[os(e)?L:g(h,H(e)),L]),([h],[L])=>jc(h,L)*(o?-1:1)),i,os(l)?l:i+l),([,h])=>h),go=(s,e)=>hs(g(g(v,H(s)),H(e))),nn=(s,e)=>Lt(g(g(v,H(s)),H(e))),xt=(s,e,o)=>g(g(g(v,H(s)),H(e)),H(o)),en=()=>hs($),on=()=>Lt($),Dt=s=>g($,H(s)),Ht=()=>!y(v),oe=s=>es(v,H(s)),ce=(s,e)=>es(g(Vs,H(s)),H(e)),ie=(s,e)=>es(g(v,H(s)),H(e)),re=(s,e,o)=>es(g(g(v,H(s)),H(e)),H(o)),_t=()=>!y($),le=s=>es($,H(s)),uo=()=>ot(v),Lo=()=>ot($),To=()=>ot([v,$]),Eo=()=>ot(D),So=()=>ot(Ls),po=()=>ot([D,Ls]),Co=s=>j(()=>{let e=gn(s)?s():s;co(e)&&lo(e)}),Ft=s=>j(()=>io(s)?An(s):0),yo=(s,e)=>j(o=>wn(e,o)?Vt(o,e):0,s),Ro=(s,e,o)=>j((i,l)=>mt(i,l,o)?rt(i,Mt(i),l,o):0,s,e),mo=(s,e,o=!0)=>rn(()=>{let i;return mt(s,i,e)&&(s=H(s),rt(s,Mt(s),i=ao(s,o?1:0),e)),i}),Vo=(s,e,o)=>j((i,l)=>{if(mt(i,l,o,1)){let h=Mt(i);Us(o,(L,w)=>zn(i,h,l,w,L))}},s,e),No=(s,e,o,i)=>j((l,h,L)=>J(xn(l,h,L,gn(i)?i(xt(l,h,L)):i),w=>zn(l,Mt(l),h,L,w)),s,e,o),bt=s=>j(()=>Dn(s)?Gn(s):0),Mo=s=>j(()=>Dn(s,1)?Us(s,(e,o)=>Nt(o,e)):0),vo=(s,e)=>j(o=>J(Hn(o,gn(e)?e(Dt(o)):e),i=>Nt(o,i)),s),wo=s=>j(()=>{Us(s[0],(e,o)=>os(e)?ge(o):Us(e,(i,l)=>os(i)?ue(o,l):Us(i,(h,L)=>ke(ss,o,l,L,h)))),Us(s[1],(e,o)=>qe(ss,o,e))}),ae=s=>(un(()=>Pn(En(s))),ss),xo=s=>(un(()=>jn(En(s))),ss),Do=s=>j(()=>un(()=>{let[e,o]=En(s);Pn(e),jn(o)},()=>ae(s))),fe=s=>j(()=>{if((t=Rt(s))&&(Fn(s),!y(v))){let e=tn();Pt(),Ft(e)}}),he=s=>j(()=>{if(n=oo(s)){let e=en();cn(),At(),n=!0,bn(s),bt(e)}}),Ho=(s,e)=>j(()=>{fe(s),he(e)}),Pt=()=>j(()=>An({})),ge=s=>j(e=>es(v,e)?Un(e):0,s),ue=(s,e)=>j((o,i)=>J(g(v,o),l=>es(l,i)?Wn(o,l,i):0),s,e),_o=(s,e,o,i)=>j((l,h,L)=>J(g(v,l),w=>J(g(w,h),x=>es(x,L)?Yn(l,w,h,x,L,i):0)),s,e,o),At=()=>j(()=>Gn({})),Fo=s=>j(e=>es($,e)?Bn(e):0,s),de=()=>j(()=>{Fn({}),t=!1}),cn=()=>j(()=>{bn({}),n=!1}),bo=()=>j(()=>{de(),cn()}),rn=(s,e)=>{if(a!=-1){Le();let o=s();return Te(e),o}},Le=()=>(a!=-1&&a++,a==1&&(d[0]?.(),A(k)),ss),Po=()=>[hs(f,(s,e)=>g(T,e)===-1?void 0:hs(s,(o,i)=>g(g(p,e),i)===-1?void 0:hs(o,([,l])=>l,l=>kt(l)),y,Rs),y,Rs),hs(R,([,s])=>s,s=>kt(s)),1],Ao=()=>[!y(f),!y(R),Yt(f,Ke,kt),Yt(N),hs(R,Ke,kt),hs(m),hs(T),Sn(p),Yt(E),hs(u)],Te=s=>(a>0&&(a--,a==0&&(a=1,Qn(1),y(f)||In(1),Xn(1),y(R)||se(1),s?.(ss)&&(M(f,(e,o)=>M(e,(i,l)=>M(i,([h],L)=>ke(ss,o,l,L,h)))),Ln(f),M(R,([e],o)=>qe(ss,o,e)),Ln(R)),A(ls[0],void 0),a=-1,Qn(0),y(f)||In(0),Xn(0),y(R)||se(0),d[1]?.(),A(ls[1],void 0),d[2]?.(),a=0,c=Ht(),r=_t(),yt([T,P,K,p,E,f,N,u,R,m],Ln))),ss),ss={getContent:fo,getTables:tn,getTableIds:us,getTable:ho,getTableCellIds:ne,getRowCount:ee,getRowIds:Is,getSortedRowIds:wt,getRow:go,getCellIds:nn,getCell:xt,getValues:en,getValueIds:on,getValue:Dt,hasTables:Ht,hasTable:oe,hasTableCell:ce,hasRow:ie,hasCell:re,hasValues:_t,hasValue:le,getTablesJson:uo,getValuesJson:Lo,getJson:To,getTablesSchemaJson:Eo,getValuesSchemaJson:So,getSchemaJson:po,hasTablesSchema:()=>t,hasValuesSchema:()=>n,setContent:Co,setTables:Ft,setTable:yo,setRow:Ro,addRow:mo,setPartialRow:Vo,setCell:No,setValues:bt,setPartialValues:Mo,setValue:vo,applyChanges:wo,setTablesJson:ae,setValuesJson:xo,setJson:Do,setTablesSchema:fe,setValuesSchema:he,setSchema:Ho,delTables:Pt,delTable:ge,delRow:ue,delCell:_o,delValues:At,delValue:Fo,delTablesSchema:de,delValuesSchema:cn,delSchema:bo,transaction:rn,startTransaction:Le,getTransactionChanges:Po,getTransactionLog:Ao,finishTransaction:Te,forEachTable:s=>M(v,(e,o)=>s(o,i=>M(e,(l,h)=>i(h,L=>Ws(l,L))))),forEachTableCell:(s,e)=>Ws(g(Vs,H(s)),e),forEachRow:(s,e)=>M(g(v,H(s)),(o,i)=>e(i,l=>Ws(o,l))),forEachCell:(s,e,o)=>Ws(g(g(v,H(s)),H(e)),o),forEachValue:s=>Ws($,s),addSortedRowIdsListener:(s,e,o,i,l,h,L)=>Xt(s)?te(s.tableId,s.cellId,[s.descending??!1,s.offset??0,s.limit],e,o):te(s,e,[o,i,l],h,L),addStartTransactionListener:s=>as(s,k),addWillFinishTransactionListener:s=>as(s,ls[0]),addDidFinishTransactionListener:s=>as(s,ls[1]),callListener:s=>(fs(s),ss),delListener:s=>(Qs(s),ss),getListenerStats:()=>({hasTables:G(it),tables:G(C),tableIds:G(z),hasTable:G(cs),table:G(Z),tableCellIds:G(S),hasTableCell:G(b,Et),rowCount:G(O),rowIds:G(Q),sortedRowIds:G(is),hasRow:G(Es,Et),row:G(gs,Et),cellIds:G(F,Et),hasCell:G(q,dn),cell:G(X,dn),invalidCell:G(ps,dn),hasValues:G(Ns),values:G(ys),valueIds:G(Ms),hasValue:G(vs),value:G(rs),invalidValue:G(Ss),transaction:mn(k)+G(ls)}),isMergeable:()=>!1,createStore:Vn,addListener:as,callListeners:A,setInternalListeners:(s,e,o,i,l)=>d=[s,e,o,i,l]};return Us({[Ks+Ue]:[0,it,[],()=>[Ht()]],[Ue]:[0,C],[dc]:[0,z],[Ks+ct]:[1,cs,[us],s=>[oe(...s)]],[ct]:[1,Z,[us]],[ct+We]:[1,S,[us]],[Ks+ct+qt]:[2,b,[us,ne],s=>[ce(...s)]],[Lc]:[1,O,[us]],[Tc]:[1,Q,[us]],[Ks+Jt]:[2,Es,[us,Is],s=>[ie(...s)]],[Jt]:[2,gs,[us,Is]],[We]:[2,F,[us,Is]],[Ks+qt]:[3,q,[us,Is,nn],s=>[re(...s)]],[qt]:[3,X,[us,Is,nn],s=>Bt(xt(...s))],InvalidCell:[3,ps],[Ks+Ye]:[0,Ns,[],()=>[_t()]],[Ye]:[0,ys],[Ec]:[0,Ms],[Ks+Kt]:[1,vs,[on],s=>[le(...s)]],[Kt]:[1,rs,[on],s=>Bt(Dt(s[0]))],InvalidValue:[1,Ss]},([s,e,o,i],l)=>{ss[uc+l+gc]=(...h)=>as(h[s],e[h[s+1]?1:0],s>0?Be(h,0,s):void 0,o,i)}),Hc(ss)};var Yc=["db","id","ids","no","ui","ws","add","api","bun","del","dom","for","get","has","hlc","log","map","row","set","sql","use","web","yjs"],eo=(t=!1)=>{addEventListener("load",()=>{let n=Ds("body > header > nav");if(n==null)return;let c=ts("div",null,{id:"search"}),r=ts("input",c,{type:"text",placeholder:(navigator.platform.startsWith("Mac")?"\u2318":"cmd-")+"K Search"}),a=ts("ol",c),d=ts("li",a,{},"No results found"),T=Vn(),P=Ge(T);P.setIndexDefinition("p","p",f=>{let u=[];return f("t").split(" ").forEach(R=>{for(let N=0;N<R.length;N++)u.push(R.slice(0,N+1))}),u},"t",void 0,(f,u,R)=>Mn(u,R)-Mn(f,R)),fetch("/pages.json").then(f=>f.json()).then(f=>{T.transaction(()=>{T.setContent(f),T.forEachRow("p",u=>{let{n:R,s:N}=T.getRow("p",u),m=new Set;Nn(u,m,!0),Nn(R,m),Nn(N,m),T.setCell("p",u,"t",Array.from(m.values()).join(" "))})}),K()});let K=()=>{n.prepend(c);let f=()=>(r.value?ks:ft)(a,"show");r.addEventListener("focus",f),r.addEventListener("input",()=>{f(),p()}),r.addEventListener("blur",()=>ft(a,"show")),E()},p=()=>{let f=r.value.toLowerCase().split(/[^a-z0-9]+/),u=new Map;f.forEach(m=>P.getSliceRowIds("p",m).slice(0,50).forEach(D=>u.set(D,(u.get(D)??0)+Mn(T.getCell("p",D,"t"),m))));let R=Array.from(u.keys()).sort((m,D)=>u.get(D)-u.get(m)).slice(0,10),N=R.length==0?[d]:R.map((m,D)=>{let B=ts("li"),{n:Ls,s:Ts}=T.getRow("p",m);return to(ts("b",B),Ls,f[0]),to(ts("span",B),Ts,f[0]),B.title=Ts,B.addEventListener("mousedown",()=>t?location.href=m:Re(m)),D==0&&ks(B,"hover"),B});a.replaceChildren(...N)},E=()=>addEventListener("keydown",f=>{if(tt.activeElement==r){let u=st(a,".hover");switch(f.code){case"Escape":return r.blur();case"ArrowDown":return Gt(f),no(u,u?.nextSibling??a.firstChild);case"ArrowUp":return Gt(f),no(u,u?.previousSibling??a.lastChild);case"Enter":return u?.dispatchEvent(new MouseEvent("mousedown"))}}else f.code=="KeyK"&&f.metaKey&&(r.focus(),Gt(f))})})},to=(t,n,c)=>{let r=n.toLowerCase().indexOf(c);t.innerHTML=r==-1?n:n.substring(0,r)+"<em>"+n.substring(r,r+c.length)+"</em>"+n.substring(r+c.length)},no=(t,n)=>{t!=n&&(t&&ft(t,"hover"),n&&(ks(n,"hover"),n.scrollIntoView({block:"nearest",inline:"nearest"})))},Nn=(t,n,c)=>{let r=t.replaceAll(/[^a-zA-Z0-9]/g," ").split(/\s+/);c&&r.reverse(),r.forEach(a=>{[a,...a.replaceAll(/([a-z])([A-Z])/g,"$1 $2").split(" ")].forEach(d=>{let T=d.toLowerCase();(T.length>3||Yc.includes(T))&&n.add(T)})})},Mn=(t,n)=>{let c=t.length,r=t.indexOf(n);return r===-1?0:(c-r)/c};pe();Ve();eo(!0);})();
