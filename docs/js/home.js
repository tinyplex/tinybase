"use strict";(()=>{var Se="v7.1.0-beta.2";var zo="TinyBase",st=document,pe=()=>{addEventListener("load",()=>{let t=Ds("#version");t.innerText=Se,t.style.width=t.scrollWidth+"px"})},jo=null,Ce=()=>jo??=Ds("body > main > nav"),Go=null,ye=()=>Go??=Ds("body > main > article"),Gt=t=>t.preventDefault(),Ds=t=>st.querySelector(t),Is=(t,n)=>t.querySelector(n),Uo=t=>st.getElementById(t),ts=(t,n,c={},r)=>{let a=st.createElement(t);return Object.entries(c).forEach(d=>a.setAttribute(...d)),r!=null&&(a.innerText=r),n!=null?n.appendChild(a):a},ks=(t,n)=>t.classList.add(n);var ft=(t,n)=>t.classList.remove(n);var Re=(t,n=!0)=>{let c=Ce();["?","#"].forEach(r=>{t.includes(r)&&(t=t.substring(0,t.indexOf(r)))}),fetch(`${t}nav.json`).then(r=>r.json()).then(r=>{ft(Is(c,"li.current"),"current"),me(r,Is(c,"ul"))}),fetch(`${t}article.html`).then(r=>r.text()).then(r=>{let a=ye();a.innerHTML=r,a.scrollTo(0,0),Wo()}),n&&history.pushState(null,"",t)},Wo=()=>{let t=Is(ye(),":scope iframe"),n=t?.parentElement;if(t==null||n==null)return;let c=n.insertBefore(ts("form",null,{action:"https://codepen.io/pen/define",method:"post",target:"_blank"}),t);n.insertBefore(ts("a",null,{id:"penEdit"},"Open this demo in CodePen"),t).onclick=()=>{c.childNodes.length==0?fetch("pen.json").then(r=>r.text()).then(r=>{ts("input",c,{type:"hidden",name:"data",value:r}),c.submit()}):c.submit()}},me=({i:t,n,u:c,r,c:a,p:d,o:T,_:P},K)=>{let p=Ce(),E=Uo(t);if(E==null){E=ts("li",K,{id:t}),ts("span",E);let f=ts("a",E,{href:c});r?ts("code",f,{},n):f.innerText=n,d&&ks(E,"parent")}if(T&&ks(E,"open"),P!=null){let f=Is(E,"ul")??ts("ul",E);P.forEach(u=>{me(u,f)})}if(a){ks(E,"current"),st.title=`${n} | ${zo}`;let f=E.getBoundingClientRect(),u=p.getBoundingClientRect();f.top<u.top?p.scrollBy(0,f.top-u.top):f.bottom>u.bottom&&p.scrollBy(0,Math.min(f.bottom-u.bottom,f.top-u.top))}};var As="dark",ln="light",an="auto",Ve=()=>{let t=matchMedia("(prefers-color-scheme: dark)"),n=()=>{let c=localStorage.getItem(As)??an;Ds("#dark")?.setAttribute("class",c),Ds("html").className=c==As||c==an&&t.matches?As:ln};t.addEventListener("change",n),window.addEventListener("storage",c=>{c.storageArea==localStorage&&c.key==As&&n()}),addEventListener("load",()=>{Ds("#dark").addEventListener("click",()=>{let c=localStorage.getItem(As);localStorage.setItem(As,c==As?ln:c==ln?an:As),n()}),n()}),n()};var De=t=>typeof t;var Yo=De(""),Ne=t=>""+t,Bo=t=>(n,c,r)=>t(n)?r?.():c(n),js=t=>t===void 0,ko=t=>t===null,qs=Bo(js),qo=t=>De(t)==Yo,gt=t=>Array.isArray(t),_s=t=>t.length,Jo=(t,n)=>t.test(n),He=(t,n)=>t.every(n),Ko=(t,n)=>_s(t)===_s(n)&&He(t,(c,r)=>n[r]===c),Me=(t,n)=>He(t,(c,r)=>r==0||n(t[r-1],c)<=0),ve=(t,n)=>t.sort(n),Js=(t,n)=>t.forEach(n),$o=(t,n)=>t.map(n),Zo=t=>_s(t)==0,Oo=(t,n,c)=>t.reduce(n,c),_e=(t,...n)=>t.push(...n),Qo=t=>t.shift(),Fe=t=>n=>Oo(hn(n),(c,r)=>c+t(r),0),be=t=>t?.size??0,Pe=Fe(be),Xo=Fe(Pe),tt=(t,n)=>t?.has(n)??!1,ut=t=>js(t)||be(t)==0,hn=t=>[...t?.values()??[]],we=t=>t.clear(),ds=(t,n)=>t?.forEach(n),nt=(t,n)=>t?.delete(n),Io=Object,sc=Io.freeze,ns=t=>new Map(t),Ae=t=>[...t?.keys()??[]],Y=(t,n)=>t?.get(n),ht=(t,n)=>ds(t,(c,r)=>n(r,c)),W=(t,n,c)=>c===void 0?(nt(t,n),t):t?.set(n,c),ze=(t,n,c,r)=>(tt(t,n)?r?.(Y(t,n)):W(t,n,c()),Y(t,n)),fn=(t,n,c,r,a=0)=>qs((c?ze:Y)(t,n[a],a>_s(n)-2?c:ns),d=>{if(a>_s(n)-2)return r?.(d)&&W(t,n[a]),d;let T=fn(d,n,c,r,a+1);return ut(d)&&W(t,n[a]),T}),zs=t=>new Set(gt(t)||js(t)?t:[t]),Hs=(t,n)=>t?.add(n),tc=(t,n,c,r,a)=>{let d=t.hasRow,T=ns(),P=ns(),K=ns(),p=ns(),E=ns(),f=ns(),u=()=>t,R=()=>Ae(T),N=C=>ht(P,C),m=C=>tt(P,C),D=C=>Y(T,C),B=C=>Y(P,C),Ls=(C,z)=>W(P,C,z),Ts=(C,z,...os)=>{let Z=ze(f,C,zs);return Js(os,S=>Hs(Z,S)&&z&&t.callListener(S)),os},ms=(C,...z)=>qs(Y(f,C),os=>{Js(Zo(z)?hn(os):z,Z=>{t.delListener(Z),nt(os,Z)}),ut(os)&&W(f,C)}),Cs=(C,z)=>{W(T,C,z),tt(P,C)||(W(P,C,n()),W(p,C,ns()),W(E,C,ns()),a(K))},Vs=(C,z,os,Z,S)=>{Cs(C,z);let b=ns(),O=ns(),Q=Y(p,C),cs=Y(E,C),Es=F=>{let q=Ss=>t.getCell(z,F,Ss),X=Y(Q,F),ps=d(z,F)?c(Z(q,F)):void 0;if(X===ps||gt(X)&&gt(ps)&&Ko(X,ps)||W(b,F,[X,ps]),!js(S)){let Ss=Y(cs,F),Ns=d(z,F)?S(q,F):void 0;Ss!=Ns&&W(O,F,Ns)}},gs=F=>{os(()=>{ds(b,([,q],X)=>W(Q,X,q)),ds(O,(q,X)=>W(cs,X,q))},b,O,Q,cs,F),we(b),we(O)};ht(Q,Es),t.hasTable(z)&&Js(t.getRowIds(z),F=>{tt(Q,F)||Es(F)}),gs(!0),ms(C),Ts(C,0,t.addRowListener(z,null,(F,q,X)=>Es(X)),t.addTableListener(z,()=>gs()))},v=C=>{W(T,C),W(P,C),W(p,C),W(E,C),ms(C),a(K)};return[u,R,N,m,D,B,Ls,Cs,Vs,v,C=>r(C,K),()=>ht(f,v),Ts,ms]},xe=(t,n)=>qo(t)?c=>c(t):t??(()=>n??""),nc=(t,n)=>{let c=new WeakMap;return r=>(c.has(r)||c.set(r,t(r)),c.get(r))},ec=(t,n)=>(t??0)<(n??0)?-1:1,oc=/^\d+$/,cc=()=>{let t=[],n=0;return[c=>(c?Qo(t):null)??""+n++,c=>{Jo(oc,c)&&_s(t)<1e3&&_e(t,c)}]},ic=(t,n=[""])=>{let c=[],r=(a,d)=>d==_s(n)?_e(c,a):n[d]===null?ds(a,T=>r(T,d+1)):Js([n[d],null],T=>r(Y(a,T),d+1));return r(t,0),c},rc=t=>{let n,[c,r]=cc(),a=ns();return[(p,E,f,u=[],R=()=>[])=>{n??=t();let N=c(1);return W(a,N,[p,E,f,u,R]),Hs(fn(E,f??[""],zs),N),N},(p,E,...f)=>Js(ic(p,E),u=>ds(u,R=>Y(a,R)[0](n,...E??[],...f))),p=>qs(Y(a,p),([,E,f])=>(fn(E,f??[""],void 0,u=>(nt(u,p),ut(u)?1:0)),W(a,p),r(p),f)),p=>qs(Y(a,p),([E,,f=[],u,R])=>{let N=(...m)=>{let D=_s(m);D==_s(f)?E(n,...m,...R(m)):ko(f[D])?Js(u[D]?.(...m)??[],B=>N(...m,B)):N(...m,f[D])};N()})]},je=nc(t=>{let n=ns(),c=ns(),[r,a,d]=rc(()=>Z),[T,P,K,p,E,f,u,,R,N,m,D]=tc(t,ns,S=>js(S)?"":gt(S)?$o(S,Ne):Ne(S),r,a),B=(S,b)=>tt(f(S),b),Ls=(S,b,O,Q,cs,Es=ec)=>{let gs=js(cs)?void 0:([F],[q])=>cs(F,q);return R(S,b,(F,q,X,ps,Ss,Ns)=>{let ys=0,Ms=zs(),vs=zs(),is=f(S);if(ds(q,([k,rs],ls)=>{let A=zs(k),Os=zs(rs);ds(A,as=>nt(Os,as)?nt(A,as):0),ds(A,as=>{Hs(Ms,as),qs(Y(is,as),Rt=>{nt(Rt,ls),ut(Rt)&&(W(is,as),ys=1)})}),ds(Os,as=>{Hs(Ms,as),tt(is,as)||(W(is,as,zs()),ys=1),Hs(Y(is,as),ls),js(Q)||Hs(vs,as)})}),F(),ut(Ss)||(Ns?ht(is,k=>Hs(vs,k)):ht(X,k=>qs(Y(ps,k),rs=>Js(gt(rs)?rs:[rs],ls=>Hs(vs,ls)))),ds(vs,k=>{let rs=(A,Os)=>Es(Y(Ss,A),Y(Ss,Os),k),ls=[...Y(is,k)];Me(ls,rs)||(W(is,k,zs(ve(ls,rs))),Hs(Ms,k))})),(ys||Ns)&&!js(gs)){let k=[...is];Me(k,gs)||(u(S,ns(ve(k,gs))),ys=1)}ys&&a(n,[S]),ds(Ms,k=>a(c,[S,k]))},xe(O),qs(Q,xe)),Z},Ts=S=>K((b,O)=>S(b,Q=>Cs(b,Q,O))),ms=(S,b)=>Cs(S,b,f(S)),Cs=(S,b,O)=>{let Q=E(S);ds(O,(cs,Es)=>b(Es,gs=>ds(cs,F=>gs(F,q=>t.forEachCell(Q,F,q)))))},Z={setIndexDefinition:Ls,delIndexDefinition:S=>(N(S),Z),getStore:T,getIndexIds:P,forEachIndex:Ts,forEachSlice:ms,hasIndex:p,hasSlice:B,getTableId:E,getSliceIds:S=>Ae(f(S)),getSliceRowIds:(S,b)=>hn(Y(f(S),b)),addIndexIdsListener:m,addSliceIdsListener:(S,b)=>r(b,n,[S]),addSliceRowIdsListener:(S,b,O)=>r(O,c,[S,b]),delListener:S=>(d(S),Z),destroy:D,getListenerStats:()=>({sliceIds:Pe(n),sliceRowIds:Xo(c)})};return sc(Z)});var Zs=t=>typeof t;var lc=Zs(""),ac=Zs(!0),Ke=Zs(0),fc=Zs(Zs),Ut="type",Fs="default",Wt="allowNull",hc="null",gc="Listener",uc="add",Ks="Has",It="Ids",ot="Table",Ge=ot+"s",dc=ot+It,Jt="Row",Lc=Jt+"Count",Tc=Jt+It,qt="Cell",Ue=qt+It,Kt="Value",We=Kt+"s",Ec=Kt+It,H=t=>""+t,$e=t=>(n,c,r)=>t(n)?r?.():c(n),Sc=isFinite,pc=(t,n)=>t instanceof n,$t=t=>t==null,hs=t=>t===void 0,ct=t=>t===null,Cc=$e($t),J=$e(hs),Ze=t=>t==lc||t==ac,gn=t=>Zs(t)==fc,Oe=t=>Array.isArray(t),Ye=(t,n,c)=>t.slice(n,c),bs=t=>t.length,yc=(t,n)=>t.test(n),un=async(t,n,c)=>{try{return await t()}catch(r){n?.(r)}},Rc=(t,n)=>t.includes(n),mc=(t,n)=>t.every(n),Vc=(t,n)=>bs(t)===bs(n)&&mc(t,(c,r)=>n[r]===c),Nc=(t,n)=>t.sort(n),yt=(t,n)=>t.forEach(n),Zt=(t,n)=>t.map(n),Mc=(t,n,c)=>t.reduce(n,c),Ot=(t,...n)=>t.push(...n),vc=t=>t.shift(),dt=t=>{if(ct(t))return hc;let n=Zs(t);return Ze(n)||n==Ke&&Sc(t)?n:void 0},Be=(t,n,c,r,a)=>hs(a)?t.delCell(n,c,r,!0):t.setCell(n,c,r,a),ke=(t,n,c)=>hs(c)?t.delValue(n):t.setValue(n,c),yn=t=>n=>Mc(wc(n),(c,r)=>c+t(r),0),Rn=t=>t?.size??0,mn=yn(Rn),Et=yn(mn),dn=yn(Et),es=(t,n)=>t?.has(n)??!1,y=t=>hs(t)||Rn(t)==0,wc=t=>[...t?.values()??[]],Ln=t=>t.clear(),M=(t,n)=>t?.forEach(n),Qt=(t,n)=>t?.delete(n),Bs=Object,qe=t=>Bs.getPrototypeOf(t),xc=Bs.isFrozen,Qe=Bs.entries,Xt=t=>!$t(t)&&Cc(qe(t),n=>n==Bs.prototype||$t(qe(n)),()=>!0),Dc=Bs.keys,Hc=Bs.freeze,_c=(t=[])=>Bs.fromEntries(t),St=(t,n)=>n in t,Xe=(t,n)=>(delete t[n],t),Fc=(t,n)=>yt(Qe(t),([c,r])=>n(r,c)),bc=(t,n)=>Zt(Qe(t),([c,r])=>n(r,c)),Us=(t,n)=>_c(bc(t,(c,r)=>[r,n(c,r)])),Pc=t=>bs(Dc(t)),Rs=t=>Xt(t)&&Pc(t)==0,Gs=(t,n,c,r=0)=>$t(t)||!Xt(t)||!r&&Rs(t)||xc(t)?(c?.(),!1):(Fc(t,(a,d)=>{n(a,d)||Xe(t,d)}),r?!0:!Rs(t)),V=t=>new Map(t),Lt=t=>[...t?.keys()??[]],g=(t,n)=>t?.get(n),Ws=(t,n)=>M(t,(c,r)=>n(r,c)),Ac=(t,n)=>Zt([...t?.entries()??[]],([c,r])=>n(r,c)),_=(t,n,c)=>c===void 0?(Qt(t,n),t):t?.set(n,c),I=(t,n,c,r)=>(es(t,n)?r?.(g(t,n)):_(t,n,c()),g(t,n)),$s=(t,n,c,r=_)=>(Us(n,(a,d)=>c(t,d,a)),Ws(t,a=>St(n,a)?0:r(t,a)),t),fs=(t,n,c,r)=>{let a={};return M(t,(d,T)=>{if(!c?.(d,T)){let P=n?n(d,T):d;r?.(P)||(a[T]=P)}}),a},Sn=(t,n,c)=>fs(t,r=>fs(r,n,c),y,Rs),Yt=(t,n,c)=>fs(t,r=>Sn(r,n,c),y,Rs),Ys=(t,n)=>{let c=V();return M(t,(r,a)=>c.set(a,n?.(r)??r)),c},pn=t=>Ys(t,Ys),Tn=t=>Ys(t,pn),Cn=(t,n,c,r,a=0)=>J((c?I:g)(t,n[a],a>bs(n)-2?c:V),d=>{if(a>bs(n)-2)return r?.(d)&&_(t,n[a]),d;let T=Cn(d,n,c,r,a+1);return y(d)&&_(t,n[a]),T}),zc=JSON.stringify,En=JSON.parse,et=t=>zc(t,(n,c)=>pc(c,Map)?Bs.fromEntries([...c]):c),jc=(t,n)=>(t??0)<(n??0)?-1:1,Gc=/^\d+$/,Ie=()=>{let t=[],n=0;return[c=>(c?vc(t):null)??""+n++,c=>{yc(Gc,c)&&bs(t)<1e3&&Ot(t,c)}]},pt=t=>new Set(Oe(t)||hs(t)?t:[t]),Ct=(t,n)=>t?.add(n),Uc=(t,n=[""])=>{let c=[],r=(a,d)=>d==bs(n)?Ot(c,a):n[d]===null?M(a,T=>r(T,d+1)):yt([n[d],null],T=>r(g(a,T),d+1));return r(t,0),c},Wc=t=>{let n,[c,r]=Ie(),a=V();return[(p,E,f,u=[],R=()=>[])=>{n??=t();let N=c(1);return _(a,N,[p,E,f,u,R]),Ct(Cn(E,f??[""],pt),N),N},(p,E,...f)=>yt(Uc(p,E),u=>M(u,R=>g(a,R)[0](n,...E??[],...f))),p=>J(g(a,p),([,E,f])=>(Cn(E,f??[""],void 0,u=>(Qt(u,p),y(u)?1:0)),_(a,p),r(p),f)),p=>J(g(a,p),([E,,f=[],u,R])=>{let N=(...m)=>{let D=bs(m);D==bs(f)?E(n,...m,...R(m)):ct(f[D])?yt(u[D]?.(...m)??[],B=>N(...m,B)):N(...m,f[D])};N()})]},Bt=t=>[t,t],G=(t,n=mn)=>n(t[0])+n(t[1]),U=()=>[V(),V()],Je=t=>[...t],kt=([t,n])=>t===n,Tt=(t,n,c)=>_(t,n,g(t,n)==-c?void 0:c),Vn=()=>{let t,n,c=!1,r=!1,a=0,d=[],T=V(),P=V(),K=V(),p=V(),E=V(),f=V(),u=V(),R=V(),N=V(),m=V(),D=V(),B=V(),Ls=V(),Ts=V(),ms=pt(),Cs=V(),Vs=V(),v=V(),$=V(),it=U(),C=U(),z=U(),os=U(),Z=U(),S=U(),b=U(),O=U(),Q=U(),cs=U(),Es=U(),gs=U(),F=U(),q=U(),X=U(),ps=U(),Ss=U(),Ns=U(),ys=U(),Ms=U(),vs=U(),is=U(),k=V(),rs=U(),[ls,A,Os,as]=Wc(()=>ss),Rt=s=>Gs(s,e=>Gs(e,vn)),eo=s=>Gs(s,vn),vn=s=>{if(!Gs(s,(i,l)=>Rc([Ut,Fs,Wt],l)))return!1;let e=s[Ut];if(!Ze(e)&&e!=Ke)return!1;let o=s[Fs];return ct(o)&&!s[Wt]?!1:(!ct(o)&&dt(o)!=e&&Xe(s,Fs),!0)},oo=Oe,co=s=>Gs(s,wn,ws),wn=(s,e)=>(!t||es(D,e)||ws(e))&&Gs(s,(o,i)=>mt(e,i,o),()=>ws(e)),mt=(s,e,o,i)=>Gs(i?o:_n(o,s,e),(l,h)=>J(xn(s,e,h,l),L=>(o[h]=L,!0),()=>!1),()=>ws(s,e)),xn=(s,e,o,i)=>t?J(g(g(D,s),o),l=>ct(i)?l[Wt]?i:ws(s,e,o,i,l[Fs]):dt(i)==l[Ut]?i:ws(s,e,o,i,l[Fs]),()=>ws(s,e,o,i)):hs(dt(i))?ws(s,e,o,i):i,Dn=(s,e)=>Gs(e?s:io(s),(o,i)=>J(Hn(i,o),l=>(s[i]=l,!0),()=>!1),()=>Qs()),Hn=(s,e)=>n?J(g(Ls,s),o=>ct(e)?o[Wt]?e:Qs(s,e,o[Fs]):dt(e)==o[Ut]?e:Qs(s,e,o[Fs]),()=>Qs(s,e)):hs(dt(e))?Qs(s,e):e,_n=(s,e,o)=>(J(g(B,e),([i,l])=>{M(i,(h,L)=>{St(s,L)||(s[L]=h)}),M(l,h=>{St(s,h)||ws(e,o,h)})}),s),io=s=>(n&&(M(Ts,(e,o)=>{St(s,o)||(s[o]=e)}),M(ms,e=>{St(s,e)||Qs(e)})),s),Fn=s=>$s(D,s,(e,o,i)=>{let l=V(),h=pt();$s(I(D,o,V),i,(L,w,x)=>{_(L,w,x),J(x[Fs],xs=>_(l,w,xs),()=>Ct(h,w))}),_(B,o,[l,h])},(e,o)=>{_(D,o),_(B,o)}),bn=s=>$s(Ls,s,(e,o,i)=>{_(Ls,o,i),J(i[Fs],l=>_(Ts,o,l),()=>Ct(ms,o))},(e,o)=>{_(Ls,o),_(Ts,o),Qt(ms,o)}),Pn=s=>Rs(s)?Pt():Ft(s),ro=([s,e])=>{(Rs(s)?Pt:Ft)(s),(Rs(e)?At:bt)(e)},An=s=>$s(v,s,(e,o,i)=>Vt(o,i),(e,o)=>Un(o)),Vt=(s,e)=>$s(I(v,s,()=>(kn(s,1),_(Cs,s,Ie()),_(Vs,s,V()),V())),e,(o,i,l)=>rt(s,o,i,l),(o,i)=>Wn(s,o,i)),rt=(s,e,o,i,l)=>$s(I(e,o,()=>(qn(s,o,1),V())),i,(h,L,w)=>sn(s,o,h,L,w),(h,L)=>Yn(s,e,o,h,L,l)),sn=(s,e,o,i,l)=>{es(o,i)||Jn(s,e,i,1);let h=g(o,i);l!==h&&(Kn(s,e,i,h,l),_(o,i,l))},zn=(s,e,o,i,l)=>J(g(e,o),h=>sn(s,o,h,i,l),()=>rt(s,e,o,_n({[i]:l},s,o))),jn=s=>Rs(s)?At():bt(s),Gn=s=>$s($,s,(e,o,i)=>Nt(o,i),(e,o)=>Bn(o)),Nt=(s,e)=>{es($,s)||$n(s,1);let o=g($,s);e!==o&&(Zn(s,o,e),_($,s,e))},lo=(s,e)=>{let[o]=g(Cs,s),i;do i=o(e);while(es(g(v,s),i));return i},Mt=s=>g(v,s)??Vt(s,{}),Un=s=>Vt(s,{}),Wn=(s,e,o)=>{let[,i]=g(Cs,s);i(o),rt(s,e,o,{},!0)},Yn=(s,e,o,i,l,h)=>{let L=g(g(B,s)?.[0],l);if(!hs(L)&&!h)return sn(s,o,i,l,L);let w=x=>{Kn(s,o,x,g(i,x)),Jn(s,o,x,-1),_(i,x)};hs(L)?w(l):Ws(i,w),y(i)&&(qn(s,o,-1),y(_(e,o))&&(kn(s,-1),_(v,s),_(Cs,s),_(Vs,s)))},Bn=s=>{let e=g(Ts,s);if(!hs(e))return Nt(s,e);Zn(s,g($,s)),$n(s,-1),_($,s)},kn=(s,e)=>Tt(T,s,e),qn=(s,e,o)=>Tt(I(p,s,V),e,o)&&_(K,s,I(K,s,()=>0)+o),Jn=(s,e,o,i)=>{let l=g(Vs,s),h=g(l,o)??0;(h==0&&i==1||h==1&&i==-1)&&Tt(I(P,s,V),o,i),_(l,o,h!=-i?h+i:void 0),Tt(I(I(E,s,V),e,V),o,i)},Kn=(s,e,o,i,l)=>{I(I(I(f,s,V),e,V),o,()=>[i,0])[1]=l,d[3]?.(s,e,o,l)},$n=(s,e)=>Tt(u,s,e),Zn=(s,e,o)=>{I(R,s,()=>[e,0])[1]=o,d[4]?.(s,o)},ws=(s,e,o,i,l)=>(Ot(I(I(I(N,s,V),e,V),o,()=>[]),i),l),Qs=(s,e,o)=>(Ot(I(m,s,()=>[]),e),o),vt=(s,e,o)=>J(g(g(g(f,s),e),o),([i,l])=>[!0,i,l],()=>[!1,...Bt(xt(s,e,o))]),On=s=>J(g(R,s),([e,o])=>[!0,e,o],()=>[!1,...Bt(Dt(s))]),Qn=s=>!y(N)&&!y(ps[s])?M(s?Tn(N):N,(e,o)=>M(e,(i,l)=>M(i,(h,L)=>A(ps[s],[o,l,L],h)))):0,Xn=s=>!y(m)&&!y(Ss[s])?M(s?Ys(m):m,(e,o)=>A(Ss[s],[o],e)):0,lt=(s,e,o,i)=>{if(!y(s))return A(e,i,()=>fs(s)),Ws(s,(l,h)=>A(o,[...i??[],l],h==1)),1},In=s=>{let e=Ht();e!=c&&A(it[s],void 0,e);let o=y(cs[s]),i=y(F[s])&&y(q[s])&&y(Q[s])&&y(Es[s])&&y(S[s])&&y(b[s])&&y(O[s])&&o&&y(z[s])&&y(os[s]),l=y(X[s])&&y(gs[s])&&y(Z[s])&&y(C[s]);if(!i||!l){let h=s?[Ys(T),pn(P),Ys(K),pn(p),Tn(E),Tn(f)]:[T,P,K,p,E,f];if(!i){lt(h[0],z[s],os[s]),M(h[1],(w,x)=>lt(w,S[s],b[s],[x])),M(h[2],(w,x)=>{w!=0&&A(O[s],[x],ee(x))});let L=pt();M(h[3],(w,x)=>{lt(w,Q[s],Es[s],[x])&&!o&&(A(cs[s],[x,null]),Ct(L,x))}),o||M(h[5],(w,x)=>{if(!es(L,x)){let xs=pt();M(w,Ps=>M(Ps,([zt,jt],at)=>jt!==zt?Ct(xs,at):Qt(Ps,at))),M(xs,Ps=>A(cs[s],[x,Ps]))}}),M(h[4],(w,x)=>M(w,(xs,Ps)=>lt(xs,F[s],q[s],[x,Ps])))}if(!l){let L;M(h[5],(w,x)=>{let xs;M(w,(Ps,zt)=>{let jt;M(Ps,([at,Ee],Ao)=>{Ee!==at&&(A(X[s],[x,zt,Ao],Ee,at,vt),L=xs=jt=1)}),jt&&A(gs[s],[x,zt],vt)}),xs&&A(Z[s],[x],vt)}),L&&A(C[s],void 0,vt)}}},se=s=>{let e=_t();e!=r&&A(Ns[s],void 0,e);let o=y(Ms[s])&&y(vs[s]),i=y(is[s])&&y(ys[s]);if(!o||!i){let l=s?[Ys(u),Ys(R)]:[u,R];if(o||lt(l[0],Ms[s],vs[s]),!i){let h;M(l[1],([L,w],x)=>{w!==L&&(A(is[s],[x],w,L,On),h=1)}),h&&A(ys[s],void 0,On)}}},j=(s,...e)=>(rn(()=>s(...Zt(e,H))),ss),te=(s,e,o,i,l)=>{let h=wt(s,e,...o);return ls(()=>{let L=wt(s,e,...o);Vc(L,h)||(h=L,i(ss,s,e,...o,h))},cs[l?1:0],[s,e],[us])},ao=()=>[tn(),en()],tn=()=>Yt(v),us=()=>Lt(v),fo=s=>Sn(g(v,H(s))),ne=s=>Lt(g(Vs,H(s))),ee=s=>Rn(g(v,H(s))),Xs=s=>Lt(g(v,H(s))),wt=(s,e,o,i=0,l)=>Xt(s)?wt(s.tableId,s.cellId,s.descending,s.offset,s.limit):Zt(Ye(Nc(Ac(g(v,H(s)),(h,L)=>[hs(e)?L:g(h,H(e)),L]),([h],[L])=>jc(h,L)*(o?-1:1)),i,hs(l)?l:i+l),([,h])=>h),ho=(s,e)=>fs(g(g(v,H(s)),H(e))),nn=(s,e)=>Lt(g(g(v,H(s)),H(e))),xt=(s,e,o)=>g(g(g(v,H(s)),H(e)),H(o)),en=()=>fs($),on=()=>Lt($),Dt=s=>g($,H(s)),Ht=()=>!y(v),oe=s=>es(v,H(s)),ce=(s,e)=>es(g(Vs,H(s)),H(e)),ie=(s,e)=>es(g(v,H(s)),H(e)),re=(s,e,o)=>es(g(g(v,H(s)),H(e)),H(o)),_t=()=>!y($),le=s=>es($,H(s)),go=()=>et(v),uo=()=>et($),Lo=()=>et([v,$]),To=()=>et(D),Eo=()=>et(Ls),So=()=>et([D,Ls]),po=s=>j(()=>{let e=gn(s)?s():s;oo(e)&&ro(e)}),Ft=s=>j(()=>co(s)?An(s):0),Co=(s,e)=>j(o=>wn(e,o)?Vt(o,e):0,s),yo=(s,e,o)=>j((i,l)=>mt(i,l,o)?rt(i,Mt(i),l,o):0,s,e),Ro=(s,e,o=!0)=>rn(()=>{let i;return mt(s,i,e)&&(s=H(s),rt(s,Mt(s),i=lo(s,o?1:0),e)),i}),mo=(s,e,o)=>j((i,l)=>{if(mt(i,l,o,1)){let h=Mt(i);Us(o,(L,w)=>zn(i,h,l,w,L))}},s,e),Vo=(s,e,o,i)=>j((l,h,L)=>J(xn(l,h,L,gn(i)?i(xt(l,h,L)):i),w=>zn(l,Mt(l),h,L,w)),s,e,o),bt=s=>j(()=>Dn(s)?Gn(s):0),No=s=>j(()=>Dn(s,1)?Us(s,(e,o)=>Nt(o,e)):0),Mo=(s,e)=>j(o=>J(Hn(o,gn(e)?e(Dt(o)):e),i=>Nt(o,i)),s),vo=s=>j(()=>{Us(s[0],(e,o)=>hs(e)?ge(o):Us(e,(i,l)=>hs(i)?ue(o,l):Us(i,(h,L)=>Be(ss,o,l,L,h)))),Us(s[1],(e,o)=>ke(ss,o,e))}),ae=s=>(un(()=>Pn(En(s))),ss),wo=s=>(un(()=>jn(En(s))),ss),xo=s=>j(()=>un(()=>{let[e,o]=En(s);Pn(e),jn(o)},()=>ae(s))),fe=s=>j(()=>{if((t=Rt(s))&&(Fn(s),!y(v))){let e=tn();Pt(),Ft(e)}}),he=s=>j(()=>{if(n=eo(s)){let e=en();cn(),At(),n=!0,bn(s),bt(e)}}),Do=(s,e)=>j(()=>{fe(s),he(e)}),Pt=()=>j(()=>An({})),ge=s=>j(e=>es(v,e)?Un(e):0,s),ue=(s,e)=>j((o,i)=>J(g(v,o),l=>es(l,i)?Wn(o,l,i):0),s,e),Ho=(s,e,o,i)=>j((l,h,L)=>J(g(v,l),w=>J(g(w,h),x=>es(x,L)?Yn(l,w,h,x,L,i):0)),s,e,o),At=()=>j(()=>Gn({})),_o=s=>j(e=>es($,e)?Bn(e):0,s),de=()=>j(()=>{Fn({}),t=!1}),cn=()=>j(()=>{bn({}),n=!1}),Fo=()=>j(()=>{de(),cn()}),rn=(s,e)=>{if(a!=-1){Le();let o=s();return Te(e),o}},Le=()=>(a!=-1&&a++,a==1&&(d[0]?.(),A(k)),ss),bo=()=>[fs(f,(s,e)=>g(T,e)===-1?void 0:fs(s,(o,i)=>g(g(p,e),i)===-1?void 0:fs(o,([,l])=>l,l=>kt(l)),y,Rs),y,Rs),fs(R,([,s])=>s,s=>kt(s)),1],Po=()=>[!y(f),!y(R),Yt(f,Je,kt),Yt(N),fs(R,Je,kt),fs(m),fs(T),Sn(p),Yt(E),fs(u)],Te=s=>(a>0&&(a--,a==0&&(a=1,Qn(1),y(f)||In(1),Xn(1),y(R)||se(1),s?.(ss)&&(M(f,(e,o)=>M(e,(i,l)=>M(i,([h],L)=>Be(ss,o,l,L,h)))),Ln(f),M(R,([e],o)=>ke(ss,o,e)),Ln(R)),A(rs[0],void 0),a=-1,Qn(0),y(f)||In(0),Xn(0),y(R)||se(0),d[1]?.(),A(rs[1],void 0),d[2]?.(),a=0,c=Ht(),r=_t(),yt([T,P,K,p,E,f,N,u,R,m],Ln))),ss),ss={getContent:ao,getTables:tn,getTableIds:us,getTable:fo,getTableCellIds:ne,getRowCount:ee,getRowIds:Xs,getSortedRowIds:wt,getRow:ho,getCellIds:nn,getCell:xt,getValues:en,getValueIds:on,getValue:Dt,hasTables:Ht,hasTable:oe,hasTableCell:ce,hasRow:ie,hasCell:re,hasValues:_t,hasValue:le,getTablesJson:go,getValuesJson:uo,getJson:Lo,getTablesSchemaJson:To,getValuesSchemaJson:Eo,getSchemaJson:So,hasTablesSchema:()=>t,hasValuesSchema:()=>n,setContent:po,setTables:Ft,setTable:Co,setRow:yo,addRow:Ro,setPartialRow:mo,setCell:Vo,setValues:bt,setPartialValues:No,setValue:Mo,applyChanges:vo,setTablesJson:ae,setValuesJson:wo,setJson:xo,setTablesSchema:fe,setValuesSchema:he,setSchema:Do,delTables:Pt,delTable:ge,delRow:ue,delCell:Ho,delValues:At,delValue:_o,delTablesSchema:de,delValuesSchema:cn,delSchema:Fo,transaction:rn,startTransaction:Le,getTransactionChanges:bo,getTransactionLog:Po,finishTransaction:Te,forEachTable:s=>M(v,(e,o)=>s(o,i=>M(e,(l,h)=>i(h,L=>Ws(l,L))))),forEachTableCell:(s,e)=>Ws(g(Vs,H(s)),e),forEachRow:(s,e)=>M(g(v,H(s)),(o,i)=>e(i,l=>Ws(o,l))),forEachCell:(s,e,o)=>Ws(g(g(v,H(s)),H(e)),o),forEachValue:s=>Ws($,s),addSortedRowIdsListener:(s,e,o,i,l,h,L)=>Xt(s)?te(s.tableId,s.cellId,[s.descending??!1,s.offset??0,s.limit],e,o):te(s,e,[o,i,l],h,L),addStartTransactionListener:s=>ls(s,k),addWillFinishTransactionListener:s=>ls(s,rs[0]),addDidFinishTransactionListener:s=>ls(s,rs[1]),callListener:s=>(as(s),ss),delListener:s=>(Os(s),ss),getListenerStats:()=>({hasTables:G(it),tables:G(C),tableIds:G(z),hasTable:G(os),table:G(Z),tableCellIds:G(S),hasTableCell:G(b,Et),rowCount:G(O),rowIds:G(Q),sortedRowIds:G(cs),hasRow:G(Es,Et),row:G(gs,Et),cellIds:G(F,Et),hasCell:G(q,dn),cell:G(X,dn),invalidCell:G(ps,dn),hasValues:G(Ns),values:G(ys),valueIds:G(Ms),hasValue:G(vs),value:G(is),invalidValue:G(Ss),transaction:mn(k)+G(rs)}),isMergeable:()=>!1,createStore:Vn,addListener:ls,callListeners:A,setInternalListeners:(s,e,o,i,l)=>d=[s,e,o,i,l]};return Us({[Ks+Ge]:[0,it,[],()=>[Ht()]],[Ge]:[0,C],[dc]:[0,z],[Ks+ot]:[1,os,[us],s=>[oe(...s)]],[ot]:[1,Z,[us]],[ot+Ue]:[1,S,[us]],[Ks+ot+qt]:[2,b,[us,ne],s=>[ce(...s)]],[Lc]:[1,O,[us]],[Tc]:[1,Q,[us]],[Ks+Jt]:[2,Es,[us,Xs],s=>[ie(...s)]],[Jt]:[2,gs,[us,Xs]],[Ue]:[2,F,[us,Xs]],[Ks+qt]:[3,q,[us,Xs,nn],s=>[re(...s)]],[qt]:[3,X,[us,Xs,nn],s=>Bt(xt(...s))],InvalidCell:[3,ps],[Ks+We]:[0,Ns,[],()=>[_t()]],[We]:[0,ys],[Ec]:[0,Ms],[Ks+Kt]:[1,vs,[on],s=>[le(...s)]],[Kt]:[1,is,[on],s=>Bt(Dt(s[0]))],InvalidValue:[1,Ss]},([s,e,o,i],l)=>{ss[uc+l+gc]=(...h)=>ls(h[s],e[h[s+1]?1:0],s>0?Ye(h,0,s):void 0,o,i)}),Hc(ss)};var Yc=["db","id","ids","no","ui","ws","add","api","bun","del","dom","for","get","has","hlc","log","map","row","set","sql","use","web","yjs"],no=(t=!1)=>{addEventListener("load",()=>{let n=Ds("body > header > nav");if(n==null)return;let c=ts("div",null,{id:"search"}),r=ts("input",c,{type:"text",placeholder:(navigator.platform.startsWith("Mac")?"\u2318":"cmd-")+"K Search"}),a=ts("ol",c),d=ts("li",a,{},"No results found"),T=Vn(),P=je(T);P.setIndexDefinition("p","p",f=>{let u=[];return f("t").split(" ").forEach(R=>{for(let N=0;N<R.length;N++)u.push(R.slice(0,N+1))}),u},"t",void 0,(f,u,R)=>Mn(u,R)-Mn(f,R)),fetch("/pages.json").then(f=>f.json()).then(f=>{T.transaction(()=>{T.setContent(f),T.forEachRow("p",u=>{let{n:R,s:N}=T.getRow("p",u),m=new Set;Nn(u,m,!0),Nn(R,m),Nn(N,m),T.setCell("p",u,"t",Array.from(m.values()).join(" "))})}),K()});let K=()=>{n.prepend(c);let f=()=>(r.value?ks:ft)(a,"show");r.addEventListener("focus",f),r.addEventListener("input",()=>{f(),p()}),r.addEventListener("blur",()=>ft(a,"show")),E()},p=()=>{let f=r.value.toLowerCase().split(/[^a-z0-9]+/),u=new Map;f.forEach(m=>P.getSliceRowIds("p",m).slice(0,50).forEach(D=>u.set(D,(u.get(D)??0)+Mn(T.getCell("p",D,"t"),m))));let R=Array.from(u.keys()).sort((m,D)=>u.get(D)-u.get(m)).slice(0,10),N=R.length==0?[d]:R.map((m,D)=>{let B=ts("li"),{n:Ls,s:Ts}=T.getRow("p",m);return so(ts("b",B),Ls,f[0]),so(ts("span",B),Ts,f[0]),B.title=Ts,B.addEventListener("mousedown",()=>t?location.href=m:Re(m)),D==0&&ks(B,"hover"),B});a.replaceChildren(...N)},E=()=>addEventListener("keydown",f=>{if(st.activeElement==r){let u=Is(a,".hover");switch(f.code){case"Escape":return r.blur();case"ArrowDown":return Gt(f),to(u,u?.nextSibling??a.firstChild);case"ArrowUp":return Gt(f),to(u,u?.previousSibling??a.lastChild);case"Enter":return u?.dispatchEvent(new MouseEvent("mousedown"))}}else f.code=="KeyK"&&f.metaKey&&(r.focus(),Gt(f))})})},so=(t,n,c)=>{let r=n.toLowerCase().indexOf(c);t.innerHTML=r==-1?n:n.substring(0,r)+"<em>"+n.substring(r,r+c.length)+"</em>"+n.substring(r+c.length)},to=(t,n)=>{t!=n&&(t&&ft(t,"hover"),n&&(ks(n,"hover"),n.scrollIntoView({block:"nearest",inline:"nearest"})))},Nn=(t,n,c)=>{let r=t.replaceAll(/[^a-zA-Z0-9]/g," ").split(/\s+/);c&&r.reverse(),r.forEach(a=>{[a,...a.replaceAll(/([a-z])([A-Z])/g,"$1 $2").split(" ")].forEach(d=>{let T=d.toLowerCase();(T.length>3||Yc.includes(T))&&n.add(T)})})},Mn=(t,n)=>{let c=t.length,r=t.indexOf(n);return r===-1?0:(c-r)/c};pe();Ve();no(!0);})();
