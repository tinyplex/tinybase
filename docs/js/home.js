"use strict";(()=>{var Pe="v8.0.0-beta.2";var Zo="TinyBase",at=document,Ae=()=>{addEventListener("load",()=>{let t=zs("#version");t.innerText=Pe,t.style.width=t.scrollWidth+"px"})},Qo=null,ze=()=>Qo??=zs("body > main > nav"),Xo=null,je=()=>Xo??=zs("body > main > article"),Jt=t=>t.preventDefault(),zs=t=>at.querySelector(t),rt=(t,n)=>t.querySelector(n),Io=t=>at.getElementById(t),ts=(t,n,i={},r)=>{let f=at.createElement(t);return Object.entries(i).forEach(g=>f.setAttribute(...g)),r!=null&&(f.innerText=r),n!=null?n.appendChild(f):f},Os=(t,n)=>t.classList.add(n);var dt=(t,n)=>t.classList.remove(n);var Ge=(t,n=!0)=>{let i=ze();["?","#"].forEach(r=>{t.includes(r)&&(t=t.substring(0,t.indexOf(r)))}),fetch(`${t}nav.json`).then(r=>r.json()).then(r=>{dt(rt(i,"li.current"),"current"),Be(r,rt(i,"ul"))}),fetch(`${t}article.html`).then(r=>r.text()).then(r=>{let f=je();f.innerHTML=r,f.scrollTo(0,0),sc()}),n&&history.pushState(null,"",t)},sc=()=>{let t=rt(je(),":scope iframe"),n=t?.parentElement;if(t==null||n==null)return;let i=n.insertBefore(ts("form",null,{action:"https://codepen.io/pen/define",method:"post",target:"_blank"}),t);n.insertBefore(ts("a",null,{id:"penEdit"},"Open this demo in CodePen"),t).onclick=()=>{i.childNodes.length==0?fetch("pen.json").then(r=>r.text()).then(r=>{ts("input",i,{type:"hidden",name:"data",value:r}),i.submit()}):i.submit()}},Be=({i:t,n,u:i,r,c:f,p:g,o:S,_:z},K)=>{let M=ze(),p=Io(t);if(p==null){p=ts("li",K,{id:t}),ts("span",p);let h=ts("a",p,{href:i});r?ts("code",h,{},n):h.innerText=n,g&&Os(p,"parent")}if(S&&Os(p,"open"),z!=null){let h=rt(p,"ul")??ts("ul",p);z.forEach(T=>{Be(T,h)})}if(f){Os(p,"current"),at.title=`${n} | ${Zo}`;let h=p.getBoundingClientRect(),T=M.getBoundingClientRect();h.top<T.top?M.scrollBy(0,h.top-T.top):h.bottom>T.bottom&&M.scrollBy(0,Math.min(h.bottom-T.bottom,h.top-T.top))}};var bs="dark",Sn="light",pn="auto",Ue=()=>{let t=matchMedia("(prefers-color-scheme: dark)"),n=()=>{let i=localStorage.getItem(bs)??pn;zs("#dark")?.setAttribute("class",i),zs("html").className=i==bs||i==pn&&t.matches?bs:Sn};t.addEventListener("change",n),window.addEventListener("storage",i=>{i.storageArea==localStorage&&i.key==bs&&n()}),addEventListener("load",()=>{zs("#dark").addEventListener("click",()=>{let i=localStorage.getItem(bs);localStorage.setItem(bs,i==bs?Sn:i==Sn?pn:bs),n()}),n()}),n()};var Je=t=>typeof t;var tc=Je(""),We=t=>""+t,nc=t=>(n,i,r)=>t(n)?r?.():i(n),Gs=t=>t===void 0,Ke=t=>t===null,Zs=nc(Gs),ec=t=>Je(t)==tc,St=t=>Array.isArray(t),Bs=t=>t.length,oc=(t,n)=>t.test(n),$e=(t,n)=>t.every(n),cc=(t,n)=>Bs(t)===Bs(n)&&$e(t,(i,r)=>n[r]===i),Ye=(t,n)=>$e(t,(i,r)=>r==0||n(t[r-1],i)<=0),be=(t,n)=>t.sort(n),Qs=(t,n)=>t.forEach(n),ic=(t,n)=>t.map(n),rc=t=>Bs(t)==0,ac=(t,n,i)=>t.reduce(n,i),Oe=(t,...n)=>t.push(...n),lc=t=>t.shift(),Ze=t=>n=>ac(Rn(n),(i,r)=>i+t(r),0),Qe=t=>t?.size??0,Xe=Ze(Qe),fc=Ze(Xe),lt=(t,n)=>t?.has(n)??!1,pt=t=>Gs(t)||Qe(t)==0,Rn=t=>[...t?.values()??[]],qe=t=>t.clear(),Ls=(t,n)=>t?.forEach(n),ft=(t,n)=>t?.delete(n),hc=Object,uc=hc.freeze,gc=Map,ns=t=>new gc(t),Ie=t=>[...t?.keys()??[]],k=(t,n)=>t?.get(n),Et=(t,n)=>Ls(t,(i,r)=>n(r,i)),b=(t,n,i)=>Gs(i)?(ft(t,n),t):t?.set(n,i),so=(t,n,i,r)=>(lt(t,n)?r?.(k(t,n)):b(t,n,i()),k(t,n)),Cn=(t,n,i,r,f=0)=>Zs((i?so:k)(t,n[f],f>Bs(n)-2?i:ns),g=>{if(f>Bs(n)-2)return r?.(g)&&b(t,n[f]),g;let S=Cn(g,n,i,r,f+1);return pt(g)&&b(t,n[f]),S}),qs=t=>new Set(St(t)||Gs(t)?t:[t]),js=(t,n)=>t?.add(n),Lc=(t,n,i,r,f)=>{let g=t.hasRow,S=ns(),z=ns(),K=ns(),M=ns(),p=ns(),h=ns(),T=()=>t,V=()=>Ie(S),w=d=>Et(z,d),C=d=>lt(z,d),F=d=>k(S,d),q=d=>k(z,d),fs=(d,B)=>b(z,d,B),Ts=(d,B,...cs)=>{let Z=so(h,d,qs);return Qs(cs,R=>js(Z,R)&&B&&t.callListener(R)),cs},ds=(d,...B)=>Zs(k(h,d),cs=>{Qs(rc(B)?Rn(cs):B,Z=>{t.delListener(Z),ft(cs,Z)}),pt(cs)&&b(h,d)}),Ms=(d,B)=>{b(S,d,B),lt(z,d)||(b(z,d,n()),b(M,d,ns()),b(p,d,ns()),f(K))},nt=(d,B,cs,Z,R)=>{Ms(d,B);let j=ns(),Q=ns(),X=k(M,d),hs=k(p,d),Es=P=>{let $=Ss=>t.getCell(B,P,Ss),I=k(X,P),Rs=g(B,P)?i(Z($,P)):void 0;if(I===Rs||St(I)&&St(Rs)&&cc(I,Rs)||b(j,P,[I,Rs]),!Gs(R)){let Ss=k(hs,P),vs=g(B,P)?R($,P):void 0;Ss!=vs&&b(Q,P,vs)}},is=P=>{cs(()=>{Ls(j,([,$],I)=>b(X,I,$)),Ls(Q,($,I)=>b(hs,I,$))},j,Q,X,hs,P),qe(j),qe(Q)};Et(X,Es),t.hasTable(B)&&Qs(t.getRowIds(B),P=>{lt(X,P)||Es(P)}),is(!0),ds(d),Ts(d,0,t.addRowListener(B,null,(P,$,I)=>Es(I)),t.addTableListener(B,()=>is()))},Hs=d=>{b(S,d),b(z,d),b(M,d),b(p,d),ds(d),f(K)};return[T,V,w,C,F,q,fs,Ms,nt,Hs,d=>r(d,K),()=>Et(h,Hs),Ts,ds]},ke=(t,n)=>ec(t)?i=>i(t):t??(()=>n??""),Tc=(t,n)=>{let i=new WeakMap;return r=>(i.has(r)||i.set(r,t(r)),i.get(r))},dc=(t,n)=>(t??0)<(n??0)?-1:1,Ec=/^\d+$/,Sc=()=>{let t=[],n=0;return[i=>(i?lc(t):null)??""+n++,i=>{oc(Ec,i)&&Bs(t)<1e3&&Oe(t,i)}]},pc=(t,n=[""])=>{let i=[],r=(f,g)=>g==Bs(n)?Oe(i,f):Ke(n[g])?Ls(f,S=>r(S,g+1)):Qs([n[g],null],S=>r(k(f,S),g+1));return r(t,0),i},Cc=t=>{let n,[i,r]=Sc(),f=ns();return[(M,p,h,T=[],V=()=>[])=>{n??=t();let w=i(1);return b(f,w,[M,p,h,T,V]),js(Cn(p,h??[""],qs),w),w},(M,p,...h)=>Qs(pc(M,p),T=>Ls(T,V=>k(f,V)[0](n,...p??[],...h))),M=>Zs(k(f,M),([,p,h])=>(Cn(p,h??[""],void 0,T=>(ft(T,M),pt(T)?1:0)),b(f,M),r(M),h)),M=>Zs(k(f,M),([p,,h=[],T,V])=>{let w=(...C)=>{let F=Bs(C);F==Bs(h)?p(n,...C,...V(C)):Ke(h[F])?Qs(T[F]?.(...C)??[],q=>w(...C,q)):w(...C,h[F])};w()})]},to=Tc(t=>{let n=ns(),i=ns(),[r,f,g]=Cc(()=>Z),[S,z,K,M,p,h,T,,V,w,C,F]=Lc(t,ns,R=>Gs(R)?"":St(R)?ic(R,We):We(R),r,f),q=(R,j)=>lt(h(R),j),fs=(R,j,Q,X,hs,Es=dc)=>{let is=Gs(hs)?void 0:([P],[$])=>hs(P,$);return V(R,j,(P,$,I,Rs,Ss,vs)=>{let ws=0,Fs=qs(),Ps=qs(),rs=h(R);if(Ls($,([J,us],ys)=>{let ms=qs(J),Vs=qs(us);Ls(ms,x=>ft(Vs,x)?ft(ms,x):0),Ls(ms,x=>{js(Fs,x),Zs(k(rs,x),wt=>{ft(wt,ys),pt(wt)&&(b(rs,x),ws=1)})}),Ls(Vs,x=>{js(Fs,x),lt(rs,x)||(b(rs,x,qs()),ws=1),js(k(rs,x),ys),Gs(X)||js(Ps,x)})}),P(),pt(Ss)||(vs?Et(rs,J=>js(Ps,J)):Et(I,J=>Zs(k(Rs,J),us=>Qs(St(us)?us:[us],ys=>js(Ps,ys)))),Ls(Ps,J=>{let us=(ms,Vs)=>Es(k(Ss,ms),k(Ss,Vs),J),ys=[...k(rs,J)];Ye(ys,us)||(b(rs,J,qs(be(ys,us))),js(Fs,J))})),(ws||vs)&&!Gs(is)){let J=[...rs];Ye(J,is)||(T(R,ns(be(J,is))),ws=1)}ws&&f(n,[R]),Ls(Fs,J=>f(i,[R,J]))},ke(Q),Zs(X,ke)),Z},Ts=R=>K((j,Q)=>R(j,X=>Ms(j,X,Q))),ds=(R,j)=>Ms(R,j,h(R)),Ms=(R,j,Q)=>{let X=p(R);Ls(Q,(hs,Es)=>j(Es,is=>Ls(hs,P=>is(P,$=>t.forEachCell(X,P,$)))))},Z={setIndexDefinition:fs,delIndexDefinition:R=>(w(R),Z),getStore:S,getIndexIds:z,forEachIndex:Ts,forEachSlice:ds,hasIndex:M,hasSlice:q,getTableId:p,getSliceIds:R=>Ie(h(R)),getSliceRowIds:(R,j)=>Rn(k(h(R),j)),addIndexIdsListener:C,addSliceIdsListener:(R,j)=>r(j,n,[R]),addSliceRowIdsListener:(R,j,Q)=>r(Q,i,[R,j]),delListener:R=>(g(R),Z),destroy:F,getListenerStats:()=>({sliceIds:Xe(n),sliceRowIds:fc(i)})};return uc(Z)});var tt=t=>typeof t;var Rc=tt(""),yc=tt(!0),lo=tt(0),mc=tt(tt),Kt="type",Us="default",$t="allowNull",Vc="null",Nc="Listener",Mc="add",Xs="Has",rn="Ids",gt="Table",no=gt+"s",vc=gt+rn,sn="Row",wc=sn+"Count",xc=sn+rn,It="Cell",eo=It+rn,tn="Value",oo=tn+"s",Dc=tn+rn,_=t=>""+t,fo=t=>(n,i,r)=>t(n)?r?.():i(n),Hc=globalThis,_c=isFinite,Fc=(t,n)=>t instanceof n,nn=t=>t==null,es=t=>t===void 0,st=t=>t===null,Pc=fo(nn),A=fo(es),ho=t=>t==Rc||t==yc,yn=t=>tt(t)==mc,uo=t=>Array.isArray(t),co=(t,n,i)=>t.slice(n,i),Ds=t=>t.length,Ac=(t,n)=>t.test(n),ht=Hc.structuredClone,mn=async(t,n,i)=>{try{return await t()}catch(r){n?.(r)}},zc=(t,n)=>t.includes(n),_n=(t,n)=>t.every(n),jc=(t,n)=>Ds(t)===Ds(n)&&_n(t,(i,r)=>n[r]===i),Gc=(t,n)=>t.sort(n),vt=(t,n)=>t.forEach(n),en=(t,n)=>t.map(n),Bc=(t,n,i)=>t.reduce(n,i),on=(t,...n)=>t.push(...n),Uc=t=>t.shift(),Ct=t=>{if(st(t))return Vc;let n=tt(t);return ho(n)||n==lo&&_c(t)?n:void 0},Fn=t=>n=>Bc(go(n),(i,r)=>i+t(r),0),Pn=t=>t?.size??0,An=Fn(Pn),mt=Fn(An),Vn=Fn(mt),os=(t,n)=>t?.has(n)??!1,m=t=>es(t)||Pn(t)==0,go=t=>[...t?.values()??[]],Nn=t=>t.clear(),v=(t,n)=>t?.forEach(n),cn=(t,n)=>t?.delete(n),Ws=Object,io=t=>Ws.getPrototypeOf(t),Wc=Ws.isFrozen,zn=Ws.entries,Lt=t=>!nn(t)&&Pc(io(t),n=>n==Ws.prototype||nn(io(n)),()=>!0),Yc=Ws.keys,bc=Ws.freeze,qc=(t=[])=>Ws.fromEntries(t),kc=(...t)=>Ws.assign({},...t),Vt=(t,n)=>n in t,vn=(t,n)=>(delete t[n],t),Jc=(t,n)=>vt(zn(t),([i,r])=>n(r,i)),Kc=(t,n)=>en(zn(t),([i,r])=>n(r,i)),Cs=(t,n)=>qc(Kc(t,(i,r)=>[r,n(i,r)])),Lo=t=>Ds(Yc(t)),xs=t=>Lt(t)&&Lo(t)==0,Ks=(t,n,i=(r,f)=>r===f)=>{let r=zn(t);return Ds(r)===Lo(n)&&_n(r,([f,g])=>Lt(g)?Lt(n[f])?Ks(n[f],g):!1:i(g,n[f]))},ks=(t,n,i,r=0)=>nn(t)||!Lt(t)||!r&&xs(t)||Wc(t)?(i?.(),!1):(Jc(t,(f,g)=>{n(f,g)||vn(t,g)}),r?!0:!xs(t)),$c=Map,N=t=>new $c(t),Rt=t=>[...t?.keys()??[]],L=(t,n)=>t?.get(n),Js=(t,n)=>v(t,(i,r)=>n(r,i)),Oc=(t,n)=>en([...t?.entries()??[]],([i,r])=>n(r,i)),D=(t,n,i)=>es(i)?(cn(t,n),t):t?.set(n,i),O=(t,n,i,r)=>(os(t,n)?r?.(L(t,n)):D(t,n,i()),L(t,n)),Is=(t,n,i,r=D)=>(Cs(n,(f,g)=>i(t,g,f)),Js(t,f=>Vt(n,f)?0:r(t,f)),t),ls=(t,n,i,r)=>{let f={};return v(t,(g,S)=>{if(!i?.(g,S)){let z=n?n(g,S):g;r?.(z)||(f[S]=z)}}),f},wn=(t,n,i)=>ls(t,r=>ls(r,n,i),m,xs),Ot=(t,n,i)=>ls(t,r=>wn(r,n,i),m,xs),Ns=(t,n)=>{let i=N();return v(t,(r,f)=>i.set(f,n?.(r)??r)),i},xn=t=>Ns(t,Ns),ro=t=>Ns(t,xn),Dn=(t,n,i,r,f=0)=>A((i?O:L)(t,n[f],f>Ds(n)-2?i:N),g=>{if(f>Ds(n)-2)return r?.(g)&&D(t,n[f]),g;let S=Dn(g,n,i,r,f+1);return m(g)&&D(t,n[f]),S}),Zc=JSON.stringify,Mn=JSON.parse,ut=t=>Zc(t,(n,i)=>Fc(i,Map)?Ws.fromEntries([...i]):i),Qc=(t,n)=>(t??0)<(n??0)?-1:1,Xc=/^\d+$/,Hn=()=>{let t=[],n=0;return[i=>(i?Uc(t):null)??""+n++,i=>{Ac(Xc,i)&&Ds(t)<1e3&&on(t,i)}]},Nt=t=>new Set(uo(t)||es(t)?t:[t]),Mt=(t,n)=>t?.add(n),Ic=(t,n=[""])=>{let i=[],r=(f,g)=>g==Ds(n)?on(i,f):st(n[g])?v(f,S=>r(S,g+1)):vt([n[g],null],S=>r(L(f,S),g+1));return r(t,0),i},si=t=>{let n,[i,r]=Hn(),f=N();return[(M,p,h,T=[],V=()=>[])=>{n??=t();let w=i(1);return D(f,w,[M,p,h,T,V]),Mt(Dn(p,h??[""],Nt),w),w},(M,p,...h)=>vt(Ic(M,p),T=>v(T,V=>L(f,V)[0](n,...p??[],...h))),M=>A(L(f,M),([,p,h])=>(Dn(p,h??[""],void 0,T=>(cn(T,M),m(T)?1:0)),D(f,M),r(M),h)),M=>A(L(f,M),([p,,h=[],T,V])=>{let w=(...C)=>{let F=Ds(C);F==Ds(h)?p(n,...C,...V(C)):st(h[F])?vt(T[F]?.(...C)??[],q=>w(...C,q)):w(...C,h[F])};w()})]},Zt=t=>[t,t],W=(t,n=An)=>n(t[0])+n(t[1]),Y=()=>[N(),N()],Qt=t=>[...t],Xt=([t,n])=>t===n,yt=(t,n,i)=>D(t,n,L(t,n)==-i?void 0:i),ao=([t,n],[i,r])=>Ks(t,i)&&Ks(n,r),jn=()=>{let t,n,i=!1,r=!1,f=0,g=[],S=[],z=0,K=N(),M=N(),p=N(),h=N(),T=N(),V=N(),w=N(),C=N(),F=N(),q=N(),fs=N(),Ts=N(),ds=N(),Ms=N(),nt=Nt(),Hs=N(),_s=N(),H=N(),d=N(),B=Y(),cs=Y(),Z=Y(),R=Y(),j=Y(),Q=Y(),X=Y(),hs=Y(),Es=Y(),is=Y(),P=Y(),$=Y(),I=Y(),Rs=Y(),Ss=Y(),vs=Y(),ws=Y(),Fs=Y(),Ps=Y(),rs=Y(),J=Y(),us=Y(),ys=N(),ms=Y(),[Vs,x,wt,po]=si(()=>ps),ss=s=>{let e=z;z=1;let o=s();return z=e,o},Ys=(s,e,o,c=Object.is)=>A(e(),a=>s===a||c(s,a)?o(a):ss(()=>o(a))),Co=s=>ks(s,e=>ks(e,Un)),Ro=s=>ks(s,Un),Un=s=>{if(!ks(s,(c,a)=>zc([Kt,Us,$t],a)))return!1;let e=s[Kt];if(!ho(e)&&e!=lo)return!1;let o=s[Us];return st(o)&&!s[$t]?!1:(!st(o)&&Ct(o)!=e&&vn(s,Us),!0)},yo=uo,mo=s=>ks(s,Wn,As),Wn=(s,e)=>(!t||os(fs,e)||As(e))&&ks(s,(o,c)=>xt(e,c,o),()=>As(e)),xt=(s,e,o,c)=>ks(c?o:kn(o,s,e),(a,l)=>A(Yn(s,e,l,a),u=>(o[l]=u,!0),()=>!1),()=>As(s,e)),Yn=(s,e,o,c)=>t?A(L(L(fs,s),o),a=>st(c)?a[$t]?c:As(s,e,o,c,a[Us]):Ct(c)==a[Kt]?c:As(s,e,o,c,a[Us]),()=>As(s,e,o,c)):es(Ct(c))?As(s,e,o,c):c,bn=(s,e)=>ks(e?s:Vo(s),(o,c)=>A(qn(c,o),a=>(s[c]=a,!0),()=>!1),()=>et()),qn=(s,e)=>n?A(L(ds,s),o=>st(e)?o[$t]?e:et(s,e,o[Us]):Ct(e)==o[Kt]?e:et(s,e,o[Us]),()=>et(s,e)):es(Ct(e))?et(s,e):e,kn=(s,e,o)=>(A(L(Ts,e),([c,a])=>{v(c,(l,u)=>{Vt(s,u)||(s[u]=l)}),v(a,l=>{Vt(s,l)||As(e,o,l)})}),s),Vo=s=>(n&&(v(Ms,(e,o)=>{Vt(s,o)||(s[o]=e)}),v(nt,e=>{Vt(s,e)||et(e)})),s),Jn=s=>Is(fs,s,(e,o,c)=>{let a=N(),l=Nt();Is(O(fs,o,N),c,(u,E,y)=>{D(u,E,y),A(y[Us],G=>D(a,E,G),()=>Mt(l,E))}),D(Ts,o,[a,l])},(e,o)=>{D(fs,o),D(Ts,o)}),Kn=s=>Is(ds,s,(e,o,c)=>{D(ds,o,c),A(c[Us],a=>D(Ms,o,a),()=>Mt(nt,o))},(e,o)=>{D(ds,o),D(Ms,o),cn(nt,o)}),$n=s=>xs(s)?bt():Wt(s),Dt=(s,e,o,c,a)=>es(c)?xe(s,e,o,!0,a):ye(s,e,o,c,a),On=s=>xs(s)?qt():Yt(s),an=(s,e,o)=>es(e)?De(s,o):me(s,e,o),No=s=>Ys(s,()=>A(g[0],e=>ss(()=>e(ht(s))),()=>s),([e,o])=>{(xs(e)?bt:Wt)(e),(xs(o)?qt:Yt)(o)},ao),Zn=(s,e)=>Ys(s,()=>e?s:A(g[1],o=>ss(()=>o(ht(s))),()=>s),o=>Is(H,o,(c,a,l)=>ln(a,l),(c,a)=>In(a)),Ks),ln=(s,e,o)=>Ys(e,()=>o?e:A(g[2],c=>ss(()=>c(s,ht(e))),()=>e),c=>Is(O(H,s,()=>(fn(s,1),D(Hs,s,Hn()),D(_s,s,N()),N())),c,(a,l,u)=>Ht(s,a,l,u),(a,l)=>se(s,a,l)),Ks),Ht=(s,e,o,c,a)=>Ys(c,()=>a?c:A(g[3],l=>ss(()=>l(s,o,ht(c))),()=>c),l=>Is(O(e,o,()=>(hn(s,o,1),N())),l,(u,E,y)=>_t(s,o,u,E,y),(u,E)=>te(s,e,o,u,E,a)),Ks),_t=(s,e,o,c,a,l)=>Ys(a,()=>A(l?void 0:g[4],u=>ss(()=>u(s,e,c,a)),()=>a),u=>{os(o,c)||ee(s,e,c,1);let E=L(o,c);u!==E&&(oe(s,e,c,E,u),D(o,c,u))}),Qn=(s,e,o,c,a,l)=>A(L(e,o),u=>_t(s,o,u,c,a,l),()=>{let u=N();D(e,o,u),hn(s,o,1),Cs(kn({[c]:a},s,o),(E,y)=>_t(s,o,u,y,E,l))}),Xn=(s,e)=>Ys(s,()=>e?s:A(g[5],o=>ss(()=>o(ht(s))),()=>s),o=>Is(d,o,(c,a,l)=>Ft(a,l),(c,a)=>ne(a)),Ks),Ft=(s,e,o)=>Ys(e,()=>A(o?void 0:g[6],c=>ss(()=>c(s,e)),()=>e),c=>{os(d,s)||ce(s,1);let a=L(d,s);c!==a&&(ie(s,a,c),D(d,s,c))}),Mo=(s,e)=>{let[o]=L(Hs,s),c;do c=o(e);while(os(L(H,s),c));return c},Pt=s=>O(H,s,()=>(fn(s,1),D(Hs,s,Hn()),D(_s,s,N()),N())),In=s=>ss(()=>g[8]?.(s))??!0?ln(s,{},!0):L(H,s),se=(s,e,o)=>{if(ss(()=>g[9]?.(s,o))??!0){let[,c]=L(Hs,s);c(o),Ht(s,e,o,{},!0)}},te=(s,e,o,c,a,l,u)=>{let E=L(L(Ts,s)?.[0],a);if(!es(E)&&!l)return _t(s,o,c,a,E);if(u||(ss(()=>g[10]?.(s,o,a))??!0)){let y=G=>{oe(s,o,G,L(c,G)),ee(s,o,G,-1),D(c,G)};es(E)?y(a):Js(c,y),m(c)&&(hn(s,o,-1),m(D(e,o))&&(fn(s,-1),D(H,s),D(Hs,s),D(_s,s)))}},ne=(s,e)=>{let o=L(Ms,s);if(!es(o))return Ft(s,o);(e||(ss(()=>g[12]?.(s))??!0))&&(ie(s,L(d,s)),ce(s,-1),D(d,s))},fn=(s,e)=>yt(K,s,e),hn=(s,e,o)=>yt(O(h,s,N),e,o)&&D(p,s,O(p,s,()=>0)+o),ee=(s,e,o,c)=>{let a=L(_s,s),l=L(a,o)??0;(l==0&&c==1||l==1&&c==-1)&&yt(O(M,s,N),o,c),D(a,o,l!=-c?l+c:void 0),yt(O(O(T,s,N),e,N),o,c)},oe=(s,e,o,c,a)=>{O(O(O(V,s,N),e,N),o,()=>[c,0])[1]=a,S[3]?.(s,e,o,a,z)},ce=(s,e)=>yt(w,s,e),ie=(s,e,o)=>{O(C,s,()=>[e,0])[1]=o,S[4]?.(s,o,z)},As=(s,e,o,c,a)=>(on(O(O(O(F,s,N),e,N),o,()=>[]),c),a),et=(s,e,o)=>(on(O(q,s,()=>[]),e),o),At=(s,e,o)=>A(L(L(L(V,s),e),o),([c,a])=>[!0,c,a],()=>[!1,...Zt(jt(s,e,o))]),re=s=>A(L(C,s),([e,o])=>[!0,e,o],()=>[!1,...Zt(Gt(s))]),ae=s=>!m(F)&&!m(vs[s])?v(s?ro(F):F,(e,o)=>v(e,(c,a)=>v(c,(l,u)=>x(vs[s],[o,a,u],l)))):0,le=s=>!m(q)&&!m(ws[s])?v(s?Ns(q):q,(e,o)=>x(ws[s],[o],e)):0,Tt=(s,e,o,c)=>{if(!m(s))return x(e,c,()=>ls(s)),Js(s,(a,l)=>x(o,[...c??[],a],l==1)),1},fe=s=>Ns(s,e=>Ns(e,o=>Ns(o,Qt))),he=s=>{let e=!m(B[s]),o=!m(is[s]),c=!(m(I[s])&&m(Rs[s])&&m(Es[s])&&m(P[s])&&m(Q[s])&&m(X[s])&&m(hs[s])&&!o&&m(Z[s])&&m(R[s])),a=!(m(Ss[s])&&m($[s])&&m(j[s])&&m(cs[s]));if(e||c||a){let l=s?[Ns(K),xn(M),Ns(p),xn(h),ro(T),fe(V)]:[K,M,p,h,T,V];if(e){let u=Bt();u!=i&&x(B[s],void 0,u)}if(c){Tt(l[0],Z[s],R[s]),v(l[1],(E,y)=>Tt(E,Q[s],X[s],[y])),v(l[2],(E,y)=>{E!=0&&x(hs[s],[y],Te(y))});let u=Nt();v(l[3],(E,y)=>{Tt(E,Es[s],P[s],[y])&&o&&(x(is[s],[y,null]),Mt(u,y))}),o&&v(l[5],(E,y)=>{if(!os(u,y)){let G=Nt();v(E,as=>v(as,([ct,it],$s)=>it!==ct?Mt(G,$s):cn(as,$s))),v(G,as=>x(is[s],[y,as]))}}),v(l[4],(E,y)=>v(E,(G,as)=>Tt(G,I[s],Rs[s],[y,as])))}if(a){let u;v(l[5],(E,y)=>{let G;v(E,(as,ct)=>{let it;v(as,([$s,kt],Oo)=>{kt!==$s&&(x(Ss[s],[y,ct,Oo],kt,$s,At),u=G=it=1)}),it&&x($[s],[y,ct],At)}),G&&x(j[s],[y],At)}),u&&x(cs[s],void 0,At)}}},ue=s=>{let e=!m(Fs[s]),o=!m(rs[s])||!m(J[s]),c=!m(us[s])||!m(Ps[s]);if(e||o||c){let a=s?[Ns(w),Ns(C,Qt)]:[w,C];if(e){let l=Ut();l!=r&&x(Fs[s],void 0,l)}if(o&&Tt(a[0],rs[s],J[s]),c){let l;v(a[1],([u,E],y)=>{E!==u&&(x(us[s],[y],E,u,re),l=1)}),l&&x(Ps[s],void 0,re)}}},U=(s,...e)=>(En(()=>s(...en(e,_))),ps),ge=(s,e,o,c,a)=>{let l=zt(s,e,...o);return Vs(()=>{let u=zt(s,e,...o);jc(u,l)||(l=u,c(ps,s,e,...o,l))},is[a?1:0],[s,e],[gs])},vo=()=>[un(),Ln()],un=()=>Ot(H),gs=()=>Rt(H),wo=s=>wn(L(H,_(s))),Le=s=>Rt(L(_s,_(s))),Te=s=>Pn(L(H,_(s))),ot=s=>Rt(L(H,_(s))),zt=(s,e,o,c=0,a)=>Lt(s)?zt(s.tableId,s.cellId,s.descending,s.offset,s.limit):en(co(Gc(Oc(L(H,_(s)),(l,u)=>[es(e)?u:L(l,_(e)),u]),([l],[u])=>Qc(l,u)*(o?-1:1)),c,es(a)?a:c+a),([,l])=>l),de=(s,e)=>ls(L(L(H,_(s)),_(e))),gn=(s,e)=>Rt(L(L(H,_(s)),_(e))),jt=(s,e,o)=>L(L(L(H,_(s)),_(e)),_(o)),Ln=()=>ls(d),Tn=()=>Rt(d),Gt=s=>L(d,_(s)),Bt=()=>!m(H),Ee=s=>os(H,_(s)),Se=(s,e)=>os(L(_s,_(s)),_(e)),pe=(s,e)=>os(L(H,_(s)),_(e)),Ce=(s,e,o)=>os(L(L(H,_(s)),_(e)),_(o)),Ut=()=>!m(d),Re=s=>os(d,_(s)),xo=()=>ut(H),Do=()=>ut(d),Ho=()=>ut([H,d]),_o=()=>ut(fs),Fo=()=>ut(ds),Po=()=>ut([fs,ds]),Ao=s=>U(()=>{let e=yn(s)?s():s;yo(e)&&No(e)}),Wt=s=>U(()=>mo(s)?Zn(s):0),zo=(s,e)=>U(o=>Wn(e,o)?ln(o,e):0,s),jo=(s,e,o)=>U((c,a)=>xt(c,a,o)?Ht(c,Pt(c),a,o):0,s,e),Go=(s,e,o=!0)=>En(()=>{let c;return xt(s,c,e)&&(s=_(s),Ht(s,Pt(s),c=Mo(s,o?1:0),e)),c}),Bo=(s,e,o)=>U((c,a)=>{if(xt(c,a,o,1)){let l=Pt(c);Cs(o,(u,E)=>Qn(c,l,a,E,u))}},s,e),ye=(s,e,o,c,a)=>U((l,u,E)=>A(Yn(l,u,E,yn(c)?c(jt(l,u,E)):c),y=>Qn(l,Pt(l),u,E,y,a)),s,e,o),Yt=s=>U(()=>bn(s)?Xn(s):0),Uo=s=>U(()=>bn(s,1)?Cs(s,(e,o)=>Ft(o,e)):0),me=(s,e,o)=>U(c=>A(qn(c,yn(e)?e(Gt(c)):e),a=>Ft(c,a,o)),s),Wo=s=>U(()=>Ys(s,()=>A(g[13],e=>ss(()=>e(ht(s))),()=>s),e=>{Cs(e[0],(o,c)=>es(o)?ve(c):Cs(o,(a,l)=>es(a)?we(c,l):Cs(a,(u,E)=>Dt(c,l,E,u)))),Cs(e[1],(o,c)=>an(c,o))},ao)),Ve=s=>(mn(()=>$n(Mn(s))),ps),Yo=s=>(mn(()=>On(Mn(s))),ps),bo=s=>U(()=>mn(()=>{let[e,o]=Mn(s);$n(e),On(o)},()=>Ve(s))),Ne=s=>U(()=>{if((t=Co(s))&&(Jn(s),!m(H))){let e=un();bt(),Wt(e)}}),Me=s=>U(()=>{if(n=Ro(s)){let e=Ln();dn(),qt(),n=!0,Kn(s),Yt(e)}}),qo=(s,e)=>U(()=>{Ne(s),Me(e)}),bt=()=>U(()=>ss(()=>g[7]?.())??!0?Zn({},!0):0),ve=s=>U(e=>os(H,e)?In(e):0,s),we=(s,e)=>U((o,c)=>A(L(H,o),a=>os(a,c)?se(o,a,c):0),s,e),xe=(s,e,o,c,a)=>U((l,u,E)=>A(L(H,l),y=>A(L(y,u),G=>os(G,E)?te(l,y,u,G,E,c,a):0)),s,e,o),qt=()=>U(()=>ss(()=>g[11]?.())??!0?Xn({},!0):0),De=(s,e)=>U(o=>os(d,o)?ne(o,e):0,s),He=()=>U(()=>{Jn({}),t=!1}),dn=()=>U(()=>{Kn({}),n=!1}),ko=()=>U(()=>{He(),dn()}),En=(s,e)=>{if(f!=-1){_e();let o=s();return Fe(e),o}},_e=()=>(f!=-1&&f++,f==1&&(S[0]?.(),x(ys)),ps),Jo=()=>[ls(V,(s,e)=>L(K,e)===-1?void 0:ls(s,(o,c)=>L(L(h,e),c)===-1?void 0:ls(o,([,a])=>a,a=>Xt(a)),m,xs),m,xs),ls(C,([,s])=>s,s=>Xt(s)),1],Ko=()=>[!m(V),!m(C),Ot(V,Qt,Xt),Ot(F),ls(C,Qt,Xt),ls(q),ls(K),wn(h),Ot(T),ls(w)],$o=()=>{if(g[14]){let s=fe(V);v(s,(e,o)=>v(e,(c,a)=>{if(!_n(go(c),([l,u])=>l===u)){let l=de(o,a),u=kc(l);v(c,([y],G)=>es(y)?vn(u,G):u[G]=y);let E=g[14](o,a,u,l);if(!Ks(E,l)){let y=Cs(l,()=>{});Cs(E,(G,as)=>y[as]=G),Cs(y,(G,as)=>Dt(o,a,as,G,!0))}}}))}},Fe=s=>(f>0&&(f--,f==0&&(f=1,ss(()=>{ae(1),m(V)||(he(1),$o()),le(1),m(C)||ue(1)}),s?.(ps)&&(v(V,(e,o)=>v(e,(c,a)=>v(c,([l],u)=>Dt(o,a,u,l,!0)))),Nn(V),v(C,([e],o)=>an(o,e,!0)),Nn(C)),x(ms[0],void 0),f=-1,ae(0),m(V)||he(0),le(0),m(C)||ue(0),S[1]?.(),x(ms[1],void 0),S[2]?.(),f=0,i=Bt(),r=Ut(),vt([K,M,p,h,T,V,F,w,C,q],Nn))),ps),ps={getContent:vo,getTables:un,getTableIds:gs,getTable:wo,getTableCellIds:Le,getRowCount:Te,getRowIds:ot,getSortedRowIds:zt,getRow:de,getCellIds:gn,getCell:jt,getValues:Ln,getValueIds:Tn,getValue:Gt,hasTables:Bt,hasTable:Ee,hasTableCell:Se,hasRow:pe,hasCell:Ce,hasValues:Ut,hasValue:Re,getTablesJson:xo,getValuesJson:Do,getJson:Ho,getTablesSchemaJson:_o,getValuesSchemaJson:Fo,getSchemaJson:Po,hasTablesSchema:()=>t,hasValuesSchema:()=>n,setContent:Ao,setTables:Wt,setTable:zo,setRow:jo,addRow:Go,setPartialRow:Bo,setCell:ye,setValues:Yt,setPartialValues:Uo,setValue:me,applyChanges:Wo,setTablesJson:Ve,setValuesJson:Yo,setJson:bo,setTablesSchema:Ne,setValuesSchema:Me,setSchema:qo,delTables:bt,delTable:ve,delRow:we,delCell:xe,delValues:qt,delValue:De,delTablesSchema:He,delValuesSchema:dn,delSchema:ko,transaction:En,startTransaction:_e,getTransactionChanges:Jo,getTransactionLog:Ko,finishTransaction:Fe,forEachTable:s=>v(H,(e,o)=>s(o,c=>v(e,(a,l)=>c(l,u=>Js(a,u))))),forEachTableCell:(s,e)=>Js(L(_s,_(s)),e),forEachRow:(s,e)=>v(L(H,_(s)),(o,c)=>e(c,a=>Js(o,a))),forEachCell:(s,e,o)=>Js(L(L(H,_(s)),_(e)),o),forEachValue:s=>Js(d,s),addSortedRowIdsListener:(s,e,o,c,a,l,u)=>Lt(s)?ge(s.tableId,s.cellId,[s.descending??!1,s.offset??0,s.limit],e,o):ge(s,e,[o,c,a],l,u),addStartTransactionListener:s=>Vs(s,ys),addWillFinishTransactionListener:s=>Vs(s,ms[0]),addDidFinishTransactionListener:s=>Vs(s,ms[1]),callListener:s=>(po(s),ps),delListener:s=>(wt(s),ps),getListenerStats:()=>({hasTables:W(B),tables:W(cs),tableIds:W(Z),hasTable:W(R),table:W(j),tableCellIds:W(Q),hasTableCell:W(X,mt),rowCount:W(hs),rowIds:W(Es),sortedRowIds:W(is),hasRow:W(P,mt),row:W($,mt),cellIds:W(I,mt),hasCell:W(Rs,Vn),cell:W(Ss,Vn),invalidCell:W(vs,Vn),hasValues:W(Fs),values:W(Ps),valueIds:W(rs),hasValue:W(J),value:W(us),invalidValue:W(ws),transaction:An(ys)+W(ms)}),isMergeable:()=>!1,createStore:jn,addListener:Vs,callListeners:x,setInternalListeners:(s,e,o,c,a)=>S=[s,e,o,c,a],setMiddleware:(s,e,o,c,a,l,u,E,y,G,as,ct,it,$s,kt)=>g=[s,e,o,c,a,l,u,E,y,G,as,ct,it,$s,kt],setOrDelCell:Dt,setOrDelValue:an};return Cs({[Xs+no]:[0,B,[],()=>[Bt()]],[no]:[0,cs],[vc]:[0,Z],[Xs+gt]:[1,R,[gs],s=>[Ee(...s)]],[gt]:[1,j,[gs]],[gt+eo]:[1,Q,[gs]],[Xs+gt+It]:[2,X,[gs,Le],s=>[Se(...s)]],[wc]:[1,hs,[gs]],[xc]:[1,Es,[gs]],[Xs+sn]:[2,P,[gs,ot],s=>[pe(...s)]],[sn]:[2,$,[gs,ot]],[eo]:[2,I,[gs,ot]],[Xs+It]:[3,Rs,[gs,ot,gn],s=>[Ce(...s)]],[It]:[3,Ss,[gs,ot,gn],s=>Zt(jt(...s))],InvalidCell:[3,vs],[Xs+oo]:[0,Fs,[],()=>[Ut()]],[oo]:[0,Ps],[Dc]:[0,rs],[Xs+tn]:[1,J,[Tn],s=>[Re(...s)]],[tn]:[1,us,[Tn],s=>Zt(Gt(s[0]))],InvalidValue:[1,ws]},([s,e,o,c],a)=>{ps[Mc+a+Nc]=(...l)=>Vs(l[s],e[l[s+1]?1:0],s>0?co(l,0,s):void 0,o,c)}),bc(ps)};var ti=["db","id","ids","no","ui","ws","add","api","bun","del","dom","for","get","has","hlc","log","map","row","set","sql","use","web","yjs"],So=(t=!1)=>{addEventListener("load",()=>{let n=zs("body > header > nav");if(n==null)return;let i=ts("div",null,{id:"search"}),r=ts("input",i,{type:"text",placeholder:(navigator.platform.startsWith("Mac")?"\u2318":"cmd-")+"K Search"}),f=ts("ol",i),g=ts("li",f,{},"No results found"),S=jn(),z=to(S);z.setIndexDefinition("p","p",h=>{let T=[];return h("t").split(" ").forEach(V=>{for(let w=0;w<V.length;w++)T.push(V.slice(0,w+1))}),T},"t",void 0,(h,T,V)=>Bn(T,V)-Bn(h,V)),fetch("/pages.json").then(h=>h.json()).then(h=>{S.transaction(()=>{S.setContent(h),S.forEachRow("p",T=>{let{n:V,s:w}=S.getRow("p",T),C=new Set;Gn(T,C,!0),Gn(V,C),Gn(w,C),S.setCell("p",T,"t",Array.from(C.values()).join(" "))})}),K()});let K=()=>{n.prepend(i);let h=()=>(r.value?Os:dt)(f,"show");r.addEventListener("focus",h),r.addEventListener("input",()=>{h(),M()}),r.addEventListener("blur",()=>dt(f,"show")),p()},M=()=>{let h=r.value.toLowerCase().split(/[^a-z0-9]+/),T=new Map;h.forEach(C=>z.getSliceRowIds("p",C).slice(0,50).forEach(F=>T.set(F,(T.get(F)??0)+Bn(S.getCell("p",F,"t"),C))));let V=Array.from(T.keys()).sort((C,F)=>T.get(F)-T.get(C)).slice(0,10),w=V.length==0?[g]:V.map((C,F)=>{let q=ts("li"),{n:fs,s:Ts}=S.getRow("p",C);return To(ts("b",q),fs,h[0]),To(ts("span",q),Ts,h[0]),q.title=Ts,q.addEventListener("mousedown",()=>t?location.href=C:Ge(C)),F==0&&Os(q,"hover"),q});f.replaceChildren(...w)},p=()=>addEventListener("keydown",h=>{if(at.activeElement==r){let T=rt(f,".hover");switch(h.code){case"Escape":return r.blur();case"ArrowDown":return Jt(h),Eo(T,T?.nextSibling??f.firstChild);case"ArrowUp":return Jt(h),Eo(T,T?.previousSibling??f.lastChild);case"Enter":return T?.dispatchEvent(new MouseEvent("mousedown"))}}else h.code=="KeyK"&&h.metaKey&&(r.focus(),Jt(h))})})},To=(t,n,i)=>{let r=n.toLowerCase().indexOf(i);t.innerHTML=r==-1?n:n.substring(0,r)+"<em>"+n.substring(r,r+i.length)+"</em>"+n.substring(r+i.length)},Eo=(t,n)=>{t!=n&&(t&&dt(t,"hover"),n&&(Os(n,"hover"),n.scrollIntoView({block:"nearest",inline:"nearest"})))},Gn=(t,n,i)=>{let r=t.replaceAll(/[^a-zA-Z0-9]/g," ").split(/\s+/);i&&r.reverse(),r.forEach(f=>{[f,...f.replaceAll(/([a-z])([A-Z])/g,"$1 $2").split(" ")].forEach(g=>{let S=g.toLowerCase();(S.length>3||ti.includes(S))&&n.add(S)})})},Bn=(t,n)=>{let i=t.length,r=t.indexOf(n);return r===-1?0:(i-r)/i};Ae();Ue();So(!0);})();
