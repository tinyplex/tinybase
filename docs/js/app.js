"use strict";(()=>{var Se="v7.0.0-beta.1";var _o="TinyBase",_s=document,Ce=()=>{addEventListener("load",()=>{let t=Ds("#version");t.innerText=Se,t.style.width=t.scrollWidth+"px"})},Po=null,me=()=>Po??=Ds("body > main > nav"),Wo=null,ye=()=>Wo??=Ds("body > main > article"),$s=t=>t.preventDefault(),Ds=t=>_s.querySelector(t),js=(t,n)=>t.querySelector(n),ko=t=>_s.getElementById(t),ns=(t,n,c={},i)=>{let a=_s.createElement(t);return Object.entries(c).forEach(d=>a.setAttribute(...d)),i!=null&&(a.innerText=i),n!=null?n.appendChild(a):a},Gs=(t,n)=>t.classList.add(n);var gt=(t,n)=>t.classList.remove(n),Ve=(t,n,c)=>t.classList.toggle(n)?c():0,ut=(t,n=!0)=>{let c=me();["?","#"].forEach(i=>{t.includes(i)&&(t=t.substring(0,t.indexOf(i)))}),fetch(`${t}nav.json`).then(i=>i.json()).then(i=>{gt(js(c,"li.current"),"current"),Re(i,js(c,"ul"))}),fetch(`${t}article.html`).then(i=>i.text()).then(i=>{let a=ye();a.innerHTML=i,a.scrollTo(0,0),ln()}),n&&history.pushState(null,"",t)},ln=()=>{let t=js(ye(),":scope iframe"),n=t?.parentElement;if(t==null||n==null)return;let c=n.insertBefore(ns("form",null,{action:"https://codepen.io/pen/define",method:"post",target:"_blank"}),t);n.insertBefore(ns("a",null,{id:"penEdit"},"Open this demo in CodePen"),t).onclick=()=>{c.childNodes.length==0?fetch("pen.json").then(i=>i.text()).then(i=>{ns("input",c,{type:"hidden",name:"data",value:i}),c.submit()}):c.submit()}},Re=({i:t,n,u:c,r:i,c:a,p:d,o:T,_:z},Y)=>{let S=me(),E=ko(t);if(E==null){E=ns("li",Y,{id:t}),ns("span",E);let f=ns("a",E,{href:c});i?ns("code",f,{},n):f.innerText=n,d&&Gs(E,"parent")}if(T&&Gs(E,"open"),z!=null){let f=js(E,"ul")??ns("ul",E);z.forEach(u=>{Re(u,f)})}if(a){Gs(E,"current"),_s.title=`${n} | ${_o}`;let f=E.getBoundingClientRect(),u=S.getBoundingClientRect();f.top<u.top?S.scrollBy(0,f.top-u.top):f.bottom>u.bottom&&S.scrollBy(0,Math.min(f.bottom-u.bottom,f.top-u.top))}};var Ps="dark",an="light",fn="auto",ve=()=>{let t=matchMedia("(prefers-color-scheme: dark)"),n=()=>{let c=localStorage.getItem(Ps)??fn;Ds("#dark")?.setAttribute("class",c),Ds("html").className=c==Ps||c==fn&&t.matches?Ps:an};t.addEventListener("change",n),window.addEventListener("storage",c=>{c.storageArea==localStorage&&c.key==Ps&&n()}),addEventListener("load",()=>{Ds("#dark").addEventListener("click",()=>{let c=localStorage.getItem(Ps);localStorage.setItem(Ps,c==Ps?an:c==an?fn:Ps),n()}),n()}),n()};var Ne=t=>typeof t,ks="",Bo=Ne(ks),Me=t=>ks+t,ys=t=>t==null,Ys=(t,n,c)=>ys(t)?c?.():n(t),Uo=t=>Ne(t)==Bo,Lt=t=>Array.isArray(t),bs=t=>t.length,qo=(t,n)=>t.test(n),be=(t,n)=>t.every(n),Ko=(t,n)=>bs(t)===bs(n)&&be(t,(c,i)=>n[i]===c),we=(t,n)=>be(t,(c,i)=>i==0||n(t[i-1],c)<=0),He=(t,n)=>t.sort(n),Zs=(t,n)=>t.forEach(n),Jo=(t,n)=>t.map(n),Go=t=>bs(t)==0,$o=(t,n,c)=>t.reduce(n,c),Fe=(t,...n)=>t.push(...n),Yo=t=>t.shift(),Ae=t=>n=>$o(gn(n),(c,i)=>c+t(i),0),ze=t=>t?.size??0,je=Ae(ze),Zo=Ae(je),nt=(t,n)=>t?.has(n)??!1,Tt=t=>ys(t)||ze(t)==0,gn=t=>[...t?.values()??[]],xe=t=>t.clear(),ds=(t,n)=>t?.forEach(n),et=(t,n)=>t?.delete(n),Oo=Object,Qo=Oo.freeze,es=t=>new Map(t),_e=t=>[...t?.keys()??[]],U=(t,n)=>t?.get(n),dt=(t,n)=>ds(t,(c,i)=>n(i,c)),B=(t,n,c)=>ys(c)?(et(t,n),t):t?.set(n,c),Pe=(t,n,c,i)=>(nt(t,n)?i?.(U(t,n)):B(t,n,c()),U(t,n)),hn=(t,n,c,i,a=0)=>Ys((c?Pe:U)(t,n[a],a>bs(n)-2?c:es),d=>{if(a>bs(n)-2)return i?.(d)&&B(t,n[a]),d;let T=hn(d,n,c,i,a+1);return Tt(d)&&B(t,n[a]),T}),Ws=t=>new Set(Lt(t)||ys(t)?t:[t]),Ns=(t,n)=>t?.add(n),Xo=(t,n,c,i,a)=>{let d=t.hasRow,T=es(),z=es(),Y=es(),S=es(),E=es(),f=es(),u=()=>t,y=()=>_e(T),v=C=>dt(z,C),V=C=>nt(z,C),D=C=>U(T,C),q=C=>U(z,C),Ls=(C,_)=>B(z,C,_),Ts=(C,_,...cs)=>{let O=Pe(f,C,Ws);return Zs(cs,p=>Ns(O,p)&&_&&t.callListener(p)),cs},Rs=(C,..._)=>Ys(U(f,C),cs=>{Zs(Go(_)?gn(cs):_,O=>{t.delListener(O),et(cs,O)}),Tt(cs)&&B(f,C)}),Cs=(C,_)=>{B(T,C,_),nt(z,C)||(B(z,C,n()),B(S,C,es()),B(E,C,es()),a(Y))},vs=(C,_,cs,O,p)=>{Cs(C,_);let A=es(),Q=es(),X=U(S,C),is=U(E,C),Es=F=>{let $=ps=>t.getCell(_,F,ps),I=U(X,F),Ss=d(_,F)?c(O($,F)):void 0;if(I===Ss||Lt(I)&&Lt(Ss)&&Ko(I,Ss)||B(A,F,[I,Ss]),!ys(p)){let ps=U(is,F),Ms=d(_,F)?p($,F):void 0;ps!=Ms&&B(Q,F,Ms)}},gs=F=>{cs(()=>{ds(A,([,$],I)=>B(X,I,$)),ds(Q,($,I)=>B(is,I,$))},A,Q,X,is,F),xe(A),xe(Q)};dt(X,Es),t.hasTable(_)&&Zs(t.getRowIds(_),F=>{nt(X,F)||Es(F)}),gs(!0),Rs(C),Ts(C,0,t.addRowListener(_,null,(F,$,I)=>Es(I)),t.addTableListener(_,()=>gs()))},w=C=>{B(T,C),B(z,C),B(S,C),B(E,C),Rs(C),a(Y)};return[u,y,v,V,D,q,Ls,Cs,vs,w,C=>i(C,Y),()=>dt(f,w),Ts,Rs]},De=(t,n)=>Uo(t)?c=>c(t):t??(()=>n??ks),Io=(t,n)=>{let c=new WeakMap;return i=>(c.has(i)||c.set(i,t(i)),c.get(i))},sc=(t,n)=>(t??0)<(n??0)?-1:1,tc=/^\d+$/,nc=()=>{let t=[],n=0;return[c=>(c?Yo(t):null)??ks+n++,c=>{qo(tc,c)&&bs(t)<1e3&&Fe(t,c)}]},ec=(t,n=[ks])=>{let c=[],i=(a,d)=>d==bs(n)?Fe(c,a):n[d]===null?ds(a,T=>i(T,d+1)):Zs([n[d],null],T=>i(U(a,T),d+1));return i(t,0),c},oc=t=>{let n,[c,i]=nc(),a=es();return[(S,E,f,u=[],y=()=>[])=>{n??=t();let v=c(1);return B(a,v,[S,E,f,u,y]),Ns(hn(E,f??[ks],Ws),v),v},(S,E,...f)=>Zs(ec(S,E),u=>ds(u,y=>U(a,y)[0](n,...E??[],...f))),S=>Ys(U(a,S),([,E,f])=>(hn(E,f??[ks],void 0,u=>(et(u,S),Tt(u)?1:0)),B(a,S),i(S),f)),S=>Ys(U(a,S),([E,,f=[],u,y])=>{let v=(...V)=>{let D=bs(V);D==bs(f)?E(n,...V,...y(V)):ys(f[D])?Zs(u[D]?.(...V)??[],q=>v(...V,q)):v(...V,f[D])};v()})]},We=Io(t=>{let n=es(),c=es(),[i,a,d]=oc(()=>O),[T,z,Y,S,E,f,u,,y,v,V,D]=Xo(t,es,p=>ys(p)?ks:Lt(p)?Jo(p,Me):Me(p),i,a),q=(p,A)=>nt(f(p),A),Ls=(p,A,Q,X,is,Es=sc)=>{let gs=ys(is)?void 0:([F],[$])=>is(F,$);return y(p,A,(F,$,I,Ss,ps,Ms)=>{let ms=0,ws=Ws(),Hs=Ws(),rs=f(p);if(ds($,([K,ls],as)=>{let j=Ws(K),st=Ws(ls);ds(j,fs=>et(st,fs)?et(j,fs):0),ds(j,fs=>{Ns(ws,fs),Ys(U(rs,fs),vt=>{et(vt,as),Tt(vt)&&(B(rs,fs),ms=1)})}),ds(st,fs=>{Ns(ws,fs),nt(rs,fs)||(B(rs,fs,Ws()),ms=1),Ns(U(rs,fs),as),ys(X)||Ns(Hs,fs)})}),F(),Tt(ps)||(Ms?dt(rs,K=>Ns(Hs,K)):dt(I,K=>Ys(U(Ss,K),ls=>Zs(Lt(ls)?ls:[ls],as=>Ns(Hs,as)))),ds(Hs,K=>{let ls=(j,st)=>Es(U(ps,j),U(ps,st),K),as=[...U(rs,K)];we(as,ls)||(B(rs,K,Ws(He(as,ls))),Ns(ws,K))})),(ms||Ms)&&!ys(gs)){let K=[...rs];we(K,gs)||(u(p,es(He(K,gs))),ms=1)}ms&&a(n,[p]),ds(ws,K=>a(c,[p,K]))},De(Q),Ys(X,De)),O},Ts=p=>Y((A,Q)=>p(A,X=>Cs(A,X,Q))),Rs=(p,A)=>Cs(p,A,f(p)),Cs=(p,A,Q)=>{let X=E(p);ds(Q,(is,Es)=>A(Es,gs=>ds(is,F=>gs(F,$=>t.forEachCell(X,F,$)))))},O={setIndexDefinition:Ls,delIndexDefinition:p=>(v(p),O),getStore:T,getIndexIds:z,forEachIndex:Ts,forEachSlice:Rs,hasIndex:S,hasSlice:q,getTableId:E,getSliceIds:p=>_e(f(p)),getSliceRowIds:(p,A)=>gn(U(f(p),A)),addIndexIdsListener:V,addSliceIdsListener:(p,A)=>i(A,n,[p]),addSliceRowIdsListener:(p,A,Q)=>i(Q,c,[p,A]),delListener:p=>(d(p),O),destroy:D,getListenerStats:()=>({sliceIds:je(n),sliceRowIds:Zo(c)})};return Qo(O)});var Is=t=>typeof t,it="",cc=Is(it),ic=Is(!0),Ye=Is(0),rc=Is(Is),Ut="type",Os="default",lc="Listener",ac="add",Qs="Has",It="Ids",ct="Table",ke=ct+"s",fc=ct+It,$t="Row",hc=$t+"Count",gc=$t+It,Gt="Cell",Be=Gt+It,Yt="Value",Ue=Yt+"s",uc=Yt+It,N=t=>it+t,dc=isFinite,Lc=(t,n)=>t instanceof n,G=t=>t==null,J=(t,n,c)=>G(t)?c?.():n(t),Ze=t=>t==cc||t==ic,un=t=>Is(t)==rc,Oe=t=>Array.isArray(t),qe=(t,n,c)=>t.slice(n,c),Fs=t=>t.length,Tc=(t,n)=>t.test(n),dn=async(t,n,c)=>{try{return await t()}catch(i){n?.(i)}},Ec=(t,n)=>t.includes(n),pc=(t,n)=>t.every(n),Sc=(t,n)=>Fs(t)===Fs(n)&&pc(t,(c,i)=>n[i]===c),Cc=(t,n)=>t.sort(n),Rt=(t,n)=>t.forEach(n),Zt=(t,n)=>t.map(n),mc=(t,n,c)=>t.reduce(n,c),Ot=(t,...n)=>t.push(...n),yc=t=>t.shift(),Et=t=>{let n=Is(t);return Ze(n)||n==Ye&&dc(t)?n:void 0},Ke=(t,n,c,i,a)=>G(a)?t.delCell(n,c,i,!0):t.setCell(n,c,i,a),Je=(t,n,c)=>G(c)?t.delValue(n):t.setValue(n,c),yn=t=>n=>mc(Vc(n),(c,i)=>c+t(i),0),Vn=t=>t?.size??0,Rn=yn(Vn),Ct=yn(Rn),Ln=yn(Ct),os=(t,n)=>t?.has(n)??!1,m=t=>G(t)||Vn(t)==0,Vc=t=>[...t?.values()??[]],Tn=t=>t.clear(),M=(t,n)=>t?.forEach(n),Qt=(t,n)=>t?.delete(n),Js=Object,Ge=t=>Js.getPrototypeOf(t),Rc=Js.isFrozen,Qe=Js.entries,Xt=t=>!G(t)&&J(Ge(t),n=>n==Js.prototype||G(Ge(n)),()=>!0),vc=Js.keys,Mc=Js.freeze,wc=(t=[])=>Js.fromEntries(t),mt=(t,n)=>n in t,Xe=(t,n)=>(delete t[n],t),Hc=(t,n)=>Rt(Qe(t),([c,i])=>n(i,c)),xc=(t,n)=>Zt(Qe(t),([c,i])=>n(i,c)),Us=(t,n)=>wc(xc(t,(c,i)=>[i,n(c,i)])),Dc=t=>Fs(vc(t)),Vs=t=>Xt(t)&&Dc(t)==0,Bs=(t,n,c,i=0)=>G(t)||!Xt(t)||!i&&Vs(t)||Rc(t)?(c?.(),!1):(Hc(t,(a,d)=>{n(a,d)||Xe(t,d)}),i?!0:!Vs(t)),R=t=>new Map(t),pt=t=>[...t?.keys()??[]],g=(t,n)=>t?.get(n),qs=(t,n)=>M(t,(c,i)=>n(i,c)),Nc=(t,n)=>Zt([...t?.entries()??[]],([c,i])=>n(i,c)),b=(t,n,c)=>G(c)?(Qt(t,n),t):t?.set(n,c),ss=(t,n,c,i)=>(os(t,n)?i?.(g(t,n)):b(t,n,c()),g(t,n)),Xs=(t,n,c,i=b)=>(Us(n,(a,d)=>c(t,d,a)),qs(t,a=>mt(n,a)?0:i(t,a)),t),hs=(t,n,c,i)=>{let a={};return M(t,(d,T)=>{if(!c?.(d,T)){let z=n?n(d,T):d;i?.(z)||(a[T]=z)}}),a},Sn=(t,n,c)=>hs(t,i=>hs(i,n,c),m,Vs),qt=(t,n,c)=>hs(t,i=>Sn(i,n,c),m,Vs),Ks=(t,n)=>{let c=R();return M(t,(i,a)=>c.set(a,n?.(i)??i)),c},Cn=t=>Ks(t,Ks),En=t=>Ks(t,Cn),mn=(t,n,c,i,a=0)=>J((c?ss:g)(t,n[a],a>Fs(n)-2?c:R),d=>{if(a>Fs(n)-2)return i?.(d)&&b(t,n[a]),d;let T=mn(d,n,c,i,a+1);return m(d)&&b(t,n[a]),T}),bc=JSON.stringify,pn=JSON.parse,ot=t=>bc(t,(n,c)=>Lc(c,Map)?Js.fromEntries([...c]):c),Fc=(t,n)=>(t??0)<(n??0)?-1:1,Ac=/^\d+$/,Ie=()=>{let t=[],n=0;return[c=>(c?yc(t):null)??it+n++,c=>{Tc(Ac,c)&&Fs(t)<1e3&&Ot(t,c)}]},yt=t=>new Set(Oe(t)||G(t)?t:[t]),Vt=(t,n)=>t?.add(n),zc=(t,n=[it])=>{let c=[],i=(a,d)=>d==Fs(n)?Ot(c,a):n[d]===null?M(a,T=>i(T,d+1)):Rt([n[d],null],T=>i(g(a,T),d+1));return i(t,0),c},jc=t=>{let n,[c,i]=Ie(),a=R();return[(S,E,f,u=[],y=()=>[])=>{n??=t();let v=c(1);return b(a,v,[S,E,f,u,y]),Vt(mn(E,f??[it],yt),v),v},(S,E,...f)=>Rt(zc(S,E),u=>M(u,y=>g(a,y)[0](n,...E??[],...f))),S=>J(g(a,S),([,E,f])=>(mn(E,f??[it],void 0,u=>(Qt(u,S),m(u)?1:0)),b(a,S),i(S),f)),S=>J(g(a,S),([E,,f=[],u,y])=>{let v=(...V)=>{let D=Fs(V);D==Fs(f)?E(n,...V,...y(V)):G(f[D])?Rt(u[D]?.(...V)??[],q=>v(...V,q)):v(...V,f[D])};v()})]},Kt=t=>[t,t],W=(t,n=Rn)=>n(t[0])+n(t[1]),k=()=>[R(),R()],$e=t=>[...t],Jt=([t,n])=>t===n,St=(t,n,c)=>b(t,n,g(t,n)==-c?void 0:c),vn=()=>{let t,n,c=!1,i=!1,a=0,d=[],T=R(),z=R(),Y=R(),S=R(),E=R(),f=R(),u=R(),y=R(),v=R(),V=R(),D=R(),q=R(),Ls=R(),Ts=R(),Rs=yt(),Cs=R(),vs=R(),w=R(),Z=R(),rt=k(),C=k(),_=k(),cs=k(),O=k(),p=k(),A=k(),Q=k(),X=k(),is=k(),Es=k(),gs=k(),F=k(),$=k(),I=k(),Ss=k(),ps=k(),Ms=k(),ms=k(),ws=k(),Hs=k(),rs=k(),K=R(),ls=k(),[as,j,st,fs]=jc(()=>ts),vt=s=>Bs(s,e=>Bs(e,Hn)),eo=s=>Bs(s,Hn),Hn=s=>{if(!Bs(s,(o,r)=>Ec([Ut,Os],r)))return!1;let e=s[Ut];return!Ze(e)&&e!=Ye?!1:(Et(s[Os])!=e&&Xe(s,Os),!0)},oo=Oe,co=s=>Bs(s,xn,As),xn=(s,e)=>(!t||os(D,e)||As(e))&&Bs(s,(o,r)=>Mt(e,r,o),()=>As(e)),Mt=(s,e,o,r)=>Bs(r?o:Fn(o,s,e),(l,h)=>J(Dn(s,e,h,l),L=>(o[h]=L,!0),()=>!1),()=>As(s,e)),Dn=(s,e,o,r)=>t?J(g(g(D,s),o),l=>Et(r)!=l[Ut]?As(s,e,o,r,l[Os]):r,()=>As(s,e,o,r)):G(Et(r))?As(s,e,o,r):r,Nn=(s,e)=>Bs(e?s:io(s),(o,r)=>J(bn(r,o),l=>(s[r]=l,!0),()=>!1),()=>at()),bn=(s,e)=>n?J(g(Ls,s),o=>Et(e)!=o[Ut]?at(s,e,o[Os]):e,()=>at(s,e)):G(Et(e))?at(s,e):e,Fn=(s,e,o)=>(J(g(q,e),([r,l])=>{M(r,(h,L)=>{mt(s,L)||(s[L]=h)}),M(l,h=>{mt(s,h)||As(e,o,h)})}),s),io=s=>(n&&(M(Ts,(e,o)=>{mt(s,o)||(s[o]=e)}),M(Rs,e=>{mt(s,e)||at(e)})),s),An=s=>Xs(D,s,(e,o,r)=>{let l=R(),h=yt();Xs(ss(D,o,R),r,(L,H,x)=>{b(L,H,x),J(x[Os],xs=>b(l,H,xs),()=>Vt(h,H))}),b(q,o,[l,h])},(e,o)=>{b(D,o),b(q,o)}),zn=s=>Xs(Ls,s,(e,o,r)=>{b(Ls,o,r),J(r[Os],l=>b(Ts,o,l),()=>Vt(Rs,o))},(e,o)=>{b(Ls,o),b(Ts,o),Qt(Rs,o)}),jn=s=>Vs(s)?Pt():jt(s),ro=([s,e])=>{(Vs(s)?Pt:jt)(s),(Vs(e)?Wt:_t)(e)},_n=s=>Xs(w,s,(e,o,r)=>wt(o,r),(e,o)=>Bn(o)),wt=(s,e)=>Xs(ss(w,s,()=>(Jn(s,1),b(Cs,s,Ie()),b(vs,s,R()),R())),e,(o,r,l)=>lt(s,o,r,l),(o,r)=>Un(s,o,r)),lt=(s,e,o,r,l)=>Xs(ss(e,o,()=>(Gn(s,o,1),R())),r,(h,L,H)=>sn(s,o,h,L,H),(h,L)=>qn(s,e,o,h,L,l)),sn=(s,e,o,r,l)=>{os(o,r)||$n(s,e,r,1);let h=g(o,r);l!==h&&(Yn(s,e,r,h,l),b(o,r,l))},Pn=(s,e,o,r,l)=>J(g(e,o),h=>sn(s,o,h,r,l),()=>lt(s,e,o,Fn({[r]:l},s,o))),Wn=s=>Vs(s)?Wt():_t(s),kn=s=>Xs(Z,s,(e,o,r)=>Ht(o,r),(e,o)=>Kn(o)),Ht=(s,e)=>{os(Z,s)||Zn(s,1);let o=g(Z,s);e!==o&&(On(s,o,e),b(Z,s,e))},lo=(s,e)=>{let[o]=g(Cs,s),r;do r=o(e);while(os(g(w,s),r));return r},xt=s=>g(w,s)??wt(s,{}),Bn=s=>wt(s,{}),Un=(s,e,o)=>{let[,r]=g(Cs,s);r(o),lt(s,e,o,{},!0)},qn=(s,e,o,r,l,h)=>{let L=g(g(q,s)?.[0],l);if(!G(L)&&!h)return sn(s,o,r,l,L);let H=x=>{Yn(s,o,x,g(r,x)),$n(s,o,x,-1),b(r,x)};G(L)?H(l):qs(r,H),m(r)&&(Gn(s,o,-1),m(b(e,o))&&(Jn(s,-1),b(w,s),b(Cs,s),b(vs,s)))},Kn=s=>{let e=g(Ts,s);if(!G(e))return Ht(s,e);On(s,g(Z,s)),Zn(s,-1),b(Z,s)},Jn=(s,e)=>St(T,s,e),Gn=(s,e,o)=>St(ss(S,s,R),e,o)&&b(Y,s,ss(Y,s,()=>0)+o),$n=(s,e,o,r)=>{let l=g(vs,s),h=g(l,o)??0;(h==0&&r==1||h==1&&r==-1)&&St(ss(z,s,R),o,r),b(l,o,h!=-r?h+r:null),St(ss(ss(E,s,R),e,R),o,r)},Yn=(s,e,o,r,l)=>{ss(ss(ss(f,s,R),e,R),o,()=>[r,0])[1]=l,d[3]?.(s,e,o,l)},Zn=(s,e)=>St(u,s,e),On=(s,e,o)=>{ss(y,s,()=>[e,0])[1]=o,d[4]?.(s,o)},As=(s,e,o,r,l)=>(Ot(ss(ss(ss(v,s,R),e,R),o,()=>[]),r),l),at=(s,e,o)=>(Ot(ss(V,s,()=>[]),e),o),Dt=(s,e,o)=>J(g(g(g(f,s),e),o),([r,l])=>[!0,r,l],()=>[!1,...Kt(bt(s,e,o))]),Qn=s=>J(g(y,s),([e,o])=>[!0,e,o],()=>[!1,...Kt(Ft(s))]),Xn=s=>!m(v)&&!m(Ss[s])?M(s?En(v):v,(e,o)=>M(e,(r,l)=>M(r,(h,L)=>j(Ss[s],[o,l,L],h)))):0,In=s=>!m(V)&&!m(ps[s])?M(s?Ks(V):V,(e,o)=>j(ps[s],[o],e)):0,ft=(s,e,o,r)=>{if(!m(s))return j(e,r,()=>hs(s)),qs(s,(l,h)=>j(o,[...r??[],l],h==1)),1},se=s=>{let e=At();e!=c&&j(rt[s],void 0,e);let o=m(is[s]),r=m(F[s])&&m($[s])&&m(X[s])&&m(Es[s])&&m(p[s])&&m(A[s])&&m(Q[s])&&o&&m(_[s])&&m(cs[s]),l=m(I[s])&&m(gs[s])&&m(O[s])&&m(C[s]);if(!r||!l){let h=s?[Ks(T),Cn(z),Ks(Y),Cn(S),En(E),En(f)]:[T,z,Y,S,E,f];if(!r){ft(h[0],_[s],cs[s]),M(h[1],(H,x)=>ft(H,p[s],A[s],[x])),M(h[2],(H,x)=>{H!=0&&j(Q[s],[x],oe(x))});let L=yt();M(h[3],(H,x)=>{ft(H,X[s],Es[s],[x])&&!o&&(j(is[s],[x,null]),Vt(L,x))}),o||M(h[5],(H,x)=>{if(!os(L,x)){let xs=yt();M(H,zs=>M(zs,([kt,Bt],ht)=>Bt!==kt?Vt(xs,ht):Qt(zs,ht))),M(xs,zs=>j(is[s],[x,zs]))}}),M(h[4],(H,x)=>M(H,(xs,zs)=>ft(xs,F[s],$[s],[x,zs])))}if(!l){let L;M(h[5],(H,x)=>{let xs;M(H,(zs,kt)=>{let Bt;M(zs,([ht,pe],jo)=>{pe!==ht&&(j(I[s],[x,kt,jo],pe,ht,Dt),L=xs=Bt=1)}),Bt&&j(gs[s],[x,kt],Dt)}),xs&&j(O[s],[x],Dt)}),L&&j(C[s],void 0,Dt)}}},te=s=>{let e=zt();e!=i&&j(Ms[s],void 0,e);let o=m(ws[s])&&m(Hs[s]),r=m(rs[s])&&m(ms[s]);if(!o||!r){let l=s?[Ks(u),Ks(y)]:[u,y];if(o||ft(l[0],ws[s],Hs[s]),!r){let h;M(l[1],([L,H],x)=>{H!==L&&(j(rs[s],[x],H,L,Qn),h=1)}),h&&j(ms[s],void 0,Qn)}}},P=(s,...e)=>(rn(()=>s(...Zt(e,N))),ts),ne=(s,e,o,r,l)=>{let h=Nt(s,e,...o);return as(()=>{let L=Nt(s,e,...o);Sc(L,h)||(h=L,r(ts,s,e,...o,h))},is[l?1:0],[s,e],[us])},ao=()=>[tn(),en()],tn=()=>qt(w),us=()=>pt(w),fo=s=>Sn(g(w,N(s))),ee=s=>pt(g(vs,N(s))),oe=s=>Vn(g(w,N(s))),tt=s=>pt(g(w,N(s))),Nt=(s,e,o,r=0,l)=>Xt(s)?Nt(s.tableId,s.cellId,s.descending,s.offset,s.limit):Zt(qe(Cc(Nc(g(w,N(s)),(h,L)=>[G(e)?L:g(h,N(e)),L]),([h],[L])=>Fc(h,L)*(o?-1:1)),r,G(l)?l:r+l),([,h])=>h),ho=(s,e)=>hs(g(g(w,N(s)),N(e))),nn=(s,e)=>pt(g(g(w,N(s)),N(e))),bt=(s,e,o)=>g(g(g(w,N(s)),N(e)),N(o)),en=()=>hs(Z),on=()=>pt(Z),Ft=s=>g(Z,N(s)),At=()=>!m(w),ce=s=>os(w,N(s)),ie=(s,e)=>os(g(vs,N(s)),N(e)),re=(s,e)=>os(g(w,N(s)),N(e)),le=(s,e,o)=>os(g(g(w,N(s)),N(e)),N(o)),zt=()=>!m(Z),ae=s=>os(Z,N(s)),go=()=>ot(w),uo=()=>ot(Z),Lo=()=>ot([w,Z]),To=()=>ot(D),Eo=()=>ot(Ls),po=()=>ot([D,Ls]),So=s=>P(()=>{let e=un(s)?s():s;oo(e)&&ro(e)}),jt=s=>P(()=>co(s)?_n(s):0),Co=(s,e)=>P(o=>xn(e,o)?wt(o,e):0,s),mo=(s,e,o)=>P((r,l)=>Mt(r,l,o)?lt(r,xt(r),l,o):0,s,e),yo=(s,e,o=!0)=>rn(()=>{let r;return Mt(s,r,e)&&(s=N(s),lt(s,xt(s),r=lo(s,o?1:0),e)),r}),Vo=(s,e,o)=>P((r,l)=>{if(Mt(r,l,o,1)){let h=xt(r);Us(o,(L,H)=>Pn(r,h,l,H,L))}},s,e),Ro=(s,e,o,r)=>P((l,h,L)=>J(Dn(l,h,L,un(r)?r(bt(l,h,L)):r),H=>Pn(l,xt(l),h,L,H)),s,e,o),_t=s=>P(()=>Nn(s)?kn(s):0),vo=s=>P(()=>Nn(s,1)?Us(s,(e,o)=>Ht(o,e)):0),Mo=(s,e)=>P(o=>J(bn(o,un(e)?e(Ft(o)):e),r=>Ht(o,r)),s),wo=s=>P(()=>{Us(s[0],(e,o)=>G(e)?ue(o):Us(e,(r,l)=>G(r)?de(o,l):Us(r,(h,L)=>Ke(ts,o,l,L,h)))),Us(s[1],(e,o)=>Je(ts,o,e))}),fe=s=>(dn(()=>jn(pn(s))),ts),Ho=s=>(dn(()=>Wn(pn(s))),ts),xo=s=>P(()=>dn(()=>{let[e,o]=pn(s);jn(e),Wn(o)},()=>fe(s))),he=s=>P(()=>{if((t=vt(s))&&(An(s),!m(w))){let e=tn();Pt(),jt(e)}}),ge=s=>P(()=>{if(n=eo(s)){let e=en();cn(),Wt(),n=!0,zn(s),_t(e)}}),Do=(s,e)=>P(()=>{he(s),ge(e)}),Pt=()=>P(()=>_n({})),ue=s=>P(e=>os(w,e)?Bn(e):0,s),de=(s,e)=>P((o,r)=>J(g(w,o),l=>os(l,r)?Un(o,l,r):0),s,e),No=(s,e,o,r)=>P((l,h,L)=>J(g(w,l),H=>J(g(H,h),x=>os(x,L)?qn(l,H,h,x,L,r):0)),s,e,o),Wt=()=>P(()=>kn({})),bo=s=>P(e=>os(Z,e)?Kn(e):0,s),Le=()=>P(()=>{An({}),t=!1}),cn=()=>P(()=>{zn({}),n=!1}),Fo=()=>P(()=>{Le(),cn()}),rn=(s,e)=>{if(a!=-1){Te();let o=s();return Ee(e),o}},Te=()=>(a!=-1&&a++,a==1&&(d[0]?.(),j(K)),ts),Ao=()=>[hs(f,(s,e)=>g(T,e)===-1?void 0:hs(s,(o,r)=>g(g(S,e),r)===-1?void 0:hs(o,([,l])=>l,l=>Jt(l)),m,Vs),m,Vs),hs(y,([,s])=>s,s=>Jt(s)),1],zo=()=>[!m(f),!m(y),qt(f,$e,Jt),qt(v),hs(y,$e,Jt),hs(V),hs(T),Sn(S),qt(E),hs(u)],Ee=s=>(a>0&&(a--,a==0&&(a=1,Xn(1),m(f)||se(1),In(1),m(y)||te(1),s?.(ts)&&(M(f,(e,o)=>M(e,(r,l)=>M(r,([h],L)=>Ke(ts,o,l,L,h)))),Tn(f),M(y,([e],o)=>Je(ts,o,e)),Tn(y)),j(ls[0],void 0),a=-1,Xn(0),m(f)||se(0),In(0),m(y)||te(0),d[1]?.(),j(ls[1],void 0),d[2]?.(),a=0,c=At(),i=zt(),Rt([T,z,Y,S,E,f,v,u,y,V],Tn))),ts),ts={getContent:ao,getTables:tn,getTableIds:us,getTable:fo,getTableCellIds:ee,getRowCount:oe,getRowIds:tt,getSortedRowIds:Nt,getRow:ho,getCellIds:nn,getCell:bt,getValues:en,getValueIds:on,getValue:Ft,hasTables:At,hasTable:ce,hasTableCell:ie,hasRow:re,hasCell:le,hasValues:zt,hasValue:ae,getTablesJson:go,getValuesJson:uo,getJson:Lo,getTablesSchemaJson:To,getValuesSchemaJson:Eo,getSchemaJson:po,hasTablesSchema:()=>t,hasValuesSchema:()=>n,setContent:So,setTables:jt,setTable:Co,setRow:mo,addRow:yo,setPartialRow:Vo,setCell:Ro,setValues:_t,setPartialValues:vo,setValue:Mo,applyChanges:wo,setTablesJson:fe,setValuesJson:Ho,setJson:xo,setTablesSchema:he,setValuesSchema:ge,setSchema:Do,delTables:Pt,delTable:ue,delRow:de,delCell:No,delValues:Wt,delValue:bo,delTablesSchema:Le,delValuesSchema:cn,delSchema:Fo,transaction:rn,startTransaction:Te,getTransactionChanges:Ao,getTransactionLog:zo,finishTransaction:Ee,forEachTable:s=>M(w,(e,o)=>s(o,r=>M(e,(l,h)=>r(h,L=>qs(l,L))))),forEachTableCell:(s,e)=>qs(g(vs,N(s)),e),forEachRow:(s,e)=>M(g(w,N(s)),(o,r)=>e(r,l=>qs(o,l))),forEachCell:(s,e,o)=>qs(g(g(w,N(s)),N(e)),o),forEachValue:s=>qs(Z,s),addSortedRowIdsListener:(s,e,o,r,l,h,L)=>Xt(s)?ne(s.tableId,s.cellId,[s.descending??!1,s.offset??0,s.limit],e,o):ne(s,e,[o,r,l],h,L),addStartTransactionListener:s=>as(s,K),addWillFinishTransactionListener:s=>as(s,ls[0]),addDidFinishTransactionListener:s=>as(s,ls[1]),callListener:s=>(fs(s),ts),delListener:s=>(st(s),ts),getListenerStats:()=>({hasTables:W(rt),tables:W(C),tableIds:W(_),hasTable:W(cs),table:W(O),tableCellIds:W(p),hasTableCell:W(A,Ct),rowCount:W(Q),rowIds:W(X),sortedRowIds:W(is),hasRow:W(Es,Ct),row:W(gs,Ct),cellIds:W(F,Ct),hasCell:W($,Ln),cell:W(I,Ln),invalidCell:W(Ss,Ln),hasValues:W(Ms),values:W(ms),valueIds:W(ws),hasValue:W(Hs),value:W(rs),invalidValue:W(ps),transaction:Rn(K)+W(ls)}),isMergeable:()=>!1,createStore:vn,addListener:as,callListeners:j,setInternalListeners:(s,e,o,r,l)=>d=[s,e,o,r,l]};return Us({[Qs+ke]:[0,rt,[],()=>[At()]],[ke]:[0,C],[fc]:[0,_],[Qs+ct]:[1,cs,[us],s=>[ce(...s)]],[ct]:[1,O,[us]],[ct+Be]:[1,p,[us]],[Qs+ct+Gt]:[2,A,[us,ee],s=>[ie(...s)]],[hc]:[1,Q,[us]],[gc]:[1,X,[us]],[Qs+$t]:[2,Es,[us,tt],s=>[re(...s)]],[$t]:[2,gs,[us,tt]],[Be]:[2,F,[us,tt]],[Qs+Gt]:[3,$,[us,tt,nn],s=>[le(...s)]],[Gt]:[3,I,[us,tt,nn],s=>Kt(bt(...s))],InvalidCell:[3,Ss],[Qs+Ue]:[0,Ms,[],()=>[zt()]],[Ue]:[0,ms],[uc]:[0,ws],[Qs+Yt]:[1,Hs,[on],s=>[ae(...s)]],[Yt]:[1,rs,[on],s=>Kt(Ft(s[0]))],InvalidValue:[1,ps]},([s,e,o,r],l)=>{ts[ac+l+lc]=(...h)=>as(h[s],e[h[s+1]?1:0],s>0?qe(h,0,s):void 0,o,r)}),Mc(ts)};var _c=["db","id","ids","no","ui","ws","add","api","bun","del","dom","for","get","has","hlc","log","map","row","set","sql","use","web","yjs"],no=(t=!1)=>{addEventListener("load",()=>{let n=Ds("body > header > nav");if(n==null)return;let c=ns("div",null,{id:"search"}),i=ns("input",c,{type:"text",placeholder:(navigator.platform.startsWith("Mac")?"\u2318":"cmd-")+"K Search"}),a=ns("ol",c),d=ns("li",a,{},"No results found"),T=vn(),z=We(T);z.setIndexDefinition("p","p",f=>{let u=[];return f("t").split(" ").forEach(y=>{for(let v=0;v<y.length;v++)u.push(y.slice(0,v+1))}),u},"t",void 0,(f,u,y)=>wn(u,y)-wn(f,y)),fetch("/pages.json").then(f=>f.json()).then(f=>{T.transaction(()=>{T.setContent(f),T.forEachRow("p",u=>{let{n:y,s:v}=T.getRow("p",u),V=new Set;Mn(u,V,!0),Mn(y,V),Mn(v,V),T.setCell("p",u,"t",Array.from(V.values()).join(" "))})}),Y()});let Y=()=>{n.prepend(c);let f=()=>(i.value?Gs:gt)(a,"show");i.addEventListener("focus",f),i.addEventListener("input",()=>{f(),S()}),i.addEventListener("blur",()=>gt(a,"show")),E()},S=()=>{let f=i.value.toLowerCase().split(/[^a-z0-9]+/),u=new Map;f.forEach(V=>z.getSliceRowIds("p",V).slice(0,50).forEach(D=>u.set(D,(u.get(D)??0)+wn(T.getCell("p",D,"t"),V))));let y=Array.from(u.keys()).sort((V,D)=>u.get(D)-u.get(V)).slice(0,10),v=y.length==0?[d]:y.map((V,D)=>{let q=ns("li"),{n:Ls,s:Ts}=T.getRow("p",V);return so(ns("b",q),Ls,f[0]),so(ns("span",q),Ts,f[0]),q.title=Ts,q.addEventListener("mousedown",()=>t?location.href=V:ut(V)),D==0&&Gs(q,"hover"),q});a.replaceChildren(...v)},E=()=>addEventListener("keydown",f=>{if(_s.activeElement==i){let u=js(a,".hover");switch(f.code){case"Escape":return i.blur();case"ArrowDown":return $s(f),to(u,u?.nextSibling??a.firstChild);case"ArrowUp":return $s(f),to(u,u?.previousSibling??a.lastChild);case"Enter":return u?.dispatchEvent(new MouseEvent("mousedown"))}}else f.code=="KeyK"&&f.metaKey&&(i.focus(),$s(f))})})},so=(t,n,c)=>{let i=n.toLowerCase().indexOf(c);t.innerHTML=i==-1?n:n.substring(0,i)+"<em>"+n.substring(i,i+c.length)+"</em>"+n.substring(i+c.length)},to=(t,n)=>{t!=n&&(t&&gt(t,"hover"),n&&(Gs(n,"hover"),n.scrollIntoView({block:"nearest",inline:"nearest"})))},Mn=(t,n,c)=>{let i=t.replaceAll(/[^a-zA-Z0-9]/g," ").split(/\s+/);c&&i.reverse(),i.forEach(a=>{[a,...a.replaceAll(/([a-z])([A-Z])/g,"$1 $2").split(" ")].forEach(d=>{let T=d.toLowerCase();(T.length>3||_c.includes(T))&&n.add(T)})})},wn=(t,n)=>{let c=t.length,i=t.indexOf(n);return i===-1?0:(c-i)/c};Ce();ve();no();addEventListener("load",()=>{ln(),_s.body.addEventListener("click",n=>{if(n.button!=0)return;let c=n.target;if(c.tagName=="SPAN"&&c.innerHTML==""&&c.parentElement?.tagName=="LI")return t(c.parentElement);for(;c.tagName!="A"&&c.parentElement!=null;)c=c.parentElement;let i=c.href;!n.metaKey&&!n.shiftKey&&i!=null&&i!=location.origin+"/"&&i.startsWith(location.origin+"/")&&!i.includes("#")&&(ut(i),$s(n))}),window.onpopstate=function(n){location.href.includes("#")||(ut(location.href,!1),$s(n))};let t=n=>Ve(n,"open",()=>{let c=js(n,"a");c.href!=location.origin&&c.click()})});})();
