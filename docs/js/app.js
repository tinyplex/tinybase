"use strict";(()=>{var E=document,p=n=>E.querySelector(n),g=(n,o)=>n.querySelector(o),v=n=>E.getElementById(n),d=(n,o,l={},s)=>{let i=E.createElement(n);return Object.entries(l).forEach(h=>i.setAttribute(...h)),s!=null&&(i.innerText=s),o!=null?o.appendChild(i):i},H=(n,o,l)=>{let s=(n.className??"").split(" ");l(s,s.indexOf(o)),n.className=s.join(" ")},L=(n,o)=>H(n,o,(l,s)=>s==-1?l.push(o):null),b=(n,o)=>H(n,o,(l,s)=>s!=-1?l.splice(s,1):null),x=(n,o,l)=>H(n,o,(s,i)=>i!=-1?s.splice(i,1):s.push(o)&&l()),m="dark",T="light",M="auto",k=()=>q(),q=()=>{let n=matchMedia("(prefers-color-scheme: dark)"),o=()=>{let l=localStorage.getItem(m)??M;p("#dark")?.setAttribute("class",l),p("html").className=l==m||l==M&&n.matches?m:T};n.addEventListener("change",o),window.addEventListener("storage",l=>{l.storageArea==localStorage&&l.key==m&&o()}),addEventListener("load",()=>{p("#dark").addEventListener("click",()=>{let l=localStorage.getItem(m);localStorage.setItem(m,l==m?T:l==T?M:m),o()}),o()}),o()};k();addEventListener("load",()=>{let n=p("body > main > nav"),o=p("body > main > article");if(n==null||o==null)return;let l=()=>{let t=g(o,":scope iframe"),e=t?.parentElement;if(t==null||e==null)return;let r=e.insertBefore(d("form",null,{action:"https://codepen.io/pen/define",method:"post",target:"_blank"}),t);e.insertBefore(d("a",null,{id:"penEdit"},"Open this demo in CodePen"),t).onclick=()=>{r.childNodes.length==0?fetch("pen.json").then(f=>f.text()).then(f=>{d("input",r,{type:"hidden",name:"data",value:f}),r.submit()}):r.submit()}};l(),E.body.addEventListener("click",t=>{if(t.button!=0)return;let e=t.target;if(e.tagName=="SPAN"&&e.innerHTML==""&&e.parentElement?.tagName=="LI")return s(e.parentElement);for(;e.tagName!="A"&&e.parentElement!=null;)e=e.parentElement;let r=e.href;!t.metaKey&&!t.shiftKey&&r!=null&&r!=location.origin+"/"&&r.startsWith(location.origin+"/")&&!r.includes("#")&&(i(r),t.preventDefault(),history.pushState(null,"",r))}),window.onpopstate=function(t){i(location.href),t.preventDefault()};let s=t=>x(t,"open",()=>{let e=g(t,"a");e.href!=location.origin&&e.click()}),i=t=>{["?","#"].forEach(e=>{t.includes(e)&&(t=t.substring(0,t.indexOf(e)))}),fetch(`${t}nav.json`).then(e=>e.json()).then(e=>{b(g(n,"li.current"),"current"),h(e,g(n,"ul"))}),fetch(`${t}article.html`).then(e=>e.text()).then(e=>N(e))},h=({i:t,n:e,u:r,r:f,c:C,p:A,o:B,_:y},S)=>{let a=v(t);if(a==null){a=d("li",S,{id:t}),d("span",a);let c=d("a",a,{href:r});f?d("code",c,{},e):c.innerText=e,A&&L(a,"parent")}if(B&&L(a,"open"),y!=null){let c=g(a,"ul")??d("ul",a);y.forEach(u=>{h(u,c)})}if(C){L(a,"current"),E.title=`${e} | TinyBase`;let c=a.getBoundingClientRect(),u=n.getBoundingClientRect();c.top<u.top?n.scrollBy(0,c.top-u.top):c.bottom>u.bottom&&n.scrollBy(0,Math.min(c.bottom-u.bottom,c.top-u.top))}},N=t=>{o.innerHTML=t,o.scrollTo(0,0),l()}});})();
