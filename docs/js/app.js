"use strict";(()=>{var Ce="v7.2.0-beta.2";var Wo="TinyBase",js=document,me=()=>{addEventListener("load",()=>{let s=xs("#version");s.innerText=Ce,s.style.width=s.scrollWidth+"px"})},Uo=null,ye=()=>Uo??=xs("body > main > nav"),Yo=null,Re=()=>Yo??=xs("body > main > article"),Js=s=>s.preventDefault(),xs=s=>js.querySelector(s),zs=(s,n)=>s.querySelector(n),ko=s=>js.getElementById(s),ts=(s,n,c={},i)=>{let a=js.createElement(s);return Object.entries(c).forEach(d=>a.setAttribute(...d)),i!=null&&(a.innerText=i),n!=null?n.appendChild(a):a},Ks=(s,n)=>s.classList.add(n);var ht=(s,n)=>s.classList.remove(n),Ve=(s,n,c)=>s.classList.toggle(n)?c():0,gt=(s,n=!0)=>{let c=ye();["?","#"].forEach(i=>{s.includes(i)&&(s=s.substring(0,s.indexOf(i)))}),fetch(`${s}nav.json`).then(i=>i.json()).then(i=>{ht(zs(c,"li.current"),"current"),Ne(i,zs(c,"ul"))}),fetch(`${s}article.html`).then(i=>i.text()).then(i=>{let a=Re();a.innerHTML=i,a.scrollTo(0,0),an()}),n&&history.pushState(null,"",s)},an=()=>{let s=zs(Re(),":scope iframe"),n=s?.parentElement;if(s==null||n==null)return;let c=n.insertBefore(ts("form",null,{action:"https://codepen.io/pen/define",method:"post",target:"_blank"}),s);n.insertBefore(ts("a",null,{id:"penEdit"},"Open this demo in CodePen"),s).onclick=()=>{c.childNodes.length==0?fetch("pen.json").then(i=>i.text()).then(i=>{ts("input",c,{type:"hidden",name:"data",value:i}),c.submit()}):c.submit()}},Ne=({i:s,n,u:c,r:i,c:a,p:d,o:T,_:A},J)=>{let S=ye(),E=ko(s);if(E==null){E=ts("li",J,{id:s}),ts("span",E);let f=ts("a",E,{href:c});i?ts("code",f,{},n):f.innerText=n,d&&Ks(E,"parent")}if(T&&Ks(E,"open"),A!=null){let f=zs(E,"ul")??ts("ul",E);A.forEach(u=>{Ne(u,f)})}if(a){Ks(E,"current"),js.title=`${n} | ${Wo}`;let f=E.getBoundingClientRect(),u=S.getBoundingClientRect();f.top<u.top?S.scrollBy(0,f.top-u.top):f.bottom>u.bottom&&S.scrollBy(0,Math.min(f.bottom-u.bottom,f.top-u.top))}};var Gs="dark",fn="light",hn="auto",Me=()=>{let s=matchMedia("(prefers-color-scheme: dark)"),n=()=>{let c=localStorage.getItem(Gs)??hn;xs("#dark")?.setAttribute("class",c),xs("html").className=c==Gs||c==hn&&s.matches?Gs:fn};s.addEventListener("change",n),window.addEventListener("storage",c=>{c.storageArea==localStorage&&c.key==Gs&&n()}),addEventListener("load",()=>{xs("#dark").addEventListener("click",()=>{let c=localStorage.getItem(Gs);localStorage.setItem(Gs,c==Gs?fn:c==fn?hn:Gs),n()}),n()}),n()};var _e=s=>typeof s;var Bo=_e(""),ve=s=>""+s,qo=s=>(n,c,i)=>s(n)?i?.():c(n),_s=s=>s===void 0,Fe=s=>s===null,$s=qo(_s),Ko=s=>_e(s)==Bo,dt=s=>Array.isArray(s),Fs=s=>s.length,Jo=(s,n)=>s.test(n),be=(s,n)=>s.every(n),$o=(s,n)=>Fs(s)===Fs(n)&&be(s,(c,i)=>n[i]===c),we=(s,n)=>be(s,(c,i)=>i==0||n(s[i-1],c)<=0),He=(s,n)=>s.sort(n),Zs=(s,n)=>s.forEach(n),Zo=(s,n)=>s.map(n),Oo=s=>Fs(s)==0,Qo=(s,n,c)=>s.reduce(n,c),Ae=(s,...n)=>s.push(...n),Xo=s=>s.shift(),Pe=s=>n=>Qo(un(n),(c,i)=>c+s(i),0),ze=s=>s?.size??0,je=Pe(ze),Io=Pe(je),et=(s,n)=>s?.has(n)??!1,Lt=s=>_s(s)||ze(s)==0,un=s=>[...s?.values()??[]],xe=s=>s.clear(),ds=(s,n)=>s?.forEach(n),ot=(s,n)=>s?.delete(n),sc=Object,tc=sc.freeze,ns=s=>new Map(s),Ge=s=>[...s?.keys()??[]],Y=(s,n)=>s?.get(n),ut=(s,n)=>ds(s,(c,i)=>n(i,c)),U=(s,n,c)=>_s(c)?(ot(s,n),s):s?.set(n,c),We=(s,n,c,i)=>(et(s,n)?i?.(Y(s,n)):U(s,n,c()),Y(s,n)),gn=(s,n,c,i,a=0)=>$s((c?We:Y)(s,n[a],a>Fs(n)-2?c:ns),d=>{if(a>Fs(n)-2)return i?.(d)&&U(s,n[a]),d;let T=gn(d,n,c,i,a+1);return Lt(d)&&U(s,n[a]),T}),Ws=s=>new Set(dt(s)||_s(s)?s:[s]),Ds=(s,n)=>s?.add(n),nc=(s,n,c,i,a)=>{let d=s.hasRow,T=ns(),A=ns(),J=ns(),S=ns(),E=ns(),f=ns(),u=()=>s,y=()=>Ge(T),N=C=>ut(A,C),R=C=>et(A,C),x=C=>Y(T,C),k=C=>Y(A,C),Ls=(C,z)=>U(A,C,z),Ts=(C,z,...cs)=>{let Z=We(f,C,Ws);return Zs(cs,p=>Ds(Z,p)&&z&&s.callListener(p)),cs},Rs=(C,...z)=>$s(Y(f,C),cs=>{Zs(Oo(z)?un(cs):z,Z=>{s.delListener(Z),ot(cs,Z)}),Lt(cs)&&U(f,C)}),Cs=(C,z)=>{U(T,C,z),et(A,C)||(U(A,C,n()),U(S,C,ns()),U(E,C,ns()),a(J))},Vs=(C,z,cs,Z,p)=>{Cs(C,z);let b=ns(),O=ns(),Q=Y(S,C),is=Y(E,C),Es=F=>{let q=ps=>s.getCell(z,F,ps),X=Y(Q,F),Ss=d(z,F)?c(Z(q,F)):void 0;if(X===Ss||dt(X)&&dt(Ss)&&$o(X,Ss)||U(b,F,[X,Ss]),!_s(p)){let ps=Y(is,F),Ns=d(z,F)?p(q,F):void 0;ps!=Ns&&U(O,F,Ns)}},gs=F=>{cs(()=>{ds(b,([,q],X)=>U(Q,X,q)),ds(O,(q,X)=>U(is,X,q))},b,O,Q,is,F),xe(b),xe(O)};ut(Q,Es),s.hasTable(z)&&Zs(s.getRowIds(z),F=>{et(Q,F)||Es(F)}),gs(!0),Rs(C),Ts(C,0,s.addRowListener(z,null,(F,q,X)=>Es(X)),s.addTableListener(z,()=>gs()))},v=C=>{U(T,C),U(A,C),U(S,C),U(E,C),Rs(C),a(J)};return[u,y,N,R,x,k,Ls,Cs,Vs,v,C=>i(C,J),()=>ut(f,v),Ts,Rs]},De=(s,n)=>Ko(s)?c=>c(s):s??(()=>n??""),ec=(s,n)=>{let c=new WeakMap;return i=>(c.has(i)||c.set(i,s(i)),c.get(i))},oc=(s,n)=>(s??0)<(n??0)?-1:1,cc=/^\d+$/,ic=()=>{let s=[],n=0;return[c=>(c?Xo(s):null)??""+n++,c=>{Jo(cc,c)&&Fs(s)<1e3&&Ae(s,c)}]},rc=(s,n=[""])=>{let c=[],i=(a,d)=>d==Fs(n)?Ae(c,a):Fe(n[d])?ds(a,T=>i(T,d+1)):Zs([n[d],null],T=>i(Y(a,T),d+1));return i(s,0),c},lc=s=>{let n,[c,i]=ic(),a=ns();return[(S,E,f,u=[],y=()=>[])=>{n??=s();let N=c(1);return U(a,N,[S,E,f,u,y]),Ds(gn(E,f??[""],Ws),N),N},(S,E,...f)=>Zs(rc(S,E),u=>ds(u,y=>Y(a,y)[0](n,...E??[],...f))),S=>$s(Y(a,S),([,E,f])=>(gn(E,f??[""],void 0,u=>(ot(u,S),Lt(u)?1:0)),U(a,S),i(S),f)),S=>$s(Y(a,S),([E,,f=[],u,y])=>{let N=(...R)=>{let x=Fs(R);x==Fs(f)?E(n,...R,...y(R)):Fe(f[x])?Zs(u[x]?.(...R)??[],k=>N(...R,k)):N(...R,f[x])};N()})]},Ue=ec(s=>{let n=ns(),c=ns(),[i,a,d]=lc(()=>Z),[T,A,J,S,E,f,u,,y,N,R,x]=nc(s,ns,p=>_s(p)?"":dt(p)?Zo(p,ve):ve(p),i,a),k=(p,b)=>et(f(p),b),Ls=(p,b,O,Q,is,Es=oc)=>{let gs=_s(is)?void 0:([F],[q])=>is(F,q);return y(p,b,(F,q,X,Ss,ps,Ns)=>{let ms=0,Ms=Ws(),vs=Ws(),rs=f(p);if(ds(q,([B,ls],as)=>{let P=Ws(B),st=Ws(ls);ds(P,fs=>ot(st,fs)?ot(P,fs):0),ds(P,fs=>{Ds(Ms,fs),$s(Y(rs,fs),Vt=>{ot(Vt,as),Lt(Vt)&&(U(rs,fs),ms=1)})}),ds(st,fs=>{Ds(Ms,fs),et(rs,fs)||(U(rs,fs,Ws()),ms=1),Ds(Y(rs,fs),as),_s(Q)||Ds(vs,fs)})}),F(),Lt(ps)||(Ns?ut(rs,B=>Ds(vs,B)):ut(X,B=>$s(Y(Ss,B),ls=>Zs(dt(ls)?ls:[ls],as=>Ds(vs,as)))),ds(vs,B=>{let ls=(P,st)=>Es(Y(ps,P),Y(ps,st),B),as=[...Y(rs,B)];we(as,ls)||(U(rs,B,Ws(He(as,ls))),Ds(Ms,B))})),(ms||Ns)&&!_s(gs)){let B=[...rs];we(B,gs)||(u(p,ns(He(B,gs))),ms=1)}ms&&a(n,[p]),ds(Ms,B=>a(c,[p,B]))},De(O),$s(Q,De)),Z},Ts=p=>J((b,O)=>p(b,Q=>Cs(b,Q,O))),Rs=(p,b)=>Cs(p,b,f(p)),Cs=(p,b,O)=>{let Q=E(p);ds(O,(is,Es)=>b(Es,gs=>ds(is,F=>gs(F,q=>s.forEachCell(Q,F,q)))))},Z={setIndexDefinition:Ls,delIndexDefinition:p=>(N(p),Z),getStore:T,getIndexIds:A,forEachIndex:Ts,forEachSlice:Rs,hasIndex:S,hasSlice:k,getTableId:E,getSliceIds:p=>Ge(f(p)),getSliceRowIds:(p,b)=>un(Y(f(p),b)),addIndexIdsListener:R,addSliceIdsListener:(p,b)=>i(b,n,[p]),addSliceRowIdsListener:(p,b,O)=>i(O,c,[p,b]),delListener:p=>(d(p),Z),destroy:x,getListenerStats:()=>({sliceIds:je(n),sliceRowIds:Io(c)})};return tc(Z)});var Is=s=>typeof s;var ac=Is(""),fc=Is(!0),Oe=Is(0),hc=Is(Is),Ut="type",bs="default",Yt="allowNull",gc="null",uc="Listener",dc="add",Os="Has",sn="Ids",it="Table",Ye=it+"s",Lc=it+sn,Jt="Row",Tc=Jt+"Count",Ec=Jt+sn,Kt="Cell",ke=Kt+sn,$t="Value",Be=$t+"s",pc=$t+sn,D=s=>""+s,Qe=s=>(n,c,i)=>s(n)?i?.():c(n),Sc=isFinite,Cc=(s,n)=>s instanceof n,Zt=s=>s==null,os=s=>s===void 0,Xs=s=>s===null,mc=Qe(Zt),K=Qe(os),Xe=s=>s==ac||s==fc,dn=s=>Is(s)==hc,Ie=s=>Array.isArray(s),qe=(s,n,c)=>s.slice(n,c),As=s=>s.length,yc=(s,n)=>s.test(n),Ln=async(s,n,c)=>{try{return await s()}catch(i){n?.(i)}},Rc=(s,n)=>s.includes(n),Vc=(s,n)=>s.every(n),Nc=(s,n)=>As(s)===As(n)&&Vc(s,(c,i)=>n[i]===c),Mc=(s,n)=>s.sort(n),Rt=(s,n)=>s.forEach(n),Ot=(s,n)=>s.map(n),vc=(s,n,c)=>s.reduce(n,c),Qt=(s,...n)=>s.push(...n),wc=s=>s.shift(),Tt=s=>{if(Xs(s))return gc;let n=Is(s);return Xe(n)||n==Oe&&Sc(s)?n:void 0},Ke=(s,n,c,i,a)=>os(a)?s.delCell(n,c,i,!0):s.setCell(n,c,i,a),Je=(s,n,c)=>os(c)?s.delValue(n):s.setValue(n,c),Rn=s=>n=>vc(Hc(n),(c,i)=>c+s(i),0),Vn=s=>s?.size??0,Nn=Rn(Vn),St=Rn(Nn),Tn=Rn(St),es=(s,n)=>s?.has(n)??!1,m=s=>os(s)||Vn(s)==0,Hc=s=>[...s?.values()??[]],En=s=>s.clear(),M=(s,n)=>s?.forEach(n),Xt=(s,n)=>s?.delete(n),qs=Object,$e=s=>qs.getPrototypeOf(s),xc=qs.isFrozen,so=qs.entries,It=s=>!Zt(s)&&mc($e(s),n=>n==qs.prototype||Zt($e(n)),()=>!0),Dc=qs.keys,_c=qs.freeze,Fc=(s=[])=>qs.fromEntries(s),Ct=(s,n)=>n in s,to=(s,n)=>(delete s[n],s),bc=(s,n)=>Rt(so(s),([c,i])=>n(i,c)),Ac=(s,n)=>Ot(so(s),([c,i])=>n(i,c)),Ys=(s,n)=>Fc(Ac(s,(c,i)=>[i,n(c,i)])),Pc=s=>As(Dc(s)),ys=s=>It(s)&&Pc(s)==0,Us=(s,n,c,i=0)=>Zt(s)||!It(s)||!i&&ys(s)||xc(s)?(c?.(),!1):(bc(s,(a,d)=>{n(a,d)||to(s,d)}),i?!0:!ys(s)),V=s=>new Map(s),Et=s=>[...s?.keys()??[]],g=(s,n)=>s?.get(n),ks=(s,n)=>M(s,(c,i)=>n(i,c)),zc=(s,n)=>Ot([...s?.entries()??[]],([c,i])=>n(i,c)),_=(s,n,c)=>os(c)?(Xt(s,n),s):s?.set(n,c),I=(s,n,c,i)=>(es(s,n)?i?.(g(s,n)):_(s,n,c()),g(s,n)),Qs=(s,n,c,i=_)=>(Ys(n,(a,d)=>c(s,d,a)),ks(s,a=>Ct(n,a)?0:i(s,a)),s),hs=(s,n,c,i)=>{let a={};return M(s,(d,T)=>{if(!c?.(d,T)){let A=n?n(d,T):d;i?.(A)||(a[T]=A)}}),a},Cn=(s,n,c)=>hs(s,i=>hs(i,n,c),m,ys),kt=(s,n,c)=>hs(s,i=>Cn(i,n,c),m,ys),Bs=(s,n)=>{let c=V();return M(s,(i,a)=>c.set(a,n?.(i)??i)),c},mn=s=>Bs(s,Bs),pn=s=>Bs(s,mn),yn=(s,n,c,i,a=0)=>K((c?I:g)(s,n[a],a>As(n)-2?c:V),d=>{if(a>As(n)-2)return i?.(d)&&_(s,n[a]),d;let T=yn(d,n,c,i,a+1);return m(d)&&_(s,n[a]),T}),jc=JSON.stringify,Sn=JSON.parse,ct=s=>jc(s,(n,c)=>Cc(c,Map)?qs.fromEntries([...c]):c),Gc=(s,n)=>(s??0)<(n??0)?-1:1,Wc=/^\d+$/,no=()=>{let s=[],n=0;return[c=>(c?wc(s):null)??""+n++,c=>{yc(Wc,c)&&As(s)<1e3&&Qt(s,c)}]},mt=s=>new Set(Ie(s)||os(s)?s:[s]),yt=(s,n)=>s?.add(n),Uc=(s,n=[""])=>{let c=[],i=(a,d)=>d==As(n)?Qt(c,a):Xs(n[d])?M(a,T=>i(T,d+1)):Rt([n[d],null],T=>i(g(a,T),d+1));return i(s,0),c},Yc=s=>{let n,[c,i]=no(),a=V();return[(S,E,f,u=[],y=()=>[])=>{n??=s();let N=c(1);return _(a,N,[S,E,f,u,y]),yt(yn(E,f??[""],mt),N),N},(S,E,...f)=>Rt(Uc(S,E),u=>M(u,y=>g(a,y)[0](n,...E??[],...f))),S=>K(g(a,S),([,E,f])=>(yn(E,f??[""],void 0,u=>(Xt(u,S),m(u)?1:0)),_(a,S),i(S),f)),S=>K(g(a,S),([E,,f=[],u,y])=>{let N=(...R)=>{let x=As(R);x==As(f)?E(n,...R,...y(R)):Xs(f[x])?Rt(u[x]?.(...R)??[],k=>N(...R,k)):N(...R,f[x])};N()})]},Bt=s=>[s,s],G=(s,n=Nn)=>n(s[0])+n(s[1]),W=()=>[V(),V()],Ze=s=>[...s],qt=([s,n])=>s===n,pt=(s,n,c)=>_(s,n,g(s,n)==-c?void 0:c),Mn=()=>{let s,n,c=!1,i=!1,a=0,d=[],T=V(),A=V(),J=V(),S=V(),E=V(),f=V(),u=V(),y=V(),N=V(),R=V(),x=V(),k=V(),Ls=V(),Ts=V(),Rs=mt(),Cs=V(),Vs=V(),v=V(),$=V(),rt=W(),C=W(),z=W(),cs=W(),Z=W(),p=W(),b=W(),O=W(),Q=W(),is=W(),Es=W(),gs=W(),F=W(),q=W(),X=W(),Ss=W(),ps=W(),Ns=W(),ms=W(),Ms=W(),vs=W(),rs=W(),B=V(),ls=W(),[as,P,st,fs]=Yc(()=>ss),Vt=t=>Us(t,e=>Us(e,Hn)),io=t=>Us(t,Hn),Hn=t=>{if(!Us(t,(r,l)=>Rc([Ut,bs,Yt],l)))return!1;let e=t[Ut];if(!Xe(e)&&e!=Oe)return!1;let o=t[bs];return Xs(o)&&!t[Yt]?!1:(!Xs(o)&&Tt(o)!=e&&to(t,bs),!0)},ro=Ie,lo=t=>Us(t,xn,ws),xn=(t,e)=>(!s||es(x,e)||ws(e))&&Us(t,(o,r)=>Nt(e,r,o),()=>ws(e)),Nt=(t,e,o,r)=>Us(r?o:bn(o,t,e),(l,h)=>K(Dn(t,e,h,l),L=>(o[h]=L,!0),()=>!1),()=>ws(t,e)),Dn=(t,e,o,r)=>s?K(g(g(x,t),o),l=>Xs(r)?l[Yt]?r:ws(t,e,o,r,l[bs]):Tt(r)==l[Ut]?r:ws(t,e,o,r,l[bs]),()=>ws(t,e,o,r)):os(Tt(r))?ws(t,e,o,r):r,_n=(t,e)=>Us(e?t:ao(t),(o,r)=>K(Fn(r,o),l=>(t[r]=l,!0),()=>!1),()=>tt()),Fn=(t,e)=>n?K(g(Ls,t),o=>Xs(e)?o[Yt]?e:tt(t,e,o[bs]):Tt(e)==o[Ut]?e:tt(t,e,o[bs]),()=>tt(t,e)):os(Tt(e))?tt(t,e):e,bn=(t,e,o)=>(K(g(k,e),([r,l])=>{M(r,(h,L)=>{Ct(t,L)||(t[L]=h)}),M(l,h=>{Ct(t,h)||ws(e,o,h)})}),t),ao=t=>(n&&(M(Ts,(e,o)=>{Ct(t,o)||(t[o]=e)}),M(Rs,e=>{Ct(t,e)||tt(e)})),t),An=t=>Qs(x,t,(e,o,r)=>{let l=V(),h=mt();Qs(I(x,o,V),r,(L,w,H)=>{_(L,w,H),K(H[bs],Hs=>_(l,w,Hs),()=>yt(h,w))}),_(k,o,[l,h])},(e,o)=>{_(x,o),_(k,o)}),Pn=t=>Qs(Ls,t,(e,o,r)=>{_(Ls,o,r),K(r[bs],l=>_(Ts,o,l),()=>yt(Rs,o))},(e,o)=>{_(Ls,o),_(Ts,o),Xt(Rs,o)}),zn=t=>ys(t)?zt():At(t),fo=([t,e])=>{(ys(t)?zt:At)(t),(ys(e)?jt:Pt)(e)},jn=t=>Qs(v,t,(e,o,r)=>Mt(o,r),(e,o)=>Yn(o)),Mt=(t,e)=>Qs(I(v,t,()=>(Kn(t,1),_(Cs,t,no()),_(Vs,t,V()),V())),e,(o,r,l)=>lt(t,o,r,l),(o,r)=>kn(t,o,r)),lt=(t,e,o,r,l)=>Qs(I(e,o,()=>(Jn(t,o,1),V())),r,(h,L,w)=>tn(t,o,h,L,w),(h,L)=>Bn(t,e,o,h,L,l)),tn=(t,e,o,r,l)=>{es(o,r)||$n(t,e,r,1);let h=g(o,r);l!==h&&(Zn(t,e,r,h,l),_(o,r,l))},Gn=(t,e,o,r,l)=>K(g(e,o),h=>tn(t,o,h,r,l),()=>lt(t,e,o,bn({[r]:l},t,o))),Wn=t=>ys(t)?jt():Pt(t),Un=t=>Qs($,t,(e,o,r)=>vt(o,r),(e,o)=>qn(o)),vt=(t,e)=>{es($,t)||On(t,1);let o=g($,t);e!==o&&(Qn(t,o,e),_($,t,e))},ho=(t,e)=>{let[o]=g(Cs,t),r;do r=o(e);while(es(g(v,t),r));return r},wt=t=>g(v,t)??Mt(t,{}),Yn=t=>Mt(t,{}),kn=(t,e,o)=>{let[,r]=g(Cs,t);r(o),lt(t,e,o,{},!0)},Bn=(t,e,o,r,l,h)=>{let L=g(g(k,t)?.[0],l);if(!os(L)&&!h)return tn(t,o,r,l,L);let w=H=>{Zn(t,o,H,g(r,H)),$n(t,o,H,-1),_(r,H)};os(L)?w(l):ks(r,w),m(r)&&(Jn(t,o,-1),m(_(e,o))&&(Kn(t,-1),_(v,t),_(Cs,t),_(Vs,t)))},qn=t=>{let e=g(Ts,t);if(!os(e))return vt(t,e);Qn(t,g($,t)),On(t,-1),_($,t)},Kn=(t,e)=>pt(T,t,e),Jn=(t,e,o)=>pt(I(S,t,V),e,o)&&_(J,t,I(J,t,()=>0)+o),$n=(t,e,o,r)=>{let l=g(Vs,t),h=g(l,o)??0;(h==0&&r==1||h==1&&r==-1)&&pt(I(A,t,V),o,r),_(l,o,h!=-r?h+r:void 0),pt(I(I(E,t,V),e,V),o,r)},Zn=(t,e,o,r,l)=>{I(I(I(f,t,V),e,V),o,()=>[r,0])[1]=l,d[3]?.(t,e,o,l)},On=(t,e)=>pt(u,t,e),Qn=(t,e,o)=>{I(y,t,()=>[e,0])[1]=o,d[4]?.(t,o)},ws=(t,e,o,r,l)=>(Qt(I(I(I(N,t,V),e,V),o,()=>[]),r),l),tt=(t,e,o)=>(Qt(I(R,t,()=>[]),e),o),Ht=(t,e,o)=>K(g(g(g(f,t),e),o),([r,l])=>[!0,r,l],()=>[!1,...Bt(Dt(t,e,o))]),Xn=t=>K(g(y,t),([e,o])=>[!0,e,o],()=>[!1,...Bt(_t(t))]),In=t=>!m(N)&&!m(Ss[t])?M(t?pn(N):N,(e,o)=>M(e,(r,l)=>M(r,(h,L)=>P(Ss[t],[o,l,L],h)))):0,se=t=>!m(R)&&!m(ps[t])?M(t?Bs(R):R,(e,o)=>P(ps[t],[o],e)):0,at=(t,e,o,r)=>{if(!m(t))return P(e,r,()=>hs(t)),ks(t,(l,h)=>P(o,[...r??[],l],h==1)),1},te=t=>{let e=Ft();e!=c&&P(rt[t],void 0,e);let o=m(is[t]),r=m(F[t])&&m(q[t])&&m(Q[t])&&m(Es[t])&&m(p[t])&&m(b[t])&&m(O[t])&&o&&m(z[t])&&m(cs[t]),l=m(X[t])&&m(gs[t])&&m(Z[t])&&m(C[t]);if(!r||!l){let h=t?[Bs(T),mn(A),Bs(J),mn(S),pn(E),pn(f)]:[T,A,J,S,E,f];if(!r){at(h[0],z[t],cs[t]),M(h[1],(w,H)=>at(w,p[t],b[t],[H])),M(h[2],(w,H)=>{w!=0&&P(O[t],[H],ce(H))});let L=mt();M(h[3],(w,H)=>{at(w,Q[t],Es[t],[H])&&!o&&(P(is[t],[H,null]),yt(L,H))}),o||M(h[5],(w,H)=>{if(!es(L,H)){let Hs=mt();M(w,Ps=>M(Ps,([Gt,Wt],ft)=>Wt!==Gt?yt(Hs,ft):Xt(Ps,ft))),M(Hs,Ps=>P(is[t],[H,Ps]))}}),M(h[4],(w,H)=>M(w,(Hs,Ps)=>at(Hs,F[t],q[t],[H,Ps])))}if(!l){let L;M(h[5],(w,H)=>{let Hs;M(w,(Ps,Gt)=>{let Wt;M(Ps,([ft,Se],Go)=>{Se!==ft&&(P(X[t],[H,Gt,Go],Se,ft,Ht),L=Hs=Wt=1)}),Wt&&P(gs[t],[H,Gt],Ht)}),Hs&&P(Z[t],[H],Ht)}),L&&P(C[t],void 0,Ht)}}},ne=t=>{let e=bt();e!=i&&P(Ns[t],void 0,e);let o=m(Ms[t])&&m(vs[t]),r=m(rs[t])&&m(ms[t]);if(!o||!r){let l=t?[Bs(u),Bs(y)]:[u,y];if(o||at(l[0],Ms[t],vs[t]),!r){let h;M(l[1],([L,w],H)=>{w!==L&&(P(rs[t],[H],w,L,Xn),h=1)}),h&&P(ms[t],void 0,Xn)}}},j=(t,...e)=>(ln(()=>t(...Ot(e,D))),ss),ee=(t,e,o,r,l)=>{let h=xt(t,e,...o);return as(()=>{let L=xt(t,e,...o);Nc(L,h)||(h=L,r(ss,t,e,...o,h))},is[l?1:0],[t,e],[us])},go=()=>[nn(),on()],nn=()=>kt(v),us=()=>Et(v),uo=t=>Cn(g(v,D(t))),oe=t=>Et(g(Vs,D(t))),ce=t=>Vn(g(v,D(t))),nt=t=>Et(g(v,D(t))),xt=(t,e,o,r=0,l)=>It(t)?xt(t.tableId,t.cellId,t.descending,t.offset,t.limit):Ot(qe(Mc(zc(g(v,D(t)),(h,L)=>[os(e)?L:g(h,D(e)),L]),([h],[L])=>Gc(h,L)*(o?-1:1)),r,os(l)?l:r+l),([,h])=>h),Lo=(t,e)=>hs(g(g(v,D(t)),D(e))),en=(t,e)=>Et(g(g(v,D(t)),D(e))),Dt=(t,e,o)=>g(g(g(v,D(t)),D(e)),D(o)),on=()=>hs($),cn=()=>Et($),_t=t=>g($,D(t)),Ft=()=>!m(v),ie=t=>es(v,D(t)),re=(t,e)=>es(g(Vs,D(t)),D(e)),le=(t,e)=>es(g(v,D(t)),D(e)),ae=(t,e,o)=>es(g(g(v,D(t)),D(e)),D(o)),bt=()=>!m($),fe=t=>es($,D(t)),To=()=>ct(v),Eo=()=>ct($),po=()=>ct([v,$]),So=()=>ct(x),Co=()=>ct(Ls),mo=()=>ct([x,Ls]),yo=t=>j(()=>{let e=dn(t)?t():t;ro(e)&&fo(e)}),At=t=>j(()=>lo(t)?jn(t):0),Ro=(t,e)=>j(o=>xn(e,o)?Mt(o,e):0,t),Vo=(t,e,o)=>j((r,l)=>Nt(r,l,o)?lt(r,wt(r),l,o):0,t,e),No=(t,e,o=!0)=>ln(()=>{let r;return Nt(t,r,e)&&(t=D(t),lt(t,wt(t),r=ho(t,o?1:0),e)),r}),Mo=(t,e,o)=>j((r,l)=>{if(Nt(r,l,o,1)){let h=wt(r);Ys(o,(L,w)=>Gn(r,h,l,w,L))}},t,e),vo=(t,e,o,r)=>j((l,h,L)=>K(Dn(l,h,L,dn(r)?r(Dt(l,h,L)):r),w=>Gn(l,wt(l),h,L,w)),t,e,o),Pt=t=>j(()=>_n(t)?Un(t):0),wo=t=>j(()=>_n(t,1)?Ys(t,(e,o)=>vt(o,e)):0),Ho=(t,e)=>j(o=>K(Fn(o,dn(e)?e(_t(o)):e),r=>vt(o,r)),t),xo=t=>j(()=>{Ys(t[0],(e,o)=>os(e)?de(o):Ys(e,(r,l)=>os(r)?Le(o,l):Ys(r,(h,L)=>Ke(ss,o,l,L,h)))),Ys(t[1],(e,o)=>Je(ss,o,e))}),he=t=>(Ln(()=>zn(Sn(t))),ss),Do=t=>(Ln(()=>Wn(Sn(t))),ss),_o=t=>j(()=>Ln(()=>{let[e,o]=Sn(t);zn(e),Wn(o)},()=>he(t))),ge=t=>j(()=>{if((s=Vt(t))&&(An(t),!m(v))){let e=nn();zt(),At(e)}}),ue=t=>j(()=>{if(n=io(t)){let e=on();rn(),jt(),n=!0,Pn(t),Pt(e)}}),Fo=(t,e)=>j(()=>{ge(t),ue(e)}),zt=()=>j(()=>jn({})),de=t=>j(e=>es(v,e)?Yn(e):0,t),Le=(t,e)=>j((o,r)=>K(g(v,o),l=>es(l,r)?kn(o,l,r):0),t,e),bo=(t,e,o,r)=>j((l,h,L)=>K(g(v,l),w=>K(g(w,h),H=>es(H,L)?Bn(l,w,h,H,L,r):0)),t,e,o),jt=()=>j(()=>Un({})),Ao=t=>j(e=>es($,e)?qn(e):0,t),Te=()=>j(()=>{An({}),s=!1}),rn=()=>j(()=>{Pn({}),n=!1}),Po=()=>j(()=>{Te(),rn()}),ln=(t,e)=>{if(a!=-1){Ee();let o=t();return pe(e),o}},Ee=()=>(a!=-1&&a++,a==1&&(d[0]?.(),P(B)),ss),zo=()=>[hs(f,(t,e)=>g(T,e)===-1?void 0:hs(t,(o,r)=>g(g(S,e),r)===-1?void 0:hs(o,([,l])=>l,l=>qt(l)),m,ys),m,ys),hs(y,([,t])=>t,t=>qt(t)),1],jo=()=>[!m(f),!m(y),kt(f,Ze,qt),kt(N),hs(y,Ze,qt),hs(R),hs(T),Cn(S),kt(E),hs(u)],pe=t=>(a>0&&(a--,a==0&&(a=1,In(1),m(f)||te(1),se(1),m(y)||ne(1),t?.(ss)&&(M(f,(e,o)=>M(e,(r,l)=>M(r,([h],L)=>Ke(ss,o,l,L,h)))),En(f),M(y,([e],o)=>Je(ss,o,e)),En(y)),P(ls[0],void 0),a=-1,In(0),m(f)||te(0),se(0),m(y)||ne(0),d[1]?.(),P(ls[1],void 0),d[2]?.(),a=0,c=Ft(),i=bt(),Rt([T,A,J,S,E,f,N,u,y,R],En))),ss),ss={getContent:go,getTables:nn,getTableIds:us,getTable:uo,getTableCellIds:oe,getRowCount:ce,getRowIds:nt,getSortedRowIds:xt,getRow:Lo,getCellIds:en,getCell:Dt,getValues:on,getValueIds:cn,getValue:_t,hasTables:Ft,hasTable:ie,hasTableCell:re,hasRow:le,hasCell:ae,hasValues:bt,hasValue:fe,getTablesJson:To,getValuesJson:Eo,getJson:po,getTablesSchemaJson:So,getValuesSchemaJson:Co,getSchemaJson:mo,hasTablesSchema:()=>s,hasValuesSchema:()=>n,setContent:yo,setTables:At,setTable:Ro,setRow:Vo,addRow:No,setPartialRow:Mo,setCell:vo,setValues:Pt,setPartialValues:wo,setValue:Ho,applyChanges:xo,setTablesJson:he,setValuesJson:Do,setJson:_o,setTablesSchema:ge,setValuesSchema:ue,setSchema:Fo,delTables:zt,delTable:de,delRow:Le,delCell:bo,delValues:jt,delValue:Ao,delTablesSchema:Te,delValuesSchema:rn,delSchema:Po,transaction:ln,startTransaction:Ee,getTransactionChanges:zo,getTransactionLog:jo,finishTransaction:pe,forEachTable:t=>M(v,(e,o)=>t(o,r=>M(e,(l,h)=>r(h,L=>ks(l,L))))),forEachTableCell:(t,e)=>ks(g(Vs,D(t)),e),forEachRow:(t,e)=>M(g(v,D(t)),(o,r)=>e(r,l=>ks(o,l))),forEachCell:(t,e,o)=>ks(g(g(v,D(t)),D(e)),o),forEachValue:t=>ks($,t),addSortedRowIdsListener:(t,e,o,r,l,h,L)=>It(t)?ee(t.tableId,t.cellId,[t.descending??!1,t.offset??0,t.limit],e,o):ee(t,e,[o,r,l],h,L),addStartTransactionListener:t=>as(t,B),addWillFinishTransactionListener:t=>as(t,ls[0]),addDidFinishTransactionListener:t=>as(t,ls[1]),callListener:t=>(fs(t),ss),delListener:t=>(st(t),ss),getListenerStats:()=>({hasTables:G(rt),tables:G(C),tableIds:G(z),hasTable:G(cs),table:G(Z),tableCellIds:G(p),hasTableCell:G(b,St),rowCount:G(O),rowIds:G(Q),sortedRowIds:G(is),hasRow:G(Es,St),row:G(gs,St),cellIds:G(F,St),hasCell:G(q,Tn),cell:G(X,Tn),invalidCell:G(Ss,Tn),hasValues:G(Ns),values:G(ms),valueIds:G(Ms),hasValue:G(vs),value:G(rs),invalidValue:G(ps),transaction:Nn(B)+G(ls)}),isMergeable:()=>!1,createStore:Mn,addListener:as,callListeners:P,setInternalListeners:(t,e,o,r,l)=>d=[t,e,o,r,l]};return Ys({[Os+Ye]:[0,rt,[],()=>[Ft()]],[Ye]:[0,C],[Lc]:[0,z],[Os+it]:[1,cs,[us],t=>[ie(...t)]],[it]:[1,Z,[us]],[it+ke]:[1,p,[us]],[Os+it+Kt]:[2,b,[us,oe],t=>[re(...t)]],[Tc]:[1,O,[us]],[Ec]:[1,Q,[us]],[Os+Jt]:[2,Es,[us,nt],t=>[le(...t)]],[Jt]:[2,gs,[us,nt]],[ke]:[2,F,[us,nt]],[Os+Kt]:[3,q,[us,nt,en],t=>[ae(...t)]],[Kt]:[3,X,[us,nt,en],t=>Bt(Dt(...t))],InvalidCell:[3,Ss],[Os+Be]:[0,Ns,[],()=>[bt()]],[Be]:[0,ms],[pc]:[0,Ms],[Os+$t]:[1,vs,[cn],t=>[fe(...t)]],[$t]:[1,rs,[cn],t=>Bt(_t(t[0]))],InvalidValue:[1,ps]},([t,e,o,r],l)=>{ss[dc+l+uc]=(...h)=>as(h[t],e[h[t+1]?1:0],t>0?qe(h,0,t):void 0,o,r)}),_c(ss)};var kc=["db","id","ids","no","ui","ws","add","api","bun","del","dom","for","get","has","hlc","log","map","row","set","sql","use","web","yjs"],co=(s=!1)=>{addEventListener("load",()=>{let n=xs("body > header > nav");if(n==null)return;let c=ts("div",null,{id:"search"}),i=ts("input",c,{type:"text",placeholder:(navigator.platform.startsWith("Mac")?"\u2318":"cmd-")+"K Search"}),a=ts("ol",c),d=ts("li",a,{},"No results found"),T=Mn(),A=Ue(T);A.setIndexDefinition("p","p",f=>{let u=[];return f("t").split(" ").forEach(y=>{for(let N=0;N<y.length;N++)u.push(y.slice(0,N+1))}),u},"t",void 0,(f,u,y)=>wn(u,y)-wn(f,y)),fetch("/pages.json").then(f=>f.json()).then(f=>{T.transaction(()=>{T.setContent(f),T.forEachRow("p",u=>{let{n:y,s:N}=T.getRow("p",u),R=new Set;vn(u,R,!0),vn(y,R),vn(N,R),T.setCell("p",u,"t",Array.from(R.values()).join(" "))})}),J()});let J=()=>{n.prepend(c);let f=()=>(i.value?Ks:ht)(a,"show");i.addEventListener("focus",f),i.addEventListener("input",()=>{f(),S()}),i.addEventListener("blur",()=>ht(a,"show")),E()},S=()=>{let f=i.value.toLowerCase().split(/[^a-z0-9]+/),u=new Map;f.forEach(R=>A.getSliceRowIds("p",R).slice(0,50).forEach(x=>u.set(x,(u.get(x)??0)+wn(T.getCell("p",x,"t"),R))));let y=Array.from(u.keys()).sort((R,x)=>u.get(x)-u.get(R)).slice(0,10),N=y.length==0?[d]:y.map((R,x)=>{let k=ts("li"),{n:Ls,s:Ts}=T.getRow("p",R);return eo(ts("b",k),Ls,f[0]),eo(ts("span",k),Ts,f[0]),k.title=Ts,k.addEventListener("mousedown",()=>s?location.href=R:gt(R)),x==0&&Ks(k,"hover"),k});a.replaceChildren(...N)},E=()=>addEventListener("keydown",f=>{if(js.activeElement==i){let u=zs(a,".hover");switch(f.code){case"Escape":return i.blur();case"ArrowDown":return Js(f),oo(u,u?.nextSibling??a.firstChild);case"ArrowUp":return Js(f),oo(u,u?.previousSibling??a.lastChild);case"Enter":return u?.dispatchEvent(new MouseEvent("mousedown"))}}else f.code=="KeyK"&&f.metaKey&&(i.focus(),Js(f))})})},eo=(s,n,c)=>{let i=n.toLowerCase().indexOf(c);s.innerHTML=i==-1?n:n.substring(0,i)+"<em>"+n.substring(i,i+c.length)+"</em>"+n.substring(i+c.length)},oo=(s,n)=>{s!=n&&(s&&ht(s,"hover"),n&&(Ks(n,"hover"),n.scrollIntoView({block:"nearest",inline:"nearest"})))},vn=(s,n,c)=>{let i=s.replaceAll(/[^a-zA-Z0-9]/g," ").split(/\s+/);c&&i.reverse(),i.forEach(a=>{[a,...a.replaceAll(/([a-z])([A-Z])/g,"$1 $2").split(" ")].forEach(d=>{let T=d.toLowerCase();(T.length>3||kc.includes(T))&&n.add(T)})})},wn=(s,n)=>{let c=s.length,i=s.indexOf(n);return i===-1?0:(c-i)/c};me();Me();co();addEventListener("load",()=>{an(),js.body.addEventListener("click",n=>{if(n.button!=0)return;let c=n.target;if(c.tagName=="SPAN"&&c.innerHTML==""&&c.parentElement?.tagName=="LI")return s(c.parentElement);for(;c.tagName!="A"&&c.parentElement!=null;)c=c.parentElement;let i=c.href;!n.metaKey&&!n.shiftKey&&i!=null&&i!=location.origin+"/"&&i.startsWith(location.origin+"/")&&!i.includes("#")&&(gt(i),Js(n))}),window.onpopstate=function(n){location.href.includes("#")||(gt(location.href,!1),Js(n))};let s=n=>Ve(n,"open",()=>{let c=zs(n,"a");c.href!=location.origin&&c.click()})});})();
