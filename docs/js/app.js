"use strict";(()=>{var Ce="v7.1.0-beta.0";var Go="TinyBase",zs=document,me=()=>{addEventListener("load",()=>{let s=xs("#version");s.innerText=Ce,s.style.width=s.scrollWidth+"px"})},Wo=null,ye=()=>Wo??=xs("body > main > nav"),Yo=null,Re=()=>Yo??=xs("body > main > article"),Js=s=>s.preventDefault(),xs=s=>zs.querySelector(s),Ps=(s,n)=>s.querySelector(n),ko=s=>zs.getElementById(s),ts=(s,n,c={},i)=>{let a=zs.createElement(s);return Object.entries(c).forEach(d=>a.setAttribute(...d)),i!=null&&(a.innerText=i),n!=null?n.appendChild(a):a},Ks=(s,n)=>s.classList.add(n);var ht=(s,n)=>s.classList.remove(n),Ve=(s,n,c)=>s.classList.toggle(n)?c():0,gt=(s,n=!0)=>{let c=ye();["?","#"].forEach(i=>{s.includes(i)&&(s=s.substring(0,s.indexOf(i)))}),fetch(`${s}nav.json`).then(i=>i.json()).then(i=>{ht(Ps(c,"li.current"),"current"),Me(i,Ps(c,"ul"))}),fetch(`${s}article.html`).then(i=>i.text()).then(i=>{let a=Re();a.innerHTML=i,a.scrollTo(0,0),an()}),n&&history.pushState(null,"",s)},an=()=>{let s=Ps(Re(),":scope iframe"),n=s?.parentElement;if(s==null||n==null)return;let c=n.insertBefore(ts("form",null,{action:"https://codepen.io/pen/define",method:"post",target:"_blank"}),s);n.insertBefore(ts("a",null,{id:"penEdit"},"Open this demo in CodePen"),s).onclick=()=>{c.childNodes.length==0?fetch("pen.json").then(i=>i.text()).then(i=>{ts("input",c,{type:"hidden",name:"data",value:i}),c.submit()}):c.submit()}},Me=({i:s,n,u:c,r:i,c:a,p:d,o:T,_:A},J)=>{let S=ye(),E=ko(s);if(E==null){E=ts("li",J,{id:s}),ts("span",E);let f=ts("a",E,{href:c});i?ts("code",f,{},n):f.innerText=n,d&&Ks(E,"parent")}if(T&&Ks(E,"open"),A!=null){let f=Ps(E,"ul")??ts("ul",E);A.forEach(u=>{Me(u,f)})}if(a){Ks(E,"current"),zs.title=`${n} | ${Go}`;let f=E.getBoundingClientRect(),u=S.getBoundingClientRect();f.top<u.top?S.scrollBy(0,f.top-u.top):f.bottom>u.bottom&&S.scrollBy(0,Math.min(f.bottom-u.bottom,f.top-u.top))}};var js="dark",fn="light",hn="auto",Ne=()=>{let s=matchMedia("(prefers-color-scheme: dark)"),n=()=>{let c=localStorage.getItem(js)??hn;xs("#dark")?.setAttribute("class",c),xs("html").className=c==js||c==hn&&s.matches?js:fn};s.addEventListener("change",n),window.addEventListener("storage",c=>{c.storageArea==localStorage&&c.key==js&&n()}),addEventListener("load",()=>{xs("#dark").addEventListener("click",()=>{let c=localStorage.getItem(js);localStorage.setItem(js,c==js?fn:c==fn?hn:js),n()}),n()}),n()};var _e=s=>typeof s;var Bo=_e(""),ve=s=>""+s,Uo=s=>(n,c,i)=>s(n)?i?.():c(n),Ws=s=>s===void 0,qo=s=>s===null,$s=Uo(Ws),Ko=s=>_e(s)==Bo,dt=s=>Array.isArray(s),_s=s=>s.length,Jo=(s,n)=>s.test(n),Fe=(s,n)=>s.every(n),$o=(s,n)=>_s(s)===_s(n)&&Fe(s,(c,i)=>n[i]===c),we=(s,n)=>Fe(s,(c,i)=>i==0||n(s[i-1],c)<=0),He=(s,n)=>s.sort(n),Zs=(s,n)=>s.forEach(n),Zo=(s,n)=>s.map(n),Oo=s=>_s(s)==0,Qo=(s,n,c)=>s.reduce(n,c),be=(s,...n)=>s.push(...n),Xo=s=>s.shift(),Ae=s=>n=>Qo(un(n),(c,i)=>c+s(i),0),Pe=s=>s?.size??0,ze=Ae(Pe),Io=Ae(ze),nt=(s,n)=>s?.has(n)??!1,Lt=s=>Ws(s)||Pe(s)==0,un=s=>[...s?.values()??[]],xe=s=>s.clear(),ds=(s,n)=>s?.forEach(n),et=(s,n)=>s?.delete(n),sc=Object,tc=sc.freeze,ns=s=>new Map(s),je=s=>[...s?.keys()??[]],k=(s,n)=>s?.get(n),ut=(s,n)=>ds(s,(c,i)=>n(i,c)),Y=(s,n,c)=>c===void 0?(et(s,n),s):s?.set(n,c),Ge=(s,n,c,i)=>(nt(s,n)?i?.(k(s,n)):Y(s,n,c()),k(s,n)),gn=(s,n,c,i,a=0)=>$s((c?Ge:k)(s,n[a],a>_s(n)-2?c:ns),d=>{if(a>_s(n)-2)return i?.(d)&&Y(s,n[a]),d;let T=gn(d,n,c,i,a+1);return Lt(d)&&Y(s,n[a]),T}),Gs=s=>new Set(dt(s)||Ws(s)?s:[s]),Ds=(s,n)=>s?.add(n),nc=(s,n,c,i,a)=>{let d=s.hasRow,T=ns(),A=ns(),J=ns(),S=ns(),E=ns(),f=ns(),u=()=>s,y=()=>je(T),M=C=>ut(A,C),R=C=>nt(A,C),x=C=>k(T,C),B=C=>k(A,C),Ls=(C,z)=>Y(A,C,z),Ts=(C,z,...os)=>{let Z=Ge(f,C,Gs);return Zs(os,p=>Ds(Z,p)&&z&&s.callListener(p)),os},Rs=(C,...z)=>$s(k(f,C),os=>{Zs(Oo(z)?un(os):z,Z=>{s.delListener(Z),et(os,Z)}),Lt(os)&&Y(f,C)}),Cs=(C,z)=>{Y(T,C,z),nt(A,C)||(Y(A,C,n()),Y(S,C,ns()),Y(E,C,ns()),a(J))},Vs=(C,z,os,Z,p)=>{Cs(C,z);let b=ns(),O=ns(),Q=k(S,C),cs=k(E,C),Es=F=>{let q=ps=>s.getCell(z,F,ps),X=k(Q,F),Ss=d(z,F)?c(Z(q,F)):void 0;if(X===Ss||dt(X)&&dt(Ss)&&$o(X,Ss)||Y(b,F,[X,Ss]),!Ws(p)){let ps=k(cs,F),Ms=d(z,F)?p(q,F):void 0;ps!=Ms&&Y(O,F,Ms)}},gs=F=>{os(()=>{ds(b,([,q],X)=>Y(Q,X,q)),ds(O,(q,X)=>Y(cs,X,q))},b,O,Q,cs,F),xe(b),xe(O)};ut(Q,Es),s.hasTable(z)&&Zs(s.getRowIds(z),F=>{nt(Q,F)||Es(F)}),gs(!0),Rs(C),Ts(C,0,s.addRowListener(z,null,(F,q,X)=>Es(X)),s.addTableListener(z,()=>gs()))},v=C=>{Y(T,C),Y(A,C),Y(S,C),Y(E,C),Rs(C),a(J)};return[u,y,M,R,x,B,Ls,Cs,Vs,v,C=>i(C,J),()=>ut(f,v),Ts,Rs]},De=(s,n)=>Ko(s)?c=>c(s):s??(()=>n??""),ec=(s,n)=>{let c=new WeakMap;return i=>(c.has(i)||c.set(i,s(i)),c.get(i))},oc=(s,n)=>(s??0)<(n??0)?-1:1,cc=/^\d+$/,ic=()=>{let s=[],n=0;return[c=>(c?Xo(s):null)??""+n++,c=>{Jo(cc,c)&&_s(s)<1e3&&be(s,c)}]},rc=(s,n=[""])=>{let c=[],i=(a,d)=>d==_s(n)?be(c,a):n[d]===null?ds(a,T=>i(T,d+1)):Zs([n[d],null],T=>i(k(a,T),d+1));return i(s,0),c},lc=s=>{let n,[c,i]=ic(),a=ns();return[(S,E,f,u=[],y=()=>[])=>{n??=s();let M=c(1);return Y(a,M,[S,E,f,u,y]),Ds(gn(E,f??[""],Gs),M),M},(S,E,...f)=>Zs(rc(S,E),u=>ds(u,y=>k(a,y)[0](n,...E??[],...f))),S=>$s(k(a,S),([,E,f])=>(gn(E,f??[""],void 0,u=>(et(u,S),Lt(u)?1:0)),Y(a,S),i(S),f)),S=>$s(k(a,S),([E,,f=[],u,y])=>{let M=(...R)=>{let x=_s(R);x==_s(f)?E(n,...R,...y(R)):qo(f[x])?Zs(u[x]?.(...R)??[],B=>M(...R,B)):M(...R,f[x])};M()})]},We=ec(s=>{let n=ns(),c=ns(),[i,a,d]=lc(()=>Z),[T,A,J,S,E,f,u,,y,M,R,x]=nc(s,ns,p=>Ws(p)?"":dt(p)?Zo(p,ve):ve(p),i,a),B=(p,b)=>nt(f(p),b),Ls=(p,b,O,Q,cs,Es=oc)=>{let gs=Ws(cs)?void 0:([F],[q])=>cs(F,q);return y(p,b,(F,q,X,Ss,ps,Ms)=>{let ms=0,Ns=Gs(),vs=Gs(),is=f(p);if(ds(q,([U,rs],ls)=>{let P=Gs(U),Is=Gs(rs);ds(P,as=>et(Is,as)?et(P,as):0),ds(P,as=>{Ds(Ns,as),$s(k(is,as),Vt=>{et(Vt,ls),Lt(Vt)&&(Y(is,as),ms=1)})}),ds(Is,as=>{Ds(Ns,as),nt(is,as)||(Y(is,as,Gs()),ms=1),Ds(k(is,as),ls),Ws(Q)||Ds(vs,as)})}),F(),Lt(ps)||(Ms?ut(is,U=>Ds(vs,U)):ut(X,U=>$s(k(Ss,U),rs=>Zs(dt(rs)?rs:[rs],ls=>Ds(vs,ls)))),ds(vs,U=>{let rs=(P,Is)=>Es(k(ps,P),k(ps,Is),U),ls=[...k(is,U)];we(ls,rs)||(Y(is,U,Gs(He(ls,rs))),Ds(Ns,U))})),(ms||Ms)&&!Ws(gs)){let U=[...is];we(U,gs)||(u(p,ns(He(U,gs))),ms=1)}ms&&a(n,[p]),ds(Ns,U=>a(c,[p,U]))},De(O),$s(Q,De)),Z},Ts=p=>J((b,O)=>p(b,Q=>Cs(b,Q,O))),Rs=(p,b)=>Cs(p,b,f(p)),Cs=(p,b,O)=>{let Q=E(p);ds(O,(cs,Es)=>b(Es,gs=>ds(cs,F=>gs(F,q=>s.forEachCell(Q,F,q)))))},Z={setIndexDefinition:Ls,delIndexDefinition:p=>(M(p),Z),getStore:T,getIndexIds:A,forEachIndex:Ts,forEachSlice:Rs,hasIndex:S,hasSlice:B,getTableId:E,getSliceIds:p=>je(f(p)),getSliceRowIds:(p,b)=>un(k(f(p),b)),addIndexIdsListener:R,addSliceIdsListener:(p,b)=>i(b,n,[p]),addSliceRowIdsListener:(p,b,O)=>i(O,c,[p,b]),delListener:p=>(d(p),Z),destroy:x,getListenerStats:()=>({sliceIds:ze(n),sliceRowIds:Io(c)})};return tc(Z)});var Xs=s=>typeof s;var ac=Xs(""),fc=Xs(!0),Ze=Xs(0),hc=Xs(Xs),Yt="type",Fs="default",kt="allowNull",gc="Listener",uc="add",Os="Has",sn="Ids",ct="Table",Ye=ct+"s",dc=ct+sn,Jt="Row",Lc=Jt+"Count",Tc=Jt+sn,Kt="Cell",ke=Kt+sn,$t="Value",Be=$t+"s",Ec=$t+sn,D=s=>""+s,Oe=s=>(n,c,i)=>s(n)?i?.():c(n),pc=isFinite,Sc=(s,n)=>s instanceof n,Zt=s=>s==null,hs=s=>s===void 0,it=s=>s===null,Cc=Oe(Zt),K=Oe(hs),Qe=s=>s==ac||s==fc,dn=s=>Xs(s)==hc,Xe=s=>Array.isArray(s),Ue=(s,n,c)=>s.slice(n,c),bs=s=>s.length,mc=(s,n)=>s.test(n),Ln=async(s,n,c)=>{try{return await s()}catch(i){n?.(i)}},yc=(s,n)=>s.includes(n),Rc=(s,n)=>s.every(n),Vc=(s,n)=>bs(s)===bs(n)&&Rc(s,(c,i)=>n[i]===c),Mc=(s,n)=>s.sort(n),Rt=(s,n)=>s.forEach(n),Ot=(s,n)=>s.map(n),Nc=(s,n,c)=>s.reduce(n,c),Qt=(s,...n)=>s.push(...n),vc=s=>s.shift(),Tt=s=>{if(it(s))return"null";let n=Xs(s);return Qe(n)||n==Ze&&pc(s)?n:void 0},qe=(s,n,c,i,a)=>hs(a)?s.delCell(n,c,i,!0):s.setCell(n,c,i,a),Ke=(s,n,c)=>hs(c)?s.delValue(n):s.setValue(n,c),Rn=s=>n=>Nc(wc(n),(c,i)=>c+s(i),0),Vn=s=>s?.size??0,Mn=Rn(Vn),St=Rn(Mn),Tn=Rn(St),es=(s,n)=>s?.has(n)??!1,m=s=>hs(s)||Vn(s)==0,wc=s=>[...s?.values()??[]],En=s=>s.clear(),N=(s,n)=>s?.forEach(n),Xt=(s,n)=>s?.delete(n),qs=Object,Je=s=>qs.getPrototypeOf(s),Hc=qs.isFrozen,Ie=qs.entries,It=s=>!Zt(s)&&Cc(Je(s),n=>n==qs.prototype||Zt(Je(n)),()=>!0),xc=qs.keys,Dc=qs.freeze,_c=(s=[])=>qs.fromEntries(s),Ct=(s,n)=>n in s,so=(s,n)=>(delete s[n],s),Fc=(s,n)=>Rt(Ie(s),([c,i])=>n(i,c)),bc=(s,n)=>Ot(Ie(s),([c,i])=>n(i,c)),ks=(s,n)=>_c(bc(s,(c,i)=>[i,n(c,i)])),Ac=s=>bs(xc(s)),ys=s=>It(s)&&Ac(s)==0,Ys=(s,n,c,i=0)=>Zt(s)||!It(s)||!i&&ys(s)||Hc(s)?(c?.(),!1):(Fc(s,(a,d)=>{n(a,d)||so(s,d)}),i?!0:!ys(s)),V=s=>new Map(s),Et=s=>[...s?.keys()??[]],g=(s,n)=>s?.get(n),Bs=(s,n)=>N(s,(c,i)=>n(i,c)),Pc=(s,n)=>Ot([...s?.entries()??[]],([c,i])=>n(i,c)),_=(s,n,c)=>c===void 0?(Xt(s,n),s):s?.set(n,c),I=(s,n,c,i)=>(es(s,n)?i?.(g(s,n)):_(s,n,c()),g(s,n)),Qs=(s,n,c,i=_)=>(ks(n,(a,d)=>c(s,d,a)),Bs(s,a=>Ct(n,a)?0:i(s,a)),s),fs=(s,n,c,i)=>{let a={};return N(s,(d,T)=>{if(!c?.(d,T)){let A=n?n(d,T):d;i?.(A)||(a[T]=A)}}),a},Cn=(s,n,c)=>fs(s,i=>fs(i,n,c),m,ys),Bt=(s,n,c)=>fs(s,i=>Cn(i,n,c),m,ys),Us=(s,n)=>{let c=V();return N(s,(i,a)=>c.set(a,n?.(i)??i)),c},mn=s=>Us(s,Us),pn=s=>Us(s,mn),yn=(s,n,c,i,a=0)=>K((c?I:g)(s,n[a],a>bs(n)-2?c:V),d=>{if(a>bs(n)-2)return i?.(d)&&_(s,n[a]),d;let T=yn(d,n,c,i,a+1);return m(d)&&_(s,n[a]),T}),zc=JSON.stringify,Sn=JSON.parse,ot=s=>zc(s,(n,c)=>Sc(c,Map)?qs.fromEntries([...c]):c),jc=(s,n)=>(s??0)<(n??0)?-1:1,Gc=/^\d+$/,to=()=>{let s=[],n=0;return[c=>(c?vc(s):null)??""+n++,c=>{mc(Gc,c)&&bs(s)<1e3&&Qt(s,c)}]},mt=s=>new Set(Xe(s)||hs(s)?s:[s]),yt=(s,n)=>s?.add(n),Wc=(s,n=[""])=>{let c=[],i=(a,d)=>d==bs(n)?Qt(c,a):n[d]===null?N(a,T=>i(T,d+1)):Rt([n[d],null],T=>i(g(a,T),d+1));return i(s,0),c},Yc=s=>{let n,[c,i]=to(),a=V();return[(S,E,f,u=[],y=()=>[])=>{n??=s();let M=c(1);return _(a,M,[S,E,f,u,y]),yt(yn(E,f??[""],mt),M),M},(S,E,...f)=>Rt(Wc(S,E),u=>N(u,y=>g(a,y)[0](n,...E??[],...f))),S=>K(g(a,S),([,E,f])=>(yn(E,f??[""],void 0,u=>(Xt(u,S),m(u)?1:0)),_(a,S),i(S),f)),S=>K(g(a,S),([E,,f=[],u,y])=>{let M=(...R)=>{let x=bs(R);x==bs(f)?E(n,...R,...y(R)):it(f[x])?Rt(u[x]?.(...R)??[],B=>M(...R,B)):M(...R,f[x])};M()})]},Ut=s=>[s,s],G=(s,n=Mn)=>n(s[0])+n(s[1]),W=()=>[V(),V()],$e=s=>[...s],qt=([s,n])=>s===n,pt=(s,n,c)=>_(s,n,g(s,n)==-c?void 0:c),Nn=()=>{let s,n,c=!1,i=!1,a=0,d=[],T=V(),A=V(),J=V(),S=V(),E=V(),f=V(),u=V(),y=V(),M=V(),R=V(),x=V(),B=V(),Ls=V(),Ts=V(),Rs=mt(),Cs=V(),Vs=V(),v=V(),$=V(),rt=W(),C=W(),z=W(),os=W(),Z=W(),p=W(),b=W(),O=W(),Q=W(),cs=W(),Es=W(),gs=W(),F=W(),q=W(),X=W(),Ss=W(),ps=W(),Ms=W(),ms=W(),Ns=W(),vs=W(),is=W(),U=V(),rs=W(),[ls,P,Is,as]=Yc(()=>ss),Vt=t=>Ys(t,e=>Ys(e,Hn)),co=t=>Ys(t,Hn),Hn=t=>{if(!Ys(t,(r,l)=>yc([Yt,Fs,kt],l)))return!1;let e=t[Yt];if(!Qe(e)&&e!=Ze)return!1;let o=t[Fs];return it(o)&&!t[kt]?!1:(!it(o)&&Tt(o)!=e&&so(t,Fs),!0)},io=Xe,ro=t=>Ys(t,xn,ws),xn=(t,e)=>(!s||es(x,e)||ws(e))&&Ys(t,(o,r)=>Mt(e,r,o),()=>ws(e)),Mt=(t,e,o,r)=>Ys(r?o:bn(o,t,e),(l,h)=>K(Dn(t,e,h,l),L=>(o[h]=L,!0),()=>!1),()=>ws(t,e)),Dn=(t,e,o,r)=>s?K(g(g(x,t),o),l=>it(r)?l[kt]?r:ws(t,e,o,r,l[Fs]):Tt(r)==l[Yt]?r:ws(t,e,o,r,l[Fs]),()=>ws(t,e,o,r)):hs(Tt(r))?ws(t,e,o,r):r,_n=(t,e)=>Ys(e?t:lo(t),(o,r)=>K(Fn(r,o),l=>(t[r]=l,!0),()=>!1),()=>st()),Fn=(t,e)=>n?K(g(Ls,t),o=>it(e)?o[kt]?e:st(t,e,o[Fs]):Tt(e)==o[Yt]?e:st(t,e,o[Fs]),()=>st(t,e)):hs(Tt(e))?st(t,e):e,bn=(t,e,o)=>(K(g(B,e),([r,l])=>{N(r,(h,L)=>{Ct(t,L)||(t[L]=h)}),N(l,h=>{Ct(t,h)||ws(e,o,h)})}),t),lo=t=>(n&&(N(Ts,(e,o)=>{Ct(t,o)||(t[o]=e)}),N(Rs,e=>{Ct(t,e)||st(e)})),t),An=t=>Qs(x,t,(e,o,r)=>{let l=V(),h=mt();Qs(I(x,o,V),r,(L,w,H)=>{_(L,w,H),K(H[Fs],Hs=>_(l,w,Hs),()=>yt(h,w))}),_(B,o,[l,h])},(e,o)=>{_(x,o),_(B,o)}),Pn=t=>Qs(Ls,t,(e,o,r)=>{_(Ls,o,r),K(r[Fs],l=>_(Ts,o,l),()=>yt(Rs,o))},(e,o)=>{_(Ls,o),_(Ts,o),Xt(Rs,o)}),zn=t=>ys(t)?zt():At(t),ao=([t,e])=>{(ys(t)?zt:At)(t),(ys(e)?jt:Pt)(e)},jn=t=>Qs(v,t,(e,o,r)=>Nt(o,r),(e,o)=>kn(o)),Nt=(t,e)=>Qs(I(v,t,()=>(Kn(t,1),_(Cs,t,to()),_(Vs,t,V()),V())),e,(o,r,l)=>lt(t,o,r,l),(o,r)=>Bn(t,o,r)),lt=(t,e,o,r,l)=>Qs(I(e,o,()=>(Jn(t,o,1),V())),r,(h,L,w)=>tn(t,o,h,L,w),(h,L)=>Un(t,e,o,h,L,l)),tn=(t,e,o,r,l)=>{es(o,r)||$n(t,e,r,1);let h=g(o,r);l!==h&&(Zn(t,e,r,h,l),_(o,r,l))},Gn=(t,e,o,r,l)=>K(g(e,o),h=>tn(t,o,h,r,l),()=>lt(t,e,o,bn({[r]:l},t,o))),Wn=t=>ys(t)?jt():Pt(t),Yn=t=>Qs($,t,(e,o,r)=>vt(o,r),(e,o)=>qn(o)),vt=(t,e)=>{es($,t)||On(t,1);let o=g($,t);e!==o&&(Qn(t,o,e),_($,t,e))},fo=(t,e)=>{let[o]=g(Cs,t),r;do r=o(e);while(es(g(v,t),r));return r},wt=t=>g(v,t)??Nt(t,{}),kn=t=>Nt(t,{}),Bn=(t,e,o)=>{let[,r]=g(Cs,t);r(o),lt(t,e,o,{},!0)},Un=(t,e,o,r,l,h)=>{let L=g(g(B,t)?.[0],l);if(!hs(L)&&!h)return tn(t,o,r,l,L);let w=H=>{Zn(t,o,H,g(r,H)),$n(t,o,H,-1),_(r,H)};hs(L)?w(l):Bs(r,w),m(r)&&(Jn(t,o,-1),m(_(e,o))&&(Kn(t,-1),_(v,t),_(Cs,t),_(Vs,t)))},qn=t=>{let e=g(Ts,t);if(!hs(e))return vt(t,e);Qn(t,g($,t)),On(t,-1),_($,t)},Kn=(t,e)=>pt(T,t,e),Jn=(t,e,o)=>pt(I(S,t,V),e,o)&&_(J,t,I(J,t,()=>0)+o),$n=(t,e,o,r)=>{let l=g(Vs,t),h=g(l,o)??0;(h==0&&r==1||h==1&&r==-1)&&pt(I(A,t,V),o,r),_(l,o,h!=-r?h+r:void 0),pt(I(I(E,t,V),e,V),o,r)},Zn=(t,e,o,r,l)=>{I(I(I(f,t,V),e,V),o,()=>[r,0])[1]=l,d[3]?.(t,e,o,l)},On=(t,e)=>pt(u,t,e),Qn=(t,e,o)=>{I(y,t,()=>[e,0])[1]=o,d[4]?.(t,o)},ws=(t,e,o,r,l)=>(Qt(I(I(I(M,t,V),e,V),o,()=>[]),r),l),st=(t,e,o)=>(Qt(I(R,t,()=>[]),e),o),Ht=(t,e,o)=>K(g(g(g(f,t),e),o),([r,l])=>[!0,r,l],()=>[!1,...Ut(Dt(t,e,o))]),Xn=t=>K(g(y,t),([e,o])=>[!0,e,o],()=>[!1,...Ut(_t(t))]),In=t=>!m(M)&&!m(Ss[t])?N(t?pn(M):M,(e,o)=>N(e,(r,l)=>N(r,(h,L)=>P(Ss[t],[o,l,L],h)))):0,se=t=>!m(R)&&!m(ps[t])?N(t?Us(R):R,(e,o)=>P(ps[t],[o],e)):0,at=(t,e,o,r)=>{if(!m(t))return P(e,r,()=>fs(t)),Bs(t,(l,h)=>P(o,[...r??[],l],h==1)),1},te=t=>{let e=Ft();e!=c&&P(rt[t],void 0,e);let o=m(cs[t]),r=m(F[t])&&m(q[t])&&m(Q[t])&&m(Es[t])&&m(p[t])&&m(b[t])&&m(O[t])&&o&&m(z[t])&&m(os[t]),l=m(X[t])&&m(gs[t])&&m(Z[t])&&m(C[t]);if(!r||!l){let h=t?[Us(T),mn(A),Us(J),mn(S),pn(E),pn(f)]:[T,A,J,S,E,f];if(!r){at(h[0],z[t],os[t]),N(h[1],(w,H)=>at(w,p[t],b[t],[H])),N(h[2],(w,H)=>{w!=0&&P(O[t],[H],ce(H))});let L=mt();N(h[3],(w,H)=>{at(w,Q[t],Es[t],[H])&&!o&&(P(cs[t],[H,null]),yt(L,H))}),o||N(h[5],(w,H)=>{if(!es(L,H)){let Hs=mt();N(w,As=>N(As,([Gt,Wt],ft)=>Wt!==Gt?yt(Hs,ft):Xt(As,ft))),N(Hs,As=>P(cs[t],[H,As]))}}),N(h[4],(w,H)=>N(w,(Hs,As)=>at(Hs,F[t],q[t],[H,As])))}if(!l){let L;N(h[5],(w,H)=>{let Hs;N(w,(As,Gt)=>{let Wt;N(As,([ft,Se],jo)=>{Se!==ft&&(P(X[t],[H,Gt,jo],Se,ft,Ht),L=Hs=Wt=1)}),Wt&&P(gs[t],[H,Gt],Ht)}),Hs&&P(Z[t],[H],Ht)}),L&&P(C[t],void 0,Ht)}}},ne=t=>{let e=bt();e!=i&&P(Ms[t],void 0,e);let o=m(Ns[t])&&m(vs[t]),r=m(is[t])&&m(ms[t]);if(!o||!r){let l=t?[Us(u),Us(y)]:[u,y];if(o||at(l[0],Ns[t],vs[t]),!r){let h;N(l[1],([L,w],H)=>{w!==L&&(P(is[t],[H],w,L,Xn),h=1)}),h&&P(ms[t],void 0,Xn)}}},j=(t,...e)=>(ln(()=>t(...Ot(e,D))),ss),ee=(t,e,o,r,l)=>{let h=xt(t,e,...o);return ls(()=>{let L=xt(t,e,...o);Vc(L,h)||(h=L,r(ss,t,e,...o,h))},cs[l?1:0],[t,e],[us])},ho=()=>[nn(),on()],nn=()=>Bt(v),us=()=>Et(v),go=t=>Cn(g(v,D(t))),oe=t=>Et(g(Vs,D(t))),ce=t=>Vn(g(v,D(t))),tt=t=>Et(g(v,D(t))),xt=(t,e,o,r=0,l)=>It(t)?xt(t.tableId,t.cellId,t.descending,t.offset,t.limit):Ot(Ue(Mc(Pc(g(v,D(t)),(h,L)=>[hs(e)?L:g(h,D(e)),L]),([h],[L])=>jc(h,L)*(o?-1:1)),r,hs(l)?l:r+l),([,h])=>h),uo=(t,e)=>fs(g(g(v,D(t)),D(e))),en=(t,e)=>Et(g(g(v,D(t)),D(e))),Dt=(t,e,o)=>g(g(g(v,D(t)),D(e)),D(o)),on=()=>fs($),cn=()=>Et($),_t=t=>g($,D(t)),Ft=()=>!m(v),ie=t=>es(v,D(t)),re=(t,e)=>es(g(Vs,D(t)),D(e)),le=(t,e)=>es(g(v,D(t)),D(e)),ae=(t,e,o)=>es(g(g(v,D(t)),D(e)),D(o)),bt=()=>!m($),fe=t=>es($,D(t)),Lo=()=>ot(v),To=()=>ot($),Eo=()=>ot([v,$]),po=()=>ot(x),So=()=>ot(Ls),Co=()=>ot([x,Ls]),mo=t=>j(()=>{let e=dn(t)?t():t;io(e)&&ao(e)}),At=t=>j(()=>ro(t)?jn(t):0),yo=(t,e)=>j(o=>xn(e,o)?Nt(o,e):0,t),Ro=(t,e,o)=>j((r,l)=>Mt(r,l,o)?lt(r,wt(r),l,o):0,t,e),Vo=(t,e,o=!0)=>ln(()=>{let r;return Mt(t,r,e)&&(t=D(t),lt(t,wt(t),r=fo(t,o?1:0),e)),r}),Mo=(t,e,o)=>j((r,l)=>{if(Mt(r,l,o,1)){let h=wt(r);ks(o,(L,w)=>Gn(r,h,l,w,L))}},t,e),No=(t,e,o,r)=>j((l,h,L)=>K(Dn(l,h,L,dn(r)?r(Dt(l,h,L)):r),w=>Gn(l,wt(l),h,L,w)),t,e,o),Pt=t=>j(()=>_n(t)?Yn(t):0),vo=t=>j(()=>_n(t,1)?ks(t,(e,o)=>vt(o,e)):0),wo=(t,e)=>j(o=>K(Fn(o,dn(e)?e(_t(o)):e),r=>vt(o,r)),t),Ho=t=>j(()=>{ks(t[0],(e,o)=>hs(e)?de(o):ks(e,(r,l)=>hs(r)?Le(o,l):ks(r,(h,L)=>qe(ss,o,l,L,h)))),ks(t[1],(e,o)=>Ke(ss,o,e))}),he=t=>(Ln(()=>zn(Sn(t))),ss),xo=t=>(Ln(()=>Wn(Sn(t))),ss),Do=t=>j(()=>Ln(()=>{let[e,o]=Sn(t);zn(e),Wn(o)},()=>he(t))),ge=t=>j(()=>{if((s=Vt(t))&&(An(t),!m(v))){let e=nn();zt(),At(e)}}),ue=t=>j(()=>{if(n=co(t)){let e=on();rn(),jt(),n=!0,Pn(t),Pt(e)}}),_o=(t,e)=>j(()=>{ge(t),ue(e)}),zt=()=>j(()=>jn({})),de=t=>j(e=>es(v,e)?kn(e):0,t),Le=(t,e)=>j((o,r)=>K(g(v,o),l=>es(l,r)?Bn(o,l,r):0),t,e),Fo=(t,e,o,r)=>j((l,h,L)=>K(g(v,l),w=>K(g(w,h),H=>es(H,L)?Un(l,w,h,H,L,r):0)),t,e,o),jt=()=>j(()=>Yn({})),bo=t=>j(e=>es($,e)?qn(e):0,t),Te=()=>j(()=>{An({}),s=!1}),rn=()=>j(()=>{Pn({}),n=!1}),Ao=()=>j(()=>{Te(),rn()}),ln=(t,e)=>{if(a!=-1){Ee();let o=t();return pe(e),o}},Ee=()=>(a!=-1&&a++,a==1&&(d[0]?.(),P(U)),ss),Po=()=>[fs(f,(t,e)=>g(T,e)===-1?void 0:fs(t,(o,r)=>g(g(S,e),r)===-1?void 0:fs(o,([,l])=>l,l=>qt(l)),m,ys),m,ys),fs(y,([,t])=>t,t=>qt(t)),1],zo=()=>[!m(f),!m(y),Bt(f,$e,qt),Bt(M),fs(y,$e,qt),fs(R),fs(T),Cn(S),Bt(E),fs(u)],pe=t=>(a>0&&(a--,a==0&&(a=1,In(1),m(f)||te(1),se(1),m(y)||ne(1),t?.(ss)&&(N(f,(e,o)=>N(e,(r,l)=>N(r,([h],L)=>qe(ss,o,l,L,h)))),En(f),N(y,([e],o)=>Ke(ss,o,e)),En(y)),P(rs[0],void 0),a=-1,In(0),m(f)||te(0),se(0),m(y)||ne(0),d[1]?.(),P(rs[1],void 0),d[2]?.(),a=0,c=Ft(),i=bt(),Rt([T,A,J,S,E,f,M,u,y,R],En))),ss),ss={getContent:ho,getTables:nn,getTableIds:us,getTable:go,getTableCellIds:oe,getRowCount:ce,getRowIds:tt,getSortedRowIds:xt,getRow:uo,getCellIds:en,getCell:Dt,getValues:on,getValueIds:cn,getValue:_t,hasTables:Ft,hasTable:ie,hasTableCell:re,hasRow:le,hasCell:ae,hasValues:bt,hasValue:fe,getTablesJson:Lo,getValuesJson:To,getJson:Eo,getTablesSchemaJson:po,getValuesSchemaJson:So,getSchemaJson:Co,hasTablesSchema:()=>s,hasValuesSchema:()=>n,setContent:mo,setTables:At,setTable:yo,setRow:Ro,addRow:Vo,setPartialRow:Mo,setCell:No,setValues:Pt,setPartialValues:vo,setValue:wo,applyChanges:Ho,setTablesJson:he,setValuesJson:xo,setJson:Do,setTablesSchema:ge,setValuesSchema:ue,setSchema:_o,delTables:zt,delTable:de,delRow:Le,delCell:Fo,delValues:jt,delValue:bo,delTablesSchema:Te,delValuesSchema:rn,delSchema:Ao,transaction:ln,startTransaction:Ee,getTransactionChanges:Po,getTransactionLog:zo,finishTransaction:pe,forEachTable:t=>N(v,(e,o)=>t(o,r=>N(e,(l,h)=>r(h,L=>Bs(l,L))))),forEachTableCell:(t,e)=>Bs(g(Vs,D(t)),e),forEachRow:(t,e)=>N(g(v,D(t)),(o,r)=>e(r,l=>Bs(o,l))),forEachCell:(t,e,o)=>Bs(g(g(v,D(t)),D(e)),o),forEachValue:t=>Bs($,t),addSortedRowIdsListener:(t,e,o,r,l,h,L)=>It(t)?ee(t.tableId,t.cellId,[t.descending??!1,t.offset??0,t.limit],e,o):ee(t,e,[o,r,l],h,L),addStartTransactionListener:t=>ls(t,U),addWillFinishTransactionListener:t=>ls(t,rs[0]),addDidFinishTransactionListener:t=>ls(t,rs[1]),callListener:t=>(as(t),ss),delListener:t=>(Is(t),ss),getListenerStats:()=>({hasTables:G(rt),tables:G(C),tableIds:G(z),hasTable:G(os),table:G(Z),tableCellIds:G(p),hasTableCell:G(b,St),rowCount:G(O),rowIds:G(Q),sortedRowIds:G(cs),hasRow:G(Es,St),row:G(gs,St),cellIds:G(F,St),hasCell:G(q,Tn),cell:G(X,Tn),invalidCell:G(Ss,Tn),hasValues:G(Ms),values:G(ms),valueIds:G(Ns),hasValue:G(vs),value:G(is),invalidValue:G(ps),transaction:Mn(U)+G(rs)}),isMergeable:()=>!1,createStore:Nn,addListener:ls,callListeners:P,setInternalListeners:(t,e,o,r,l)=>d=[t,e,o,r,l]};return ks({[Os+Ye]:[0,rt,[],()=>[Ft()]],[Ye]:[0,C],[dc]:[0,z],[Os+ct]:[1,os,[us],t=>[ie(...t)]],[ct]:[1,Z,[us]],[ct+ke]:[1,p,[us]],[Os+ct+Kt]:[2,b,[us,oe],t=>[re(...t)]],[Lc]:[1,O,[us]],[Tc]:[1,Q,[us]],[Os+Jt]:[2,Es,[us,tt],t=>[le(...t)]],[Jt]:[2,gs,[us,tt]],[ke]:[2,F,[us,tt]],[Os+Kt]:[3,q,[us,tt,en],t=>[ae(...t)]],[Kt]:[3,X,[us,tt,en],t=>Ut(Dt(...t))],InvalidCell:[3,Ss],[Os+Be]:[0,Ms,[],()=>[bt()]],[Be]:[0,ms],[Ec]:[0,Ns],[Os+$t]:[1,vs,[cn],t=>[fe(...t)]],[$t]:[1,is,[cn],t=>Ut(_t(t[0]))],InvalidValue:[1,ps]},([t,e,o,r],l)=>{ss[uc+l+gc]=(...h)=>ls(h[t],e[h[t+1]?1:0],t>0?Ue(h,0,t):void 0,o,r)}),Dc(ss)};var kc=["db","id","ids","no","ui","ws","add","api","bun","del","dom","for","get","has","hlc","log","map","row","set","sql","use","web","yjs"],oo=(s=!1)=>{addEventListener("load",()=>{let n=xs("body > header > nav");if(n==null)return;let c=ts("div",null,{id:"search"}),i=ts("input",c,{type:"text",placeholder:(navigator.platform.startsWith("Mac")?"\u2318":"cmd-")+"K Search"}),a=ts("ol",c),d=ts("li",a,{},"No results found"),T=Nn(),A=We(T);A.setIndexDefinition("p","p",f=>{let u=[];return f("t").split(" ").forEach(y=>{for(let M=0;M<y.length;M++)u.push(y.slice(0,M+1))}),u},"t",void 0,(f,u,y)=>wn(u,y)-wn(f,y)),fetch("/pages.json").then(f=>f.json()).then(f=>{T.transaction(()=>{T.setContent(f),T.forEachRow("p",u=>{let{n:y,s:M}=T.getRow("p",u),R=new Set;vn(u,R,!0),vn(y,R),vn(M,R),T.setCell("p",u,"t",Array.from(R.values()).join(" "))})}),J()});let J=()=>{n.prepend(c);let f=()=>(i.value?Ks:ht)(a,"show");i.addEventListener("focus",f),i.addEventListener("input",()=>{f(),S()}),i.addEventListener("blur",()=>ht(a,"show")),E()},S=()=>{let f=i.value.toLowerCase().split(/[^a-z0-9]+/),u=new Map;f.forEach(R=>A.getSliceRowIds("p",R).slice(0,50).forEach(x=>u.set(x,(u.get(x)??0)+wn(T.getCell("p",x,"t"),R))));let y=Array.from(u.keys()).sort((R,x)=>u.get(x)-u.get(R)).slice(0,10),M=y.length==0?[d]:y.map((R,x)=>{let B=ts("li"),{n:Ls,s:Ts}=T.getRow("p",R);return no(ts("b",B),Ls,f[0]),no(ts("span",B),Ts,f[0]),B.title=Ts,B.addEventListener("mousedown",()=>s?location.href=R:gt(R)),x==0&&Ks(B,"hover"),B});a.replaceChildren(...M)},E=()=>addEventListener("keydown",f=>{if(zs.activeElement==i){let u=Ps(a,".hover");switch(f.code){case"Escape":return i.blur();case"ArrowDown":return Js(f),eo(u,u?.nextSibling??a.firstChild);case"ArrowUp":return Js(f),eo(u,u?.previousSibling??a.lastChild);case"Enter":return u?.dispatchEvent(new MouseEvent("mousedown"))}}else f.code=="KeyK"&&f.metaKey&&(i.focus(),Js(f))})})},no=(s,n,c)=>{let i=n.toLowerCase().indexOf(c);s.innerHTML=i==-1?n:n.substring(0,i)+"<em>"+n.substring(i,i+c.length)+"</em>"+n.substring(i+c.length)},eo=(s,n)=>{s!=n&&(s&&ht(s,"hover"),n&&(Ks(n,"hover"),n.scrollIntoView({block:"nearest",inline:"nearest"})))},vn=(s,n,c)=>{let i=s.replaceAll(/[^a-zA-Z0-9]/g," ").split(/\s+/);c&&i.reverse(),i.forEach(a=>{[a,...a.replaceAll(/([a-z])([A-Z])/g,"$1 $2").split(" ")].forEach(d=>{let T=d.toLowerCase();(T.length>3||kc.includes(T))&&n.add(T)})})},wn=(s,n)=>{let c=s.length,i=s.indexOf(n);return i===-1?0:(c-i)/c};me();Ne();oo();addEventListener("load",()=>{an(),zs.body.addEventListener("click",n=>{if(n.button!=0)return;let c=n.target;if(c.tagName=="SPAN"&&c.innerHTML==""&&c.parentElement?.tagName=="LI")return s(c.parentElement);for(;c.tagName!="A"&&c.parentElement!=null;)c=c.parentElement;let i=c.href;!n.metaKey&&!n.shiftKey&&i!=null&&i!=location.origin+"/"&&i.startsWith(location.origin+"/")&&!i.includes("#")&&(gt(i),Js(n))}),window.onpopstate=function(n){location.href.includes("#")||(gt(location.href,!1),Js(n))};let s=n=>Ve(n,"open",()=>{let c=Ps(n,"a");c.href!=location.origin&&c.click()})});})();
