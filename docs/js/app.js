"use strict";(()=>{var f=document,E=t=>f.querySelector(t),g=(t,n)=>t.querySelector(n),b=t=>f.getElementById(t),d=(t,n,l={},r)=>{let s=f.createElement(t);return Object.entries(l).forEach(h=>s.setAttribute(...h)),r!=null&&(s.innerText=r),n!=null?n.appendChild(s):s},H=(t,n,l)=>{var s;let r=((s=t.className)!=null?s:"").split(" ");l(r,r.indexOf(n)),t.className=r.join(" ")},L=(t,n)=>H(t,n,(l,r)=>r==-1?l.push(n):null),k=(t,n)=>H(t,n,(l,r)=>r!=-1?l.splice(r,1):null),x=(t,n,l)=>H(t,n,(r,s)=>s!=-1?r.splice(s,1):r.push(n)&&l()),u="dark",T="light",M="auto",N=()=>I(),I=()=>{let t=matchMedia("(prefers-color-scheme: dark)"),n=()=>{var r,s;let l=(r=localStorage.getItem(u))!=null?r:M;(s=E("#dark"))==null||s.setAttribute("class",l),E("html").className=l==u||l==M&&t.matches?u:T};t.addEventListener("change",n),window.addEventListener("storage",l=>{l.storageArea==localStorage&&l.key==u&&n()}),addEventListener("load",()=>{E("#dark").addEventListener("click",()=>{let l=localStorage.getItem(u);localStorage.setItem(u,l==u?T:l==T?M:u),n()}),n()}),n()};N();addEventListener("load",()=>{let t=E("body > main > nav"),n=E("body > main > article");if(t==null||n==null)return;let l=()=>{let o=g(n,":scope iframe"),e=o==null?void 0:o.parentElement;if(o==null||e==null)return;let a=e.insertBefore(d("form",null,{action:"https://codepen.io/pen/define",method:"post",target:"_blank"}),o);e.insertBefore(d("a",null,{id:"penEdit"},"CodePen"),o).onclick=()=>{a.childNodes.length==0?fetch("pen.json").then(m=>m.text()).then(m=>{d("input",a,{type:"hidden",name:"data",value:m}),a.submit()}):a.submit()}};l(),f.body.addEventListener("click",o=>{var m;if(o.button!=0)return;let e=o.target;if(e.tagName=="SPAN"&&e.innerHTML==""&&((m=e.parentElement)==null?void 0:m.tagName)=="LI")return r(e.parentElement);for(;e.tagName!="A"&&e.parentElement!=null;)e=e.parentElement;let a=e.href;!o.metaKey&&!o.shiftKey&&a!=null&&a!=location.origin+"/"&&a.startsWith(location.origin+"/")&&!a.includes("#")&&(s(a),o.preventDefault(),history.pushState(null,"",a+"/"))}),window.onpopstate=function(o){location.href.includes("#")||(s(location.href),o.preventDefault())};let r=o=>x(o,"open",()=>{let e=g(o,"a");e.href!=location.origin+"/"&&e.click()}),s=o=>{fetch(`${o}/nav.json`).then(e=>e.json()).then(e=>{k(g(t,"li.current"),"current"),h(e,g(t,"ul"))}),fetch(`${o}/article.html`).then(e=>e.text()).then(e=>C(e))},h=({i:o,n:e,u:a,r:m,c:A,p:B,o:S,_:y},q)=>{var v;let i=b(o);if(i==null){i=d("li",q,{id:o}),d("span",i);let c=d("a",i,{href:a});m?d("code",c,{},e):c.innerText=e,B&&L(i,"parent")}if(S&&L(i,"open"),y!=null){let c=(v=g(i,"ul"))!=null?v:d("ul",i);y.forEach(p=>{h(p,c)})}if(A){L(i,"current"),f.title=`${e} | TinyBase`;let c=i.getBoundingClientRect(),p=t.getBoundingClientRect();c.top<p.top?t.scrollBy(0,c.top-p.top):c.bottom>p.bottom&&t.scrollBy(0,Math.min(c.bottom-p.bottom,c.top-p.top))}},C=o=>{n.innerHTML=o,n.scrollTo(0,0),l()}});})();
