<nav><ul><li><a href="/">TinyBase</a></li><li><a href="/demos/">Demos</a></li><li><a href="/demos/ui-components/">UI Components</a></li><li><a href="/demos/ui-components/sortedtableinhtmltable/">&lt;SortedTableInHtmlTable /&gt;</a></li></ul></nav><section class="s1" id="/demos/ui-components/sortedtableinhtmltable/" data-id="&lt;STIHT"><h1>&lt;SortedTableInHtmlTable /&gt;</h1><iframe srcdoc="&lt;html&gt;&lt;head&gt;&lt;script type=&quot;importmap&quot;&gt;{
    &quot;imports&quot;: {
      &quot;tinybase&quot;: &quot;https://esm.sh/tinybase@6.0.0-beta.1&quot;,
      &quot;tinybase/ui-react&quot;: &quot;https://esm.sh/tinybase@6.0.0-beta.1/ui-react&quot;,
      &quot;tinybase/ui-react-dom&quot;: &quot;https://esm.sh/tinybase@6.0.0-beta.1/ui-react-dom&quot;,
      &quot;react&quot;: &quot;https://esm.sh/react@19.0.0&quot;,
      &quot;react/jsx-runtime&quot;: &quot;https://esm.sh/react@19.0.0/jsx-runtime&quot;,
      &quot;react-dom/client&quot;: &quot;https://esm.sh/react-dom@19.0.0/client&quot;
    }
  }&lt;/script&gt;&lt;style&gt;#loading{animation:spin 1s infinite linear;height:2rem;margin:40vh auto;width:2rem}#loading::before{content:url(&#x27;data:image/svg+xml,&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; height=&quot;2rem&quot; viewBox=&quot;0 0 100 100&quot;&gt;&lt;path d=&quot;M50 10A40 40 0 1 1 10 50&quot; stroke=&quot;black&quot; fill=&quot;none&quot; stroke-width=&quot;4&quot; /&gt;&lt;/svg&gt;&#x27;)}@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}@font-face{font-family:Inter;src:url(https://tinybase.org/fonts/inter.woff2) format(&#x27;woff2&#x27;)}*{box-sizing:border-box}body{align-items:flex-start;color:#333;display:flex;font-family:Inter,sans-serif;font-size:.8rem;min-height:100vh;justify-content:space-around;letter-spacing:-.04rem;line-height:1.5rem;margin:0;user-select:none}table{background:#fff;border-collapse:collapse;box-shadow:0 0 1rem #0004;font-size:inherit;line-height:inherit;margin:2rem;table-layout:fixed}table td,table th{overflow:hidden;padding:.25rem .5rem;white-space:nowrap;border-width:1px 0;border-style:solid;border-color:#eee;text-align:left}table thead th{border-bottom-color:#ccc}table button,table input{border:1px solid #ccc}a{color:inherit}th.sorted{background:#ddd}thead th{width:5rem}thead th:nth-of-type(2){width:28rem}table caption{caption-side:top;text-align:left;margin-bottom:1rem}table caption button{margin-right:.5rem}&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;script type=&quot;module&quot;&gt;import{Fragment as V,jsx as e}from&quot;react/jsx-runtime&quot;;import{createStore as d}from&quot;tinybase&quot;;import{Provider as m,useCell as p,useCreateStore as u}from&quot;tinybase/ui-react&quot;;import{SortedTableInHtmlTable as f}from&quot;tinybase/ui-react-dom&quot;;import{useMemo as h,useState as g}from&quot;react&quot;;import{createRoot as w}from&quot;react-dom/client&quot;;const y=()=&gt;{const t=u(d),[s,o]=g(!0);return h(async()=&gt;{await T(t,&quot;movies&quot;),o(!1)},[]),e(m,{store:t,children:s?e(C,{}):e(b,{})})};addEventListener(&quot;load&quot;,()=&gt;w(document.body).render(e(y,{})));const N=t=&gt;{t.startTransaction().setValue(&quot;username&quot;,&quot;John Appleseed&quot;).setValue(&quot;email address&quot;,&quot;john.appleseed@example.com&quot;).setValue(&quot;dark mode&quot;,!0).setValue(&quot;font size&quot;,14).finishTransaction()},C=()=&gt;e(&quot;div&quot;,{id:&quot;loading&quot;}),b=()=&gt;e(V,{children:e(f,{tableId:&quot;movies&quot;,customCells:I,cellId:&quot;rating&quot;,descending:!0,limit:7,sortOnClick:!0,paginator:!0})}),v=/^[\d\.]+$/,T=async(t,s)=&gt;{t.startTransaction();const o=(await(await fetch(`https://tinybase.org/assets/${s}.tsv`)).text()).split(`
`),r=o.shift().split(&quot;	&quot;);o.forEach(n=&gt;{const i=n.split(&quot;	&quot;);if(i.length==r.length){const l=i.shift();i.forEach((a,c)=&gt;{a!=&quot;&quot;&amp;&amp;(v.test(a)&amp;&amp;(a=parseFloat(a)),t.setCell(s,l,r[c+1],a))})}}),t.finishTransaction()},P=({tableId:t,rowId:s,cellId:o,store:r})=&gt;{const n=p(t,s,o,r);return e(&quot;a&quot;,{href:&quot;https://www.merriam-webster.com/dictionary/&quot;+n,target:&quot;_blank&quot;,children:n})},I={name:&quot;Name&quot;,year:&quot;Year&quot;,rating:&quot;Rating&quot;};&lt;/script&gt;&lt;/html&gt;"></iframe><p>In this demo, we showcase the <a href="/api/ui-react-dom/functions/store-components/sortedtableinhtmltable/"><code>SortedTableInHtmlTable</code></a> component, a more complex and interactive way to render a TinyBase <a href="/api/store/type-aliases/store/table/"><code>Table</code></a>.</p><p>Rather than building the whole demo and boilerplate from scratch, we&#x27;re making changes to the <a href="/demos/ui-components/tableinhtmltable/">&lt;TableInHtmlTable /&gt;</a> demo to support this new component.</p><h3 id="set-up">Set Up</h3><p>We switch out the <a href="/api/ui-react-dom/functions/store-components/tableinhtmltable/"><code>TableInHtmlTable</code></a> component and import the <a href="/api/ui-react-dom/functions/store-components/sortedtableinhtmltable/"><code>SortedTableInHtmlTable</code></a> component instead.</p><pre><code><span class="deleted-sign"><span class="prefix">-</span><span class="keyword">import</span> <span class="punctuation">{</span>TableInHtmlTable<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/ui-react-dom'</span><span class="punctuation">;</span>
</span><span class="inserted-sign"><span class="prefix">+</span><span class="keyword">import</span> <span class="punctuation">{</span>SortedTableInHtmlTable<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'tinybase/ui-react-dom'</span><span class="punctuation">;</span>
</span></code></pre><p>This component is best showcased with a larger data set, so we load up movies instead of genres:</p><pre><code><span class="unchanged"><span class="prefix"> </span>  <span class="function">useMemo</span><span class="punctuation">(</span><span class="keyword">async</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
</span><span class="deleted-sign"><span class="prefix">-</span>    <span class="keyword">await</span> <span class="function">loadTable</span><span class="punctuation">(</span>store<span class="punctuation">,</span> <span class="string">'genres'</span><span class="punctuation">)</span><span class="punctuation">;</span>
</span><span class="inserted-sign"><span class="prefix">+</span>    <span class="keyword">await</span> <span class="function">loadTable</span><span class="punctuation">(</span>store<span class="punctuation">,</span> <span class="string">'movies'</span><span class="punctuation">)</span><span class="punctuation">;</span>
</span><span class="unchanged"><span class="prefix"> </span>    <span class="function">setIsLoading</span><span class="punctuation">(</span><span class="boolean">false</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="prefix"> </span>  <span class="punctuation">}</span><span class="punctuation">,</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">)</span><span class="punctuation">;</span>
</span></code></pre><h3 id="using-the-sortedtableinhtmltable-component">Using the <a href="/api/ui-react-dom/functions/store-components/sortedtableinhtmltable/"><code>SortedTableInHtmlTable</code></a> Component</h3><p>The <a href="/api/ui-react-dom/functions/store-components/sortedtableinhtmltable/"><code>SortedTableInHtmlTable</code></a> component is similar to the <a href="/api/ui-react-dom/functions/store-components/tableinhtmltable/"><code>TableInHtmlTable</code></a> component, requiring at least the <a href="/api/store/type-aliases/store/table/"><code>Table</code></a> <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a>:</p><pre><code><span class="unchanged"><span class="prefix"> </span><span class="keyword">const</span> <span class="function-variable">Body</span> <span class="operator">=</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
<span class="prefix"> </span>  <span class="keyword">return</span> <span class="punctuation">(</span>
<span class="prefix"> </span>    <span class="tag"><span class="tag"><span class="punctuation">&lt;</span></span><span class="punctuation">></span></span></span><span class="deleted-sign"><span class="prefix">-</span>      <span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name"><a href="/api/ui-react-dom/functions/store-components/tableinhtmltable/">TableInHtmlTable</a></span></span> <span class="attr-name">tableId</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">'</span>genres<span class="punctuation">'</span></span> <span class="punctuation">/></span></span>
<span class="prefix">-</span>      <span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name"><a href="/api/ui-react-dom/functions/store-components/tableinhtmltable/">TableInHtmlTable</a></span></span> <span class="attr-name">tableId</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">'</span>genres<span class="punctuation">'</span></span> <span class="attr-name">headerRow</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span><span class="boolean">false</span><span class="punctuation">}</span></span> <span class="attr-name">idColumn</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span><span class="boolean">false</span><span class="punctuation">}</span></span> <span class="punctuation">/></span></span>
<span class="prefix">-</span>      <span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name"><a href="/api/ui-react-dom/functions/store-components/tableinhtmltable/">TableInHtmlTable</a></span></span> <span class="attr-name">tableId</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">'</span>genres<span class="punctuation">'</span></span> <span class="attr-name">customCells</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span>customCells<span class="punctuation">}</span></span> <span class="punctuation">/></span></span>
</span><span class="inserted-sign"><span class="prefix">+</span>      <span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name"><a href="/api/ui-react-dom/functions/store-components/sortedtableinhtmltable/">SortedTableInHtmlTable</a></span></span>
<span class="prefix">+</span>        <span class="attr-name">tableId</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">'</span>movies<span class="punctuation">'</span></span>
<span class="prefix">+</span>      <span class="punctuation">/></span></span>
</span><span class="unchanged"><span class="prefix"> </span>    <span class="tag"><span class="tag"><span class="punctuation">&lt;/</span></span><span class="punctuation">></span></span>
<span class="prefix"> </span>  <span class="punctuation">)</span><span class="punctuation">;</span>
<span class="prefix"> </span><span class="punctuation">}</span><span class="punctuation">;</span>
</span></code></pre><p>Take a look at the <a href="/api/ui-react-dom/type-aliases/props/sortedtableinhtmltableprops/"><code>SortedTableInHtmlTableProps</code></a> type and <a href="/api/ui-react-dom/type-aliases/props/htmltableprops/"><code>HtmlTableProps</code></a> type to see all the ways in which you can configure this component. We&#x27;re going to use a few here.</p><p>Firstly, since the <a href="/api/store/type-aliases/store/table/"><code>Table</code></a> is very wide (and contains a lengthy description), we will first explicitly set the <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> <a href="/api/common/type-aliases/identity/ids/"><code>Ids</code></a> we want to display:</p><pre><code><span class="deleted-sign"><span class="prefix">-</span><span class="keyword">const</span> customCells <span class="operator">=</span> <span class="punctuation">{</span><span class="literal-property">name</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">label</span><span class="operator">:</span> <span class="string">'Name'</span><span class="punctuation">,</span> <span class="literal-property">component</span><span class="operator">:</span> DictionaryCell<span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">;</span>
</span><span class="inserted-sign"><span class="prefix">+</span><span class="keyword">const</span> customCells <span class="operator">=</span> <span class="punctuation">{</span><span class="literal-property">name</span><span class="operator">:</span> <span class="string">'Name'</span><span class="punctuation">,</span> <span class="literal-property">year</span><span class="operator">:</span> <span class="string">'Year'</span><span class="punctuation">,</span> <span class="literal-property">rating</span><span class="operator">:</span> <span class="string">'Rating'</span><span class="punctuation">}</span><span class="punctuation">;</span>
</span></code></pre><p>(This configuration can simply be an array of the <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> <a href="/api/common/type-aliases/identity/ids/"><code>Ids</code></a>, an object with <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a> as key and label as value (like this), or an object made up of <a href="/api/ui-react-dom/type-aliases/configuration/customcell/"><code>CustomCell</code></a> objects. See the <a href="/api/ui-react-dom/type-aliases/props/htmltableprops/"><code>HtmlTableProps</code></a> type for more details.)</p><pre><code><span class="unchanged"><span class="prefix"> </span>      <span class="operator">&lt;</span>SortedTableInHtmlTable
<span class="prefix"> </span>        tableId<span class="operator">=</span><span class="string">'movies'</span>
</span><span class="inserted-sign"><span class="prefix">+</span>        customCells<span class="operator">=</span><span class="punctuation">{</span>customCells<span class="punctuation">}</span>
</span><span class="unchanged"><span class="prefix"> </span>      <span class="operator">/</span><span class="operator">></span>
</span></code></pre><p>The <a href="/api/ui-react-dom/type-aliases/props/sortedtableinhtmltableprops/"><code>SortedTableInHtmlTableProps</code></a> component, much like the <a href="/api/store/interfaces/store/store/methods/getter/getsortedrowids/"><code>getSortedRowIds</code></a> method, can take props to indicate how the sorting should work. <code>cellId</code> indicates which <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> to use to sort on, and <code>descending</code> indicates the direction. We can sort the movies by rating accordingly:</p><pre><code><span class="unchanged"><span class="prefix"> </span>      <span class="operator">&lt;</span>SortedTableInHtmlTable
<span class="prefix"> </span>        tableId<span class="operator">=</span><span class="string">'movies'</span>
<span class="prefix"> </span>        customCells<span class="operator">=</span><span class="punctuation">{</span>customCells<span class="punctuation">}</span>
</span><span class="inserted-sign"><span class="prefix">+</span>        cellId<span class="operator">=</span><span class="string">'rating'</span>
<span class="prefix">+</span>        descending<span class="operator">=</span><span class="punctuation">{</span><span class="boolean">true</span><span class="punctuation">}</span>
<span class="prefix">+</span>        limit<span class="operator">=</span><span class="punctuation">{</span><span class="number">7</span><span class="punctuation">}</span>
</span><span class="unchanged"><span class="prefix"> </span>      <span class="operator">/</span><span class="operator">></span>
</span></code></pre><p>Note that we can also use the <code>limit</code> prop to paginate the data.</p><p>The component automatically adds two classes to the heading of the column that is being used for the sorting. We can add styling to show which column it is, and a small arrow to indicate the direction:</p><pre><code><span class="selector">th.sorted</span> <span class="punctuation">{</span>
  <span class="property">background</span><span class="punctuation">:</span> #ddd<span class="punctuation">;</span>
<span class="punctuation">}</span>
</code></pre><h3 id="interactivity">Interactivity</h3><p>The <a href="/api/ui-react-dom/functions/store-components/sortedtableinhtmltable/"><code>SortedTableInHtmlTable</code></a> component can be made to be interactive. By adding the sortOnClick flag prop, you can make it such that users can click on the column headings to change the sorting:</p><pre><code><span class="unchanged"><span class="prefix"> </span>      <span class="operator">&lt;</span>SortedTableInHtmlTable
<span class="prefix"> </span>        tableId<span class="operator">=</span><span class="string">'movies'</span>
<span class="prefix"> </span>        customCells<span class="operator">=</span><span class="punctuation">{</span>customCells<span class="punctuation">}</span>
<span class="prefix"> </span>        cellId<span class="operator">=</span><span class="string">'rating'</span>
<span class="prefix"> </span>        descending<span class="operator">=</span><span class="punctuation">{</span><span class="boolean">true</span><span class="punctuation">}</span>
<span class="prefix"> </span>        limit<span class="operator">=</span><span class="punctuation">{</span><span class="number">7</span><span class="punctuation">}</span>
</span><span class="inserted-sign"><span class="prefix">+</span>        sortOnClick<span class="operator">=</span><span class="punctuation">{</span><span class="boolean">true</span><span class="punctuation">}</span>
</span><span class="unchanged"><span class="prefix"> </span>      <span class="operator">/</span><span class="operator">></span>
</span></code></pre><p>As this means the table&#x27;s content can change, the columns might adjust their widths and the table jumps around. We can quickly fix this by hinting about the widths of the header row so that the layout is stable:</p><pre><code><span class="selector">thead th</span> <span class="punctuation">{</span>
  <span class="property">width</span><span class="punctuation">:</span> 5rem<span class="punctuation">;</span>
  <span class="selector">&amp;:nth-of-type(2)</span> <span class="punctuation">{</span>
    <span class="property">width</span><span class="punctuation">:</span> 28rem<span class="punctuation">;</span>
  <span class="punctuation">}</span>
<span class="punctuation">}</span>
</code></pre><p>Nice! It&#x27;s still a simple table, but we have some useful interactivity out of the box.</p><p>We can also add pagination controls, by adding the <code>paginator</code> prop. This either takes <code>true</code> to enable the default <a href="/api/ui-react-dom/functions/store-components/sortedtablepaginator/"><code>SortedTablePaginator</code></a> component, or a paginator component of your own design that accepts <a href="/api/ui-react-dom/type-aliases/props/sortedtablepaginatorprops/"><code>SortedTablePaginatorProps</code></a>.</p><pre><code><span class="unchanged"><span class="prefix"> </span>      <span class="operator">&lt;</span>SortedTableInHtmlTable
<span class="prefix"> </span>        tableId<span class="operator">=</span><span class="string">'movies'</span>
<span class="prefix"> </span>        customCells<span class="operator">=</span><span class="punctuation">{</span>customCells<span class="punctuation">}</span>
<span class="prefix"> </span>        cellId<span class="operator">=</span><span class="string">'rating'</span>
<span class="prefix"> </span>        descending<span class="operator">=</span><span class="punctuation">{</span><span class="boolean">true</span><span class="punctuation">}</span>
<span class="prefix"> </span>        limit<span class="operator">=</span><span class="punctuation">{</span><span class="number">7</span><span class="punctuation">}</span>
<span class="prefix"> </span>        sortOnClick<span class="operator">=</span><span class="punctuation">{</span><span class="boolean">true</span><span class="punctuation">}</span>
</span><span class="inserted-sign"><span class="prefix">+</span>        paginator<span class="operator">=</span><span class="punctuation">{</span><span class="boolean">true</span><span class="punctuation">}</span>
</span><span class="unchanged"><span class="prefix"> </span>      <span class="operator">/</span><span class="operator">></span>
</span></code></pre><p>This places the pagination controls in the <code>&lt;caption&gt;</code> element of the <code>&lt;table&gt;</code>, and you can use CSS to position and style it. We are removing the default text from</p><pre><code><span class="selector">table caption</span> <span class="punctuation">{</span>
  <span class="property">caption-side</span><span class="punctuation">:</span> top<span class="punctuation">;</span>
  <span class="property">text-align</span><span class="punctuation">:</span> left<span class="punctuation">;</span>
  <span class="property">margin-bottom</span><span class="punctuation">:</span> 1rem<span class="punctuation">;</span>
  <span class="selector">button</span> <span class="punctuation">{</span>
    <span class="property">margin-right</span><span class="punctuation">:</span> 0.5rem<span class="punctuation">;</span>
  <span class="punctuation">}</span>
<span class="punctuation">}</span>
</code></pre><p>As well as rendering raw <a href="/api/store/type-aliases/store/tables/"><code>Tables</code></a> from a <a href="/api/store/interfaces/store/store/"><code>Store</code></a>, we can do the same for each <a href="/api/indexes/type-aliases/concept/slice/"><code>Slice</code></a> of an <a href="/api/indexes/interfaces/indexes/indexes/"><code>Indexes</code></a> object - as you&#x27;ll see in the next <a href="/demos/ui-components/sliceinhtmltable/">&lt;SliceInHtmlTable /&gt;</a> demo.</p></section>