<!DOCTYPE html><html lang="en"><head><link rel="dns-prefetch" href="https://www.googletagmanager.com/"><link href="https://www.googletagmanager.com/gtag/js?id=G-D1MGR8VRWJ" rel="preload" as="script"><link rel="preload" as="font" href="/fonts/inter.woff2" type="font/woff2" crossorigin="anonymous"><link rel="preload" as="font" href="/fonts/inconsolata.woff2" type="font/woff2" crossorigin="anonymous"><link rel="preload" as="font" href="/fonts/icons.woff2" type="font/woff2" crossorigin="anonymous"><link rel="preload" as="font" href="/fonts/shantell.woff2" type="font/woff2" crossorigin="anonymous"><title>Todo App v4 (metrics) | TinyBase</title><meta name="description" content="In this version of the Todo app, we add a Metrics object that tracks the number of todos of each type and how many are not yet done. This allows us to show people how well they are getting through them."><meta property="og:type" content="website"><meta property="og:title" content="Todo App v4 (metrics) | TinyBase"><meta property="og:description" content="In this version of the Todo app, we add a Metrics object that tracks the number of todos of each type and how many are not yet done. This allows us to show people how well they are getting through them."><meta property="og:url" content="https://beta.tinybase.org/demos/todo-app/todo-app-v4-metrics/"><meta property="og:image" content="https://beta.tinybase.org/favicon_pad.png"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Todo App v4 (metrics) | TinyBase"><meta name="twitter:description" content="In this version of the Todo app, we add a Metrics object that tracks the number of todos of each type and how many are not yet done. This allows us to show people how well they are getting through them."><meta name="twitter:site" content="@tinybasejs"><meta name="twitter:image" content="https://beta.tinybase.org/favicon_pad.png"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="stylesheet" href="/css/index.css"><link rel="canonical" href="https://beta.tinybase.org/demos/todo-app/todo-app-v4-metrics/"><script src="/js/app.js"></script></head><body><header><a href="/"><img src="/favicon.svg" alt="TinyBase logo"><span>TinyBase <em title="5.0.0-beta.10">β</em></span></a><nav><ul><li><a href="/guides/">Guides</a></li><li><a href="/demos/">Demos</a></li><li><a href="/api/">API</a></li><li><a href="https://github.com/tinyplex/tinybase">GitHub</a></li></ul></nav><span id="dark"></span></header><main><nav><ul><li id="root" class="parent open"><span></span><a href="/">TinyBase</a><ul><li id="G" class="parent"><span></span><a href="/guides/">Guides</a></li><li id="D2" class="parent open"><span></span><a href="/demos/">Demos</a><ul><li id="HW" class="parent"><span></span><a href="/demos/hello-world/">Hello World</a></li><li id="RD" class="parent"><span></span><a href="/demos/rolling-dice/">Rolling Dice</a></li><li id="C2"><span></span><a href="/demos/countries/">Countries</a></li><li id="TA" class="parent open"><span></span><a href="/demos/todo-app/">Todo App</a><ul><li id="TA2"><span></span><a href="/demos/todo-app/todo-app-v1-the-basics/">Todo App v1 (the basics)</a></li><li id="TA3"><span></span><a href="/demos/todo-app/todo-app-v2-indexes/">Todo App v2 (indexes)</a></li><li id="TA4"><span></span><a href="/demos/todo-app/todo-app-v3-persistence/">Todo App v3 (persistence)</a></li><li id="TA5" class="current"><span></span><a href="/demos/todo-app/todo-app-v4-metrics/">Todo App v4 (metrics)</a></li><li id="TA6"><span></span><a href="/demos/todo-app/todo-app-v5-checkpoints/">Todo App v5 (checkpoints)</a></li><li id="TA7"><span></span><a href="/demos/todo-app/todo-app-v6-collaboration/">Todo App v6 (collaboration)</a></li></ul></li><li id="D3"><span></span><a href="/demos/drawing/">Drawing</a></li><li id="CD"><span></span><a href="/demos/city-database/">City Database</a></li><li id="CA"><span></span><a href="/demos/car-analysis/">Car Analysis</a></li><li id="MD"><span></span><a href="/demos/movie-database/">Movie Database</a></li><li id="WF"><span></span><a href="/demos/word-frequencies/">Word Frequencies</a></li><li id="UIC" class="parent"><span></span><a href="/demos/ui-components/">UI Components</a></li></ul></li><li id="api" class="parent"><span></span><a href="/api/">API</a></li></ul></li></ul></nav><article><nav><ul><li><a href="/">TinyBase</a></li><li><a href="/demos/">Demos</a></li><li><a href="/demos/todo-app/">Todo App</a></li><li><a href="/demos/todo-app/todo-app-v4-metrics/">Todo App v4 (metrics)</a></li></ul></nav><section class="s1" id="/demos/todo-app/todo-app-v4-metrics/" data-id="TA5"><h1>Todo App v4 (metrics)</h1><iframe srcdoc="&lt;html&gt;&lt;head&gt;&lt;script src=&quot;/umd/react.production.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;/umd/react-dom.production.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;/umd/tinybase.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;/umd/persister-browser.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;/umd/ui-react.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;/umd/ui-react-dom-debug.js&quot;&gt;&lt;/script&gt;&lt;style&gt;@font-face{font-family:Inter;src:url(https://tinybase.org/fonts/inter.woff2) format(&#x27;woff2&#x27;)}body{display:grid;grid-template-columns:35% minmax(0,1fr);grid-template-rows:auto 1fr;box-sizing:border-box;font-family:Inter,sans-serif;letter-spacing:-.04rem;grid-gap:1rem .5rem;margin:0;min-height:100vh;padding:1rem}body *{box-sizing:border-box;outline-color:#d81b60}#newTodo{border:1px solid #ccc;display:block;font:inherit;letter-spacing:inherit;padding:.5rem;width:100%}#todos{grid-column:2;margin:0;padding:0}#todos .todo{background:#fff;border:1px solid #ccc;display:flex;margin-bottom:.5rem;padding:.5rem}#todos .todo .text{cursor:pointer;flex:1;overflow:hidden;text-overflow:ellipsis;user-select:none;white-space:nowrap}#todos .todo .text::before{content:&#x27;\1F7E0&#x27;;padding:0 .5rem 0 .25rem}#todos .todo .text.done{color:#ccc}#todos .todo .text.done::before{content:&#x27;\2705&#x27;}#types{margin:0}#types .type{cursor:pointer;margin-bottom:.5rem;user-select:none}#types .type.current{color:#d81b60}#todos .todo .type{border:none;color:#777;font:inherit;font-size:.8rem;margin-top:.1rem}&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;script&gt;(()=&gt;{const s=React[&quot;createElement&quot;],{createIndexes:r,createMetrics:n,createStore:l}=TinyBase,{createLocalPersister:i,createSessionPersister:d}=TinyBasePersisterBrowser,{CellView:u,Provider:c,SliceView:e,useAddRowCallback:y,useCell:p,useCreateIndexes:w,useCreateMetrics:v,useCreatePersister:m,useCreateStore:S,useMetric:C,useSetCellCallback:I,useSetValueCallback:h,useValue:x}=TinyBaseUiReact,{useCallback:b,useState:g}=React,k=TinyBaseUiReactDomDebug[&quot;StoreInspector&quot;],T=[&quot;Home&quot;,&quot;Work&quot;,&quot;Archived&quot;],f={todos:{text:{type:&quot;string&quot;},done:{type:&quot;boolean&quot;,default:!1},type:{type:&quot;string&quot;,default:&quot;Home&quot;,allow:T}}},A={todos:{0:{text:&quot;Clean the floor&quot;,type:&quot;Home&quot;},1:{text:&quot;Install TinyBase&quot;,type:&quot;Work&quot;},2:{text:&quot;Book holiday&quot;,type:&quot;Archived&quot;}}},t=()=&gt;{var e=S(()=&gt;l().setTablesSchema(f)),t=(m(e,e=&gt;i(e,&quot;todos/store&quot;),[],async e=&gt;{await e.startAutoLoad([A]),await e.startAutoSave()}),S(()=&gt;l().setValuesSchema({type:{type:&quot;string&quot;,default:&quot;Home&quot;}}))),o=(m(t,e=&gt;d(e,&quot;todos/viewStore&quot;),[],async e=&gt;{await e.startAutoLoad(),await e.startAutoSave()}),w(e,e=&gt;r(e).setIndexDefinition(&quot;types&quot;,&quot;todos&quot;,&quot;type&quot;))),a=v(e,e=&gt;{const o=n(e);return o.setMetricDefinition(&quot;pending&quot;,&quot;todos&quot;,&quot;sum&quot;,e=&gt;e(&quot;done&quot;)?0:1),T.forEach(t=&gt;{o.setMetricDefinition(t,&quot;todos&quot;,&quot;sum&quot;,e=&gt;e(&quot;type&quot;)!=t||e(&quot;done&quot;)?0:1)}),o});return s(c,{store:e,storesById:{viewStore:t},indexes:o,metrics:a},s(B,null),s(D,null),s(M,null),s(R,null),s(k,null))},B=(window.addEventListener(&quot;load&quot;,()=&gt;ReactDOM.createRoot(document.body).render(s(t,null))),()=&gt;{var e=C(&quot;pending&quot;);return 0&lt;e?&quot;Todo: &quot;+e:&quot;All done!&quot;}),D=()=&gt;{const[e,t]=g(&quot;&quot;),o=x(&quot;type&quot;,&quot;viewStore&quot;),a=b(({target:{value:e}})=&gt;t(e),[]),r=y(&quot;todos&quot;,({which:e,target:{value:t}})=&gt;13==e&amp;&amp;&quot;&quot;!=t?{text:t,type:o}:null,[o],void 0,()=&gt;t(&quot;&quot;),[t]);return s(&quot;input&quot;,{id:&quot;newTodo&quot;,onChange:a,onKeyDown:r,placeholder:&quot;New Todo&quot;,value:e})},R=()=&gt;s(&quot;ul&quot;,{id:&quot;todos&quot;},s(e,{indexId:&quot;types&quot;,sliceId:x(&quot;type&quot;,&quot;viewStore&quot;),rowComponent:o})),o=e=&gt;s(&quot;li&quot;,{className:&quot;todo&quot;},s(a,{...e}),s(P,{...e})),a=({tableId:e,rowId:t})=&gt;{const o=p(e,t,&quot;done&quot;),a=&quot;text&quot;+(o?&quot; done&quot;:&quot;&quot;),r=I(e,t,&quot;done&quot;,()=&gt;!o,[o]);return s(&quot;span&quot;,{className:a,onClick:r},s(u,{tableId:e,rowId:t,cellId:&quot;text&quot;}))},M=()=&gt;s(&quot;ul&quot;,{id:&quot;types&quot;},T.map(e=&gt;s(N,{key:e,type:e}))),N=({type:e})=&gt;{var t=C(e),o=x(&quot;type&quot;,&quot;viewStore&quot;),a=h(&quot;type&quot;,()=&gt;e,[e],&quot;viewStore&quot;),o=&quot;type&quot;+(e==o?&quot; current&quot;:&quot;&quot;);return s(&quot;li&quot;,{className:o,onClick:a},e,0&lt;t?` (${t})`:&quot;&quot;)},P=({tableId:e,rowId:t})=&gt;{var o=p(e,t,&quot;type&quot;),e=I(e,t,&quot;type&quot;,({target:{value:e}})=&gt;e,[]);return s(&quot;select&quot;,{className:&quot;type&quot;,onChange:e,value:o},T.map(e=&gt;s(&quot;option&quot;,null,e)))}})()&lt;/script&gt;&lt;/html&gt;"></iframe><p>In this version of the Todo app, we add a <a href="/api/metrics/interfaces/metrics/metrics/"><code>Metrics</code></a> object that tracks the number of todos of each type and how many are not yet done. This allows us to show people how well they are getting through them.</p><p>We&#x27;re making changes to the <a href="/demos/todo-app/todo-app-v3-persistence/">Todo App v3 (persistence)</a> demo.</p><h3 id="additional-initialization">Additional Initialization</h3><p>We create a <a href="/api/metrics/interfaces/metrics/metrics/"><code>Metrics</code></a> object with the <a href="/api/ui-react/functions/metrics-hooks/usecreatemetrics/"><code>useCreateMetrics</code></a> hook, and will need the <a href="/api/ui-react/functions/metrics-hooks/usemetric/"><code>useMetric</code></a> hook so that we can get the metrics out of it:</p><pre><code><span class="deleted-sign"><span class="prefix">-</span><span class="keyword">const</span> <span class="punctuation">{</span>createIndexes<span class="punctuation">,</span> createStore<span class="punctuation">}</span> <span class="operator">=</span> TinyBase<span class="punctuation">;</span>
</span><span class="inserted-sign"><span class="prefix">+</span><span class="keyword">const</span> <span class="punctuation">{</span>createIndexes<span class="punctuation">,</span> createMetrics<span class="punctuation">,</span> createStore<span class="punctuation">}</span> <span class="operator">=</span> TinyBase<span class="punctuation">;</span>
</span><span class="unchanged"><span class="prefix"> </span><span class="keyword">const</span> <span class="punctuation">{</span>createLocalPersister<span class="punctuation">,</span> createSessionPersister<span class="punctuation">}</span> <span class="operator">=</span> TinyBasePersisterBrowser<span class="punctuation">;</span>
<span class="prefix"> </span><span class="keyword">const</span> <span class="punctuation">{</span>
<span class="prefix"> </span>  CellView<span class="punctuation">,</span>
<span class="prefix"> </span>  Provider<span class="punctuation">,</span>
<span class="prefix"> </span>  SliceView<span class="punctuation">,</span>
<span class="prefix"> </span>  useAddRowCallback<span class="punctuation">,</span>
<span class="prefix"> </span>  useCell<span class="punctuation">,</span>
<span class="prefix"> </span>  useCreateIndexes<span class="punctuation">,</span>
</span><span class="inserted-sign"><span class="prefix">+</span>  useCreateMetrics<span class="punctuation">,</span>
</span><span class="unchanged"><span class="prefix"> </span>  useCreatePersister<span class="punctuation">,</span>
<span class="prefix"> </span>  useCreateStore<span class="punctuation">,</span>
</span><span class="inserted-sign"><span class="prefix">+</span>  useMetric<span class="punctuation">,</span>
</span><span class="unchanged"><span class="prefix"> </span>  useSetCellCallback<span class="punctuation">,</span>
<span class="prefix"> </span>  useSetValueCallback<span class="punctuation">,</span>
<span class="prefix"> </span>  useValue<span class="punctuation">,</span>
<span class="prefix"> </span><span class="punctuation">}</span> <span class="operator">=</span> TinyBaseUiReact<span class="punctuation">;</span>
</span></code></pre><h3 id="adding-metrics">Adding <a href="/api/metrics/interfaces/metrics/metrics/"><code>Metrics</code></a></h3><p>We define a metric to count how many todos are pending (i.e. not done), and then set up additional metrics to track the number of pending todos of each type. We use the <a href="/api/ui-react/functions/metrics-hooks/usecreatemetrics/"><code>useCreateMetrics</code></a> hook to memoize this whole initialization:</p><pre><code><span class="unchanged"><span class="prefix"> </span>  <span class="keyword">const</span> indexes <span class="operator">=</span> <span class="function"><a href="/api/ui-react/functions/indexes-hooks/usecreateindexes/">useCreateIndexes</a></span><span class="punctuation">(</span>store<span class="punctuation">,</span> <span class="punctuation">(</span><span class="parameter">store</span><span class="punctuation">)</span> <span class="operator">=></span>
<span class="prefix"> </span>    <span class="function"><a href="/api/indexes/functions/creation/createindexes/">createIndexes</a></span><span class="punctuation">(</span>store<span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/indexes/interfaces/indexes/indexes/methods/configuration/setindexdefinition/">setIndexDefinition</a></span><span class="punctuation">(</span><span class="string">'types'</span><span class="punctuation">,</span> <span class="string">'todos'</span><span class="punctuation">,</span> <span class="string">'type'</span><span class="punctuation">)</span><span class="punctuation">,</span>
<span class="prefix"> </span>  <span class="punctuation">)</span><span class="punctuation">;</span>
</span><span class="inserted-sign"><span class="prefix">+</span>  <span class="keyword">const</span> metrics <span class="operator">=</span> <span class="function"><a href="/api/ui-react/functions/metrics-hooks/usecreatemetrics/">useCreateMetrics</a></span><span class="punctuation">(</span>store<span class="punctuation">,</span> <span class="punctuation">(</span><span class="parameter">store</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
<span class="prefix">+</span>    <span class="keyword">const</span> metrics <span class="operator">=</span> <span class="function"><a href="/api/metrics/functions/creation/createmetrics/">createMetrics</a></span><span class="punctuation">(</span>store<span class="punctuation">)</span><span class="punctuation">;</span>
<span class="prefix">+</span>    metrics<span class="punctuation">.</span><span class="function"><a href="/api/metrics/interfaces/metrics/metrics/methods/configuration/setmetricdefinition/">setMetricDefinition</a></span><span class="punctuation">(</span><span class="string">'pending'</span><span class="punctuation">,</span> <span class="string">'todos'</span><span class="punctuation">,</span> <span class="string">'sum'</span><span class="punctuation">,</span> <span class="punctuation">(</span><span class="parameter">getCell</span><span class="punctuation">)</span> <span class="operator">=></span>
<span class="prefix">+</span>      <span class="operator">!</span><span class="function"><a href="/api/store/interfaces/store/store/methods/getter/getcell/">getCell</a></span><span class="punctuation">(</span><span class="string">'done'</span><span class="punctuation">)</span> <span class="operator">?</span> <span class="number">1</span> <span class="operator">:</span> <span class="number">0</span><span class="punctuation">,</span>
<span class="prefix">+</span>    <span class="punctuation">)</span><span class="punctuation">;</span>
<span class="prefix">+</span>    <span class="constant">TYPES</span><span class="punctuation">.</span><span class="function">forEach</span><span class="punctuation">(</span><span class="punctuation">(</span><span class="parameter">type</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
<span class="prefix">+</span>      metrics<span class="punctuation">.</span><span class="function"><a href="/api/metrics/interfaces/metrics/metrics/methods/configuration/setmetricdefinition/">setMetricDefinition</a></span><span class="punctuation">(</span>type<span class="punctuation">,</span> <span class="string">'todos'</span><span class="punctuation">,</span> <span class="string">'sum'</span><span class="punctuation">,</span> <span class="punctuation">(</span><span class="parameter">getCell</span><span class="punctuation">)</span> <span class="operator">=></span>
<span class="prefix">+</span>        <span class="function"><a href="/api/store/interfaces/store/store/methods/getter/getcell/">getCell</a></span><span class="punctuation">(</span><span class="string">'type'</span><span class="punctuation">)</span> <span class="operator">==</span> type <span class="operator">&amp;&amp;</span> <span class="operator">!</span><span class="function"><a href="/api/store/interfaces/store/store/methods/getter/getcell/">getCell</a></span><span class="punctuation">(</span><span class="string">'done'</span><span class="punctuation">)</span> <span class="operator">?</span> <span class="number">1</span> <span class="operator">:</span> <span class="number">0</span><span class="punctuation">,</span>
<span class="prefix">+</span>      <span class="punctuation">)</span><span class="punctuation">;</span>
<span class="prefix">+</span>    <span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="prefix">+</span>    <span class="keyword">return</span> metrics<span class="punctuation">;</span>
<span class="prefix">+</span>  <span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
</span></code></pre><p>As before, we make this <a href="/api/metrics/interfaces/metrics/metrics/"><code>Metrics</code></a> object available though the <code>Provider</code> component as the default for the app:</p><pre><code><span class="unchanged"><span class="prefix"> </span>  <span class="keyword">return</span> <span class="punctuation">(</span>
</span><span class="deleted-sign"><span class="prefix">-</span>    <span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name"><a href="/api/ui-react/functions/context-components/provider/">Provider</a></span></span> <span class="attr-name">store</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span>store<span class="punctuation">}</span></span> <span class="attr-name">storesById</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span><span class="punctuation">{</span>viewStore<span class="punctuation">}</span><span class="punctuation">}</span></span> <span class="attr-name">indexes</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span>indexes<span class="punctuation">}</span></span><span class="punctuation">></span></span></span><span class="inserted-sign"><span class="prefix">+</span>    <span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name"><a href="/api/ui-react/functions/context-components/provider/">Provider</a></span></span>
<span class="prefix">+</span>      <span class="attr-name">store</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span>store<span class="punctuation">}</span></span>
<span class="prefix">+</span>      <span class="attr-name">storesById</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span><span class="punctuation">{</span>viewStore<span class="punctuation">}</span><span class="punctuation">}</span></span>
<span class="prefix">+</span>      <span class="attr-name">indexes</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span>indexes<span class="punctuation">}</span></span>
<span class="prefix">+</span>      <span class="attr-name">metrics</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span>metrics<span class="punctuation">}</span></span>
<span class="prefix">+</span>    <span class="punctuation">></span></span></span><span class="unchanged"><span class="prefix"> </span>      <span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name">Title</span></span> <span class="punctuation">/></span></span>
<span class="prefix"> </span>      <span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name">NewTodo</span></span> <span class="punctuation">/></span></span>
<span class="prefix"> </span>      <span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name">Types</span></span> <span class="punctuation">/></span></span>
<span class="prefix"> </span>      <span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name">Todos</span></span> <span class="punctuation">/></span></span>
<span class="prefix"> </span>      <span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name"><a href="/api/ui-react-dom/functions/development-components/storeinspector/">StoreInspector</a></span></span> <span class="punctuation">/></span></span>
<span class="prefix"> </span>    <span class="tag"><span class="tag"><span class="punctuation">&lt;/</span><span class="class-name"><a href="/api/ui-react/functions/context-components/provider/">Provider</a></span></span><span class="punctuation">></span></span>
<span class="prefix"> </span>  <span class="punctuation">)</span><span class="punctuation">;</span>
<span class="prefix"> </span><span class="punctuation">}</span><span class="punctuation">;</span>
</span></code></pre><h3 id="upgrading-the-title-component">Upgrading The <code>Title</code> Component</h3><p>Now that we are tracking the total number of pending todos, we can have that number appear in the title. We simply use the <a href="/api/ui-react/functions/metrics-hooks/usemetric/"><code>useMetric</code></a> hook to get the <code>pending</code> metric that was previously defined:</p><pre><code><span class="deleted-sign"><span class="prefix">-</span><span class="keyword">const</span> <span class="function-variable">Title</span> <span class="operator">=</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="string">'Todos'</span><span class="punctuation">;</span>
</span><span class="inserted-sign"><span class="prefix">+</span><span class="keyword">const</span> <span class="function-variable">Title</span> <span class="operator">=</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
<span class="prefix">+</span>  <span class="keyword">const</span> pending <span class="operator">=</span> <span class="function"><a href="/api/ui-react/functions/metrics-hooks/usemetric/">useMetric</a></span><span class="punctuation">(</span><span class="string">'pending'</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="prefix">+</span>
<span class="prefix">+</span>  <span class="keyword">return</span> pending <span class="operator">></span> <span class="number">0</span> <span class="operator">?</span> <span class="template-string"><span class="template-punctuation">`</span><span class="string">Todo: </span><span class="interpolation"><span class="interpolation-punctuation">${</span>pending<span class="interpolation-punctuation">}</span></span><span class="template-punctuation">`</span></span> <span class="operator">:</span> <span class="string">'All done!'</span><span class="punctuation">;</span>
<span class="prefix">+</span><span class="punctuation">}</span><span class="punctuation">;</span>
</span></code></pre><h3 id="upgrading-the-type-component">Upgrading The <code>Type</code> Component</h3><p>We also have a metric for each type that represents the number of pending todos of that type. We can display those alongside each type name in the side-bar. Apart from the addition of the <code>pending</code> variable, this component is as it was in the previous version:</p><pre><code><span class="unchanged"><span class="prefix"> </span><span class="keyword">const</span> <span class="function-variable">Type</span> <span class="operator">=</span> <span class="punctuation">(</span><span class="parameter"><span class="punctuation">{</span>type<span class="punctuation">}</span></span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
</span><span class="inserted-sign"><span class="prefix">+</span>  <span class="keyword">const</span> pending <span class="operator">=</span> <span class="function"><a href="/api/ui-react/functions/metrics-hooks/usemetric/">useMetric</a></span><span class="punctuation">(</span>type<span class="punctuation">)</span><span class="punctuation">;</span>
</span><span class="unchanged"><span class="prefix"> </span>  <span class="keyword">const</span> currentType <span class="operator">=</span> <span class="function"><a href="/api/ui-react/functions/store-hooks/usevalue/">useValue</a></span><span class="punctuation">(</span><span class="string">'type'</span><span class="punctuation">,</span> <span class="string">'viewStore'</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="prefix"> </span>  <span class="keyword">const</span> handleClick <span class="operator">=</span> <span class="function"><a href="/api/ui-react/functions/store-hooks/usesetvaluecallback/">useSetValueCallback</a></span><span class="punctuation">(</span>
<span class="prefix"> </span>    <span class="string">'type'</span><span class="punctuation">,</span>
<span class="prefix"> </span>    <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> type<span class="punctuation">,</span>
<span class="prefix"> </span>    <span class="punctuation">[</span>type<span class="punctuation">]</span><span class="punctuation">,</span>
<span class="prefix"> </span>    <span class="string">'viewStore'</span><span class="punctuation">,</span>
<span class="prefix"> </span>  <span class="punctuation">)</span><span class="punctuation">;</span>
<span class="prefix"> </span>  <span class="keyword">const</span> className <span class="operator">=</span> <span class="string">'type'</span> <span class="operator">+</span> <span class="punctuation">(</span>type <span class="operator">==</span> currentType <span class="operator">?</span> <span class="string">' current'</span> <span class="operator">:</span> <span class="string">''</span><span class="punctuation">)</span><span class="punctuation">;</span>
</span>
<span class="unchanged"><span class="prefix"> </span>  <span class="keyword">return</span> <span class="punctuation">(</span>
<span class="prefix"> </span>    <span class="tag"><span class="tag"><span class="punctuation">&lt;</span>li</span> <span class="attr-name">className</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span>className<span class="punctuation">}</span></span> <span class="attr-name">onClick</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span>handleClick<span class="punctuation">}</span></span><span class="punctuation">></span></span><span class="plain-text">
<span class="prefix"> </span>      </span><span class="punctuation">{</span>type<span class="punctuation">}</span></span><span class="inserted-sign"><span class="prefix">+</span>      <span class="punctuation">{</span>pending <span class="operator">></span> <span class="number">0</span> <span class="operator">?</span> <span class="template-string"><span class="template-punctuation">`</span><span class="string"> (</span><span class="interpolation"><span class="interpolation-punctuation">${</span>pending<span class="interpolation-punctuation">}</span></span><span class="string">)</span><span class="template-punctuation">`</span></span> <span class="operator">:</span> <span class="string">''</span><span class="punctuation">}</span>
</span><span class="unchanged"><span class="prefix"> </span>    <span class="tag"><span class="tag"><span class="punctuation">&lt;/</span>li</span><span class="punctuation">></span></span>
<span class="prefix"> </span>  <span class="punctuation">)</span><span class="punctuation">;</span>
<span class="prefix"> </span><span class="punctuation">}</span><span class="punctuation">;</span>
</span></code></pre><h3 id="summary">Summary</h3><p>We now have a fairly useful app for tracking todos. As a final flourish, we will add an undo and redo feature. Please continue to the <a href="/demos/todo-app/todo-app-v5-checkpoints/">Todo App v5 (checkpoints)</a> demo.</p></section></article><aside></aside></main><footer><nav><a id="tw" href="https://twitter.com/tinybasejs" target="_blank">Twitter</a><a id="fb" href="https://facebook.com/tinybasejs" target="_blank">Facebook</a></nav><nav><a href="/">TinyBase 5.0.0-beta.10</a> © 2021- All Rights Reserved</nav></footer></body><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-D1MGR8VRWJ"></script><script>window.dataLayer=window.dataLayer||[];function g(){dataLayer.push(arguments);}g('js',new Date());g('config','G-D1MGR8VRWJ');</script></html>