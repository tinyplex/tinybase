<!DOCTYPE html><html lang="en"><head><link rel="dns-prefetch" href="https://www.googletagmanager.com/"><link href="https://www.googletagmanager.com/gtag/js?id=G-D1MGR8VRWJ" rel="preload" as="script"><link rel="preload" as="font" href="/fonts/inter.woff2" type="font/woff2" crossorigin="anonymous"><link rel="preload" as="font" href="/fonts/inconsolata.woff2" type="font/woff2" crossorigin="anonymous"><link rel="preload" as="font" href="/fonts/icons.woff2" type="font/woff2" crossorigin="anonymous"><link rel="preload" as="font" href="/fonts/shantell.woff2" type="font/woff2" crossorigin="anonymous"><title>Countries | TinyBase</title><meta name="description" content="In this demo, we build a simple app that uses React and a simple Store object to load and display country data."><meta property="og:type" content="website"><meta property="og:title" content="Countries | TinyBase"><meta property="og:description" content="In this demo, we build a simple app that uses React and a simple Store object to load and display country data."><meta property="og:url" content="https://beta.tinybase.org/demos/countries/"><meta property="og:image" content="https://beta.tinybase.org/favicon_pad.png"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Countries | TinyBase"><meta name="twitter:description" content="In this demo, we build a simple app that uses React and a simple Store object to load and display country data."><meta name="twitter:site" content="@tinybasejs"><meta name="twitter:image" content="https://beta.tinybase.org/favicon_pad.png"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="stylesheet" href="/css/index.css"><link rel="canonical" href="https://beta.tinybase.org/demos/countries/"><script src="/js/app.js"></script></head><body><header><a href="/"><img src="/favicon.svg" alt="TinyBase logo"><span>TinyBase <em title="5.0.0-beta.24">β</em></span></a><nav><ul><li><a href="/guides/">Guides</a></li><li><a href="/demos/">Demos</a></li><li><a href="/api/">API</a></li><li><a href="https://github.com/tinyplex/tinybase">GitHub</a></li></ul></nav><span id="dark"></span></header><main><nav><ul><li id="root" class="parent open"><span></span><a href="/">TinyBase</a><ul><li id="G" class="parent"><span></span><a href="/guides/">Guides</a></li><li id="D2" class="parent open"><span></span><a href="/demos/">Demos</a><ul><li id="HW" class="parent"><span></span><a href="/demos/hello-world/">Hello World</a></li><li id="RD" class="parent"><span></span><a href="/demos/rolling-dice/">Rolling Dice</a></li><li id="C2" class="current"><span></span><a href="/demos/countries/">Countries</a></li><li id="TA" class="parent"><span></span><a href="/demos/todo-app/">Todo App</a></li><li id="D3"><span></span><a href="/demos/drawing/">Drawing</a></li><li id="CD"><span></span><a href="/demos/city-database/">City Database</a></li><li id="CA"><span></span><a href="/demos/car-analysis/">Car Analysis</a></li><li id="MD"><span></span><a href="/demos/movie-database/">Movie Database</a></li><li id="WF"><span></span><a href="/demos/word-frequencies/">Word Frequencies</a></li><li id="UIC" class="parent"><span></span><a href="/demos/ui-components/">UI Components</a></li></ul></li><li id="api" class="parent"><span></span><a href="/api/">API</a></li></ul></li></ul></nav><article><nav><ul><li><a href="/">TinyBase</a></li><li><a href="/demos/">Demos</a></li><li><a href="/demos/countries/">Countries</a></li></ul></nav><section class="s1" id="/demos/countries/" data-id="C2"><h1>Countries</h1><iframe srcdoc="&lt;html&gt;&lt;head&gt;&lt;script src=&quot;/umd/react.production.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;/umd/react-dom.production.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;/umd/tinybase/index.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;/umd/tinybase/persisters/persister-browser/index.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;/umd/tinybase/persisters/persister-remote/index.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;/umd/tinybase/ui-react/index.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;/umd/tinybase/ui-react-inspector/index.js&quot;&gt;&lt;/script&gt;&lt;style&gt;@font-face{font-family:Inter;src:url(https://tinybase.org/fonts/inter.woff2) format(&#x27;woff2&#x27;)}body{box-sizing:border-box;display:flex;font-family:Inter,sans-serif;letter-spacing:-.04rem;margin:0;height:100vh;text-align:center}#filters{overflow-y:scroll;border-right:1px solid #ccc;padding:.5rem}#filters .filter{cursor:pointer}#filters .filter.current{color:#d81b60}#filters .filter .count,#filters .filter .label{display:inline-block;width:2em}#filters .filter .count{color:#777;font-size:.8rem;text-align:left}#countries{flex:1;display:grid;grid-template-columns:repeat(4,minmax(0,1fr));grid-auto-rows:max-content;gap:.5rem;padding:1rem;overflow-y:scroll}#countries .country{background:#fff;border:1px solid #ccc;padding:.5rem;position:relative;height:fit-content}#countries .country .star{cursor:pointer;display:inline;left:8px;position:absolute;top:5px;user-select:none}#countries .country .flag{font-size:5rem;line-height:1em}#countries .country .name{overflow:hidden;text-overflow:ellipsis;vertical-align:top;white-space:nowrap}&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;script&gt;(()=&gt;{let d=React[&quot;createElement&quot;],{createIndexes:n,createStore:i,defaultSorter:o}=TinyBase,{createLocalPersister:l,createSessionPersister:c}=TinyBasePersisterBrowser,{CellView:u,IndexView:e,Provider:I,SliceView:t,useCell:S,useCreateIndexes:y,useCreatePersister:x,useCreateStore:m,useDelCellCallback:v,useSetCellCallback:w,useSetValuesCallback:C,useSliceRowIds:p,useValues:s}=TinyBaseUiReact,b=TinyBaseUiReactInspector[&quot;Inspector&quot;],f=TinyBasePersisterRemote[&quot;createRemotePersister&quot;],a=React[&quot;useCallback&quot;],r=()=&gt;{var e=m(()=&gt;i().setTablesSchema({countries:{emoji:{type:&quot;string&quot;},name:{type:&quot;string&quot;}}})),t=(x(e,e=&gt;f(e,&quot;https://tinybase.org/assets/countries.json&quot;),[],async e=&gt;e.load()),m(()=&gt;i().setTablesSchema({countries:{star:{type:&quot;boolean&quot;}}}))),s=(x(t,e=&gt;l(e,&quot;countries/starStore&quot;),[],async e=&gt;{await e.startAutoLoad([{countries:{GB:{star:!0},NZ:{star:!0},AU:{star:!0},SE:{star:!0},IE:{star:!0},IN:{star:!0},BZ:{star:!0},US:{star:!0}}}]),await e.startAutoSave()}),m(()=&gt;i().setValuesSchema({indexes:{type:&quot;string&quot;,default:&quot;countryIndexes&quot;},indexId:{type:&quot;string&quot;,default:&quot;firstLetter&quot;},sliceId:{type:&quot;string&quot;,default:&quot;A&quot;}}))),r=(x(s,e=&gt;c(e,&quot;countries/viewStore&quot;),[],async e=&gt;{await e.startAutoLoad(),await e.startAutoSave()}),y(e,e=&gt;n(e).setIndexDefinition(&quot;firstLetter&quot;,&quot;countries&quot;,e=&gt;e(&quot;name&quot;)[0],&quot;name&quot;,o))),a=y(t,e=&gt;n(e).setIndexDefinition(&quot;star&quot;,&quot;countries&quot;,&quot;star&quot;));return d(I,{storesById:{countryStore:e,starStore:t,viewStore:s},indexesById:{countryIndexes:r,starIndexes:a}},d(g,null),d(R,null),d(b,null))},B=(window.addEventListener(&quot;load&quot;,()=&gt;ReactDOM.createRoot(document.body).render(d(r,null))),()=&gt;s(&quot;viewStore&quot;)),g=()=&gt;{let{indexes:t,indexId:s,sliceId:r}=B();return d(&quot;div&quot;,{id:&quot;filters&quot;},d(N,{indexes:&quot;starIndexes&quot;,indexId:&quot;star&quot;,sliceId:&quot;true&quot;,label:&quot;★&quot;,selected:&quot;starIndexes&quot;==t&amp;&amp;&quot;star&quot;==s&amp;&amp;&quot;true&quot;==r}),d(e,{indexId:&quot;firstLetter&quot;,indexes:&quot;countryIndexes&quot;,sliceComponent:N,getSliceComponentProps:a(e=&gt;({selected:&quot;countryIndexes&quot;==t&amp;&amp;&quot;firstLetter&quot;==s&amp;&amp;r==e}),[t,s,r])}))},N=({indexes:e=&quot;countryIndexes&quot;,indexId:t,sliceId:s,selected:r,label:a=s})=&gt;{n=e,i=t,o=s;var n,i,o,l=C(()=&gt;({indexes:n,indexId:i,sliceId:o}),[n,i,o],&quot;viewStore&quot;),r=&quot;filter&quot;+(r?&quot; current&quot;:&quot;&quot;),t=p(t,s,e).length;return d(&quot;div&quot;,{className:r,onClick:l},d(&quot;span&quot;,{className:&quot;label&quot;},a),d(&quot;span&quot;,{className:&quot;count&quot;},t))},R=()=&gt;d(&quot;div&quot;,{id:&quot;countries&quot;},d(t,{...B(),rowComponent:L})),L=e=&gt;{var{tableId:t,rowId:s}=e,r=S(t,s,&quot;star&quot;,&quot;starStore&quot;),a=w(t,s,&quot;star&quot;,()=&gt;!0,[],&quot;starStore&quot;),t=v(t,s,&quot;star&quot;,!0,&quot;starStore&quot;);return d(&quot;div&quot;,{className:&quot;country&quot;},d(&quot;div&quot;,{className:&quot;star&quot;,onClick:r?t:a},r?&quot;★&quot;:&quot;☆&quot;),d(&quot;div&quot;,{className:&quot;flag&quot;},d(u,{...e,cellId:&quot;emoji&quot;,store:&quot;countryStore&quot;})),d(&quot;div&quot;,{className:&quot;name&quot;},d(u,{...e,cellId:&quot;name&quot;,store:&quot;countryStore&quot;})))}})()&lt;/script&gt;&lt;/html&gt;"></iframe><p>In this demo, we build a simple app that uses React and a simple <a href="/api/store/interfaces/store/store/"><code>Store</code></a> object to load and display country data.</p><h3 id="initialization">Initialization</h3><p>First, we pull in React, ReactDOM, and <a href="/">TinyBase</a>:</p><pre><code><span class="tag"><span class="tag"><span class="punctuation">&lt;</span>script</span> <span class="attr-name">src</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>/umd/react.production.min.js<span class="punctuation">"</span></span><span class="punctuation">></span></span><span class="script"></span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span>script</span><span class="punctuation">></span></span>
<span class="tag"><span class="tag"><span class="punctuation">&lt;</span>script</span> <span class="attr-name">src</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>/umd/react-dom.production.min.js<span class="punctuation">"</span></span><span class="punctuation">></span></span><span class="script"></span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span>script</span><span class="punctuation">></span></span>
<span class="tag"><span class="tag"><span class="punctuation">&lt;</span>script</span> <span class="attr-name">src</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>/umd/tinybase/index.js<span class="punctuation">"</span></span><span class="punctuation">></span></span><span class="script"></span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span>script</span><span class="punctuation">></span></span>
<span class="tag"><span class="tag"><span class="punctuation">&lt;</span>script</span> <span class="attr-name">src</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>/umd/tinybase/persisters/persister-browser/index.js<span class="punctuation">"</span></span><span class="punctuation">></span></span><span class="script"></span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span>script</span><span class="punctuation">></span></span>
<span class="tag"><span class="tag"><span class="punctuation">&lt;</span>script</span> <span class="attr-name">src</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>/umd/tinybase/persisters/persister-remote/index.js<span class="punctuation">"</span></span><span class="punctuation">></span></span><span class="script"></span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span>script</span><span class="punctuation">></span></span>
<span class="tag"><span class="tag"><span class="punctuation">&lt;</span>script</span> <span class="attr-name">src</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>/umd/tinybase/ui-react/index.js<span class="punctuation">"</span></span><span class="punctuation">></span></span><span class="script"></span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span>script</span><span class="punctuation">></span></span>
<span class="tag"><span class="tag"><span class="punctuation">&lt;</span>script</span> <span class="attr-name">src</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>/umd/tinybase/ui-react-inspector/index.js<span class="punctuation">"</span></span><span class="punctuation">></span></span><span class="script"></span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span>script</span><span class="punctuation">></span></span>
</code></pre><p>We&#x27;re using the <a href="/api/ui-react-inspector/functions/development-components/inspector/"><code>Inspector</code></a> component for the purposes of seeing how the data is structured.</p><p>We import the functions and components we need:</p><pre><code><span class="keyword">const</span> <span class="punctuation">{</span>createIndexes<span class="punctuation">,</span> createStore<span class="punctuation">,</span> defaultSorter<span class="punctuation">}</span> <span class="operator">=</span> TinyBase<span class="punctuation">;</span>
<span class="keyword">const</span> <span class="punctuation">{</span>createLocalPersister<span class="punctuation">,</span> createSessionPersister<span class="punctuation">}</span> <span class="operator">=</span> TinyBasePersisterBrowser<span class="punctuation">;</span>
<span class="keyword">const</span> <span class="punctuation">{</span>
  CellView<span class="punctuation">,</span>
  IndexView<span class="punctuation">,</span>
  Provider<span class="punctuation">,</span>
  SliceView<span class="punctuation">,</span>
  useCell<span class="punctuation">,</span>
  useCreateIndexes<span class="punctuation">,</span>
  useCreatePersister<span class="punctuation">,</span>
  useCreateStore<span class="punctuation">,</span>
  useDelCellCallback<span class="punctuation">,</span>
  useSetCellCallback<span class="punctuation">,</span>
  useSetRowCallback<span class="punctuation">,</span>
  useSetValuesCallback<span class="punctuation">,</span>
  useSliceRowIds<span class="punctuation">,</span>
  useValues<span class="punctuation">,</span>
<span class="punctuation">}</span> <span class="operator">=</span> TinyBaseUiReact<span class="punctuation">;</span>
<span class="keyword">const</span> <span class="punctuation">{</span>Inspector<span class="punctuation">}</span> <span class="operator">=</span> TinyBaseUiReactInspector<span class="punctuation">;</span>
<span class="keyword">const</span> <span class="punctuation">{</span>createRemotePersister<span class="punctuation">}</span> <span class="operator">=</span> TinyBasePersisterRemote<span class="punctuation">;</span>
<span class="keyword">const</span> <span class="punctuation">{</span>useCallback<span class="punctuation">}</span> <span class="operator">=</span> React<span class="punctuation">;</span>
</code></pre><p>We also set up some string constants for showing star emojis:</p><pre><code><span class="keyword">const</span> <span class="constant">STAR</span> <span class="operator">=</span> <span class="string">'\u2605'</span><span class="punctuation">;</span>
<span class="keyword">const</span> <span class="constant">UNSTAR</span> <span class="operator">=</span> <span class="string">'\u2606'</span><span class="punctuation">;</span>
</code></pre><h3 id="starting-the-app">Starting The App</h3><p>We have a top-level <code>App</code> component, in which we initialize our data, and render the parts of the app. Firstly, we create and memoize a set of three <a href="/api/store/interfaces/store/store/"><code>Store</code></a> objects with their schemas:</p><ul><li><code>countryStore</code> contains a list of the world&#x27;s countries, loaded once from a JSON file using a remote <a href="/api/persisters/interfaces/persister/persister/"><code>Persister</code></a> object.</li><li><code>starStore</code> contains a list of the countries that the user has starred. This is persisted to the browser&#x27;s local storage and starts with eight default starred countries.</li><li><code>viewStore</code> contains the <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a> of an <a href="/api/indexes/interfaces/indexes/indexes/"><code>Indexes</code></a> object, the <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a> of an index, and the <a href="/api/common/type-aliases/identity/id/"><code>Id</code></a> of a slice, persisted as keyed values to session storage. These three ids represent the &#x27;current slice&#x27; view the user is looking at and we default the app to start showing the countries starting with the letter &#x27;A&#x27;.</li></ul><pre><code><span class="keyword">const</span> <span class="function-variable">App</span> <span class="operator">=</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
  <span class="keyword">const</span> countryStore <span class="operator">=</span> <span class="function"><a href="/api/ui-react/functions/store-hooks/usecreatestore/">useCreateStore</a></span><span class="punctuation">(</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span>
    <span class="function"><a href="/api/store/functions/creation/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settablesschema/">setTablesSchema</a></span><span class="punctuation">(</span><span class="punctuation">{</span>
      <span class="literal-property">countries</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">emoji</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">type</span><span class="operator">:</span> <span class="string">'string'</span><span class="punctuation">}</span><span class="punctuation">,</span> <span class="literal-property">name</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">type</span><span class="operator">:</span> <span class="string">'string'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">,</span>
    <span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">,</span>
  <span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="function"><a href="/api/ui-react/functions/persister-hooks/usecreatepersister/">useCreatePersister</a></span><span class="punctuation">(</span>
    countryStore<span class="punctuation">,</span>
    <span class="punctuation">(</span><span class="parameter">store</span><span class="punctuation">)</span> <span class="operator">=></span>
      <span class="function"><a href="/api/persister-remote/functions/creation/createremotepersister/">createRemotePersister</a></span><span class="punctuation">(</span>
        store<span class="punctuation">,</span>
        <span class="string">'https://tinybase.org/assets/countries.json'</span><span class="punctuation">,</span>
      <span class="punctuation">)</span><span class="punctuation">,</span>
    <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span>
    <span class="keyword">async</span> <span class="punctuation">(</span><span class="parameter">persister</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="keyword">await</span> persister<span class="punctuation">.</span><span class="function"><a href="/api/persisters/interfaces/persister/persister/methods/load/load/">load</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">,</span>
  <span class="punctuation">)</span><span class="punctuation">;</span>

  <span class="keyword">const</span> starStore <span class="operator">=</span> <span class="function"><a href="/api/ui-react/functions/store-hooks/usecreatestore/">useCreateStore</a></span><span class="punctuation">(</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span>
    <span class="function"><a href="/api/store/functions/creation/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settablesschema/">setTablesSchema</a></span><span class="punctuation">(</span><span class="punctuation">{</span><span class="literal-property">countries</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">star</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">type</span><span class="operator">:</span> <span class="string">'boolean'</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">,</span>
  <span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="function"><a href="/api/ui-react/functions/persister-hooks/usecreatepersister/">useCreatePersister</a></span><span class="punctuation">(</span>
    starStore<span class="punctuation">,</span>
    <span class="punctuation">(</span><span class="parameter">store</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="function"><a href="/api/persister-browser/functions/creation/createlocalpersister/">createLocalPersister</a></span><span class="punctuation">(</span>store<span class="punctuation">,</span> <span class="string">'countries/starStore'</span><span class="punctuation">)</span><span class="punctuation">,</span>
    <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span>
    <span class="keyword">async</span> <span class="punctuation">(</span><span class="parameter">persister</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
      <span class="keyword">await</span> persister<span class="punctuation">.</span><span class="function"><a href="/api/persisters/interfaces/persister/persister/methods/load/startautoload/">startAutoLoad</a></span><span class="punctuation">(</span><span class="punctuation">[</span><span class="punctuation">{</span>
        <span class="literal-property">countries</span><span class="operator">:</span> <span class="punctuation">{</span>
          <span class="constant">GB</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">star</span><span class="operator">:</span> <span class="boolean">true</span><span class="punctuation">}</span><span class="punctuation">,</span>
          <span class="constant">NZ</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">star</span><span class="operator">:</span> <span class="boolean">true</span><span class="punctuation">}</span><span class="punctuation">,</span>
          <span class="constant">AU</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">star</span><span class="operator">:</span> <span class="boolean">true</span><span class="punctuation">}</span><span class="punctuation">,</span>
          <span class="constant">SE</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">star</span><span class="operator">:</span> <span class="boolean">true</span><span class="punctuation">}</span><span class="punctuation">,</span>
          <span class="constant">IE</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">star</span><span class="operator">:</span> <span class="boolean">true</span><span class="punctuation">}</span><span class="punctuation">,</span>
          <span class="constant">IN</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">star</span><span class="operator">:</span> <span class="boolean">true</span><span class="punctuation">}</span><span class="punctuation">,</span>
          <span class="constant">BZ</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">star</span><span class="operator">:</span> <span class="boolean">true</span><span class="punctuation">}</span><span class="punctuation">,</span>
          <span class="constant">US</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">star</span><span class="operator">:</span> <span class="boolean">true</span><span class="punctuation">}</span><span class="punctuation">,</span>
        <span class="punctuation">}</span><span class="punctuation">,</span>
      <span class="punctuation">}</span><span class="punctuation">]</span><span class="punctuation">)</span><span class="punctuation">;</span>
      <span class="keyword">await</span> persister<span class="punctuation">.</span><span class="function"><a href="/api/persisters/interfaces/persister/persister/methods/save/startautosave/">startAutoSave</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="punctuation">)</span><span class="punctuation">;</span>

  <span class="keyword">const</span> viewStore <span class="operator">=</span> <span class="function"><a href="/api/ui-react/functions/store-hooks/usecreatestore/">useCreateStore</a></span><span class="punctuation">(</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span>
    <span class="function"><a href="/api/store/functions/creation/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/setvaluesschema/">setValuesSchema</a></span><span class="punctuation">(</span><span class="punctuation">{</span>
      <span class="literal-property">indexes</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">type</span><span class="operator">:</span> <span class="string">'string'</span><span class="punctuation">,</span> <span class="keyword">default</span><span class="operator">:</span> <span class="string">'countryIndexes'</span><span class="punctuation">}</span><span class="punctuation">,</span>
      <span class="literal-property">indexId</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">type</span><span class="operator">:</span> <span class="string">'string'</span><span class="punctuation">,</span> <span class="keyword">default</span><span class="operator">:</span> <span class="string">'firstLetter'</span><span class="punctuation">}</span><span class="punctuation">,</span>
      <span class="literal-property">sliceId</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">type</span><span class="operator">:</span> <span class="string">'string'</span><span class="punctuation">,</span> <span class="keyword">default</span><span class="operator">:</span> <span class="string">'A'</span><span class="punctuation">}</span><span class="punctuation">,</span>
    <span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">,</span>
  <span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="function"><a href="/api/ui-react/functions/persister-hooks/usecreatepersister/">useCreatePersister</a></span><span class="punctuation">(</span>
    viewStore<span class="punctuation">,</span>
    <span class="punctuation">(</span><span class="parameter">store</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="function"><a href="/api/persister-browser/functions/creation/createsessionpersister/">createSessionPersister</a></span><span class="punctuation">(</span>store<span class="punctuation">,</span> <span class="string">'countries/viewStore'</span><span class="punctuation">)</span><span class="punctuation">,</span>
    <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span>
    <span class="keyword">async</span> <span class="punctuation">(</span><span class="parameter">persister</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
      <span class="keyword">await</span> persister<span class="punctuation">.</span><span class="function"><a href="/api/persisters/interfaces/persister/persister/methods/load/startautoload/">startAutoLoad</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
      <span class="keyword">await</span> persister<span class="punctuation">.</span><span class="function"><a href="/api/persisters/interfaces/persister/persister/methods/save/startautosave/">startAutoSave</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="comment">// ...</span>
</code></pre><p>We also create and memoize two <a href="/api/indexes/interfaces/indexes/indexes/"><code>Indexes</code></a> objects with the <a href="/api/ui-react/functions/indexes-hooks/usecreateindexes/"><code>useCreateIndexes</code></a> hook:</p><ul><li><code>countryIndexes</code> contains a single <a href="/api/indexes/type-aliases/concept/index/"><code>Index</code></a> of countries in <code>countryStore</code> by their first letter, sorted alphabetically.</li><li><code>starIndexes</code> contains a single <a href="/api/indexes/type-aliases/concept/index/"><code>Index</code></a> of the countries in <code>starStore</code>.</li></ul><p>The code looks like this:</p><pre><code><span class="comment">// ...</span>
<span class="keyword">const</span> countryIndexes <span class="operator">=</span> <span class="function"><a href="/api/ui-react/functions/indexes-hooks/usecreateindexes/">useCreateIndexes</a></span><span class="punctuation">(</span>countryStore<span class="punctuation">,</span> <span class="punctuation">(</span><span class="parameter">store</span><span class="punctuation">)</span> <span class="operator">=></span>
  <span class="function"><a href="/api/indexes/functions/creation/createindexes/">createIndexes</a></span><span class="punctuation">(</span>store<span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/indexes/interfaces/indexes/indexes/methods/configuration/setindexdefinition/">setIndexDefinition</a></span><span class="punctuation">(</span>
    <span class="string">'firstLetter'</span><span class="punctuation">,</span>
    <span class="string">'countries'</span><span class="punctuation">,</span>
    <span class="punctuation">(</span><span class="parameter">getCell</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="function"><a href="/api/store/interfaces/store/store/methods/getter/getcell/">getCell</a></span><span class="punctuation">(</span><span class="string">'name'</span><span class="punctuation">)</span><span class="punctuation">[</span><span class="number">0</span><span class="punctuation">]</span><span class="punctuation">,</span>
    <span class="string">'name'</span><span class="punctuation">,</span>
    defaultSorter<span class="punctuation">,</span>
  <span class="punctuation">)</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> starIndexes <span class="operator">=</span> <span class="function"><a href="/api/ui-react/functions/indexes-hooks/usecreateindexes/">useCreateIndexes</a></span><span class="punctuation">(</span>starStore<span class="punctuation">,</span> <span class="punctuation">(</span><span class="parameter">store</span><span class="punctuation">)</span> <span class="operator">=></span>
  <span class="function"><a href="/api/indexes/functions/creation/createindexes/">createIndexes</a></span><span class="punctuation">(</span>store<span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/indexes/interfaces/indexes/indexes/methods/configuration/setindexdefinition/">setIndexDefinition</a></span><span class="punctuation">(</span><span class="string">'star'</span><span class="punctuation">,</span> <span class="string">'countries'</span><span class="punctuation">,</span> <span class="string">'star'</span><span class="punctuation">)</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// ...</span>
</code></pre><p>To start the app, we render the left-hand side <code>Filter</code> component and the main <code>Countries</code> component, wrapped in a <a href="/api/ui-react/functions/context-components/provider/"><code>Provider</code></a> component that references the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> objects, and the <a href="/api/indexes/interfaces/indexes/indexes/"><code>Indexes</code></a> objects:</p><pre><code>  <span class="comment">// ...</span>
  <span class="keyword">return</span> <span class="punctuation">(</span>
    <span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name"><a href="/api/ui-react/functions/context-components/provider/">Provider</a></span></span>
      <span class="attr-name">storesById</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span><span class="punctuation">{</span>countryStore<span class="punctuation">,</span> starStore<span class="punctuation">,</span> viewStore<span class="punctuation">}</span><span class="punctuation">}</span></span>
      <span class="attr-name">indexesById</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span><span class="punctuation">{</span>countryIndexes<span class="punctuation">,</span> starIndexes<span class="punctuation">}</span><span class="punctuation">}</span></span>
    <span class="punctuation">></span></span><span class="plain-text">
      </span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name">Filters</span></span> <span class="punctuation">/></span></span><span class="plain-text">
      </span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name">Countries</span></span> <span class="punctuation">/></span></span><span class="plain-text">
      </span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name"><a href="/api/ui-react-inspector/functions/development-components/inspector/">Inspector</a></span></span> <span class="punctuation">/></span></span><span class="plain-text">
    </span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span><span class="class-name"><a href="/api/ui-react/functions/context-components/provider/">Provider</a></span></span><span class="punctuation">></span></span>
  <span class="punctuation">)</span><span class="punctuation">;</span>
<span class="punctuation">}</span><span class="punctuation">;</span>
</code></pre><p>We also added the <a href="/api/ui-react-inspector/functions/development-components/inspector/"><code>Inspector</code></a> component at the end there so you can inspect what is going on with the data during this demo. Simply click the <a href="/">TinyBase</a> logo in the corner.</p><p>We also use a simple grid layout to arrange the app:</p><pre><code><span class="variable">@accentColor<span class="punctuation">:</span></span> #d81b60<span class="punctuation">;</span>
<span class="variable">@spacing<span class="punctuation">:</span></span> 0.5rem<span class="punctuation">;</span>
<span class="variable">@border<span class="punctuation">:</span></span> 1px solid #ccc<span class="punctuation">;</span>
<span class="atrule">@font-face</span> <span class="punctuation">{</span>
  <span class="property">font-family</span><span class="punctuation">:</span> Inter<span class="punctuation">;</span>
  <span class="property">src</span><span class="punctuation">:</span> <span class="url"><span class="function">url</span><span class="punctuation">(</span>https://tinybase.org/fonts/inter.woff2<span class="punctuation">)</span></span> <span class="function">format</span><span class="punctuation">(</span><span class="string">'woff2'</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="punctuation">}</span>
<span class="selector">body</span> <span class="punctuation">{</span>
  <span class="property">box-sizing</span><span class="punctuation">:</span> border<span class="operator">-</span>box<span class="punctuation">;</span>
  <span class="property">display</span><span class="punctuation">:</span> flex<span class="punctuation">;</span>
  <span class="property">font-family</span><span class="punctuation">:</span> Inter<span class="punctuation">,</span> sans<span class="operator">-</span>serif<span class="punctuation">;</span>
  <span class="property">letter-spacing</span><span class="punctuation">:</span> <span class="operator">-</span>0.04rem<span class="punctuation">;</span>
  <span class="property">margin</span><span class="punctuation">:</span> 0<span class="punctuation">;</span>
  <span class="property">height</span><span class="punctuation">:</span> 100vh<span class="punctuation">;</span>
  <span class="property">text-align</span><span class="punctuation">:</span> center<span class="punctuation">;</span>
<span class="punctuation">}</span>
</code></pre><p>Finally, when the window loads, we render the <code>App</code> component into the demo <code>div</code> to start the app:</p><pre><code>window<span class="punctuation">.</span><span class="function">addEventListener</span><span class="punctuation">(</span><span class="string">'load'</span><span class="punctuation">,</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span>
  ReactDOM<span class="punctuation">.</span><span class="function">createRoot</span><span class="punctuation">(</span>document<span class="punctuation">.</span>body<span class="punctuation">)</span><span class="punctuation">.</span><span class="function">render</span><span class="punctuation">(</span><span class="operator">&lt;</span>App <span class="operator">/</span><span class="operator">></span><span class="punctuation">)</span><span class="punctuation">,</span>
<span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><h3 id="the-current-slice">The &#x27;Current <a href="/api/indexes/type-aliases/concept/slice/"><code>Slice</code></a>&#x27;</h3><p>At the heart of this app is the concept of the &#x27;current slice&#x27;: at any one time, the app is displaying the countries present in a specific sliceId of a specific indexId of a specific <a href="/api/indexes/interfaces/indexes/indexes/"><code>Indexes</code></a> object. We store these three ids in the <code>viewStore</code> as keyed values so they persist between reloads.</p><p>Since both the left-hand and right-hand panels of the app need to read these parameters, we provide a custom <code>useCurrentSlice</code> hook to get those three <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> values out of the <code>viewStore</code>:</p><pre><code><span class="keyword">const</span> <span class="function-variable">useCurrentSlice</span> <span class="operator">=</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="function"><a href="/api/ui-react/functions/store-hooks/usevalues/">useValues</a></span><span class="punctuation">(</span><span class="string">'viewStore'</span><span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>When a user clicks on the letters on the left-hand side of the app, we need to write these values too. So we also provide a custom <code>useSetCurrentSlice</code> hook that provides a callback to set the three <a href="/api/store/type-aliases/store/cell/"><code>Cell</code></a> values:</p><pre><code><span class="keyword">const</span> <span class="function-variable">useSetCurrentSlice</span> <span class="operator">=</span> <span class="punctuation">(</span><span class="parameter">indexes<span class="punctuation">,</span> indexId<span class="punctuation">,</span> sliceId</span><span class="punctuation">)</span> <span class="operator">=></span>
  <span class="function"><a href="/api/ui-react/functions/store-hooks/usesetvaluescallback/">useSetValuesCallback</a></span><span class="punctuation">(</span>
    <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">(</span><span class="punctuation">{</span>indexes<span class="punctuation">,</span> indexId<span class="punctuation">,</span> sliceId<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">,</span>
    <span class="punctuation">[</span>indexes<span class="punctuation">,</span> indexId<span class="punctuation">,</span> sliceId<span class="punctuation">]</span><span class="punctuation">,</span>
    <span class="string">'viewStore'</span><span class="punctuation">,</span>
  <span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><h3 id="the-filters-component">The <code>Filters</code> Component</h3><p>This component provides the list of countries&#x27; first letters down the left-hand side of the app. We actually build this as an <a href="/api/ui-react/functions/indexes-components/indexview/"><code>IndexView</code></a> component that lists all the <code>sliceIds</code> in the <code>countryIndexes</code> index, but also add an explicit item at the top of the list to allow the user to select starred countries from the <code>starIndexes</code> index.</p><p>The custom <code>useCurrentSlice</code> hook is used to get the current <a href="/api/indexes/interfaces/indexes/indexes/"><code>Indexes</code></a> object name, current indexId, and current sliceId. We use these to determine whether a Filter is selected, and that flag is passed down as the <code>selected</code> prop to each of the child Filter components so they know whether to display themselves as selected or not. We could have each letter of the side bar listening for changes to the current slice, but in this case it is more efficient to do it once and pass down the <code>currentSlice</code> as a prop, using the <code>getSliceComponentProps</code> callback:</p><pre><code><span class="keyword">const</span> <span class="function-variable">Filters</span> <span class="operator">=</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
  <span class="keyword">const</span> <span class="punctuation">{</span>
    <span class="literal-property">indexes</span><span class="operator">:</span> currentIndexes<span class="punctuation">,</span>
    <span class="literal-property">indexId</span><span class="operator">:</span> currentIndexId<span class="punctuation">,</span>
    <span class="literal-property">sliceId</span><span class="operator">:</span> currentSliceId<span class="punctuation">,</span>
  <span class="punctuation">}</span> <span class="operator">=</span> <span class="function">useCurrentSlice</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>

  <span class="keyword">return</span> <span class="punctuation">(</span>
    <span class="tag"><span class="tag"><span class="punctuation">&lt;</span>div</span> <span class="attr-name">id</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>filters<span class="punctuation">"</span></span><span class="punctuation">></span></span><span class="plain-text">
      </span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name">Filter</span></span>
        <span class="attr-name">indexes</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>starIndexes<span class="punctuation">"</span></span>
        <span class="attr-name">indexId</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>star<span class="punctuation">"</span></span>
        <span class="attr-name">sliceId</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>true<span class="punctuation">"</span></span>
        <span class="attr-name">label</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span><span class="constant">STAR</span><span class="punctuation">}</span></span>
        <span class="attr-name">selected</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span>
          currentIndexes <span class="operator">==</span> <span class="string">'starIndexes'</span> <span class="operator">&amp;&amp;</span>
          currentIndexId <span class="operator">==</span> <span class="string">'star'</span> <span class="operator">&amp;&amp;</span>
          currentSliceId <span class="operator">==</span> <span class="string">'true'</span>
        <span class="punctuation">}</span></span>
      <span class="punctuation">/></span></span><span class="plain-text">
      </span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name"><a href="/api/ui-react/functions/indexes-components/indexview/">IndexView</a></span></span>
        <span class="attr-name">indexId</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>firstLetter<span class="punctuation">"</span></span>
        <span class="attr-name">indexes</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>countryIndexes<span class="punctuation">"</span></span>
        <span class="attr-name">sliceComponent</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span>Filter<span class="punctuation">}</span></span>
        <span class="attr-name">getSliceComponentProps</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span><span class="function">useCallback</span><span class="punctuation">(</span>
          <span class="punctuation">(</span><span class="parameter">sliceId</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">(</span><span class="punctuation">{</span>
            <span class="literal-property">selected</span><span class="operator">:</span>
              currentIndexes <span class="operator">==</span> <span class="string">'countryIndexes'</span> <span class="operator">&amp;&amp;</span>
              currentIndexId <span class="operator">==</span> <span class="string">'firstLetter'</span> <span class="operator">&amp;&amp;</span>
              currentSliceId <span class="operator">==</span> sliceId<span class="punctuation">,</span>
          <span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">,</span>
          <span class="punctuation">[</span>currentIndexes<span class="punctuation">,</span> currentIndexId<span class="punctuation">,</span> currentSliceId<span class="punctuation">]</span><span class="punctuation">,</span>
        <span class="punctuation">)</span><span class="punctuation">}</span></span>
      <span class="punctuation">/></span></span><span class="plain-text">
    </span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span>div</span><span class="punctuation">></span></span>
  <span class="punctuation">)</span><span class="punctuation">;</span>
<span class="punctuation">}</span><span class="punctuation">;</span>
</code></pre><p>Each letter in the left hand <code>Filters</code> component is a <code>Filter</code> component, which knows which <a href="/api/indexes/interfaces/indexes/indexes/"><code>Indexes</code></a> object the app needs to show, along with the index and slice <a href="/api/common/type-aliases/identity/ids/"><code>Ids</code></a>. This is set with the callback returned by the <code>useSetCurrentSlice</code> custom hook.</p><p>For example, clicking the letter &#x27;N&#x27; will set the current named <a href="/api/indexes/interfaces/indexes/indexes/"><code>Indexes</code></a> object to be <code>countryIndexes</code>, the current indexId to be <code>firstLetter</code>, and the current sliceId to be &#x27;N&#x27;. Clicking the star at the to of the list will set the current named <a href="/api/indexes/interfaces/indexes/indexes/"><code>Indexes</code></a> object to be <code>starIndexes</code>, the current indexId to be <code>star</code>, and the current sliceId to be &#x27;true&#x27;.</p><p>The <code>currentSlice</code> prop passed down from the <code>Filters</code> component is used to decide whether to style the letter as the &#x27;current&#x27; selection.</p><p>We also display the number of countries in the slice of the relevant index. Instead of setting up a <a href="/api/metrics/interfaces/metrics/metrics/"><code>Metrics</code></a> object to track this, it&#x27;s simpler to just use the <a href="/api/ui-react/functions/indexes-hooks/useslicerowids/"><code>useSliceRowIds</code></a> hook and show the <code>length</code> of the resulting array. Only the count of starred countries changes during the life of the app anyway:</p><pre><code><span class="keyword">const</span> Filter <span class="operator">=</span> <span class="punctuation">(</span><span class="punctuation">{</span>
  indexes <span class="operator">=</span> <span class="string">'countryIndexes'</span><span class="punctuation">,</span>
  indexId<span class="punctuation">,</span>
  sliceId<span class="punctuation">,</span>
  selected<span class="punctuation">,</span>
  label <span class="operator">=</span> sliceId<span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
  <span class="keyword">const</span> handleClick <span class="operator">=</span> <span class="function">useSetCurrentSlice</span><span class="punctuation">(</span>indexes<span class="punctuation">,</span> indexId<span class="punctuation">,</span> sliceId<span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="keyword">const</span> className <span class="operator">=</span> <span class="string">'filter'</span> <span class="operator">+</span> <span class="punctuation">(</span>selected <span class="operator">?</span> <span class="string">' current'</span> <span class="operator">:</span> <span class="string">''</span><span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="keyword">const</span> rowIdCount <span class="operator">=</span> <span class="function"><a href="/api/ui-react/functions/indexes-hooks/useslicerowids/">useSliceRowIds</a></span><span class="punctuation">(</span>indexId<span class="punctuation">,</span> sliceId<span class="punctuation">,</span> indexes<span class="punctuation">)</span><span class="punctuation">.</span>length<span class="punctuation">;</span>

  <span class="keyword">return</span> <span class="punctuation">(</span>
    <span class="tag"><span class="tag"><span class="punctuation">&lt;</span>div</span> <span class="attr-name">className</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span>className<span class="punctuation">}</span></span> <span class="attr-name">onClick</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span>handleClick<span class="punctuation">}</span></span><span class="punctuation">></span></span><span class="plain-text">
      </span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span>span</span> <span class="attr-name">className</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>label<span class="punctuation">"</span></span><span class="punctuation">></span></span><span class="punctuation">{</span>label<span class="punctuation">}</span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span>span</span><span class="punctuation">></span></span><span class="plain-text">
      </span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span>span</span> <span class="attr-name">className</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>count<span class="punctuation">"</span></span><span class="punctuation">></span></span><span class="punctuation">{</span>rowIdCount<span class="punctuation">}</span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span>span</span><span class="punctuation">></span></span><span class="plain-text">
    </span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span>div</span><span class="punctuation">></span></span>
  <span class="punctuation">)</span><span class="punctuation">;</span>
<span class="punctuation">}</span><span class="punctuation">;</span>
</code></pre><p>These filters also have some straightforward styling:</p><pre><code><span class="selector">#filters</span> <span class="punctuation">{</span>
  <span class="property">overflow-y</span><span class="punctuation">:</span> scroll<span class="punctuation">;</span>
  <span class="property">border-right</span><span class="punctuation">:</span> <span class="variable">@border</span><span class="punctuation">;</span>
  <span class="property">padding</span><span class="punctuation">:</span> <span class="variable">@spacing</span><span class="punctuation">;</span>
  <span class="selector">.filter</span> <span class="punctuation">{</span>
    <span class="property">cursor</span><span class="punctuation">:</span> pointer<span class="punctuation">;</span>
    <span class="selector">&amp;.current</span> <span class="punctuation">{</span>
      <span class="property">color</span><span class="punctuation">:</span> <span class="variable">@accentColor</span><span class="punctuation">;</span>
    <span class="punctuation">}</span>
    <span class="selector">.label,
    .count</span> <span class="punctuation">{</span>
      <span class="property">display</span><span class="punctuation">:</span> inline<span class="operator">-</span>block<span class="punctuation">;</span>
      <span class="property">width</span><span class="punctuation">:</span> 2em<span class="punctuation">;</span>
    <span class="punctuation">}</span>
    <span class="selector">.count</span> <span class="punctuation">{</span>
      <span class="property">color</span><span class="punctuation">:</span> #777<span class="punctuation">;</span>
      <span class="property">font-size</span><span class="punctuation">:</span> 0.8rem<span class="punctuation">;</span>
      <span class="property">text-align</span><span class="punctuation">:</span> left<span class="punctuation">;</span>
    <span class="punctuation">}</span>
  <span class="punctuation">}</span>
<span class="punctuation">}</span>
</code></pre><h3 id="the-countries-component">The <code>Countries</code> Component</h3><p>The main right-hand side of the app is a panel that shows the view selected with the left-hand <code>Filters</code> component. As we have seen, that component is setting the &#x27;current slice&#x27; to be shown, comprising the name of the <a href="/api/indexes/interfaces/indexes/indexes/"><code>Indexes</code></a> object in focus, an indexId, and a sliceId. We use those three parameters directly as the props for the <a href="/api/ui-react/functions/indexes-components/sliceview/"><code>SliceView</code></a> component that forms the main part of the app:</p><pre><code><span class="keyword">const</span> <span class="function-variable">Countries</span> <span class="operator">=</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">(</span>
  <span class="tag"><span class="tag"><span class="punctuation">&lt;</span>div</span> <span class="attr-name">id</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>countries<span class="punctuation">"</span></span><span class="punctuation">></span></span><span class="plain-text">
    </span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name"><a href="/api/ui-react/functions/indexes-components/sliceview/">SliceView</a></span></span> <span class="spread"><span class="punctuation">{</span><span class="operator">...</span><span class="function">useCurrentSlice</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">}</span></span> <span class="attr-name">rowComponent</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span>Country<span class="punctuation">}</span></span> <span class="punctuation">/></span></span><span class="plain-text">
  </span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span>div</span><span class="punctuation">></span></span>
<span class="punctuation">)</span><span class="punctuation">;</span>
</code></pre><p>Each <a href="/api/store/type-aliases/store/row/"><code>Row</code></a> that is present in the specified slice is a country, and the <code>Country</code> component renders a small panel for each.</p><p>As well as rendering the name and flag of the country (from the <code>countryStore</code> store), we also add a small &#x27;star&#x27; at the top of each country panel. Clicking this will either call the <code>setStar</code> callback to favorite the country by adding it to the <code>starStore</code>, or it will call the <code>setUnstar</code> callback to unfavorite it and remove it again:</p><pre><code><span class="keyword">const</span> <span class="function-variable">Country</span> <span class="operator">=</span> <span class="punctuation">(</span><span class="parameter">props</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="punctuation">{</span>
  <span class="keyword">const</span> <span class="punctuation">{</span>tableId<span class="punctuation">,</span> rowId<span class="punctuation">}</span> <span class="operator">=</span> props<span class="punctuation">;</span>
  <span class="keyword">const</span> star <span class="operator">=</span> <span class="function"><a href="/api/ui-react/functions/store-hooks/usecell/">useCell</a></span><span class="punctuation">(</span>tableId<span class="punctuation">,</span> rowId<span class="punctuation">,</span> <span class="string">'star'</span><span class="punctuation">,</span> <span class="string">'starStore'</span><span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="keyword">const</span> setStar <span class="operator">=</span> <span class="function"><a href="/api/ui-react/functions/store-hooks/usesetcellcallback/">useSetCellCallback</a></span><span class="punctuation">(</span>
    tableId<span class="punctuation">,</span>
    rowId<span class="punctuation">,</span>
    <span class="string">'star'</span><span class="punctuation">,</span>
    <span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">=></span> <span class="boolean">true</span><span class="punctuation">,</span>
    <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span>
    <span class="string">'starStore'</span><span class="punctuation">,</span>
  <span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="keyword">const</span> setUnstar <span class="operator">=</span> <span class="function"><a href="/api/ui-react/functions/store-hooks/usedelcellcallback/">useDelCellCallback</a></span><span class="punctuation">(</span>
    tableId<span class="punctuation">,</span>
    rowId<span class="punctuation">,</span>
    <span class="string">'star'</span><span class="punctuation">,</span>
    <span class="boolean">true</span><span class="punctuation">,</span>
    <span class="string">'starStore'</span><span class="punctuation">,</span>
  <span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="keyword">const</span> handleClick <span class="operator">=</span> star <span class="operator">?</span> setUnstar <span class="operator">:</span> setStar<span class="punctuation">;</span>

  <span class="keyword">return</span> <span class="punctuation">(</span>
    <span class="tag"><span class="tag"><span class="punctuation">&lt;</span>div</span> <span class="attr-name">className</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>country<span class="punctuation">"</span></span><span class="punctuation">></span></span><span class="plain-text">
      </span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span>div</span> <span class="attr-name">className</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>star<span class="punctuation">"</span></span> <span class="attr-name">onClick</span><span class="script"><span class="script-punctuation">=</span><span class="punctuation">{</span>handleClick<span class="punctuation">}</span></span><span class="punctuation">></span></span><span class="plain-text">
        </span><span class="punctuation">{</span>star <span class="operator">?</span> <span class="constant">STAR</span> <span class="operator">:</span> <span class="constant">UNSTAR</span><span class="punctuation">}</span><span class="plain-text">
      </span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span>div</span><span class="punctuation">></span></span><span class="plain-text">
      </span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span>div</span> <span class="attr-name">className</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>flag<span class="punctuation">"</span></span><span class="punctuation">></span></span><span class="plain-text">
        </span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name"><a href="/api/ui-react/functions/store-components/cellview/">CellView</a></span></span> <span class="spread"><span class="punctuation">{</span><span class="operator">...</span>props<span class="punctuation">}</span></span> <span class="attr-name">cellId</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>emoji<span class="punctuation">"</span></span> <span class="attr-name">store</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>countryStore<span class="punctuation">"</span></span> <span class="punctuation">/></span></span><span class="plain-text">
      </span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span>div</span><span class="punctuation">></span></span><span class="plain-text">
      </span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span>div</span> <span class="attr-name">className</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>name<span class="punctuation">"</span></span><span class="punctuation">></span></span><span class="plain-text">
        </span><span class="tag"><span class="tag"><span class="punctuation">&lt;</span><span class="class-name"><a href="/api/ui-react/functions/store-components/cellview/">CellView</a></span></span> <span class="spread"><span class="punctuation">{</span><span class="operator">...</span>props<span class="punctuation">}</span></span> <span class="attr-name">cellId</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>name<span class="punctuation">"</span></span> <span class="attr-name">store</span><span class="attr-value"><span class="punctuation">=</span><span class="punctuation">"</span>countryStore<span class="punctuation">"</span></span> <span class="punctuation">/></span></span><span class="plain-text">
      </span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span>div</span><span class="punctuation">></span></span><span class="plain-text">
    </span><span class="tag"><span class="tag"><span class="punctuation">&lt;/</span>div</span><span class="punctuation">></span></span>
  <span class="punctuation">)</span><span class="punctuation">;</span>
<span class="punctuation">}</span><span class="punctuation">;</span>
</code></pre><p>Removing a country from the <code>starStore</code> store rather than setting the <code>star</code> flag to false prevents the <code>starStore</code> store from growing to include all the countries that were <em>ever</em> starred, even if no longer so. Since we are storing this in the browser, it&#x27;s more efficient just to remove it.</p><p>The styling for the main panel of the app is a little more complex, but we want the country cards and flags to look good!</p><pre><code><span class="selector">#countries</span> <span class="punctuation">{</span>
  <span class="property">flex</span><span class="punctuation">:</span> 1<span class="punctuation">;</span>
  <span class="property">display</span><span class="punctuation">:</span> grid<span class="punctuation">;</span>
  <span class="property">grid-template-columns</span><span class="punctuation">:</span> <span class="function">repeat</span><span class="punctuation">(</span>4<span class="punctuation">,</span> <span class="function">minmax</span><span class="punctuation">(</span>0<span class="punctuation">,</span> 1fr<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="property">grid-auto-rows</span><span class="punctuation">:</span> max<span class="operator">-</span>content<span class="punctuation">;</span>
  <span class="property">gap</span><span class="punctuation">:</span> <span class="variable">@spacing</span><span class="punctuation">;</span>
  <span class="property">padding</span><span class="punctuation">:</span> <span class="variable">@spacing</span> <span class="operator">*</span> 2<span class="punctuation">;</span>
  <span class="property">overflow-y</span><span class="punctuation">:</span> scroll<span class="punctuation">;</span>
  <span class="selector">.country</span> <span class="punctuation">{</span>
    <span class="property">background</span><span class="punctuation">:</span> #fff<span class="punctuation">;</span>
    <span class="property">border</span><span class="punctuation">:</span> <span class="variable">@border</span><span class="punctuation">;</span>
    <span class="property">padding</span><span class="punctuation">:</span> <span class="variable">@spacing</span><span class="punctuation">;</span>
    <span class="property">position</span><span class="punctuation">:</span> relative<span class="punctuation">;</span>
    <span class="property">height</span><span class="punctuation">:</span> fit<span class="operator">-</span>content<span class="punctuation">;</span>
    <span class="selector">.star</span> <span class="punctuation">{</span>
      <span class="property">cursor</span><span class="punctuation">:</span> pointer<span class="punctuation">;</span>
      <span class="property">display</span><span class="punctuation">:</span> inline<span class="punctuation">;</span>
      <span class="property">left</span><span class="punctuation">:</span> 8px<span class="punctuation">;</span>
      <span class="property">position</span><span class="punctuation">:</span> absolute<span class="punctuation">;</span>
      <span class="property">top</span><span class="punctuation">:</span> 5px<span class="punctuation">;</span>
      <span class="property">user-select</span><span class="punctuation">:</span> none<span class="punctuation">;</span>
    <span class="punctuation">}</span>
    <span class="selector">.flag</span> <span class="punctuation">{</span>
      <span class="property">font-size</span><span class="punctuation">:</span> 5rem<span class="punctuation">;</span>
      <span class="property">line-height</span><span class="punctuation">:</span> 1em<span class="punctuation">;</span>
    <span class="punctuation">}</span>
    <span class="selector">.name</span> <span class="punctuation">{</span>
      <span class="property">overflow</span><span class="punctuation">:</span> hidden<span class="punctuation">;</span>
      <span class="property">text-overflow</span><span class="punctuation">:</span> ellipsis<span class="punctuation">;</span>
      <span class="property">vertical-align</span><span class="punctuation">:</span> top<span class="punctuation">;</span>
      <span class="property">white-space</span><span class="punctuation">:</span> nowrap<span class="punctuation">;</span>
    <span class="punctuation">}</span>
  <span class="punctuation">}</span>
<span class="punctuation">}</span>
</code></pre><p>And that&#x27;s it! A simple app, all in all, but one that demonstrates using <a href="/api/indexes/interfaces/indexes/indexes/"><code>Indexes</code></a> objects and passing down props to build a useful stateful user interface.</p></section></article><aside></aside></main><footer><nav><a id="tw" href="https://twitter.com/tinybasejs" target="_blank">Twitter</a><a id="fb" href="https://facebook.com/tinybasejs" target="_blank">Facebook</a></nav><nav><a href="/">TinyBase 5.0.0-beta.24</a> © 2021- All Rights Reserved</nav></footer></body><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-D1MGR8VRWJ"></script><script>window.dataLayer=window.dataLayer||[];function g(){dataLayer.push(arguments);}g('js',new Date());g('config','G-D1MGR8VRWJ');</script></html>